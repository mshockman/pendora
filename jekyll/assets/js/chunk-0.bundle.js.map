{"version":3,"sources":["webpack://pendora/./jekyll/js/pages/menubar_example.js","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/utility.js","webpack://pendora/./src/menu2/DropDown.js","webpack://pendora/./src/menu2/Menu.js","webpack://pendora/./src/menu2/MenuBar.js","webpack://pendora/./src/menu2/MenuItem.js","webpack://pendora/./src/menu2/MenuNode.js"],"names":["MenuBarExamplePage","main","document","getElementById","menu","MenuBar","createItems","text","children","href","appendTo","Publisher","_topics","topic","callback","push","fn","on","off","args","apply","arguments","length","callbacks","i","cb","splice","slice","ExtendableError","message","name","constructor","Error","captureStackTrace","stack","IndexError","KeyError","ValueError","NotImplemented","ValidationError","node","AssertionError","REG_WHITESPACE","clamp","value","minValue","maxValue","Math","max","min","firstValue","item","undefined","all","iterable","any","proto","descriptor","placement","randomChoice","array","floor","random","arraysEqual","array1","array2","l","parseHTML","html","template","createElement","innerHTML","trim","content","fragment","createDocumentFragment","firstChild","appendChild","isEmptyObject","object","key","emptyElement","element","removeChild","addClasses","classes","split","classList","add","removeClasses","remove","assignAttributes","attributes","hasOwnProperty","setAttribute","setElementOffset","coords","nodeType","getElementOffset","Array","isArray","left","top","offset","getBoundingClientRect","style","getComputedStyle","parseInt","box","window","pageXOffset","pageYOffset","getScroll","isWindow","scrollLeft","scrollTop","variable","setInterval","setScroll","scroll","scrollTo","selectElement","selector","context","querySelector","jquery","assert","condition","parseBooleanOrInt","radix","defaultValue","TypeError","type","Number","isNaN","parseBooleanOrFloat","parseFloat","parseBoolean","parseIntValue","parseFloatValue","parseAny","parsers","parser","e","validateChoice","choices","indexOf","choice","findChild","child","filterChildren","r","getOwnProperty","obj","propName","getPropertyByPath","path","parts","part","DropDown","target","closeOnBlur","timeout","autoActivate","toggle","closeOnSelect","menuNodeType","render","init","button","isActive","clearTimer","parent","activate","setActiveItem","event","MenuNode","Menu","multiple","openOnHover","deactivateOnItemHover","events","MenuItemClass","MenuItem","isVisible","arrow","body","className","_captureDocumentClick","onDocumentClick","contains","deactivate","addEventListener","publish","dispatchEvent","CustomEvent","detail","bubbles","clearItems","removeEventListener","data","submenu","attachSubMenu","append","action","index","_children","parentElement","getMenuBody","removeItem","isMenuItem","_parent","activeItems","activeItem","querySelectorAll","_isMouseOver","getTargetItem","getEventDelegator","onMouseOver","relatedTarget","startTimer","targetItem","onMouseOut","getTargetNode","toggleOff","toggleOn","onClick","hasSubMenu","nodeName","addClass","addAction","show","hide","o","detachSubMenu","console","log","isDisabled","preventDefault","select","MENU_MAP","WeakMap","inheritable","get","_props","root","set","_timers","_element","_isActive","_isVisible","_isDisabled","isController","boundEvents","hasElement","closest","getOffsetSibling","call","getDescendants","grandchild","time","interval","clear","cancel","timer","status","id","clearInterval","setTimeout","clearTimeout","instance","isMenu","dataset"],"mappings":"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","file":"chunk-0.bundle.js","sourcesContent":["import {MenuBar} from \"menu2\";\r\n\r\n\r\nexport default class MenuBarExamplePage {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    load() {\r\n        let main = document.getElementById('content');\r\n\r\n        let menu = new MenuBar();\r\n\r\n        menu.createItems(\r\n            [\r\n                {\r\n                    text: \"Root #1\",\r\n                    children: [\r\n                        { text: \"Child Item #1\", href: \"#\"},\r\n                        { text: \"Child Item #2\", href: \"#\"},\r\n                        { text: \"Child Item #3\", href: \"#\"},\r\n                        { text: \"Child Item #4\", href: \"#\"},\r\n                        { text: \"Child Item #5\", href: \"#\"},\r\n                    ]\r\n                },\r\n                {\r\n                    text: \"Root #2\",\r\n                    children: [\r\n                        { text: \"Child Item #1\", href: \"#\"},\r\n                        { text: \"Child Item #2\", href: \"#\"},\r\n                        { text: \"Child Item #3\", href: \"#\"},\r\n                        { text: \"Child Item #4\", href: \"#\"},\r\n                        { text: \"Child Item #5\", href: \"#\"},\r\n                    ]\r\n                },\r\n                {\r\n                    text: \"Root #3\",\r\n                    children: [\r\n                        { text: \"Child Item #1\", href: \"#\"},\r\n                        { text: \"Child Item #2\", href: \"#\"},\r\n                        { text: \"Child Item #3\", href: \"#\"},\r\n                        { text: \"Child Item #4\", href: \"#\"},\r\n                        { text: \"Child Item #5\", href: \"#\"},\r\n                    ]\r\n                },\r\n                {\r\n                    text: \"Root #4\",\r\n                    children: [\r\n                        { text: \"Child Item #1\", href: \"#\"},\r\n                        { text: \"Child Item #2\", href: \"#\"},\r\n                        { text: \"Child Item #3\", href: \"#\"},\r\n                        { text: \"Child Item #4\", href: \"#\"},\r\n                        { text: \"Child Item #5\", href: \"#\"},\r\n                    ]\r\n                },\r\n                {\r\n                    text: \"Root #5\",\r\n                    children: [\r\n                        { text: \"Child Item #1\", href: \"#\"},\r\n                        { text: \"Child Item #2\", href: \"#\"},\r\n                        { text: \"Child Item #3\", href: \"#\"},\r\n                        { text: \"Child Item #4\", href: \"#\"},\r\n                        { text: \"Child Item #5\", href: \"#\"},\r\n                    ]\r\n                },\r\n            ]\r\n        );\r\n\r\n        menu.appendTo(main);\r\n    }\r\n}","\r\n\r\nexport default class Publisher {\r\n    constructor() {\r\n        this._topics = {};\r\n    }\r\n\r\n    on(topic, callback) {\r\n        if(!this._topics[topic]) topic = [];\r\n        this._topics[topic].push(callback);\r\n        return this;\r\n    }\r\n\r\n    once(topic, fn) {\r\n        let on = (...args) => {\r\n            this.off(topic, fn);\r\n            return fn.apply(this, args);\r\n        };\r\n\r\n        on.fn = fn;\r\n        this.on(topic, fn);\r\n        return this;\r\n    }\r\n\r\n    off(topic, callback) {\r\n        if(arguments.length === 0) {\r\n            // CLear all topics.\r\n            this._topics = {};\r\n            return this;\r\n        } else if(arguments.length === 1) {\r\n            // Clear single topic.\r\n            this._topics[topic] = [];\r\n            return this;\r\n        }\r\n\r\n        if(!this._topics || !this._topics[topic] || !this._topics[topic].length) {\r\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\r\n            return this;\r\n        }\r\n\r\n        let callbacks = this._topics[topic];\r\n\r\n        for(let i = 0; i < callback.length; i++) {\r\n            let cb = callbacks[i];\r\n            if(cb === callback || cb.fn === callback) {\r\n                callbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(callbacks.length === 0) {\r\n            delete this._topics[topic];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    hasEvent(topic, callback) {\r\n        if(arguments.length === 1) {\r\n            return !!this._topics[topic];\r\n        } else {\r\n            let callbacks = this._topics[topic];\r\n\r\n            for(let i = 0; i < callbacks.length; i++) {\r\n                let cb = callbacks[i];\r\n                if(cb === callback || cb.fn === callback) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    publish(topic, ...args) {\r\n        if(this._topics[topic]) {\r\n            let callbacks = this._topics[topic].slice(0);\r\n\r\n            for(let cb of callbacks) {\r\n                cb.apply(this, args);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n}","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n","import {AssertionError} from './errors';\r\nconst REG_WHITESPACE = /\\s+/;\r\n\r\n\r\n/**\r\n * Clamps a value between a minimum and maximum values.\r\n * @param value\r\n * @param minValue\r\n * @param maxValue\r\n * @returns {*}\r\n */\r\nexport function clamp(value, minValue=null, maxValue=null) {\r\n    if(minValue !== null) {\r\n        value = Math.max(value, minValue);\r\n    }\r\n\r\n    if(maxValue !== null) {\r\n        value = Math.min(value, maxValue);\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns the first none null or undefined value.\r\n * @param args\r\n */\r\nexport function firstValue(args) {\r\n    for(let item of args) {\r\n        if(item !== null && item !== undefined) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if all of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function all(iterable) {\r\n    for(let item of iterable) {\r\n        if(!item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if any of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function any(iterable) {\r\n    for(let item of iterable) {\r\n        if(item) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\nexport function proto(descriptor) {\r\n    descriptor.placement = \"prototype\";\r\n    return descriptor;\r\n}\r\n\r\n\r\n/**\r\n * Returns a random value from an array.\r\n * @param array\r\n * @returns {*}\r\n */\r\nexport function randomChoice(array) {\r\n    return array[Math.floor(Math.random()*array.length)];\r\n}\r\n\r\n\r\n/**\r\n * Checks to see if 2 arrays are \"equal\".\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arraysEqual(array1, array2) {\r\n    if(array1 === array2) return true; // The same object.\r\n    if(array1 == null || array2 == null) return false;\r\n    if(array1.length !== array2.length) return false;\r\n\r\n    for(let i = 0, l = array1.length; i < l; i++) {\r\n        if(array1[i] !== array2[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Parses an html string into a document fragment.\r\n *\r\n * @param html\r\n * @return {DocumentFragment}\r\n */\r\nexport function parseHTML(html) {\r\n    let template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    if(template.content) {\r\n        return template.content;\r\n    } else {\r\n        // Doesn't support template tag.\r\n        let fragment = document.createDocumentFragment();\r\n        while(template.firstChild) fragment.appendChild(template.firstChild);\r\n        return fragment;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Tests to see if the object is empty.\r\n *\r\n * @param object\r\n * @return {boolean}\r\n */\r\nexport function isEmptyObject(object) {\r\n    // noinspection LoopStatementThatDoesntLoopJS\r\n    for(let key in object) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Empties a dom element.\r\n *\r\n * @param element\r\n */\r\nexport function emptyElement(element) {\r\n    while(element.firstChild) element.removeChild(element.firstChild);\r\n}\r\n\r\n\r\n/**\r\n * Adds classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function addClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.add(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Removes classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function removeClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.remove(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Assigns attributes in an object to an element.\r\n * @param element\r\n * @param attributes\r\n */\r\nexport function assignAttributes(element, attributes) {\r\n    for(let key in attributes) {\r\n        if(attributes.hasOwnProperty(key)) {\r\n            element.setAttribute(key, attributes[key]);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets an elements position relative to the document.\r\n *\r\n * @param element\r\n * @param coords\r\n */\r\nexport function setElementOffset(element, coords) {\r\n    if(coords.nodeType) {\r\n        coords = getElementOffset(element);\r\n    } else if(Array.isArray(coords)) {\r\n        coords = {\r\n            left: coords.left,\r\n            top: coords.top\r\n        };\r\n    }\r\n\r\n    let offset = element.getBoundingClientRect();\r\n\r\n    let style = getComputedStyle(element),\r\n        left = parseInt(style.left, 10) || 0,\r\n        top = parseInt(style.top, 10) || 0;\r\n\r\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\r\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\r\n}\r\n\r\n\r\n/**\r\n * Returns the top and left position of an element relative to the document.\r\n *\r\n * @param element\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getElementOffset(element) {\r\n    let box = element.getBoundingClientRect();\r\n\r\n    return {\r\n        left: box.left + window.pageXOffset,\r\n        top: box.top + window.pageYOffset\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Normalizing accessing scroll position for an element.\r\n *\r\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\r\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\r\n * @param element\r\n * @returns {{left, top}}\r\n */\r\nexport function getScroll(element) {\r\n    if(isWindow(element)) {\r\n        return {\r\n            scrollLeft: element.pageXOffset,\r\n            scrollTop: element.pageYOffset\r\n        };\r\n    } else {\r\n        return {\r\n            scrollLeft: element.scrollLeft,\r\n            scrollTop: element.scrollTop\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Test to see if the variable is a window.\r\n * @param variable\r\n * @returns {boolean}\r\n */\r\nexport function isWindow(variable) {\r\n    return variable && typeof variable === 'object' && setInterval in variable;\r\n}\r\n\r\n\r\n/**\r\n * Normalizes setting a scroll position for an element.\r\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\r\n * This methods normalizes them.\r\n * @param element - The element to scroll\r\n * @param scroll - An object with a left or a top property or both.\r\n */\r\nexport function setScroll(element, scroll) {\r\n    if(element.scrollTo) {\r\n        element.scrollTo(scroll);\r\n    } else {\r\n        element.scrollLeft = scroll.left;\r\n        element.scrollTop = scroll.top;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Matches a single dom element based on the given selector.\r\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\r\n * If a css selector is passed it will query for the element.\r\n * If a jquery object is passed it will return the first matched element.\r\n * If an element is passed it will return that element.\r\n *\r\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\r\n * Otherwise the context will be the document.\r\n *\r\n * @param selector\r\n * @param context\r\n * @returns {Element|Document|DocumentFragment}\r\n */\r\nexport function selectElement(selector, context=null) {\r\n    if(!context) {\r\n        context = document;\r\n    } else {\r\n        context = selectElement(context);\r\n    }\r\n\r\n    if(typeof selector === 'string') {\r\n        return context.querySelector(selector);\r\n    } else if(selector.jquery) {\r\n        return selector[0];\r\n    } else if(selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\r\n        return selector;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if(!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a integer.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrInt(value, radix=10, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a float.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrFloat(value, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts for parse a boolean value from a string.  Returns the defaultValue on failure if provided.  Otherwise throws\r\n * a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|*}\r\n */\r\nexport function parseBoolean(value, defaultValue=TypeError) {\r\n    if(typeof value === 'boolean') {\r\n        return value;\r\n    } else if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    } else {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseIntValue(value, radix=10, defaultValue=TypeError) {\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into integer.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseFloatValue(value, defaultValue=TypeError) {\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into float.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Runs multiple parsers and returns the first one that doesn't throw a TypeError.\r\n * @param value\r\n * @param parsers\r\n * @returns {*}\r\n */\r\nexport function parseAny(value, ...parsers) {\r\n    for(let parser of parsers) {\r\n        try {\r\n            return parser(value);\r\n        } catch(e) {\r\n            if(!(e instanceof TypeError)) {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\n    throw new TypeError(\"Could not parse value.\");\r\n}\r\n\r\n\r\n/**\r\n * Validates that the value is one of the given choices.\r\n * @param value\r\n * @param choices\r\n * @param defaultValue\r\n * @returns {TypeErrorConstructor|*}\r\n */\r\nexport function validateChoice(value, choices, defaultValue=TypeError) {\r\n    if(choices.indexOf(value) === -1) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Invalid choice.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nexport function choice(...args) {\r\n    return function(value) {\r\n        if(args.indexOf(value) === -1) {\r\n            throw new TypeError(\"Invalid Choice\");\r\n        }\r\n\r\n        return value;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns first child element that matches the test function.\r\n * @param element - Parent element\r\n * @param fn - Test Function\r\n * @returns {Element}\r\n */\r\nexport function findChild(element, fn) {\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            return child;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a filtered list of element from the children that match the test function.\r\n * @param element - Parent element.\r\n * @param fn - Test function.\r\n * @returns {Array}\r\n */\r\nexport function filterChildren(element, fn) {\r\n    let r = [];\r\n\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            r.push(child);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Returns the object own property or the default value if it does not have that property.\r\n * @param obj\r\n * @param propName\r\n * @param defaultValue\r\n * @returns {*}\r\n */\r\nexport function getOwnProperty(obj, propName, defaultValue=undefined) {\r\n    if(obj.hasOwnProperty(propName)) {\r\n        return obj[propName];\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the obj value by following it's property path.  For example getPropertyByPath(a, 'b.c.d') is equivalent to\r\n * a.b.c.d but can be passed in string form.\r\n * @param obj\r\n * @param path\r\n * @returns {*}\r\n */\r\nexport function getPropertyByPath(obj, path) {\r\n    let parts = path.split('.'),\r\n        r = obj;\r\n\r\n    for(let part of parts) {\r\n        r = r[part];\r\n    }\r\n\r\n    return r;\r\n}\r\n","import MenuNode from \"./MenuNode\";\r\n\r\n\r\nexport default class DropDown extends MenuNode {\r\n    constructor({target, text, closeOnBlur=true, timeout=false, autoActivate=false, toggle=\"both\", closeOnSelect=true}) {\r\n        super();\r\n\r\n        this.menuNodeType = \"dropdown\";\r\n\r\n        this.closeOnBlur = closeOnBlur;\r\n        this.timeout = timeout;\r\n        this.autoActivate = autoActivate;\r\n        this.toggle = toggle;\r\n        this.closeOnSelect = closeOnSelect;\r\n\r\n        if(target) {\r\n            this.element = target;\r\n        } else {\r\n            this.element = this.render(text);\r\n        }\r\n\r\n        this.init();\r\n    }\r\n\r\n    render(text) {\r\n        let element = document.createElement('div'),\r\n            button = document.createElement('button');\r\n\r\n        button.type = \"button\";\r\n        button.innerHTML = text;\r\n\r\n        element.appendChild(button);\r\n\r\n        return element;\r\n    }\r\n\r\n    activate() {\r\n        if(this.isActive) return; // Already active\r\n\r\n        this.isActive = true;\r\n\r\n        this.clearTimer('autoActivate');\r\n\r\n        if(this.parent) {\r\n            if(!this.parent.isActive) {\r\n                this.parent.activate();\r\n            }\r\n\r\n            this.parent.setActiveItem(this, true);\r\n        }\r\n    }\r\n\r\n    deactivate() {\r\n\r\n    }\r\n\r\n    onMouseOver(event) {\r\n\r\n    }\r\n\r\n    onMouseOut(event) {\r\n\r\n    }\r\n\r\n    onClick(event) {\r\n\r\n    }\r\n}\r\n","import MenuNode from \"./MenuNode\";\r\nimport MenuItem from \"./MenuItem\";\r\n\r\n\r\nexport default class Menu extends MenuNode {\r\n    constructor({target=null, closeOnBlur=false, timeout=false, autoActivate=false, multiple=false, openOnHover=false,\r\n                    toggle=\"both\", closeOnSelect=true, deactivateOnItemHover=true, ...context}={}) {\r\n        super();\r\n        this.menuNodeType = \"menu\";\r\n        this.events = null;\r\n        this.MenuItemClass = MenuItem;\r\n\r\n        this.closeOnBlur = closeOnBlur;\r\n        this.timeout = timeout;\r\n        this.autoActivate = autoActivate;\r\n        this.multiple = multiple;\r\n        this.openOnHover = openOnHover;\r\n        this.toggle = toggle;\r\n        this.closeOnSelect = closeOnSelect;\r\n        this.deactivateOnItemHover = deactivateOnItemHover;\r\n\r\n        if(target) {\r\n            this.element = target;\r\n        } else {\r\n            this.element = this.render(context);\r\n        }\r\n\r\n        this.isVisible = false;\r\n\r\n        this.init();\r\n    }\r\n\r\n    render({arrow=false}={}) {\r\n        let element = document.createElement('div'),\r\n            body = document.createElement('div');\r\n\r\n        element.className = \"menu\";\r\n        body.className = \"menu__body\";\r\n\r\n        if(arrow) {\r\n            let arrow = document.createElement('div');\r\n            arrow.className = \"menu__arrow\";\r\n            element.appendChild(arrow);\r\n        }\r\n\r\n        element.appendChild(body);\r\n        return element;\r\n    }\r\n\r\n    activate() {\r\n        if(!this.isActive) {\r\n            let parent = this.parent;\r\n\r\n            // Set isActivate flag and add active classes.\r\n            this.isActive = true;\r\n\r\n            // Register document click handler\r\n            if(this.closeOnBlur && !this._captureDocumentClick) {\r\n                this._captureDocumentClick = {\r\n                    target: document,\r\n\r\n                    onDocumentClick: (event) => {\r\n                        if(!this.element.contains(event.target)) {\r\n                            this.deactivate();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                this._captureDocumentClick.target.addEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n            }\r\n\r\n            // Notify parent that submenu activated.\r\n            if(parent) {\r\n                parent.publish('submenu.activate', this);\r\n            }\r\n\r\n            this.publish('menu.activate');\r\n\r\n            // Dispatch dom events.\r\n            this.element.dispatchEvent(new CustomEvent('menu.activate', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    deactivate() {\r\n        if(this.isActive) {\r\n            // Set flag and remove active classes.\r\n            this.isActive = false;\r\n\r\n            // Clear any active child items.\r\n            this.clearItems();\r\n\r\n            // Remove document click handler that tracks user clicks outside of menu tree.\r\n            if(this._captureDocumentClick) {\r\n                this._captureDocumentClick.target.removeEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n                this._captureDocumentClick = null;\r\n            }\r\n\r\n            // clear timers\r\n            this.clearTimer('timeout');\r\n\r\n            for(let child of this.children) {\r\n                child.clearTimer('activateItem');\r\n            }\r\n\r\n            // Notify parent that submenu deactivated.\r\n            let parent = this.parent;\r\n            if(parent) {\r\n                parent.publish('submenu.deactivate', this);\r\n            }\r\n\r\n            this.publish('menu.deactivate');\r\n\r\n            // Dispatch dom events.\r\n            this.element.dispatchEvent(new CustomEvent('menu.deactivate', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    show() {\r\n        if(!this.isVisible) {\r\n            this.isVisible = true;\r\n\r\n            if(this.parent) this.parent.publish('submenu.shown', this);\r\n            this.publish('menu.shown', this);\r\n\r\n            this.element.dispatchEvent(new CustomEvent('menu.show', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        if(this.isVisible) {\r\n            this.isVisible = false;\r\n\r\n            if(this.parent) this.parent.publish('submenu.hidden', this);\r\n            this.publish('menu.hidden', this);\r\n\r\n            this.element.dispatchEvent(new CustomEvent('menu.hide', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Tree methods.\r\n\r\n    createItems(data) {\r\n        for(let {children, ...args} of data) {\r\n            let item = new this.MenuItemClass(args);\r\n\r\n            if(children && children.length) {\r\n                let submenu = new Menu();\r\n                item.attachSubMenu(submenu);\r\n                submenu.createItems(children);\r\n            }\r\n\r\n            this.append(item);\r\n        }\r\n    }\r\n\r\n    addItem(text, action) {\r\n        let item = new this.MenuItemClass({text, action});\r\n        this.append(item);\r\n        return this;\r\n    }\r\n\r\n    removeItem(item) {\r\n        let index = this._children.indexOf(item);\r\n        if(index !== -1) {\r\n            this._children.splice(index, 1);\r\n            if(item.element.parentElement) item.element.parentElement.removeChild(item.element);\r\n        }\r\n    }\r\n\r\n    hasItem(item) {\r\n        return this._children.indexOf(item) !== -1;\r\n    }\r\n\r\n    append(item) {\r\n        let body = this.getMenuBody();\r\n\r\n        body = body[body.length - 1];\r\n\r\n        if(item.nodeType) {\r\n            body.appendChild(item);\r\n            return this;\r\n        }\r\n\r\n        if(item.parent) {\r\n            item.parent.removeItem(item);\r\n        }\r\n\r\n        item.appendTo(body);\r\n\r\n        if(item.isMenuItem && item.isMenuItem()) {\r\n            item._parent = this;\r\n            this._children.push(item);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    get activeItems() {\r\n        let r = [];\r\n\r\n        for(let item of this.children) {\r\n            if(item.isActive) {\r\n                r.push(item);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    clearItems() {\r\n        for(let child of this.activeItems) {\r\n            child.deactivate();\r\n        }\r\n    }\r\n\r\n    setActiveItem(item) {\r\n        if(!item.isActive) {\r\n            item.activate();\r\n            return;\r\n        }\r\n\r\n        if(!this.multiple) {\r\n            for(let activeItem of this.activeItems) {\r\n                if(activeItem.isActive && activeItem !== item) {\r\n                    activeItem.deactivate();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns list of all menu bodies for the menu.\r\n     *\r\n     * Menu bodies are where item are appended when using function like addItem or append.  They will be added to the\r\n     * last menu body in the menu.\r\n     *\r\n     * @returns {NodeListOf<HTMLElementTagNameMap[string]> | NodeListOf<Element> | NodeListOf<SVGElementTagNameMap[string]>}\r\n     */\r\n    getMenuBody() {\r\n        return this.element.querySelectorAll(':scope > .menu__body');\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Event Handlers\r\n\r\n    onMouseOver(event) {\r\n        this.clearTimer('timeout');\r\n        this._isMouseOver = true;\r\n\r\n        let item = this.getTargetItem(event.target);\r\n\r\n        if(item && item.getEventDelegator() === this) {\r\n            item.onMouseOver(event);\r\n        }\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        this._isMouseOver = false;\r\n\r\n        if(this.isActive && typeof this.timeout === 'number' && this.timeout >= 0 && !this.element.contains(event.relatedTarget)) {\r\n            this.startTimer('timeout', () => {\r\n                this.deactivate();\r\n            }, this.timeout);\r\n        }\r\n\r\n        let targetItem = this.getTargetItem(event.target);\r\n\r\n        if(targetItem && targetItem.getEventDelegator() === this) {\r\n            this.onMouseOut(event);\r\n        }\r\n    }\r\n\r\n    onClick(event) {\r\n        let target = this.getTargetNode(event.target);\r\n\r\n        if(target === this) {\r\n            if(this.isActive && this.toggleOff) {\r\n                this.deactivate();\r\n            } else if(!this.isActive && this.toggleOn) {\r\n                this.activate();\r\n            }\r\n        } else if(target.isMenuItem()) {\r\n            if(target.getEventDelegator() === this) {\r\n                target.onClick(event);\r\n            }\r\n\r\n            if(this.isActive && !target.hasSubMenu()) {\r\n                this.deactivate();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Will return true if menu items should toggle on.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get toggleOn() {\r\n        return this.toggle === 'on' || this.toggle === 'both';\r\n    }\r\n\r\n    /**\r\n     * Will return true if menu items should toggle off.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get toggleOff() {\r\n        return this.toggle === 'off' || this.toggle === 'both';\r\n    }\r\n}","import Menu from \"./Menu\";\r\n\r\n\r\nexport default class MenuBar extends Menu {\r\n    constructor({target=null, closeOnBlur=true, timeout=false, autoActivate=false, multiple=false, openOnHover=true,\r\n                    toggle=\"both\", closeOnSelect=true, deactivateOnItemHover=true}={}) {\r\n\r\n        super({\r\n            target, closeOnBlur, timeout, autoActivate, multiple, openOnHover,\r\n            toggle, closeOnSelect, deactivateOnItemHover\r\n        });\r\n\r\n        this.isVisible = true;\r\n    }\r\n\r\n    render(context) {\r\n        let element = document.createElement('div');\r\n\r\n        element.className = \"menubar\";\r\n\r\n        return element;\r\n    }\r\n\r\n    getMenuBody() {\r\n        return [this.element];\r\n    }\r\n}\r\n","import MenuNode from \"./MenuNode\";\r\n\r\n\r\nexport default class MenuItem extends MenuNode {\r\n    constructor({text, action, href=null, target, classes, nodeName=\"div\", ...context}={}) {\r\n        super();\r\n\r\n        if(target) {\r\n            this.element = target;\r\n        } else {\r\n            this.element = this.render({text, nodeName, href, ...context});\r\n        }\r\n\r\n        if(classes) {\r\n            this.addClass(classes);\r\n        }\r\n\r\n        if(action) this.addAction(action);\r\n    }\r\n\r\n    render({text, nodeName=\"div\", href=null}={}) {\r\n        let element = document.createElement(nodeName),\r\n            button = document.createElement('a');\r\n\r\n        element.className = \"menuitem\";\r\n        button.type = \"button\";\r\n        button.innerHTML = text;\r\n        button.className = \"menuitem__button\";\r\n\r\n        if(href) {\r\n            button.href = href;\r\n        }\r\n\r\n        element.appendChild(button);\r\n        return element;\r\n    }\r\n\r\n    activate() {\r\n        if(this.isActive) return;\r\n\r\n        if(this.parent) {\r\n            if(!this.parent.isActive) {\r\n                this.parent.activate();\r\n            }\r\n\r\n            this.parent.setActiveItem(this);\r\n        }\r\n\r\n        this.clearTimer('activateItem');\r\n\r\n        if(this.submenu) {\r\n            this.submenu.show();\r\n        }\r\n\r\n        this.publish('activate', this);\r\n\r\n        if(this.parent) {\r\n            this.publish('menuitem.activate', this);\r\n        }\r\n\r\n        this.element.dispatchEvent(new CustomEvent('menuitem.activate', {\r\n            detail: this,\r\n            bubbles: true\r\n        }));\r\n    }\r\n\r\n    deactivate() {\r\n        if(!this.isActive) return;\r\n\r\n        if(this.submenu) {\r\n            this.submenu.deactivate();\r\n            this.submenu.hide();\r\n        }\r\n\r\n        this.publish('deactivate', this);\r\n        if(this.parent) this.parent.publish('menuitem.deactivate', this);\r\n\r\n        this.element.dispatchEvent(new CustomEvent('menuitem.deactivate', {\r\n            detail: this,\r\n            bubbles: true\r\n        }));\r\n    }\r\n\r\n    select() {\r\n        let o = this;\r\n\r\n        while(o) {\r\n            o.publish('menuitem.selected', this);\r\n            o = o.parent;\r\n        }\r\n\r\n        this.element.dispatchEvent(new CustomEvent('menuitem.selected', {\r\n            detail: this,\r\n            bubbles: true\r\n        }));\r\n    }\r\n\r\n    isMenuItem() {\r\n        return true;\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Action management\r\n\r\n    addAction(action) {\r\n\r\n    }\r\n\r\n    removeAction(action) {\r\n\r\n    }\r\n\r\n    hasAction(action) {\r\n\r\n    }\r\n\r\n    clearActions() {\r\n\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Manage submenu\r\n\r\n    attachSubMenu(submenu) {\r\n        if(this.submenu) {\r\n            throw new Error(\"MenuItem can only have one submenu.\");\r\n        }\r\n\r\n        if(submenu.parent) {\r\n            submenu.parent.detachSubMenu();\r\n        }\r\n\r\n        submenu._parent = this;\r\n        this._children = [submenu];\r\n\r\n        if(!submenu.element.parentElement) {\r\n            submenu.appendTo(this.element);\r\n        }\r\n    }\r\n\r\n    detachSubMenu(remove=true) {\r\n        let submenu = this.submenu;\r\n\r\n        if(submenu) {\r\n            this._children = [];\r\n            submenu._parent = null;\r\n            if(remove) submenu.remove();\r\n        }\r\n\r\n        return submenu;\r\n    }\r\n\r\n    hasSubMenu() {\r\n        return !!this.submenu;\r\n    }\r\n\r\n    get submenu() {\r\n        return this._children[0];\r\n    }\r\n\r\n    set submenu(value) {\r\n        if(!value) {\r\n            this.detachSubMenu();\r\n        } else {\r\n            this.attachSubMenu(value);\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Event handlers\r\n\r\n    onClick(event) {\r\n        console.log(\"click\");\r\n\r\n        if(this.isDisabled) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if(this.hasSubMenu()) {\r\n            if(this.isActive && this.toggleOff) {\r\n                this.deactivate();\r\n            } else if(!this.isActive && this.toggleOn) {\r\n                this.activate();\r\n            }\r\n        } else {\r\n            if(!this.isActive && this.toggleOn) {\r\n                this.activate();\r\n            }\r\n\r\n            this.select();\r\n        }\r\n    }\r\n\r\n    onMouseOver(event) {\r\n        if(!this.element.contains(event.relatedTarget)) return;\r\n\r\n        let parent = this.parent;\r\n\r\n        if(!this.isActive && !this.isDisabled) {\r\n            if(parent.isActive) {\r\n                if(parent.openOnHover === true) {\r\n                    this.activate();\r\n                } else if(typeof parent.openOnHover === 'number' && parent.openOnHover >= 0) {\r\n                    this.startTimer('activateItem', () => {\r\n                        if(!this.isDisabled) {\r\n                            this.activate();\r\n                        }\r\n                    }, parent.openOnHover);\r\n                }\r\n            } else {\r\n                if(parent.autoActivate === true) {\r\n                    this.activate();\r\n                } else if(typeof parent.autoActivate === 'number' && parent.autoActivate >= 0) {\r\n                    this.startTimer('activateItem', () => {\r\n                        if(!this.isDisabled) {\r\n                            this.activate();\r\n                        }\r\n                    }, parent.autoActivate);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(!parent.multiple && parent.deactivateOnItemHover) {\r\n            this.clearItems();\r\n        }\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        if(this.isActive && !this.hasSubMenu()) {\r\n\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Getters and Setters\r\n\r\n    get autoActivate() {\r\n\r\n    }\r\n\r\n    set autoActivate(value) {\r\n\r\n    }\r\n\r\n    get openOnHover() {\r\n\r\n    }\r\n\r\n    set openOnHover(value) {\r\n\r\n    }\r\n\r\n    get timeout() {\r\n\r\n    }\r\n\r\n    set timeout(value) {\r\n\r\n    }\r\n\r\n    get closeOnBlur() {\r\n\r\n    }\r\n\r\n    set closeOnBlur(value) {\r\n\r\n    }\r\n\r\n    get toggle() {\r\n\r\n    }\r\n\r\n    set toggle(value) {\r\n\r\n    }\r\n\r\n    get closeOnSelect() {\r\n\r\n    }\r\n\r\n    set closeOnSelect(value) {\r\n\r\n    }\r\n}","import Publisher from \"core/Publisher\";\r\nimport {KeyError} from \"core/errors\";\r\nimport {addClasses, removeClasses} from \"core/utility\";\r\n\r\n\r\nexport const MENU_MAP = new WeakMap();\r\n\r\n\r\nfunction inheritable(target) {\r\n    let key = target.key;\r\n\r\n    target.descriptor.get = function() {\r\n        let value = this._props[key];\r\n\r\n        if(value === 'inherit') {\r\n            return this._parent ? this._parent[key] : undefined;\r\n        } else if(value === 'root') {\r\n            let root = this.root;\r\n            return root ? root[key] : undefined;\r\n        } else {\r\n            return value;\r\n        }\r\n    };\r\n\r\n    target.descriptor.set = function(value) {\r\n        this._props[key] = value;\r\n    };\r\n\r\n    return {\r\n        \r\n    };\r\n}\r\n\r\n\r\nexport default class MenuNode extends Publisher {\r\n    @inheritable test;\r\n\r\n    constructor() {\r\n        super();\r\n        this._parent = null;\r\n        this._children = [];\r\n        this._props = {};\r\n        this._timers = {};\r\n        /**\r\n         * @type {undefined|null|HTMLElement}\r\n         * @private\r\n         */\r\n        this._element = undefined;\r\n\r\n        this._isActive = false;\r\n        this._isVisible = true;\r\n        this._isDisabled = false;\r\n\r\n        this.nodeType = null;\r\n        this.isController = false;\r\n    }\r\n\r\n    init() {\r\n        if(this.boundEvents) return;\r\n\r\n        this.boundEvents = {};\r\n\r\n        this.boundEvents.onMouseOver = (event) => {\r\n            this.publish('onMouseOver', event, this);\r\n            this.onMouseOver(event);\r\n\r\n            if(!this.element.contains(event.relatedTarget)) {\r\n                this.publish('onMouseEnter', event, this);\r\n                // if(this.onMouseEnter) this.onMouseEnter(event);\r\n            }\r\n        };\r\n\r\n        this.boundEvents.onMouseOut = (event) => {\r\n            this.publish('onMouseOut', event, this);\r\n            this.onMouseOut(event);\r\n\r\n            if(!this.element.contains(event.relatedTarget)) {\r\n                this.publish('onMouseLeave', event, this);\r\n                // if(this.onMouseLeave) this.onMouseLeave(event);\r\n            }\r\n        };\r\n\r\n        this.boundEvents.onClick = (event) => {\r\n            this.publish('onClick', event, this);\r\n            this.onClick(event);\r\n        };\r\n\r\n        this.element.addEventListener('click', this.boundEvents.onClick);\r\n        this.element.addEventListener('onMouseOut', this.boundEvents.onMouseOut);\r\n        this.element.addEventListener('onMouseOver', this.boundEvents.onMouseOver);\r\n        this.isController = true;\r\n    }\r\n\r\n    destroy() {\r\n        if(this.events && this.hasElement()) {\r\n            this.element.removeEventListener('click', this.boundEvents.onClick);\r\n            this.element.removeEventListener('onMouseOut', this.boundEvents.onMouseOut);\r\n            this.element.removeEventListener('onMouseOver', this.boundEvents.onMouseOver);\r\n            this.events = null;\r\n            this.isController = false;\r\n        }\r\n\r\n        this.element = null;\r\n    }\r\n\r\n    /**\r\n     * Renders the component.\r\n     */\r\n    render() {\r\n\r\n    }\r\n\r\n    get parent() {\r\n        return this._parent || null;\r\n    }\r\n\r\n    /**\r\n     * Returns the root node of the menu tree.\r\n     *\r\n     * @returns {MenuNode}\r\n     */\r\n    get root() {\r\n        let r = this,\r\n            o = this;\r\n\r\n        while(o) {\r\n            o = o.parent;\r\n\r\n            if(o) {\r\n                r = o;\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Returns the closest parent menu.\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get parentMenu() {\r\n        let parent = this.parent;\r\n        return parent.closest(node => node.nodeType === 'menu');\r\n    }\r\n\r\n    /**\r\n     * Returns the closest parent item.\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get parentItem() {\r\n        let parent = this.parent;\r\n        return parent.closest(node => node.nodeType === 'menuitem' || node.nodeType === 'dropdown');\r\n    }\r\n\r\n    /**\r\n     * Returns the next sibling node.\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get nextSibling() {\r\n        return this.getOffsetSibling(1);\r\n    }\r\n\r\n    /**\r\n     * Returns the previous sibling node.\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get previousSibling() {\r\n        return this.getOffsetSibling(-1);\r\n    }\r\n\r\n    get children() {\r\n        return this._children.slice(0);\r\n    }\r\n\r\n    get isActive() {\r\n        return this._isActive;\r\n    }\r\n\r\n    set isActive(value) {\r\n        value = !!value;\r\n\r\n        if(value !== this._isActive) {\r\n            if(value) {\r\n                this.element.classList.add('active');\r\n            } else {\r\n                this.element.classList.remove('active');\r\n            }\r\n\r\n            this._isActive = value;\r\n        }\r\n    }\r\n\r\n    get isDisabled() {\r\n        return this._isDisabled;\r\n    }\r\n\r\n    set isDisabled(value) {\r\n        value = !!value;\r\n\r\n        if(value !== this._isDisabled) {\r\n            if(value) {\r\n                this.element.classList.add('disabled');\r\n            } else {\r\n                this.element.classList.remove('disabled');\r\n            }\r\n\r\n            this._isDisabled = value;\r\n        }\r\n    }\r\n\r\n    get isVisible() {\r\n        return this._isVisible;\r\n    }\r\n\r\n    set isVisible(value) {\r\n        value = !!value;\r\n\r\n        if(value !== this._isVisible) {\r\n            if(value) {\r\n                this.element.classList.remove('hidden');\r\n            } else {\r\n                this.element.classList.add('hidden');\r\n            }\r\n\r\n            this._isVisible = value;\r\n        }\r\n    }\r\n\r\n    hasElement() {\r\n        return !!this._element;\r\n    }\r\n\r\n    get element() {\r\n        if(this._element === undefined) {\r\n            this.element = this.render();\r\n        }\r\n\r\n        return this._element;\r\n    }\r\n\r\n    set element(value) {\r\n        if(this._element) {\r\n            MENU_MAP.delete(this._element);\r\n            this._element = undefined;\r\n        }\r\n\r\n        if(typeof value === 'string') {\r\n            this._element = document.querySelector(value);\r\n            MENU_MAP.set(this._element, this);\r\n        } else if(typeof value === 'function') {\r\n            this._element = value.call(this);\r\n            MENU_MAP.set(this._element, this);\r\n        } else if(value) {\r\n            this._element = value;\r\n            MENU_MAP.set(this._element, this);\r\n        } else {\r\n            this._element = value; // null or undefined\r\n        }\r\n    }\r\n\r\n    getOffsetSibling(offset=1) {\r\n        let parent = this.parent;\r\n\r\n        if(parent) {\r\n            let children = parent.children,\r\n                i = children ? children.indexOf(this) : -1;\r\n\r\n            if(i >= 0) {\r\n                i += offset;\r\n\r\n                if(i >= 0) {\r\n                    return children[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    appendTo(selector) {\r\n        if(typeof selector === 'string') {\r\n            document.querySelector(selector).appendChild(this.element);\r\n        } else if(selector.appendChild) {\r\n            selector.appendChild(this.element);\r\n        } else if(selector.append) {\r\n            selector.append(this.element);\r\n        }\r\n    }\r\n\r\n    remove() {\r\n        if(this.element.parentElement) {\r\n            this.element.parentElement.removeChild(this.element);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    closest(fn) {\r\n        let o = this;\r\n\r\n        while(o) {\r\n            if(fn.call(this, o)) return o;\r\n            o = o.parent;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    *getDescendants() {\r\n        for(let child of this.children) {\r\n            yield child;\r\n\r\n            for(let grandchild of child.getDescendants()) {\r\n                yield grandchild;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a timer with the given name.  Only one timer with that name can be active per object.\r\n     * If another timer with the same name is created the previous one will be cleared if `clear` is true.\r\n     * Otherwise if `clear` is false a KeyError with be thrown.  The callback function for the timer is called\r\n     * with the current object as it's `this` and the timer object as it's only parameter following the pattern\r\n     *\r\n     * this::fn(timer);\r\n     *\r\n     * @param name {String} The name of the timer.\r\n     * @param fn {function(timer)} Function to call.\r\n     * @param time {Number} The time to wait.\r\n     * @param interval If true setInterval will be used instead of setTimeout\r\n     * @param clear If true an previous timers of the same name will be canceled before creating a new one.  Otherwise a KeyError will be thrown.\r\n     * @returns {{status, id, cancel, type}}\r\n     */\r\n    startTimer(name, fn, time, interval=false, clear=true) {\r\n        if(clear && this._timers[name]) {\r\n            this._timers[name].cancel();\r\n        } else if(this._timers[name]) {\r\n            throw new KeyError(\"Timer already exists.\");\r\n        }\r\n\r\n        let timer = this._timers[name] = {\r\n            status: 'running',\r\n            id: null,\r\n            cancel: null,\r\n            type: null,\r\n        };\r\n\r\n        if(interval) {\r\n            let id = timer.id = setInterval((timer) => {\r\n                fn.call(this, timer);\r\n            }, time, timer);\r\n\r\n            timer.type = 'interval';\r\n\r\n            timer.cancel = () => {\r\n                if(this._timers[name] === timer) {\r\n                    clearInterval(id);\r\n                    delete this._timers[name];\r\n                    timer.status = 'canceled';\r\n                }\r\n            };\r\n        } else {\r\n            let id = timer.id = setTimeout((timer) => {\r\n                delete this._timers[name];\r\n                timer.status = 'complete';\r\n                fn.call(this, timer);\r\n            }, time, timer);\r\n\r\n            timer.type = 'timeout';\r\n\r\n            timer.cancel = () => {\r\n                if(this._timers[name] === timer) {\r\n                    clearTimeout(id);\r\n                    delete this._timers[name];\r\n                    timer.status = 'canceled';\r\n                }\r\n            };\r\n        }\r\n\r\n        return timer;\r\n    }\r\n\r\n    /**\r\n     * Clears the timer with the given name.\r\n     *\r\n     * @param name\r\n     * @returns {boolean} True if a timer was canceled. False if not timer exists.\r\n     */\r\n    clearTimer(name) {\r\n        if(this._timers[name]) {\r\n            this._timers[name].cancel();\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns the timer object if it exists.\r\n     *\r\n     * @param name\r\n     * @returns {*}\r\n     */\r\n    getTimer(name) {\r\n        return this._timers[name];\r\n    }\r\n\r\n    /**\r\n     * Returns the MenuNode that is responsible for delegating the events.\r\n     *\r\n     * @returns {null|{isController}|any}\r\n     */\r\n    getEventDelegator() {\r\n        let o = this.element;\r\n\r\n        while(o) {\r\n            let instance = MENU_MAP.get(o);\r\n\r\n            if(instance && instance.isController) {\r\n                return instance;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getTargetNode(target) {\r\n        let o = target;\r\n\r\n        while(o) {\r\n            let instance = MENU_MAP.get(o);\r\n\r\n            if(instance) {\r\n                return instance;\r\n            }\r\n\r\n            if(o === this.element) {\r\n                break;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getTargetItem(target) {\r\n        let o = target;\r\n\r\n        while(o) {\r\n            let instance = MENU_MAP.get(o);\r\n\r\n            if(instance && instance.isMenuItem()) {\r\n                return instance;\r\n            }\r\n\r\n            if(o === this.element) {\r\n                break;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getTargetMenu(target) {\r\n        let o = target;\r\n\r\n        while(o) {\r\n            let instance = MENU_MAP.get(o);\r\n\r\n            if(instance && instance.isMenu()) {\r\n                return instance;\r\n            }\r\n\r\n            if(o === this.element) {\r\n                break;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    isMenuItem() {\r\n        return false;\r\n    }\r\n\r\n    isMenu() {\r\n        return false;\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Getters and Setters\r\n\r\n    get id() {\r\n        return this.element.id;\r\n    }\r\n\r\n    set id(id) {\r\n        if(this.element) this.element.id = id;\r\n    }\r\n\r\n    get classList() {\r\n        return this.element.classList;\r\n    }\r\n\r\n    get dataset() {\r\n        return this.element.dataset;\r\n    }\r\n\r\n    get style() {\r\n        return this.element.style;\r\n    }\r\n\r\n    set style(style) {\r\n        this.element.style = style;\r\n    }\r\n\r\n    addClass(classes) {\r\n        return addClasses(this.element, classes);\r\n    }\r\n\r\n    removeClass(classes) {\r\n        return removeClasses(this.element, classes);\r\n    }\r\n\r\n    static getInstance(element) {\r\n        return MENU_MAP.get(element);\r\n    }\r\n}"],"sourceRoot":""}