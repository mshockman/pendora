{"version":3,"sources":["webpack://pendora/webpack/universalModuleDefinition","webpack://pendora/webpack/bootstrap","webpack://pendora/./jekyll/js/app.js","webpack://pendora/./src/app.js","webpack://pendora/./src/autoloader.js","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/attributes.js","webpack://pendora/./src/core/data.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/iter.js","webpack://pendora/./src/core/utility.js","webpack://pendora/./src/menu2/DropDown.js","webpack://pendora/./src/menu2/Menu.js","webpack://pendora/./src/menu2/MenuBar.js","webpack://pendora/./src/menu2/MenuItem.js","webpack://pendora/./src/menu2/MenuNode.js","webpack://pendora/./src/menu2/decorators.js","webpack://pendora/./src/menu2/utility.js"],"names":["__webpack_public_path__","app","Application","window","addEventListener","document","body","dataset","page","init","classes","isLoaded","register","key","hasOwnProperty","registerPage","name","importer","Error","context","pageClassImporter","PageClass","load","AutoLoader","registry","func","querySelector","widgets","querySelectorAll","element","components","split","windowBind","c","parts","cls","namespace","length","initialized","privateCache","get","set","fn","loader","Toggle","_onClick","event","onClick","removeEventListener","target","toggle","method","startsWith","substr","classList","instance","getInitializedInstance","autoLoad","Publisher","_topics","topic","callback","push","on","off","args","apply","arguments","callbacks","i","cb","splice","slice","DROP","REQUIRED","FALSE","TRUE","Attribute","type","missing","nullable","validator","data","fields","r","field","value","undefined","KeyError","ValueError","uuid","prefix","Math","random","replace","Data","expando","owner","cache","acceptData","nodeType","Object","defineProperty","configurable","prop","keys","isEmptyObject","ExtendableError","message","constructor","captureStackTrace","stack","IndexError","NotImplemented","ValidationError","node","children","AssertionError","items","values","enumerate","chain","object","iterable","iterables","iter","REG_WHITESPACE","clamp","minValue","maxValue","max","min","firstValue","item","all","any","proto","descriptor","placement","randomChoice","array","floor","arraysEqual","array1","array2","l","parseHTML","html","template","createElement","innerHTML","trim","content","fragment","createDocumentFragment","firstChild","appendChild","emptyElement","removeChild","addClasses","add","removeClasses","remove","assignAttributes","attributes","setAttribute","setElementOffset","coords","getElementOffset","Array","isArray","left","top","offset","getBoundingClientRect","style","getComputedStyle","parseInt","box","pageXOffset","pageYOffset","getScroll","isWindow","scrollLeft","scrollTop","variable","setInterval","setScroll","scroll","scrollTo","selectElement","selector","jquery","assert","condition","parseBooleanOrInt","radix","defaultValue","TypeError","Number","isNaN","parseBooleanOrFloat","parseFloat","parseBoolean","parseIntValue","parseFloatValue","parseAny","parsers","parser","e","validateChoice","choices","indexOf","choice","findChild","child","filterChildren","getOwnProperty","obj","propName","getPropertyByPath","path","part","hslToRGB","h","s","abs","x","m","g","b","round","hsvToRGB","v","hp","DropDown","options","MenuItem","FromHTML","timeAttribute","boolAttribute","stringAttribute","MENU_PARAMETERS","closeOnBlur","timeout","autoActivate","multiple","openOnHover","closeOnSelect","deactivateOnItemHover","delay","position","visible","Menu","id","menuNodeType","events","MenuItemClass","SubMenuClass","render","isVisible","parent","isActive","activate","activeItems","activeItem","deactivate","onMouseOver","onMouseOut","onSelect","createItems","inherit","arrow","className","_captureDocumentClick","onDocumentClick","contains","publish","dispatchEvent","CustomEvent","detail","bubbles","clearItems","clearTimer","call","submenu","_submenu","attachSubMenu","append","text","action","index","_children","parentElement","getMenuBody","removeItem","appendTo","isMenuItem","_parent","originalEvent","relatedTarget","startTimer","toggleOff","toggleOn","MenuNode","MenuBar","SubMenu","ITEM_ATTRIBUTES","href","nodeName","addClass","addAction","button","show","hide","dispatchTopic","location","hasEvent","detachSubMenu","hasSubMenu","isDisabled","getDisabled","preventDefault","isSubMenuVisible","select","_props","_timers","_element","_isActive","_isVisible","isController","boundEvents","handleEvent","getTargetNode","wrappedEvent","getEventDelegator","hasElement","o","getDescendants","grandchild","time","interval","clear","cancel","timer","status","clearInterval","setTimeout","clearTimeout","getMenuInstance","isMenu","invalidateTree","walk","role","hasMenuInstance","parseDOM","menu","closest","getOffsetSibling","detachMenuInstance","attachMenuInstance","parameters","deserialize","__attributes__","initializer","kind","enumerable","root","publishTargetEvent","bubble","desc","wrapper","MENU_MAP","WeakMap","has"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,gDAAgD;QAChD;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;;;QAGA;;QAEA;QACA,iCAAiC;;QAEjC;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,MAAM;QACN;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,wBAAwB,kCAAkC;QAC1D,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,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","file":"app.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pendora\"] = factory();\n\telse\n\t\troot[\"pendora\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"chunk-\" + ({}[chunkId]||chunkId) + \".bundle.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tests/dist/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonppendora\"] = window[\"webpackJsonppendora\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"@babel/polyfill\";\r\nimport Application from \"app\";\r\nimport \"autoloader\";\r\nimport \"menu2\";\r\n\r\n\r\n__webpack_public_path__ = \"/assets/js/\";\r\n\r\n\r\nlet app = new Application({\r\n    'menubar': () =>  import(\"./pages/menubar_example.js\"),\r\n    'menu_examples': () =>  import(\"./pages/menu_examples.js\"),\r\n});\r\n\r\n\r\nwindow.addEventListener('load', async () => {\r\n    if(document.body.dataset.page) {\r\n        await app.init(document.body.dataset.page);\r\n    }\r\n});\r\n\r\n\r\nwindow.app = app;\r\n","\r\n\r\n/**\r\n * Page loader class.\r\n *\r\n * Allows for the class to registers application pages that can be dynamically loaded when needed.\r\n */\r\nexport default class Application {\r\n    constructor(classes) {\r\n        this.classes = {};\r\n        this.page = null;\r\n        this.isLoaded = false;\r\n        this.register(classes);\r\n    }\r\n\r\n    /**\r\n     * Register an dictionary of page importers.\r\n     * @param classes\r\n     */\r\n    register(classes) {\r\n        for(let key in classes) {\r\n            if(classes.hasOwnProperty(key)) {\r\n                this.registerPage(key, classes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Register a single page.\r\n     * @param name\r\n     * @param importer\r\n     */\r\n    registerPage(name, importer) {\r\n        if(this.classes.hasOwnProperty(name) && this.classes[name]) {\r\n            throw new Error(\"Duplicate page class registered\");\r\n        }\r\n\r\n        this.classes[name] = importer;\r\n    }\r\n\r\n    /**\r\n     * Loads the page with the given context.\r\n     * @param page\r\n     * @param context\r\n     */\r\n    async init(page, context) {\r\n        if(this.page) {\r\n            throw new Error(\"Page is already loaded\");\r\n        }\r\n\r\n        // window.addEventListener('load', async () => {\r\n        //     this.isLoaded = true;\r\n        //\r\n        //     const pageClassImporter = this.classes[page],\r\n        //         PageClass = (await pageClassImporter()).default;\r\n        //\r\n        //     this.page = new PageClass(context);\r\n        //     if(this.page.load) this.page.load();\r\n        // });\r\n\r\n        this.isLoaded = true;\r\n\r\n        const pageClassImporter = this.classes[page],\r\n            PageClass = (await pageClassImporter()).default;\r\n\r\n        this.page = new PageClass(context);\r\n        if(this.page.load) this.page.load();\r\n    }\r\n}\r\n","import {privateCache} from \"./core/data\";\r\n\r\n\r\nexport default class AutoLoader {\r\n    static autoLoad = true;\r\n\r\n    constructor() {\r\n        this.registry = {};\r\n    }\r\n\r\n    register(name, func) {\r\n        if(this.registry.hasOwnProperty(name) && this.registry[name]) {\r\n            throw new Error(\"Duplicate component registered\");\r\n        }\r\n\r\n        this.registry[name] = func;\r\n    }\r\n\r\n    load(context) {\r\n        if(!context) {\r\n            context = document;\r\n        } else if(typeof context === 'string') {\r\n            context = document.querySelector(context);\r\n        }\r\n\r\n        let widgets = context.querySelectorAll('[data-init]');\r\n\r\n        for(let element of widgets) {\r\n            let components = element.dataset.init.split(/\\s+/),\r\n                windowBind = element.dataset.windowBind;\r\n\r\n            for(let c of components) {\r\n                let parts = c.split(':'),\r\n                    cls = this.registry[parts[0]],\r\n                    namespace = parts.length > 1 ? parts[1] : '',\r\n                    key = namespace ? `${parts[0]}.${parts[1]}` : parts[0];\r\n\r\n                if(cls) {\r\n                    let initialized = privateCache.get(element, 'initialized');\r\n\r\n                    if(!initialized) {\r\n                        initialized = {};\r\n                        privateCache.set(element, 'initialized', initialized);\r\n                    }\r\n\r\n                    if(!initialized[key]) {\r\n                        initialized[key] = cls(element);\r\n\r\n                        if(windowBind) {\r\n                            window[windowBind] = initialized[key];\r\n                        }\r\n                    } // else component is already loaded do nothing.  Could be encountered if load is called multiple times.\r\n                } else {\r\n                    throw new Error(`No component registered called ${key}`);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  Registers a loader function will the global autoloader instance.\r\n     *\r\n     * @param name {String}\r\n     * @param fn {function(HTMLElement) : Object}\r\n     */\r\n    static register(name, fn) {\r\n        return this.loader.register(name, fn);\r\n    }\r\n\r\n    static load(context) {\r\n        return this.loader.load(context);\r\n    }\r\n\r\n    static getInitializedInstance(element, name) {\r\n        let initialized = privateCache.get(element, 'initialized');\r\n\r\n        if(initialized) {\r\n            return initialized[name] || null;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * A UI class that adds the toggle behavior to an element.\r\n * The Toggle behavior is added using the autoloader using `data-init=\"toggle\"` attribute.\r\n * It will target another element and attempt to call the toggle method of an initialized component.\r\n *\r\n * The toggle class takes two configuration attributes, data-target and data-toggle.\r\n *\r\n * data-target determines what element is targeted.  It takes a css selector that will be passed to document.querySelector().\r\n *\r\n * data-toggle determines the initialized component to toggle.  It takes the name of the component registered with AutoLoader.\r\n * For instance if you are toggling on a modal you should pass modal here.\r\n *\r\n * If the component does not offer a toggle method and another method needs to be called, you can set the optional\r\n * attribute data-method.  This attribute determines what method is called and defaults to the string toggle.\r\n *\r\n * Example Usage:\r\n *\r\n * <button type=\"button\" data-init=\"toggle\" data-target=\"#myModalId\" data-toggle=\"modal\">Show Modal</button>\r\n *\r\n * ---\r\n *\r\n * # Toggle classes on and off\r\n *\r\n * If you want to toggle a class on the target element on or off the toggle needs to be a css class string.  For\r\n * example to toggle the class \"test\" with a button you can use the following code:\r\n *\r\n * <button type=\"button\" data-init=\"toggle\" data-target=\"#mytarget\" data-toggle=\".test\">Toggle Class</button>\r\n *\r\n * ---\r\n * # Target self\r\n *\r\n * If you an element to target itself, specify the string \"self\" as the target.\r\n *\r\n * <button type=\"button\" data-init=\"toggle\" data-target=\"self\" data-toggle=\".test\">Toggle Class</button>\r\n */\r\nexport class Toggle {\r\n    constructor(element) {\r\n        if(typeof element === 'string') {\r\n            this.element = document.querySelector(element);\r\n        } else {\r\n            this.element = element;\r\n        }\r\n\r\n        this._onClick = (event) => {\r\n            this.onClick(event);\r\n        };\r\n\r\n        this.element.addEventListener('click', this._onClick);\r\n    }\r\n\r\n    destroy() {\r\n        this.element.removeEventListener('click', this._onClick);\r\n        this._onClick = null;\r\n    }\r\n\r\n    onClick() {\r\n        let target = this.element.dataset.target,\r\n            toggle = this.element.dataset.toggle,\r\n            method = this.element.dataset.method || 'toggle';\r\n\r\n        if(target === 'self') {\r\n            target = this.element;\r\n        } else {\r\n            target = document.querySelector(target);\r\n        }\r\n\r\n        if(toggle.startsWith('.')) {\r\n            toggle = toggle.substr(1);\r\n            target.classList.toggle(toggle);\r\n        } else {\r\n            let instance = AutoLoader.getInitializedInstance(target, toggle);\r\n\r\n            if(instance) {\r\n                instance[method](this.element);\r\n            } else {\r\n                throw new Error(\"Could not find initialized instance during toggle action.\");\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nAutoLoader.loader = new AutoLoader();\r\nAutoLoader.register('toggle', (element) => new Toggle(element));\r\n\r\n\r\nwindow.addEventListener('load', () => {\r\n    if(AutoLoader.autoLoad) {\r\n        AutoLoader.load();\r\n    }\r\n});\r\n","\r\n\r\nexport default class Publisher {\r\n    constructor() {\r\n        this._topics = {};\r\n    }\r\n\r\n    on(topic, callback) {\r\n        if(!this._topics[topic]) this._topics[topic] = [];\r\n        this._topics[topic].push(callback);\r\n        return this;\r\n    }\r\n\r\n    once(topic, fn) {\r\n        let on = (...args) => {\r\n            this.off(topic, fn);\r\n            return fn.apply(this, args);\r\n        };\r\n\r\n        on.fn = fn;\r\n        this.on(topic, fn);\r\n        return this;\r\n    }\r\n\r\n    off(topic, callback) {\r\n        if(arguments.length === 0) {\r\n            // CLear all topics.\r\n            this._topics = {};\r\n            return this;\r\n        } else if(arguments.length === 1) {\r\n            // Clear single topic.\r\n            this._topics[topic] = [];\r\n            return this;\r\n        }\r\n\r\n        if(!this._topics || !this._topics[topic] || !this._topics[topic].length) {\r\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\r\n            return this;\r\n        }\r\n\r\n        let callbacks = this._topics[topic];\r\n\r\n        for(let i = 0; i < callback.length; i++) {\r\n            let cb = callbacks[i];\r\n            if(cb === callback || cb.fn === callback) {\r\n                callbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(callbacks.length === 0) {\r\n            delete this._topics[topic];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    hasEvent(topic, callback) {\r\n        if(arguments.length === 1) {\r\n            return !!this._topics[topic];\r\n        } else {\r\n            let callbacks = this._topics[topic];\r\n\r\n            for(let i = 0; i < callbacks.length; i++) {\r\n                let cb = callbacks[i];\r\n                if(cb === callback || cb.fn === callback) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    publish(topic, ...args) {\r\n        if(this._topics[topic]) {\r\n            let callbacks = this._topics[topic].slice(0);\r\n\r\n            for(let cb of callbacks) {\r\n                cb.apply(this, args);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n}","import {KeyError, ValueError} from './errors';\r\n\r\n\r\nexport const DROP = {};\r\nexport const REQUIRED = {};\r\nexport const FALSE = {};\r\nexport const TRUE = {};\r\n\r\n\r\n/**\r\n * Used to help deserialize attributes on an element.\r\n */\r\nexport default class Attribute {\r\n    static DROP = DROP;\r\n    static REQUIRED = REQUIRED;\r\n    static FALSE = FALSE;\r\n    static TRUE = TRUE;\r\n\r\n    constructor(type, missing=DROP, nullable=null, validator=null) {\r\n        this.type = type;\r\n        this.missing = missing;\r\n        this.validator = validator;\r\n        this.nullable = nullable;\r\n    }\r\n\r\n    static deserialize(data, fields) {\r\n        let r = {};\r\n\r\n        for(let key in fields) {\r\n            if(fields.hasOwnProperty(key)) {\r\n                let field = fields[key],\r\n                    missing = field ? field.missing : DROP,\r\n                    nullable = field ? field.nullable : null,\r\n                    value = data.hasOwnProperty(key) ? data[key]: undefined;\r\n\r\n                if(value === undefined) {\r\n                    if(missing === REQUIRED) {\r\n                        throw new KeyError(`${key} is required`);\r\n                    } else if(missing === DROP) {\r\n                        continue;\r\n                    } else {\r\n                        r[key] = missing;\r\n                        continue;\r\n                    }\r\n                }\r\n\r\n                if(value === null) {\r\n                    if(nullable === FALSE) {\r\n                        throw new ValueError(`${key} cannot be null`);\r\n                    } else if(nullable === TRUE || nullable === null) {\r\n                        r[key] = null;\r\n                        continue;\r\n                    } else if(nullable === DROP) {\r\n                        continue;\r\n                    } else {\r\n                        r[key] = nullable;\r\n                        continue;\r\n                    }\r\n                }\r\n\r\n                if(field) {\r\n                    if(field.type) {\r\n                        value = field.type(value);\r\n                    }\r\n\r\n                    if(field.validator) {\r\n                        value = field.validator(value);\r\n                    }\r\n                }\r\n\r\n                r[key] = value;\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n}\r\n","import {isEmptyObject} from \"./utility\";\r\n\r\n\r\nlet uuid = 1,\r\n    prefix = 'p-' + (''+Math.random()).replace(/\\D/g, '');\r\n\r\n\r\nexport class Data {\r\n    constructor() {\r\n        this.expando = `${prefix}-${uuid++}`;\r\n    }\r\n\r\n    static acceptData(owner) {\r\n        return owner.nodeType === 1 || owner.nodeType === 9 || !(+owner.nodeType);\r\n    }\r\n\r\n    cache(owner) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) {\r\n            cache = {};\r\n\r\n            if(Data.acceptData(owner)) {\r\n                if(owner.nodeType) {\r\n                    owner[this.expando] = cache;\r\n                } else {\r\n                    Object.defineProperty(owner, this.expando, {\r\n                        value: cache,\r\n                        configurable: true\r\n                    });\r\n                }\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    set(owner, key, value) {\r\n        let cache = this.cache(owner);\r\n\r\n        if(typeof key === 'object') {\r\n            for(let prop in key) {\r\n                cache[prop] = key[prop];\r\n            }\r\n        } else {\r\n            cache[key] = value;\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    get(owner, key) {\r\n        if(key === undefined) {\r\n            return this.cache(owner);\r\n        } else {\r\n            let cache = owner[this.expando];\r\n\r\n            if(cache) {\r\n                return cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    access(owner, key, value) {\r\n        if(arguments.length === 2) {\r\n            if(typeof key === 'object') {\r\n                return this.set(owner, key);\r\n            } else {\r\n                return this.get(owner, key);\r\n            }\r\n        } else if(arguments.length === 1) {\r\n            return this.cache(owner);\r\n        } else if(arguments.length === 3) {\r\n            return this.set(owner, key, value);\r\n        }\r\n    }\r\n\r\n    remove(owner, ...keys) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) return;\r\n\r\n        if(arguments.length === 1) {\r\n            if(owner.nodeType) {\r\n                owner[this.expando] = undefined;\r\n            } else {\r\n                delete owner[this.expando];\r\n            }\r\n        } else {\r\n            for(let key of keys) {\r\n                delete cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    hasData(owner) {\r\n        let cache = owner[this.expando];\r\n        return cache && !isEmptyObject(cache);\r\n    }\r\n}\r\n\r\n\r\nexport let privateCache = new Data();","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n","\r\n\r\n\r\nexport function *items(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield [key, object[key]];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *keys(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield key;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *values(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield object[key];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *enumerate(iterable) {\r\n    let i = 0;\r\n\r\n    for(let value of iterable) {\r\n        yield [i, value];\r\n    }\r\n}\r\n\r\n\r\nexport function *chain(...iterables) {\r\n    for(let iter of iterables) {\r\n        for(let value of iter) {\r\n            yield value;\r\n        }\r\n    }\r\n}","import {AssertionError} from './errors';\r\nconst REG_WHITESPACE = /\\s+/;\r\n\r\n\r\n/**\r\n * Clamps a value between a minimum and maximum values.\r\n * @param value\r\n * @param minValue\r\n * @param maxValue\r\n * @returns {*}\r\n */\r\nexport function clamp(value, minValue=null, maxValue=null) {\r\n    if(minValue !== null) {\r\n        value = Math.max(value, minValue);\r\n    }\r\n\r\n    if(maxValue !== null) {\r\n        value = Math.min(value, maxValue);\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns the first none null or undefined value.\r\n * @param args\r\n */\r\nexport function firstValue(args) {\r\n    for(let item of args) {\r\n        if(item !== null && item !== undefined) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if all of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function all(iterable) {\r\n    for(let item of iterable) {\r\n        if(!item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if any of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function any(iterable) {\r\n    for(let item of iterable) {\r\n        if(item) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\nexport function proto(descriptor) {\r\n    descriptor.placement = \"prototype\";\r\n    return descriptor;\r\n}\r\n\r\n\r\n/**\r\n * Returns a random value from an array.\r\n * @param array\r\n * @returns {*}\r\n */\r\nexport function randomChoice(array) {\r\n    return array[Math.floor(Math.random()*array.length)];\r\n}\r\n\r\n\r\n/**\r\n * Checks to see if 2 arrays are \"equal\".\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arraysEqual(array1, array2) {\r\n    if(array1 === array2) return true; // The same object.\r\n    if(array1 == null || array2 == null) return false;\r\n    if(array1.length !== array2.length) return false;\r\n\r\n    for(let i = 0, l = array1.length; i < l; i++) {\r\n        if(array1[i] !== array2[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Parses an html string into a document fragment.\r\n *\r\n * @param html\r\n * @return {DocumentFragment}\r\n */\r\nexport function parseHTML(html) {\r\n    let template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    if(template.content) {\r\n        return template.content;\r\n    } else {\r\n        // Doesn't support template tag.\r\n        let fragment = document.createDocumentFragment();\r\n        while(template.firstChild) fragment.appendChild(template.firstChild);\r\n        return fragment;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Tests to see if the object is empty.\r\n *\r\n * @param object\r\n * @return {boolean}\r\n */\r\nexport function isEmptyObject(object) {\r\n    // noinspection LoopStatementThatDoesntLoopJS\r\n    for(let key in object) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Empties a dom element.\r\n *\r\n * @param element\r\n */\r\nexport function emptyElement(element) {\r\n    while(element.firstChild) element.removeChild(element.firstChild);\r\n}\r\n\r\n\r\n/**\r\n * Adds classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function addClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.add(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Removes classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function removeClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.remove(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Assigns attributes in an object to an element.\r\n * @param element\r\n * @param attributes\r\n */\r\nexport function assignAttributes(element, attributes) {\r\n    for(let key in attributes) {\r\n        if(attributes.hasOwnProperty(key)) {\r\n            element.setAttribute(key, attributes[key]);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets an elements position relative to the document.\r\n *\r\n * @param element\r\n * @param coords\r\n */\r\nexport function setElementOffset(element, coords) {\r\n    if(coords.nodeType) {\r\n        coords = getElementOffset(element);\r\n    } else if(Array.isArray(coords)) {\r\n        coords = {\r\n            left: coords.left,\r\n            top: coords.top\r\n        };\r\n    }\r\n\r\n    let offset = element.getBoundingClientRect();\r\n\r\n    let style = getComputedStyle(element),\r\n        left = parseInt(style.left, 10) || 0,\r\n        top = parseInt(style.top, 10) || 0;\r\n\r\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\r\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\r\n}\r\n\r\n\r\n/**\r\n * Returns the top and left position of an element relative to the document.\r\n *\r\n * @param element\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getElementOffset(element) {\r\n    let box = element.getBoundingClientRect();\r\n\r\n    return {\r\n        left: box.left + window.pageXOffset,\r\n        top: box.top + window.pageYOffset\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Normalizing accessing scroll position for an element.\r\n *\r\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\r\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\r\n * @param element\r\n * @returns {{left, top}}\r\n */\r\nexport function getScroll(element) {\r\n    if(isWindow(element)) {\r\n        return {\r\n            scrollLeft: element.pageXOffset,\r\n            scrollTop: element.pageYOffset\r\n        };\r\n    } else {\r\n        return {\r\n            scrollLeft: element.scrollLeft,\r\n            scrollTop: element.scrollTop\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Test to see if the variable is a window.\r\n * @param variable\r\n * @returns {boolean}\r\n */\r\nexport function isWindow(variable) {\r\n    return variable && typeof variable === 'object' && setInterval in variable;\r\n}\r\n\r\n\r\n/**\r\n * Normalizes setting a scroll position for an element.\r\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\r\n * This methods normalizes them.\r\n * @param element - The element to scroll\r\n * @param scroll - An object with a left or a top property or both.\r\n */\r\nexport function setScroll(element, scroll) {\r\n    if(element.scrollTo) {\r\n        element.scrollTo(scroll);\r\n    } else {\r\n        element.scrollLeft = scroll.left;\r\n        element.scrollTop = scroll.top;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Matches a single dom element based on the given selector.\r\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\r\n * If a css selector is passed it will query for the element.\r\n * If a jquery object is passed it will return the first matched element.\r\n * If an element is passed it will return that element.\r\n *\r\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\r\n * Otherwise the context will be the document.\r\n *\r\n * @param selector\r\n * @param context\r\n * @returns {Element|Document|DocumentFragment}\r\n */\r\nexport function selectElement(selector, context=null) {\r\n    if(!context) {\r\n        context = document;\r\n    } else {\r\n        context = selectElement(context);\r\n    }\r\n\r\n    if(typeof selector === 'string') {\r\n        return context.querySelector(selector);\r\n    } else if(selector.jquery) {\r\n        return selector[0];\r\n    } else if(selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\r\n        return selector;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if(!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a integer.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrInt(value, radix=10, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a float.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrFloat(value, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts for parse a boolean value from a string.  Returns the defaultValue on failure if provided.  Otherwise throws\r\n * a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|*}\r\n */\r\nexport function parseBoolean(value, defaultValue=TypeError) {\r\n    if(typeof value === 'boolean') {\r\n        return value;\r\n    } else if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    } else {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseIntValue(value, radix=10, defaultValue=TypeError) {\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into integer.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseFloatValue(value, defaultValue=TypeError) {\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into float.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Runs multiple parsers and returns the first one that doesn't throw a TypeError.\r\n * @param value\r\n * @param parsers\r\n * @returns {*}\r\n */\r\nexport function parseAny(value, ...parsers) {\r\n    for(let parser of parsers) {\r\n        try {\r\n            return parser(value);\r\n        } catch(e) {\r\n            if(!(e instanceof TypeError)) {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\n    throw new TypeError(\"Could not parse value.\");\r\n}\r\n\r\n\r\n/**\r\n * Validates that the value is one of the given choices.\r\n * @param value\r\n * @param choices\r\n * @param defaultValue\r\n * @returns {TypeErrorConstructor|*}\r\n */\r\nexport function validateChoice(value, choices, defaultValue=TypeError) {\r\n    if(choices.indexOf(value) === -1) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Invalid choice.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nexport function choice(...args) {\r\n    return function(value) {\r\n        if(args.indexOf(value) === -1) {\r\n            throw new TypeError(\"Invalid Choice\");\r\n        }\r\n\r\n        return value;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns first child element that matches the test function.\r\n * @param element - Parent element\r\n * @param fn - Test Function\r\n * @returns {Element}\r\n */\r\nexport function findChild(element, fn) {\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            return child;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a filtered list of element from the children that match the test function.\r\n * @param element - Parent element.\r\n * @param fn - Test function.\r\n * @returns {Array}\r\n */\r\nexport function filterChildren(element, fn) {\r\n    let r = [];\r\n\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            r.push(child);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Returns the object own property or the default value if it does not have that property.\r\n * @param obj\r\n * @param propName\r\n * @param defaultValue\r\n * @returns {*}\r\n */\r\nexport function getOwnProperty(obj, propName, defaultValue=undefined) {\r\n    if(obj.hasOwnProperty(propName)) {\r\n        return obj[propName];\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the obj value by following it's property path.  For example getPropertyByPath(a, 'b.c.d') is equivalent to\r\n * a.b.c.d but can be passed in string form.\r\n * @param obj\r\n * @param path\r\n * @returns {*}\r\n */\r\nexport function getPropertyByPath(obj, path) {\r\n    let parts = path.split('.'),\r\n        r = obj;\r\n\r\n    for(let part of parts) {\r\n        r = r[part];\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Converts hsl values to rgb values.\r\n *\r\n * @param h\r\n * @param s\r\n * @param l\r\n * @returns {{r: *, b: *, g: *}}\r\n */\r\nexport function hslToRGB(h, s, l) {\r\n    // Must be fractions of 1\r\n    s /= 100;\r\n    l /= 100;\r\n\r\n    let c = (1 - Math.abs(2 * l - 1)) * s,\r\n        x = c * (1 - Math.abs((h / 60) % 2 - 1)),\r\n        m = l - c/2,\r\n        r = 0,\r\n        g = 0,\r\n        b = 0;\r\n\r\n    if (0 <= h && h < 60) {\r\n        r = c; g = x; b = 0;\r\n    } else if (60 <= h && h < 120) {\r\n        r = x; g = c; b = 0;\r\n    } else if (120 <= h && h < 180) {\r\n        r = 0; g = c; b = x;\r\n    } else if (180 <= h && h < 240) {\r\n        r = 0; g = x; b = c;\r\n    } else if (240 <= h && h < 300) {\r\n        r = x; g = 0; b = c;\r\n    } else if (300 <= h && h < 360) {\r\n        r = c; g = 0; b = x;\r\n    }\r\n\r\n    r = Math.round((r + m) * 255);\r\n    g = Math.round((g + m) * 255);\r\n    b = Math.round((b + m) * 255);\r\n\r\n    return {r, g, b}\r\n}\r\n\r\n\r\nexport function hsvToRGB(h, s, v) {\r\n    // h ∈ [0°, 360°]\r\n    // s ∈ [0, 1]\r\n    // v ∈ [0, 1]\r\n\r\n    let c = v*s,\r\n        hp = h / 60,\r\n        x = c * (1 - Math.abs((hp % 2) - 1)),\r\n        r = 0,\r\n        g = 0,\r\n        b = 0,\r\n        m = v - c;\r\n\r\n    if(0 <= hp && hp <= 1) {\r\n        r = c;\r\n        g = x;\r\n        b = 0;\r\n    } else if(1 < hp && hp <= 2) {\r\n        r = x;\r\n        g = c;\r\n        b = 0;\r\n    } else if(2 < hp && hp <= 3) {\r\n        r = 0;\r\n        g = c;\r\n        b = x;\r\n    } else if(3 < hp && hp <= 4) {\r\n        r = 0;\r\n        g = x;\r\n        b = c;\r\n    } else if(4 < hp && hp <= 5) {\r\n        r = x;\r\n        g = 0;\r\n        b = c;\r\n    } else if(5 < hp && hp <= 6) {\r\n        r = c;\r\n        g = 0;\r\n        b = x;\r\n    } else {\r\n        r = 255;\r\n        g = 0;\r\n        b = 0;\r\n    }\r\n\r\n    return {\r\n        r: (r + m)*255,\r\n        g: (g + m)*255,\r\n        b: (b + m)*255\r\n    };\r\n}\r\n","import MenuItem from \"./MenuItem\";\r\nimport AutoLoader from \"autoloader\";\r\nimport MenuBar from \"./MenuBar\";\r\n\r\n\r\nexport default class DropDown extends MenuItem {\r\n    constructor({toggle=\"both\", ...options}) {\r\n        super({toggle, ...options});\r\n        this.init();\r\n    }\r\n}\r\n\r\n\r\nAutoLoader.register('dropdown', (element) => DropDown.FromHTML(element));\r\n","import MenuNode from \"./MenuNode\";\r\nimport MenuItem from \"./MenuItem\";\r\nimport {addClasses} from \"core/utility\";\r\nimport {parseBoolean, parseIntValue, parseAny} from \"core/utility\";\r\nimport * as iter from \"core/iter\";\r\nimport {inherit} from './decorators';\r\nimport AutoLoader from \"autoloader\";\r\nimport Attribute, {DROP, TRUE} from \"core/attributes\";\r\n\r\n\r\nconst parseBooleanOrInt = (value) => parseAny(value, parseBoolean, parseIntValue),\r\n    timeAttribute = new Attribute(parseBooleanOrInt, DROP, TRUE),\r\n    boolAttribute = new Attribute(parseBoolean, DROP, TRUE),\r\n    stringAttribute = new Attribute(null, DROP, TRUE);\r\n\r\n\r\nexport const MENU_PARAMETERS = {\r\n    closeOnBlur: timeAttribute,\r\n    timeout: timeAttribute,\r\n    autoActivate: timeAttribute,\r\n    multiple: boolAttribute,\r\n    openOnHover: timeAttribute,\r\n    closeOnSelect: boolAttribute,\r\n    deactivateOnItemHover: boolAttribute,\r\n    delay: timeAttribute,\r\n    position: stringAttribute,\r\n    toggle: stringAttribute,\r\n    visible: boolAttribute\r\n};\r\n\r\n\r\n/**\r\n * A component for rendering nestable list of selectable items.\r\n */\r\nexport default class Menu extends MenuNode {\r\n    @inherit position;\r\n    @inherit multiple;\r\n\r\n    // Used to parse attributes on elements to their correct type during initializing by\r\n    // parsing the DOM tree.\r\n    static __attributes__ = MENU_PARAMETERS;\r\n\r\n    /**\r\n     *\r\n     * @param target {String|HTMLElement}\r\n     * @param closeOnBlur {Boolean|Number}\r\n     * @param timeout {Boolean|Number}\r\n     * @param autoActivate {Boolean|Number}\r\n     * @param multiple {Boolean|\"inherit\"|\"root\"}\r\n     * @param openOnHover {Boolean|Number}\r\n     * @param toggle {\"on\"|\"off\"|\"both\"|\"none\"}\r\n     * @param closeOnSelect {Boolean}\r\n     * @param deactivateOnItemHover {Boolean}\r\n     * @param delay {Boolean|Number}\r\n     * @param id {String}\r\n     * @param classes {String}\r\n     * @param children {Array}\r\n     * @param visible\r\n     * @param position {function|\"inherit\"|\"root\"|null|undefined}\r\n     * @param context\r\n     */\r\n    constructor({target=null, closeOnBlur=false, timeout=false, autoActivate=true, multiple=false, openOnHover=true,\r\n                    toggle=\"on\", closeOnSelect=true, deactivateOnItemHover=true, delay=0, id=null, classes=null,\r\n                    children=null, visible=false, position=\"inherit\", ...context}={}) {\r\n        super();\r\n        this.menuNodeType = \"menu\";\r\n        this.events = null;\r\n        this.MenuItemClass = MenuItem;\r\n        this.SubMenuClass = Menu;\r\n\r\n        this.closeOnBlur = closeOnBlur;\r\n        this.timeout = timeout;\r\n        this.autoActivate = autoActivate;\r\n        this.multiple = multiple;\r\n        this.openOnHover = openOnHover;\r\n        this.toggle = toggle;\r\n        this.closeOnSelect = closeOnSelect;\r\n        this.deactivateOnItemHover = deactivateOnItemHover;\r\n        this.delay = delay;\r\n        this.position = position;\r\n\r\n        if(target) {\r\n            this.element = target;\r\n        } else {\r\n            this.element = this.render(context);\r\n        }\r\n\r\n        this.isVisible = visible;\r\n\r\n        this.init();\r\n\r\n        // On child is activate\r\n        // deactivate siblings if multiple is false.\r\n        this.on('activate', (target) => {\r\n            if(target.parent === this) {\r\n                if (!this.isActive) {\r\n                    this.activate();\r\n                }\r\n\r\n                if (!this.multiple) {\r\n                    for (let activeItem of this.activeItems) {\r\n                        if (activeItem !== target) {\r\n                            activeItem.deactivate();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        this.on('deactivate', (target) => {\r\n            if(target.parent === this) {\r\n                if (this.isActive && this.activeItems.length === 0) {\r\n                    this.deactivate();\r\n                }\r\n            }\r\n        });\r\n\r\n        this.on('event.click', (event) => this.onClick(event));\r\n        this.on('event.mouseover', (event) => this.onMouseOver(event));\r\n        this.on('event.mouseout', (event) => this.onMouseOut(event));\r\n        this.on('menuitem.selected', (event) => this.onSelect(event));\r\n\r\n        if(classes) addClasses(this.element, classes);\r\n        if(id) this.element.id = id;\r\n\r\n        if(children) {\r\n            this.createItems(children);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Renders the domElement of the widget.\r\n     *\r\n     * @param arrow\r\n     * @returns {HTMLDivElement}\r\n     */\r\n    render({arrow=false}={}) {\r\n        let element = document.createElement('div'),\r\n            body = document.createElement('div');\r\n\r\n        element.className = \"menu\";\r\n        body.className = \"menu__body\";\r\n\r\n        if(arrow) {\r\n            let arrow = document.createElement('div');\r\n            arrow.className = \"menu__arrow\";\r\n            element.appendChild(arrow);\r\n        }\r\n\r\n        element.appendChild(body);\r\n        return element;\r\n    }\r\n\r\n    activate() {\r\n        if(!this.isActive) {\r\n            let parent = this.parent;\r\n\r\n            // Set isActivate flag and add active classes.\r\n            this.isActive = true;\r\n\r\n            // Register document click handler\r\n            if(this.closeOnBlur && !this._captureDocumentClick) {\r\n                this._captureDocumentClick = {\r\n                    target: document,\r\n\r\n                    onDocumentClick: (event) => {\r\n                        if(!this.element.contains(event.target)) {\r\n                            this.deactivate();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                this._captureDocumentClick.target.addEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n            }\r\n\r\n            // Notify parent that submenu activated.\r\n            if(parent) {\r\n                parent.publish('submenu.activate', this);\r\n            }\r\n\r\n            this.publish('menu.activate');\r\n\r\n            // Dispatch dom events.\r\n            this.element.dispatchEvent(new CustomEvent('menu.activate', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    deactivate() {\r\n        if(this.isActive) {\r\n            // Set flag and remove active classes.\r\n            this.isActive = false;\r\n\r\n            // Clear any active child items.\r\n            this.clearItems();\r\n\r\n            // Remove document click handler that tracks user clicks outside of menu tree.\r\n            if(this._captureDocumentClick) {\r\n                this._captureDocumentClick.target.removeEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n                this._captureDocumentClick = null;\r\n            }\r\n\r\n            // clear timers\r\n            this.clearTimer('timeout');\r\n\r\n            for(let child of this.children) {\r\n                child.clearTimer('activateItem');\r\n            }\r\n\r\n            // Notify parent that submenu deactivated.\r\n            let parent = this.parent;\r\n            if(parent) {\r\n                parent.publish('submenu.deactivate', this);\r\n            }\r\n\r\n            this.publish('menu.deactivate');\r\n\r\n            // Dispatch dom events.\r\n            this.element.dispatchEvent(new CustomEvent('menu.deactivate', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    show() {\r\n        if(!this.isVisible) {\r\n            this.isVisible = true;\r\n\r\n            if(this.position) {\r\n                this.position.call(this, this);\r\n            }\r\n\r\n            if(this.parent) this.parent.publish('submenu.show', this);\r\n            this.publish('menu.show', this);\r\n\r\n            this.element.dispatchEvent(new CustomEvent('menu.show', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        if(this.isVisible) {\r\n            this.isVisible = false;\r\n\r\n            if(this.parent) this.parent.publish('submenu.hide', this);\r\n            this.publish('menu.hide', this);\r\n\r\n            this.element.dispatchEvent(new CustomEvent('menu.hide', {\r\n                detail: this,\r\n                bubbles: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Tree methods.\r\n\r\n    createItems(data) {\r\n        for(let {submenu, ...args} of data) {\r\n            let item = new this.MenuItemClass(args);\r\n\r\n            if(submenu) {\r\n                let _submenu = new this.SubMenuClass(submenu);\r\n                item.attachSubMenu(_submenu);\r\n            }\r\n\r\n            this.append(item);\r\n        }\r\n    }\r\n\r\n    addItem(text, action=null) {\r\n        let item = new this.MenuItemClass({text, action});\r\n        this.append(item);\r\n        return this;\r\n    }\r\n\r\n    removeItem(item) {\r\n        let index = this._children.indexOf(item);\r\n        if(index !== -1) {\r\n            this._children.splice(index, 1);\r\n            if(item.element.parentElement) item.element.parentElement.removeChild(item.element);\r\n        }\r\n    }\r\n\r\n    hasItem(item) {\r\n        return this._children.indexOf(item) !== -1;\r\n    }\r\n\r\n    append(item) {\r\n        let body = this.getMenuBody();\r\n\r\n        body = body[body.length - 1];\r\n\r\n        if(item.nodeType) {\r\n            body.appendChild(item);\r\n            return this;\r\n        }\r\n\r\n        if(item.parent) {\r\n            item.parent.removeItem(item);\r\n        }\r\n\r\n        item.appendTo(body);\r\n\r\n        if(item.isMenuItem && item.isMenuItem()) {\r\n            item._parent = this;\r\n            this._children.push(item);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    get activeItems() {\r\n        let r = [];\r\n\r\n        for(let item of this.children) {\r\n            if(item.isActive) {\r\n                r.push(item);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    clearItems() {\r\n        for(let child of this.activeItems) {\r\n            child.deactivate();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns list of all menu bodies for the menu.\r\n     *\r\n     * Menu bodies are where item are appended when using function like addItem or append.  They will be added to the\r\n     * last menu body in the menu.\r\n     *\r\n     * @returns {NodeListOf<HTMLElementTagNameMap[string]> | NodeListOf<Element> | NodeListOf<SVGElementTagNameMap[string]>}\r\n     */\r\n    getMenuBody() {\r\n        return this.element.querySelectorAll(':scope > .menu__body');\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Event Handlers\r\n\r\n    onMouseOver() {\r\n        this.clearTimer('timeout');\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        if(!this.element.contains(event.originalEvent.relatedTarget)) {\r\n            if(this.isActive && typeof this.timeout === 'number' && this.timeout >= 0) {\r\n                this.startTimer('timeout', () => {\r\n                    this.deactivate();\r\n                }, this.timeout);\r\n            }\r\n        }\r\n    }\r\n\r\n    onClick(event) {\r\n        if(event.target === this) {\r\n            if(this.isActive && this.toggleOff) {\r\n                this.deactivate();\r\n            } else if(!this.isActive && this.toggleOn) {\r\n                this.activate();\r\n            }\r\n        }\r\n    }\r\n\r\n    onSelect() {\r\n        if(this.closeOnSelect && this.isActive) {\r\n            this.deactivate();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Will return true if menu items should toggle on.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get toggleOn() {\r\n        return this.toggle === 'on' || this.toggle === 'both';\r\n    }\r\n\r\n    /**\r\n     * Will return true if menu items should toggle off.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get toggleOff() {\r\n        return this.toggle === 'off' || this.toggle === 'both';\r\n    }\r\n}\r\n\r\n\r\nAutoLoader.register('menu', (element) => {\r\n    return Menu.FromHTML(element);\r\n});\r\n","import Menu from \"./Menu\";\r\nimport AutoLoader from \"autoloader\";\r\n\r\n\r\nexport default class MenuBar extends Menu {\r\n    constructor({target=null, closeOnBlur=true, timeout=false, autoActivate=false, multiple=false, openOnHover=true,\r\n                    toggle=\"both\", closeOnSelect=true, deactivateOnItemHover=true, delay=false, ...context}={}) {\r\n        super({\r\n            target, closeOnBlur, timeout, autoActivate, multiple, openOnHover,\r\n            toggle, closeOnSelect, deactivateOnItemHover, delay: false, ...context\r\n        });\r\n\r\n        this.SubMenuClass = class SubMenu extends Menu {\r\n            constructor(args={}) {\r\n                super({\r\n                    delay,\r\n                    ...args\r\n                });\r\n\r\n                this.SubMenuClass = SubMenu;\r\n            }\r\n        };\r\n\r\n        this.isVisible = true;\r\n    }\r\n\r\n    render(context) {\r\n        let element = document.createElement('div');\r\n\r\n        element.className = \"menubar\";\r\n\r\n        return element;\r\n    }\r\n\r\n    getMenuBody() {\r\n        return [this.element];\r\n    }\r\n}\r\n\r\n\r\nAutoLoader.register('menubar', (element) => MenuBar.FromHTML(element));","import MenuNode from \"./MenuNode\";\r\nimport {inherit} from \"./decorators\";\r\nimport Menu from './Menu';\r\nimport {parseAny, parseBoolean, parseIntValue} from \"../core/utility\";\r\nimport Attribute, {DROP, TRUE} from \"core/attributes\";\r\n\r\n\r\nconst parseBooleanOrInt = (value) => parseAny(value, parseBoolean, parseIntValue),\r\n    timeAttribute = new Attribute(parseBooleanOrInt, DROP, TRUE),\r\n    boolAttribute = new Attribute(parseBoolean, DROP, TRUE),\r\n    stringAttribute = new Attribute(null, DROP, TRUE);\r\n\r\n\r\nexport const ITEM_ATTRIBUTES = {\r\n    closeOnBlur: timeAttribute,\r\n    timeout: timeAttribute,\r\n    autoActivate: timeAttribute,\r\n    multiple: boolAttribute,\r\n    openOnHover: timeAttribute,\r\n    closeOnSelect: boolAttribute,\r\n    deactivateOnItemHover: boolAttribute,\r\n    delay: timeAttribute,\r\n    position: stringAttribute,\r\n    toggle: stringAttribute\r\n};\r\n\r\n\r\nexport default class MenuItem extends MenuNode {\r\n    @inherit toggle;\r\n    @inherit autoActivate;\r\n    @inherit openOnHover;\r\n    /**@type{boolean|Number|\"inherit\"|\"root\"}*/\r\n    @inherit delay = false;\r\n    @inherit position;\r\n\r\n    static __attributes__ = ITEM_ATTRIBUTES;\r\n\r\n    constructor({target, text, action, href=null, toggle=\"inherit\", autoActivate=\"inherit\", openOnHover=\"inherit\",\r\n                    delay='inherit', closeOnSelect=false, closeOnBlur=false, classes, timeout=false,\r\n                    nodeName=\"div\", position=\"inherit\", multiple=false, ...context}={}) {\r\n        super();\r\n\r\n        if(target) {\r\n            this.element = target;\r\n        } else {\r\n            this.element = this.render({text, nodeName, href, ...context});\r\n        }\r\n\r\n        if(classes) {\r\n            this.addClass(classes);\r\n        }\r\n\r\n        if(action) this.addAction(action);\r\n\r\n        this.toggle = toggle;\r\n        this.autoActivate = autoActivate;\r\n        this.openOnHover = openOnHover;\r\n        this.delay = delay;\r\n        this.closeOnSelect = closeOnSelect;\r\n        this.closeOnBlur = closeOnBlur;\r\n        this.timeout = timeout;\r\n        this.position = position;\r\n        this.multiple = multiple;\r\n        this.MenuItemClass = MenuItem;\r\n        this.SubMenuClass = Menu;\r\n\r\n        this.on('event.click', (event) => this.onClick(event));\r\n        this.on('event.mouseover', (event) => this.onMouseOver(event));\r\n        this.on('event.mouseout', (event) => this.onMouseOut(event));\r\n        this.on('menuitem.selected', (event) => this.onSelect(event));\r\n    }\r\n\r\n    /**\r\n     * Renders the domElement.\r\n     *\r\n     * @param text\r\n     * @param nodeName\r\n     * @param href\r\n     * @returns {HTMLDivElement}\r\n     */\r\n    render({text, nodeName=\"div\", href=null}={}) {\r\n        let element = document.createElement(nodeName),\r\n            button = document.createElement('a');\r\n\r\n        element.className = \"menuitem\";\r\n        button.type = \"button\";\r\n        button.innerHTML = text;\r\n        button.className = \"menuitem__button\";\r\n\r\n        if(href) {\r\n            button.href = href;\r\n        }\r\n\r\n        element.appendChild(button);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Activates the item.\r\n     *\r\n     * @param show {boolean|number} - The number of milliseconds after the item activates that the submenu will display.\r\n     */\r\n    activate(show=true) {\r\n        if(this.isActive) return;\r\n        this.isActive = true;\r\n\r\n        this.clearTimer('activateItem');\r\n\r\n        if(this.submenu) {\r\n            if(show === true) {\r\n                this.submenu.show();\r\n            } else if(typeof show === 'number' && show >= 0) {\r\n                this.startTimer('showTimer', () => {\r\n                    this.submenu.show();\r\n                }, show);\r\n            }\r\n        }\r\n\r\n        // Register document click handler\r\n        if(this.closeOnBlur && !this._captureDocumentClick) {\r\n            this._captureDocumentClick = {\r\n                target: document,\r\n\r\n                onDocumentClick: (event) => {\r\n                    if(!this.element.contains(event.target)) {\r\n                        this.deactivate();\r\n                    }\r\n                }\r\n            };\r\n\r\n            this._captureDocumentClick.target.addEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n        }\r\n\r\n        this.publish('activate', this);\r\n\r\n        if(this.parent) {\r\n            this.parent.publish('activate', this);\r\n        }\r\n\r\n        this.element.dispatchEvent(new CustomEvent('menuitem.activate', {\r\n            detail: this,\r\n            bubbles: true\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * Deactivates the item.\r\n     */\r\n    deactivate() {\r\n        if(!this.isActive) return;\r\n        this.isActive = false;\r\n        this.clearTimer('showTimer');\r\n\r\n        if(this.submenu) {\r\n            this.submenu.deactivate();\r\n            this.submenu.hide();\r\n        }\r\n\r\n        // Remove document click handler that tracks user clicks outside of menu tree.\r\n        if(this._captureDocumentClick) {\r\n            this._captureDocumentClick.target.removeEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n            this._captureDocumentClick = null;\r\n        }\r\n\r\n        this.publish('deactivate', this);\r\n        if(this.parent) this.parent.publish('deactivate', this);\r\n\r\n        this.element.dispatchEvent(new CustomEvent('menuitem.deactivate', {\r\n            detail: this,\r\n            bubbles: true\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * Triggers a select item event.\r\n     */\r\n    select() {\r\n        this.publish('selected');\r\n        this.dispatchTopic('menuitem.selected', {target: this});\r\n\r\n        this.element.dispatchEvent(new CustomEvent('menuitem.selected', {\r\n            detail: this,\r\n            bubbles: true\r\n        }));\r\n    }\r\n\r\n    /**\r\n     * Returns true if the menu node is a menu item.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    isMenuItem() {\r\n        return true;\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Action management\r\n\r\n    /**\r\n     * Adds an action that will be called when the user selects the item.\r\n     *\r\n     * @param action {Function|String} - A callback to call when the action occurs.\r\n     * @returns {Function}\r\n     */\r\n    addAction(action) {\r\n        if(typeof action === 'string') {\r\n            let fn = () => {\r\n                window.location = action;\r\n            };\r\n\r\n            this.on('selected', fn);\r\n            return fn;\r\n        } else {\r\n            this.on('selected', action);\r\n            return action;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes an action.\r\n     * @param action\r\n     */\r\n    removeAction(action) {\r\n        this.off('selected', action);\r\n    }\r\n\r\n    /**\r\n     * Tests to see if the item has an action.\r\n     * @param action\r\n     * @returns {boolean}\r\n     */\r\n    hasAction(action) {\r\n        return this.hasEvent('selected', action);\r\n    }\r\n\r\n    /**\r\n     * Removes all actions from the item.\r\n     */\r\n    clearActions() {\r\n        this.off('selected');\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Manage submenu\r\n\r\n    /**\r\n     * Attaches a submenu to the menuitem.\r\n     *\r\n     * @param submenu\r\n     */\r\n    attachSubMenu(submenu) {\r\n        if(this.submenu) {\r\n            throw new Error(\"MenuItem can only have one submenu.\");\r\n        }\r\n\r\n        if(submenu.parent) {\r\n            submenu.parent.detachSubMenu();\r\n        }\r\n\r\n        submenu._parent = this;\r\n        this._children = [submenu];\r\n\r\n        if(!submenu.element.parentElement) {\r\n            submenu.appendTo(this.element);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Detaches the submenu from the item.\r\n     * @param remove {Boolean} If true the submenu will be removed from the dom.\r\n     * @returns {*} The detached submenu.\r\n     */\r\n    detachSubMenu(remove=true) {\r\n        let submenu = this.submenu;\r\n\r\n        if(submenu) {\r\n            this._children = [];\r\n            submenu._parent = null;\r\n            if(remove) submenu.remove();\r\n        }\r\n\r\n        return submenu;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the menu item has a submenu.\r\n     * @returns {boolean}\r\n     */\r\n    hasSubMenu() {\r\n        return !!this.submenu;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the item has a submenu and that submenu is visible.\r\n     * @returns {boolean}\r\n     */\r\n    isSubMenuVisible() {\r\n        return this.hasSubMenu() ? this.submenu.isVisible : false;\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Event handlers\r\n\r\n    /**\r\n     * Handles select events.\r\n     */\r\n    onSelect() {\r\n        if(this.closeOnSelect && this.isActive) {\r\n            this.deactivate();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles click events.\r\n     * @param event\r\n     */\r\n    onClick(event) {\r\n        let isDisabled = this.getDisabled();\r\n\r\n        if(isDisabled) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if(event.target !== this) return;\r\n\r\n        if(this.parent) {\r\n            this.parent.publish('click-item', this, event);\r\n        }\r\n\r\n        if(!isDisabled) {\r\n            if (this.isActive && this.hasSubMenu() && !this.isSubMenuVisible()) {\r\n                this.submenu.show();\r\n            } else if (!this.isActive && this.toggleOn) {\r\n                this.activate();\r\n            } else if (this.isActive && this.toggleOff && this.hasSubMenu()) {\r\n                this.deactivate();\r\n            }\r\n\r\n            if (this.isActive && !this.hasSubMenu()) {\r\n                this.select();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles on mouse over events.\r\n     * @param event\r\n     */\r\n    onMouseOver(event) {\r\n        this.clearTimer('timeout');\r\n\r\n        if(event.target === this) {\r\n            // When the mouse moves on an item clear any active items in it's submenu.\r\n            if (this.submenu) {\r\n                this.submenu.clearItems();\r\n            }\r\n\r\n            if(this.element.contains(event.originalEvent.relatedTarget)) return;\r\n\r\n            let activate = this.parent && this.parent.isActive ? this.openOnHover : this.autoActivate;\r\n\r\n            if (this.parent) {\r\n                this.parent.publish('mouse-enter-item', this, event);\r\n            }\r\n\r\n            if (!this.isActive && !this.isDisabled) {\r\n                if (activate === true) {\r\n                    this.activate(typeof this.delay === 'boolean' ? !this.delay : this.delay);\r\n                } else if (typeof activate === 'number' && activate >= 0) {\r\n                    this.startTimer('activateItem', () => {\r\n                        if (!this.isDisabled) {\r\n                            this.activate(typeof this.delay === 'boolean' ? !this.delay : this.delay);\r\n                        }\r\n                    }, activate);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles on mouse out events.\r\n     *\r\n     * @param event\r\n     */\r\n    onMouseOut(event) {\r\n        if(this.element.contains(event.originalEvent.relatedTarget)) return;\r\n\r\n        this.clearTimer('activateItem');\r\n\r\n        if(this.parent) {\r\n            this.parent.publish('mouse-leave-item', this, event);\r\n        }\r\n\r\n        if(event.target === this && (!this.hasSubMenu() || !this.submenu.isVisible) && this.isActive) {\r\n            this.deactivate();\r\n        }\r\n\r\n        if(this.isActive && typeof this.timeout === 'number' && this.timeout >= 0) {\r\n            this.startTimer('timeout', () => {\r\n                this.deactivate();\r\n            }, this.timeout);\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Getters and Setters\r\n\r\n    /**\r\n     * Will return true if menu items should toggle on.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get toggleOn() {\r\n        return this.toggle === 'on' || this.toggle === 'both';\r\n    }\r\n\r\n    /**\r\n     * Will return true if menu items should toggle off.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get toggleOff() {\r\n        return this.toggle === 'off' || this.toggle === 'both';\r\n    }\r\n\r\n    get submenu() {\r\n        return this._children[0];\r\n    }\r\n\r\n    /**\r\n     * Property wrapper around attachSubMenu and detachSubMenu methods.\r\n     * @param value\r\n     */\r\n    set submenu(value) {\r\n        if(!value) {\r\n            this.detachSubMenu();\r\n        } else {\r\n            this.attachSubMenu(value);\r\n        }\r\n    }\r\n}\r\n","import Publisher from \"core/Publisher\";\r\nimport {KeyError} from \"core/errors\";\r\nimport {addClasses, removeClasses} from \"core/utility\";\r\nimport {attachMenuInstance, detachMenuInstance, hasMenuInstance, getMenuInstance} from \"./utility\";\r\nimport Attribute from \"../core/attributes\";\r\n\r\n\r\n/**\r\n * The base class for Menu and MenuItem.  Provides the utilities that are necessary to manage and transverse the menu tree\r\n * and propagate events throughout it.\r\n * @extends {Publisher}\r\n */\r\nexport default class MenuNode extends Publisher {\r\n    constructor() {\r\n        super();\r\n        this._parent = null;\r\n        this._children = [];\r\n        this._props = {};\r\n        this._timers = {};\r\n        /**\r\n         * @type {undefined|null|HTMLElement}\r\n         * @private\r\n         */\r\n        this._element = undefined;\r\n\r\n        this._isActive = false;\r\n        this._isVisible = true;\r\n\r\n        this.nodeType = null;\r\n        this.isController = false;\r\n\r\n        this.SubMenuClass = null;\r\n        this.MenuItemClass = null;\r\n    }\r\n\r\n    /**\r\n     * Initializes the event listeners for the menu tree.  Click, mouse-over and mouse-out are bound.  Events are\r\n     * delegated to their child nodes as needed.  If an event is received where the node is the direct controller of\r\n     * the event will be ignored.\r\n     */\r\n    init() {\r\n        if(this.boundEvents) return;\r\n\r\n        this.boundEvents = {};\r\n\r\n        let handleEvent = (event) => {\r\n            let target = this.getTargetNode(event.target),\r\n                wrappedEvent = {\r\n                    target,\r\n                    originalEvent: event\r\n                };\r\n\r\n            if(target.getEventDelegator() === this) {\r\n                target.dispatchTopic(`event.${event.type}`, wrappedEvent);\r\n            }\r\n        };\r\n\r\n        this.boundEvents.onMouseOver = handleEvent;\r\n        this.boundEvents.onMouseOut = handleEvent;\r\n        this.boundEvents.onClick = handleEvent;\r\n\r\n        this.element.addEventListener('click', this.boundEvents.onClick);\r\n        this.element.addEventListener('mouseover', this.boundEvents.onMouseOver);\r\n        this.element.addEventListener('mouseout', this.boundEvents.onMouseOut);\r\n        this.isController = true;\r\n    }\r\n\r\n    /**\r\n     * Unbinds all event listeners.\r\n     */\r\n    destroy() {\r\n        if(this.events && this.hasElement()) {\r\n            this.element.removeEventListener('click', this.boundEvents.onClick);\r\n            this.element.removeEventListener('onMouseOut', this.boundEvents.onMouseOut);\r\n            this.element.removeEventListener('onMouseOver', this.boundEvents.onMouseOver);\r\n        }\r\n\r\n        this.isController = false;\r\n        this.boundEvents = null;\r\n        this.element = null;\r\n    }\r\n\r\n    /**\r\n     * Renders the component.\r\n     *\r\n     * @param context {Object} Dictionary of values that may be used to render the component during templating.\r\n     * @abstract\r\n     */\r\n    render(context) {\r\n\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Actions\r\n\r\n    /**\r\n     * Reference to the nodes parent or null if it is the root node of the tree.\r\n     *\r\n     * @returns {null|MenuNode}\r\n     */\r\n    get parent() {\r\n        return this._parent || null;\r\n    }\r\n\r\n    /**\r\n     * Reference to the root node of the tree.\r\n     *\r\n     * @returns {MenuNode}\r\n     */\r\n    get root() {\r\n        let r = this,\r\n            o = this;\r\n\r\n        while(o) {\r\n            o = o.parent;\r\n\r\n            if(o) {\r\n                r = o;\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Reference to the first ancestor node in the menu tree who is a menu.  Returns null if it does not exist.\r\n     *\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get parentMenu() {\r\n        let parent = this.parent;\r\n        return parent.closest(node => node.nodeType === 'menu');\r\n    }\r\n\r\n    /**\r\n     * Reference to the first ancestor node in the menu tree who is an item. Returns null if it does not exist.\r\n     *\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get parentItem() {\r\n        let parent = this.parent;\r\n        return parent.closest(node => node.nodeType === 'menuitem' || node.nodeType === 'dropdown');\r\n    }\r\n\r\n    /**\r\n     * Reference to the next sibling node in the menu tree.\r\n     *\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get nextSibling() {\r\n        return this.getOffsetSibling(1);\r\n    }\r\n\r\n    /**\r\n     * Reference to the previous sibling node in the menu tree.\r\n     *\r\n     * @returns {MenuNode|null}\r\n     */\r\n    get previousSibling() {\r\n        return this.getOffsetSibling(-1);\r\n    }\r\n\r\n    /**\r\n     * A list of all children for the node.\r\n     *\r\n     * @returns {[]}\r\n     */\r\n    get children() {\r\n        return this._children.slice(0);\r\n    }\r\n\r\n    /**\r\n     * True if the node is active.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get isActive() {\r\n        return this._isActive;\r\n    }\r\n\r\n    /**\r\n     * Sets the isActive state for the node.\r\n     *\r\n     * Will toggle the active class on the root element as needed.\r\n     *\r\n     * @param value\r\n     */\r\n    set isActive(value) {\r\n        value = !!value;\r\n\r\n        if(value !== this._isActive) {\r\n            if(value) {\r\n                this.element.classList.add('active');\r\n            } else {\r\n                this.element.classList.remove('active');\r\n            }\r\n\r\n            this._isActive = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if the current node is disabled.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get isDisabled() {\r\n        return this.element.classList.contains('disabled');\r\n    }\r\n\r\n    /**\r\n     * Sets the disabled state for the current node.\r\n     *\r\n     * @param value\r\n     */\r\n    set isDisabled(value) {\r\n        value = !!value;\r\n\r\n        if(value !== this.isDisabled) {\r\n            if(value) {\r\n                this.element.classList.add('disabled');\r\n            } else {\r\n                this.element.classList.remove('disabled');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if the current node is disabled or if any ancestor node is disabled.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    getDisabled() {\r\n        let o = this;\r\n\r\n        while(o) {\r\n            if(o.isDisabled) {\r\n                return true;\r\n            }\r\n\r\n            o = o.parent;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the current node is visible.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get isVisible() {\r\n        return this._isVisible;\r\n    }\r\n\r\n    /**\r\n     * Sets the visible state of the node.\r\n     *\r\n     * @param value\r\n     */\r\n    set isVisible(value) {\r\n        value = !!value;\r\n\r\n        if(value !== this._isVisible) {\r\n            if(value) {\r\n                this.element.classList.remove('hidden');\r\n            } else {\r\n                this.element.classList.add('hidden');\r\n            }\r\n\r\n            this._isVisible = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if the nodes element is defined.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    hasElement() {\r\n        return !!this._element;\r\n    }\r\n\r\n    /**\r\n     * Gets the root HTMLElement of the node.\r\n     *\r\n     * @returns {HTMLElement}\r\n     */\r\n    get element() {\r\n        if(this._element === undefined) {\r\n            this.element = this.render({});\r\n        }\r\n\r\n        return this._element;\r\n    }\r\n\r\n    /**\r\n     * Sets the root HTMLElement of the node.\r\n     *\r\n     * @param element\r\n     */\r\n    set element(element) {\r\n        if(typeof element === 'string') {\r\n            element = document.querySelector(element);\r\n        } else if(typeof element === 'function') {\r\n            element = element.call(this);\r\n        }\r\n\r\n        if(this._element === element) return;\r\n\r\n        if(hasMenuInstance(element)) {\r\n            throw new Error(\"Element is already bound to menu controller\");\r\n        }\r\n\r\n        if(this._element) {\r\n            detachMenuInstance(this._element);\r\n            this._element = undefined;\r\n        }\r\n\r\n        attachMenuInstance(element, this);\r\n        this._element = element;\r\n    }\r\n\r\n    /**\r\n     * Return the sibling offset from the current node.\r\n     *\r\n     * @param offset\r\n     * @returns {null|MenuNode}\r\n     */\r\n    getOffsetSibling(offset=1) {\r\n        let parent = this.parent;\r\n\r\n        if(parent) {\r\n            let children = parent.children,\r\n                i = children ? children.indexOf(this) : -1;\r\n\r\n            if(i >= 0) {\r\n                i += offset;\r\n\r\n                if(i >= 0) {\r\n                    return children[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Appends the component to the target selector.\r\n     *\r\n     * @param selector {string|HTMLElement|{append}}\r\n     */\r\n    appendTo(selector) {\r\n        if(typeof selector === 'string') {\r\n            document.querySelector(selector).appendChild(this.element);\r\n        } else if(selector.appendChild) {\r\n            selector.appendChild(this.element);\r\n        } else if(selector.append) {\r\n            selector.append(this.element);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes the component from the dom.\r\n     *\r\n     * @returns {MenuNode}\r\n     */\r\n    remove() {\r\n        if(this.element.parentElement) {\r\n            this.element.parentElement.removeChild(this.element);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Returns the closest MenuNode up the tree that matches the provided test function.\r\n     *\r\n     * @param fn {function(node)}\r\n     * @returns {MenuNode|null}\r\n     */\r\n    closest(fn) {\r\n        let o = this;\r\n\r\n        while(o) {\r\n            if(fn.call(this, o)) return o;\r\n            o = o.parent;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the provided node is a descendant of the current node.\r\n     *\r\n     * @param node\r\n     * @returns {boolean}\r\n     */\r\n    contains(node) {\r\n        while(node) {\r\n            if(node.parent === this) {\r\n                return true;\r\n            }\r\n\r\n            node = node.parent;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Yields all descendants.\r\n     *\r\n     * @returns {IterableIterator<MenuNode>}\r\n     */\r\n    *getDescendants() {\r\n        for(let child of this.children) {\r\n            yield child;\r\n\r\n            for(let grandchild of child.getDescendants()) {\r\n                yield grandchild;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a timer with the given name.  Only one timer with that name can be active per object.\r\n     * If another timer with the same name is created the previous one will be cleared if `clear` is true.\r\n     * Otherwise if `clear` is false a KeyError with be thrown.  The callback function for the timer is called\r\n     * with the current object as it's `this` and the timer object as it's only parameter following the pattern\r\n     *\r\n     * this::fn(timer);\r\n     *\r\n     * @param name {String} The name of the timer.\r\n     * @param fn {function(timer)} Function to call.\r\n     * @param time {Number} The time to wait.\r\n     * @param interval If true setInterval will be used instead of setTimeout\r\n     * @param clear If true an previous timers of the same name will be canceled before creating a new one.  Otherwise a KeyError will be thrown.\r\n     * @returns {{status, id, cancel, type}}\r\n     */\r\n    startTimer(name, fn, time, interval=false, clear=true) {\r\n        if(clear && this._timers[name]) {\r\n            this._timers[name].cancel();\r\n        } else if(this._timers[name]) {\r\n            throw new KeyError(\"Timer already exists.\");\r\n        }\r\n\r\n        let timer = this._timers[name] = {\r\n            status: 'running',\r\n            id: null,\r\n            cancel: null,\r\n            type: null,\r\n        };\r\n\r\n        if(interval) {\r\n            let id = timer.id = setInterval((timer) => {\r\n                fn.call(this, timer);\r\n            }, time, timer);\r\n\r\n            timer.type = 'interval';\r\n\r\n            timer.cancel = () => {\r\n                if(this._timers[name] === timer) {\r\n                    clearInterval(id);\r\n                    delete this._timers[name];\r\n                    timer.status = 'canceled';\r\n                }\r\n            };\r\n        } else {\r\n            let id = timer.id = setTimeout((timer) => {\r\n                delete this._timers[name];\r\n                timer.status = 'complete';\r\n                fn.call(this, timer);\r\n            }, time, timer);\r\n\r\n            timer.type = 'timeout';\r\n\r\n            timer.cancel = () => {\r\n                if(this._timers[name] === timer) {\r\n                    clearTimeout(id);\r\n                    delete this._timers[name];\r\n                    timer.status = 'canceled';\r\n                }\r\n            };\r\n        }\r\n\r\n        return timer;\r\n    }\r\n\r\n    /**\r\n     * Clears the timer with the given name.\r\n     *\r\n     * @param name\r\n     * @returns {boolean} True if a timer was canceled. False if not timer exists.\r\n     */\r\n    clearTimer(name) {\r\n        if(this._timers[name]) {\r\n            this._timers[name].cancel();\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns the timer object if it exists.\r\n     *\r\n     * @param name\r\n     * @returns {*}\r\n     */\r\n    getTimer(name) {\r\n        return this._timers[name];\r\n    }\r\n\r\n    /**\r\n     * Returns the MenuNode that is responsible for delegating the events.\r\n     *\r\n     * @returns {null|{isController}|any}\r\n     */\r\n    getEventDelegator() {\r\n        let o = this.element;\r\n\r\n        while(o) {\r\n            let instance = getMenuInstance(o);\r\n\r\n            if(instance && instance.isController) {\r\n                return instance;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns the target node for the given HTMLElement in the current menu tree.\r\n     *\r\n     * @param target {HTMLElement}\r\n     * @returns {null|MenuNode}\r\n     */\r\n    getTargetNode(target) {\r\n        let o = target;\r\n\r\n        while(o) {\r\n            let instance = getMenuInstance(o);\r\n\r\n            if(instance) {\r\n                return instance;\r\n            }\r\n\r\n            if(o === this.element) {\r\n                break;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns the target item for the given HTMLElement in the current menu tree.\r\n     *\r\n     * @param target\r\n     * @returns {null}\r\n     */\r\n    getTargetItem(target) {\r\n        let o = target;\r\n\r\n        while(o) {\r\n            let instance = getMenuInstance(o);\r\n\r\n            if(instance && instance.isMenuItem()) {\r\n                return instance;\r\n            }\r\n\r\n            if(o === this.element) {\r\n                break;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns the target menu for the given HTMLElement in the current menu tree.\r\n     *\r\n     * @param target\r\n     * @returns {null}\r\n     */\r\n    getTargetMenu(target) {\r\n        let o = target;\r\n\r\n        while(o) {\r\n            let instance = getMenuInstance(o);\r\n\r\n            if(instance && instance.isMenu()) {\r\n                return instance;\r\n            }\r\n\r\n            if(o === this.element) {\r\n                break;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the node is a menu item.  Should be overridden by subclasses that are menu item like.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    isMenuItem() {\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the node is a menu.  Method should be defined by any object that should be treated like a menu.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    isMenu() {\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Publishes the topic to itself and bubbles up the menu tree.\r\n     *\r\n     * @param topic\r\n     * @param args\r\n     * @returns {MenuNode}\r\n     */\r\n    dispatchTopic(topic, ...args) {\r\n        let o = this;\r\n\r\n        while(o) {\r\n            o.publish(topic, ...args);\r\n            o = o.parent;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Tree functions\r\n\r\n    /**\r\n     * Parses the dom and initializes any menu or menuitem elements that are found.\r\n     */\r\n    parseDOM() {\r\n        if(this._children.length) {\r\n            for(let child of this._children) {\r\n                child.invalidateTree();\r\n            }\r\n        }\r\n\r\n        let walk = (node) => {\r\n            for(let child of node.children) {\r\n                let role = child.dataset.role;\r\n\r\n                if(hasMenuInstance(child)) {\r\n                    let instance = getMenuInstance(child);\r\n                    instance._parent = this;\r\n                    this._children.push(instance);\r\n                    instance.parseDOM();\r\n                } else if(role === 'menu') {\r\n                    let menu = this.SubMenuClass.FromHTML(child);\r\n                    this._children.push(menu);\r\n                    menu._parent = this;\r\n                    menu.parseDOM();\r\n                } else if(role === 'menuitem') {\r\n                    let item = this.MenuItemClass.FromHTML(child);\r\n                    this._children.push(item);\r\n                    item._parent = this;\r\n                    item.parseDOM();\r\n                } else {\r\n                    walk(child);\r\n                }\r\n            }\r\n        };\r\n\r\n        walk(this.element);\r\n    }\r\n\r\n    /**\r\n     * Invalidates all parent and child references.\r\n     */\r\n    invalidateTree() {\r\n        this._parent = null;\r\n\r\n        for(let child of this.children) {\r\n            child.invalidateTree();\r\n        }\r\n\r\n        this._children = [];\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // Getters and Setters\r\n\r\n    get id() {\r\n        return this.element.id;\r\n    }\r\n\r\n    set id(id) {\r\n        if(this.element) this.element.id = id;\r\n    }\r\n\r\n    get classList() {\r\n        return this.element.classList;\r\n    }\r\n\r\n    get dataset() {\r\n        return this.element.dataset;\r\n    }\r\n\r\n    get style() {\r\n        return this.element.style;\r\n    }\r\n\r\n    set style(style) {\r\n        this.element.style = style;\r\n    }\r\n\r\n    addClass(classes) {\r\n        return addClasses(this.element, classes);\r\n    }\r\n\r\n    removeClass(classes) {\r\n        return removeClasses(this.element, classes);\r\n    }\r\n\r\n    /**\r\n     * Returns the bound menu controller for the provided node.\r\n     *\r\n     * @static\r\n     * @param element {HTMLElement}\r\n     */\r\n    static getInstance(element) {\r\n        return getMenuInstance(element);\r\n    }\r\n\r\n    /**\r\n     * Constructs a menu node element for an HTMLElement.\r\n     * @param element {HTMLElement|string}\r\n     * @returns {MenuNode}\r\n     * @constructor\r\n     */\r\n    static FromHTML(element) {\r\n        if(typeof element === 'string') {\r\n            element = document.querySelector(element);\r\n        }\r\n\r\n        let parameters = Attribute.deserialize(element.dataset, this.__attributes__);\r\n\r\n        parameters.target = element;\r\n\r\n        let instance = new this(parameters);\r\n\r\n        instance.parseDOM();\r\n\r\n        return instance;\r\n    }\r\n}","/**\r\n * Decorates a property so that it can take special keywords to inherit it's value up the parent tree.\r\n *\r\n * If it's value is \"inherit\" or \"root\" special actions are taken.\r\n *\r\n * On \"inherit\" the getter will use this.parent[key] as it's value or return undefined.\r\n * On \"root\" the getter will use this.root[key] as it's value or return undefined.\r\n *\r\n * If the value is anything else is behaves like normal.\r\n *\r\n * Usage:\r\n *  @inherit myField = <default value>;\r\n *\r\n * @param target\r\n * @returns {{kind: string, placement: string, descriptor: {set(*): void, enumerable: boolean, get(): (*|*), configurable: boolean}, key: *}|undefined|*}\r\n */\r\nexport function inherit(target) {\r\n    let key = target.key,\r\n        initializer = target.initializer || function() { return undefined };\r\n\r\n    return {\r\n        kind: 'method',\r\n        placement: 'prototype',\r\n        key: target.key,\r\n        descriptor: {\r\n            configurable: true,\r\n            enumerable: false,\r\n\r\n            get() {\r\n                let value = this._props[key];\r\n\r\n                if(value === 'inherit' || value === undefined) {\r\n                    value = this.parent ? this.parent[key] : undefined;\r\n                } else if(value === 'root') {\r\n                    let root = this.root;\r\n                    value = root ? root[key] : undefined;\r\n                } else {\r\n                    return value;\r\n                }\r\n\r\n                if(value === undefined) value = initializer ? initializer() : undefined;\r\n                return value;\r\n            },\r\n\r\n            set(value) {\r\n                this._props[key] = value;\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\n\r\nexport function publishTargetEvent(topic, bubble=false) {\r\n    return function(descriptor) {\r\n        let {value, ...desc} = descriptor.descriptor;\r\n\r\n        function wrapper(event) {\r\n            if(this.getTargetNode(event.target) === this) {\r\n                if(bubble) {\r\n                    this.dispatchTopic(topic, this, event);\r\n                } else {\r\n                    this.publish(topic, this, event);\r\n                }\r\n\r\n                return value.call(this, event);\r\n            }\r\n        }\r\n\r\n        return {\r\n            placement: descriptor.placement,\r\n            key: descriptor.key,\r\n            kind: descriptor.kind,\r\n            descriptor: {\r\n                value: wrapper,\r\n                ...desc\r\n            }\r\n        };\r\n    };\r\n}","export const MENU_MAP = new WeakMap();\r\n\r\n\r\nexport function attachMenuInstance(element, instance) {\r\n    if(instance === null) {\r\n        return detachMenuInstance(element);\r\n    }\r\n\r\n    if(MENU_MAP.get(element)) {\r\n        throw new Error(\"Element is already bound to menu node instance.\");\r\n    }\r\n\r\n    MENU_MAP.set(element, instance);\r\n}\r\n\r\n\r\nexport function detachMenuInstance(element) {\r\n    MENU_MAP.delete(element);\r\n}\r\n\r\n\r\nexport function hasMenuInstance(element) {\r\n    return MENU_MAP.has(element);\r\n}\r\n\r\n\r\nexport function getMenuInstance(element) {\r\n    return MENU_MAP.get(element);\r\n}\r\n"],"sourceRoot":""}