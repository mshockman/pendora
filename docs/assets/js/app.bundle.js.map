{"version":3,"sources":["webpack://pendora/webpack/universalModuleDefinition","webpack://pendora/webpack/bootstrap","webpack://pendora/./docs/js/app.js","webpack://pendora/./src/app.js","webpack://pendora/./src/autoloader.js","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/data.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/serialize/Attribute.js","webpack://pendora/./src/core/serialize/AttributeSchema.js","webpack://pendora/./src/core/serialize/helper.js","webpack://pendora/./src/core/serialize/index.js","webpack://pendora/./src/core/serialize/types.js","webpack://pendora/./src/core/serialize/validators.js","webpack://pendora/./src/core/ui/position.js","webpack://pendora/./src/core/utility/debounce.js","webpack://pendora/./src/core/utility/decorators.js","webpack://pendora/./src/core/utility/dom.js","webpack://pendora/./src/core/utility/index.js","webpack://pendora/./src/core/utility/iter.js","webpack://pendora/./src/core/utility/math.js","webpack://pendora/./src/core/utility/object.js","webpack://pendora/./src/core/vectors/RGBA.js","webpack://pendora/./src/core/vectors/Rect.js","webpack://pendora/./src/core/vectors/Vec2.js","webpack://pendora/./src/core/vectors/Vec3.js","webpack://pendora/./src/core/vectors/Vec4.js","webpack://pendora/./src/core/vectors/index.js","webpack://pendora/./src/forms/FormWidgetBase.js","webpack://pendora/./src/forms/HiddenInputWidget.js","webpack://pendora/./src/forms/InputWidget.js","webpack://pendora/./src/forms/SelectInputWidget.js","webpack://pendora/./src/forms/index.js","webpack://pendora/./src/menu/ContextMenu.js","webpack://pendora/./src/menu/DropDown.js","webpack://pendora/./src/menu/Menu.js","webpack://pendora/./src/menu/MenuBar.js","webpack://pendora/./src/menu/MenuItem.js","webpack://pendora/./src/menu/MenuNode.js","webpack://pendora/./src/menu/Select2.js","webpack://pendora/./src/menu/SlideMenu.js","webpack://pendora/./src/menu/index.js","webpack://pendora/./src/menu/loaders.js","webpack://pendora/./src/menu/positioners.js","webpack://pendora/./src/menu/utility.js"],"names":["__webpack_public_path__","console","log","app","Application","window","addEventListener","document","body","dataset","page","init","classes","isLoaded","register","key","hasOwnProperty","registerPage","name","importer","Error","context","pageClassImporter","PageClass","load","AutoLoader","registry","func","querySelector","widgets","querySelectorAll","element","components","split","windowBind","c","parts","cls","namespace","length","initialized","privateCache","get","set","fn","loader","Toggle","_onClick","event","onClick","removeEventListener","target","toggle","method","startsWith","substr","classList","instance","getInitializedInstance","autoLoad","TOPICS","Symbol","STOP","Publisher","topic","callback","push","on","off","args","apply","arguments","callbacks","i","cb","splice","slice","e","uuid","prefix","Math","random","replace","Data","expando","owner","cache","acceptData","nodeType","Object","defineProperty","value","configurable","prop","undefined","keys","isEmptyObject","ExtendableError","message","constructor","captureStackTrace","stack","IndexError","KeyError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","UnitError","assert","condition","Attribute","type","missing","DROP","nullable","validator","data","REQUIRED","FALSE","TRUE","NULL","deserialize","AttributeSchema","attributes","r","REG_COMMA","Type","Integer","radix","allowInfinity","trim","Infinity","parseInt","Number","isNaN","Float","fixed","toFixed","parseFloat","Bool","toLowerCase","Str","allow_empty","transform","CSV","separator","join","CompoundType","types","t","choice","choices","indexOf","minLength","maxLength","l","range","min","max","regex","pattern","flags","reg","RegExp","test","all","validators","any","regMatrix","getOffsetElement","o","parentElement","position","getComputedStyle","getClientRect","Rect","getBoundingOffsetRect","offsetParent","offsetRect","rect","getRootContainingClientRect","getBoundingClientRect","left","top","right","bottom","getBoundingDocumentRect","pageXOffset","pageYOffset","getTranslation","m","exec","Vec3","setTranslation","x","y","z","style","getCssPosition","Vec2","setCssPosition","setElementClientPosition","positionType","box","deltaX","deltaY","current","cssPosition","clientRectToDocumentSpace","fromRect","documentRectToClientSpace","snapToGrid","gridSize","roundingFunction","round","convertDomRectToObject","domRect","getPointOnElement","referenceElement","point","offset","constrain","Array","isArray","clamp","getSubBoundingBox","width","height","getDistanceBetweenRects","rect1","rect2","vec1","vec2","isXOverlapping","isYOverlapping","abs","x1","y1","x2","y2","sqrt","pow","getElementOffset","setElementOffset","coords","debounce","wait","timeout","later","clearTimeout","setTimeout","proto","descriptor","placement","REG_WHITESPACE","parseHTML","html","template","createElement","innerHTML","content","fragment","createDocumentFragment","firstChild","appendChild","createFragment","addClasses","add","removeClasses","remove","assignAttributes","setAttribute","selectElement","selector","jquery","emptyElement","removeChild","getScroll","isWindow","scrollLeft","scrollTop","setScroll","scroll","scrollTo","findChild","child","matches","filterChildren","variable","setInterval","closest","contains","items","values","enumerate","chain","object","iterable","iterables","iter","firstValue","item","minValue","maxValue","modulo","mod","calcDistance","randomChoice","array","floor","arraysEqual","array1","array2","getOwnProperty","obj","propName","defaultValue","getPropertyByPath","path","part","rangeFindItem","predicate","startingIndex","endingIndex","regPercentage","RGBA","g","b","a","substring","Vec4","regWhitespace","regPositionPart","positionShortHandValues","topleft","topright","bottomleft","bottomright","domElement","bb","assign","_new","container","anchor","getAnchor","starting","pos","fit","closestX","closestY","distance","axis","my","at","of","inside","collision","evaluatePositionString","reference","translate","containsX","reflect","getCenterPoint","containsY","fitX","fitY","string","rx","ry","_evaluatePositionStringComponent","offsetX","offsetY","direction","p","restore","state","innerWidth","innerHeight","scrollX","scrollY","documentElement","clientWidth","clientHeight","vec4","vertex","vec3","toString","hex","valueOrVec4","FormWidgetBase","append","id","getName","setName","getValue","setValue","MultiHiddenInputWidget","display","_name","inputs","_value","v","input","map","render","HiddenInputWidget","InputWidget","placeholder","SelectInputWidget","select","multiple","hidden","isHidden","option","selected","options","found","ContextMenu","targetMenu","closeOnBlur","autoActivate","openOnHover","closeOnSelect","delay","enableKeyboardNavigation","positioner","positioners","isVisible","registerTopics","parseDOM","initKeyboardNavigation","_onContextMenu","isActive","deactivate","hide","preventDefault","show","space","clientX","clientY","config","MenuItem","Menu","_targetMenu","AbstractMenu","DropDown","INT_OR_BOOL_TYPE","BOOL_TYPE","MENU_ATTRIBUTE_SCHEMA","visible","_isNavigableChild","isNavigable","_findFirstNavigableChild","find","_findAllNavigableChildren","filter","_isTopicInit","parent","activate","_timer","activeChild","onMouseOver","onMouseOut","onSelect","_captureDocumentClick","onDocumentClick","publish","dispatchTopic","dispatchEvent","CustomEvent","detail","bubbles","clearActiveChild","clearTimer","call","submenu","constructMenuItem","_submenu","constructSubMenu","attachSubMenu","text","action","hasItem","removeChildMenuNode","hasChild","getMenuBody","removeItem","appendTo","isMenuItem","appendChildMenuNode","bodies","prototype","originalEvent","relatedTarget","startTimer","showSubMenu","hasSubMenu","allowTargetKeys","_depth","ARROW_BACK","ARROW_FORWARD","ARROW_NEXT","ARROW_PREVIOUS","arrowKeys","arrowKeyPressed","index","_navigateToItem","isRoot","ret","firstSubMenuChild","_navigate","hideSubMenu","childToActivate","firstEnabledChild","targetChild","targetKey","isDisabled","root","MenuNode","arrow","events","createItems","MenuBarItem","nodeName","href","btn","button","textContainer","tabIndex","MenuBar","SideMenuBar","STRING_TYPE","MENU_ITEM_ATTRIBUTE_SCHEMA","AbstractMenuItem","clearSubItemsOnHover","autoDeactivateItems","location","hasEvent","detachSubMenu","getDisabled","isDefaultPrevented","isSubMenuVisible","trigger","altTextContainer","addAction","innerText","_eventListeners","_keyboardNavigationEnabled","isController","handleEvent","getTargetNode","wrappedEvent","getEventDelegator","onKeyDown","clearAllRegisteredEvents","menuNode","getClosestMenuNodeByElement","containsElement","getDescendants","grandchild","getMenuInstance","isMenu","time","interval","clear","cancel","timer","status","clearInterval","listener","bubble","activeElement","blur","activeItem","parentMenu","_rootKeyDown","walk","hasMenuInstance","hasChildMenuNode","hasMenuItemAttribute","hasAttribute","hasMenuAttribute","menu","invalidateTree","getOffsetSibling","detachMenuInstance","attachMenuInstance","_registerAllEvents","getAttributes","copyNodeData","targetNode","referenceNode","className","createOption","createOptGroup","label","title","SelectOption","targetChildren","textNode","createTextNode","isSelected","topicData","multiSelect","isSelect","isFiltered","FILTERS","istartsWith","icontains","SelectMenu","filterDelay","filterPlaceholderText","enableShiftSelect","enableCtrlToggle","clearOldSelection","header","footer","filterInput","_initFilter","selection","_lastClick","shiftKey","targetIndex","lastIndex","startIndex","change","ctrlKey","changed","clearFilter","getFilteredItems","getClosestMenuByElement","filterContainer","insertBefore","AbstractSelect","widget","refreshUI","selectedOptions","replaceChild","RICH_SELECT_SCHEMA","maxItems","RichSelect","TEMPLATE","textbox","readOnly","_label","labels","_maxItems","MultiComboBox","optionToPillMap","WeakMap","pilltoOptionMap","_filterTimer","_applyFilter","getFilterValue","exitButton","pill","optionDeselect","focus","setFilterValue","pills","firstItem","_refreshUIId","requestAnimationFrame","_buildChoicePill","ComboBox","hasFilter","_destroyFilter","_filterMethod","applyFilter","f","onInput","SlideMenu","modal","dismiss","FromHTML","setTargetMenu","setContainer","ConstructFromHTML","opposites","center","middle","getInheritedPosition","_applyPosition","overlay","overlayRect","targetRect","containerRect","myX","myY","atX","atY","methodX","methodY","refresh","dropdown","topLevelPosition","defaultPosition","containerElement","contextMenuPosition","DROPDOWN","SIDE_MENU","CONTEXT_MENU","MENU_MAP","has","getClosestMenuItemByElement"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,gDAAgD;QAChD;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;;;QAGA;;QAEA;QACA,iCAAiC;;QAEjC;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,MAAM;QACN;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,wBAAwB,kCAAkC;QAC1D,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,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","file":"app.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pendora\"] = factory();\n\telse\n\t\troot[\"pendora\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"chunk-\" + ({}[chunkId]||chunkId) + \".bundle.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tests/dist/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonppendora\"] = window[\"webpackJsonppendora\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"@babel/polyfill\";\nimport Application from \"app\";\nimport \"autoloader\";\nimport \"menu\";\n\n// noinspection JSUnresolvedVariable\n__webpack_public_path__ = \"/pendora/assets/js/\";\nconsole.log(\"HERE\");\n\n\nlet app = new Application({\n    // 'menubar': () =>  import(\"./pages/menubar_example.js\"),\n    // 'menu_examples': () =>  import(\"./pages/menu_examples.js\"),\n    'menu_page_index': () =>  import(\"./pages/menus/page_index\"),\n    'documentation_dropdown': () => import(\"./pages/documentation/dropdown\"),\n    'test_draggable': () => import(\"./pages/documentation/test_draggable\"),\n    'test_sortable': () => import(\"./pages/documentation/test_sortable\"),\n    'test_resizeable': () => import(\"./pages/documentation/test_resizeable\"),\n    'test_animation': () => import(\"./pages/documentation/test_animation\"),\n    'test_positioning': () => import(\"./pages/documentation/test_positioning\"),\n    'doc_datagrid_dataheader': () => import(\"./pages/documentation/datagrid/page_dataheader\"),\n});\n\n\nwindow.addEventListener('load', async () => {\n    if(document.body.dataset.page) {\n        await app.init(document.body.dataset.page);\n    }\n});\n\n\nwindow.app = app;\n","\n\n/**\n * Page loader class.\n *\n * Allows for the class to registers application pages that can be dynamically loaded when needed.\n */\nexport default class Application {\n    constructor(classes) {\n        this.classes = {};\n        this.page = null;\n        this.isLoaded = false;\n        this.register(classes);\n    }\n\n    /**\n     * Register an dictionary of page importers.\n     * @param classes\n     */\n    register(classes) {\n        for(let key in classes) {\n            if(classes.hasOwnProperty(key)) {\n                this.registerPage(key, classes[key]);\n            }\n        }\n    }\n\n    /**\n     * Register a single page.\n     * @param name\n     * @param importer\n     */\n    registerPage(name, importer) {\n        if(this.classes.hasOwnProperty(name) && this.classes[name]) {\n            throw new Error(\"Duplicate page class registered\");\n        }\n\n        this.classes[name] = importer;\n    }\n\n    /**\n     * Loads the page with the given context.\n     * @param page\n     * @param context\n     */\n    async init(page, context) {\n        if(this.page) {\n            throw new Error(\"Page is already loaded\");\n        }\n\n        // window.addEventListener('load', async () => {\n        //     this.isLoaded = true;\n        //\n        //     const pageClassImporter = this.classes[page],\n        //         PageClass = (await pageClassImporter()).default;\n        //\n        //     this.page = new PageClass(context);\n        //     if(this.page.load) this.page.load();\n        // });\n\n        this.isLoaded = true;\n\n        const pageClassImporter = this.classes[page],\n            PageClass = (await pageClassImporter()).default;\n\n        this.page = new PageClass(context);\n        if(this.page.load) this.page.load();\n    }\n}\n","import {privateCache} from \"./core/data\";\n\n\nexport default class AutoLoader {\n    static autoLoad = true;\n\n    constructor() {\n        this.registry = {};\n    }\n\n    register(name, func) {\n        if(this.registry.hasOwnProperty(name) && this.registry[name]) {\n            throw new Error(\"Duplicate component registered\");\n        }\n\n        this.registry[name] = func;\n    }\n\n    load(context) {\n        if(!context) {\n            context = document;\n        } else if(typeof context === 'string') {\n            context = document.querySelector(context);\n        }\n\n        let widgets = context.querySelectorAll('[data-init]');\n\n        for(let element of widgets) {\n            let components = element.dataset.init.split(/\\s+/),\n                windowBind = element.dataset.windowBind;\n\n            for(let c of components) {\n                let parts = c.split(':'),\n                    cls = this.registry[parts[0]],\n                    namespace = parts.length > 1 ? parts[1] : '',\n                    key = namespace ? `${parts[0]}.${parts[1]}` : parts[0];\n\n                if(cls) {\n                    let initialized = privateCache.get(element, 'initialized');\n\n                    if(!initialized) {\n                        initialized = {};\n                        privateCache.set(element, 'initialized', initialized);\n                    }\n\n                    if(!initialized[key]) {\n                        initialized[key] = cls(element);\n\n                        if(windowBind) {\n                            window[windowBind] = initialized[key];\n                        }\n                    } // else component is already loaded do nothing.  Could be encountered if load is called multiple times.\n                } else {\n                    throw new Error(`No component registered called ${key}`);\n                }\n            }\n        }\n    }\n\n    /**\n     *  Registers a loader function will the global autoloader instance.\n     *\n     * @param name {String}\n     * @param fn {function(HTMLElement) : Object}\n     */\n    static register(name, fn) {\n        return this.loader.register(name, fn);\n    }\n\n    static load(context) {\n        return this.loader.load(context);\n    }\n\n    static getInitializedInstance(element, name) {\n        let initialized = privateCache.get(element, 'initialized');\n\n        if(initialized) {\n            return initialized[name] || null;\n        } else {\n            return null;\n        }\n    }\n}\n\n\n/**\n * A UI class that adds the toggle behavior to an element.\n * The Toggle behavior is added using the autoloader using `data-init=\"toggle\"` attribute.\n * It will target another element and attempt to call the toggle method of an initialized component.\n *\n * The toggle class takes two configuration attributes, data-target and data-toggle.\n *\n * data-target determines what element is targeted.  It takes a css selector that will be passed to document.querySelector().\n *\n * data-toggle determines the initialized component to toggle.  It takes the name of the component registered with AutoLoader.\n * For instance if you are toggling on a modal you should pass modal here.\n *\n * If the component does not offer a toggle method and another method needs to be called, you can set the optional\n * attribute data-method.  This attribute determines what method is called and defaults to the string toggle.\n *\n * Example Usage:\n *\n * <button type=\"button\" data-init=\"toggle\" data-target=\"#myModalId\" data-toggle=\"modal\">Show Modal</button>\n *\n * ---\n *\n * # Toggle classes on and off\n *\n * If you want to toggle a class on the target element on or off the toggle needs to be a css class string.  For\n * example to toggle the class \"test\" with a button you can use the following code:\n *\n * <button type=\"button\" data-init=\"toggle\" data-target=\"#mytarget\" data-toggle=\".test\">Toggle Class</button>\n *\n * ---\n * # Target self\n *\n * If you an element to target itself, specify the string \"self\" as the target.\n *\n * <button type=\"button\" data-init=\"toggle\" data-target=\"self\" data-toggle=\".test\">Toggle Class</button>\n */\nexport class Toggle {\n    constructor(element) {\n        if(typeof element === 'string') {\n            this.element = document.querySelector(element);\n        } else {\n            this.element = element;\n        }\n\n        this._onClick = (event) => {\n            this.onClick(event);\n        };\n\n        this.element.addEventListener('click', this._onClick);\n    }\n\n    destroy() {\n        this.element.removeEventListener('click', this._onClick);\n        this._onClick = null;\n    }\n\n    onClick() {\n        let target = this.element.dataset.target,\n            toggle = this.element.dataset.toggle,\n            method = this.element.dataset.method || 'toggle';\n\n        if(target === 'self') {\n            target = this.element;\n        } else {\n            target = document.querySelector(target);\n        }\n\n        if(toggle.startsWith('.')) {\n            toggle = toggle.substr(1);\n            target.classList.toggle(toggle);\n        } else {\n            let instance = AutoLoader.getInitializedInstance(target, toggle);\n\n            if(instance) {\n                instance[method](this.element);\n            } else {\n                throw new Error(\"Could not find initialized instance during toggle action.\");\n            }\n        }\n    }\n}\n\n\nAutoLoader.loader = new AutoLoader();\nAutoLoader.register('toggle', (element) => new Toggle(element));\n\n\nwindow.addEventListener('load', () => {\n    if(AutoLoader.autoLoad) {\n        AutoLoader.load();\n    }\n});\n","let TOPICS = Symbol('topics');\n\n\nexport function STOP() {\n    throw STOP;\n}\n\n\nexport default class Publisher {\n    constructor() {\n        this[TOPICS] = {};\n    }\n\n    on(topic, callback) {\n        if(!this[TOPICS][topic]) this[TOPICS][topic] = [];\n        this[TOPICS][topic].push(callback);\n        return this;\n    }\n\n    once(topic, fn) {\n        let on = (...args) => {\n            this.off(topic, fn);\n            return fn.apply(this, args);\n        };\n\n        on.fn = fn;\n        this.on(topic, fn);\n        return this;\n    }\n\n    off(topic, callback) {\n        if(arguments.length === 0) {\n            // CLear all topics.\n            this[TOPICS] = {};\n            return this;\n        } else if(arguments.length === 1) {\n            // Clear single topic.\n            this[TOPICS][topic] = [];\n            return this;\n        }\n\n        if(!this[TOPICS] || !this[TOPICS][topic] || !this[TOPICS][topic].length) {\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\n            return this;\n        }\n\n        let callbacks = this[TOPICS][topic];\n\n        for(let i = 0; i < callback.length; i++) {\n            let cb = callbacks[i];\n            if(cb === callback || cb.fn === callback) {\n                callbacks.splice(i, 1);\n                break;\n            }\n        }\n\n        if(callbacks.length === 0) {\n            delete this[TOPICS][topic];\n        }\n\n        return this;\n    }\n\n    hasEvent(topic, callback) {\n        if(arguments.length === 1) {\n            return !!this[TOPICS][topic];\n        } else {\n            let callbacks = this[TOPICS][topic];\n\n            for(let i = 0; i < callbacks.length; i++) {\n                let cb = callbacks[i];\n                if(cb === callback || cb.fn === callback) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    publish(topic, ...args) {\n        if(this[TOPICS][topic]) {\n            let callbacks = this[TOPICS][topic].slice(0);\n\n            for(let cb of callbacks) {\n                try {\n                    cb.apply(this, args);\n                } catch (e) {\n                    if(e === STOP) {\n                        return e;\n                    } else {\n                        throw e;\n                    }\n                }\n            }\n        }\n\n        return true;\n    }\n}\n","import {isEmptyObject} from \"./utility\";\n\n\nlet uuid = 1,\n    prefix = 'p-' + (''+Math.random()).replace(/\\D/g, '');\n\n\nexport class Data {\n    constructor() {\n        this.expando = `${prefix}-${uuid++}`;\n    }\n\n    static acceptData(owner) {\n        return owner.nodeType === 1 || owner.nodeType === 9 || !(+owner.nodeType);\n    }\n\n    cache(owner) {\n        let cache = owner[this.expando];\n\n        if(!cache) {\n            cache = {};\n\n            if(Data.acceptData(owner)) {\n                if(owner.nodeType) {\n                    owner[this.expando] = cache;\n                } else {\n                    Object.defineProperty(owner, this.expando, {\n                        value: cache,\n                        configurable: true\n                    });\n                }\n            } else {\n                return null;\n            }\n        }\n\n        return cache;\n    }\n\n    set(owner, key, value) {\n        let cache = this.cache(owner);\n\n        if(typeof key === 'object') {\n            for(let prop in key) {\n                cache[prop] = key[prop];\n            }\n        } else {\n            cache[key] = value;\n        }\n\n        return cache;\n    }\n\n    get(owner, key) {\n        if(key === undefined) {\n            return this.cache(owner);\n        } else {\n            let cache = owner[this.expando];\n\n            if(cache) {\n                return cache[key];\n            }\n        }\n    }\n\n    access(owner, key, value) {\n        if(arguments.length === 2) {\n            if(typeof key === 'object') {\n                return this.set(owner, key);\n            } else {\n                return this.get(owner, key);\n            }\n        } else if(arguments.length === 1) {\n            return this.cache(owner);\n        } else if(arguments.length === 3) {\n            return this.set(owner, key, value);\n        }\n    }\n\n    remove(owner, ...keys) {\n        let cache = owner[this.expando];\n\n        if(!cache) return;\n\n        if(arguments.length === 1) {\n            if(owner.nodeType) {\n                owner[this.expando] = undefined;\n            } else {\n                delete owner[this.expando];\n            }\n        } else {\n            for(let key of keys) {\n                delete cache[key];\n            }\n        }\n    }\n\n    hasData(owner) {\n        let cache = owner[this.expando];\n        return cache && !isEmptyObject(cache);\n    }\n}\n\n\nexport let privateCache = new Data();","\nexport class ExtendableError extends Error {\n    constructor(message) {\n        // noinspection JSCheckFunctionSignatures\n        super(message);\n        this.name = this.constructor.name;\n\n        // noinspection JSUnresolvedVariable\n        if(typeof Error.captureStackTrace === 'function') {\n            // noinspection JSUnresolvedFunction\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\n\n\nexport class IndexError extends ExtendableError {\n\n}\n\n\nexport class KeyError extends ExtendableError {\n\n}\n\n\nexport class ValueError extends ExtendableError {\n\n}\n\n\nexport class NotImplemented extends ExtendableError {\n\n}\n\n\nexport class ValidationError extends ExtendableError {\n    constructor(message, node) {\n        super(message);\n        this.node = node;\n        this.children = [];\n    }\n}\n\n\nexport class AssertionError extends ExtendableError {\n    constructor(message) {\n        super(message);\n    }\n}\n\n\nexport class UnitError extends ExtendableError {\n\n}\n\n\n/**\n * Asserts that a condition is true or raises an AssertionError.\n * @param condition - condition to check.\n * @param message - message on fail.\n * @throws AssertionError\n */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new AssertionError(message);\n    }\n}\n","import {ValidationError} from \"../errors\";\nimport {NULL, DROP, TRUE, FALSE, REQUIRED} from \"./helper\";\n\n\nexport default class Attribute {\n    static DROP = DROP;\n    static TRUE = TRUE;\n    static FALSE = FALSE;\n    static REQUIRED = REQUIRED;\n\n    constructor(type, missing=DROP, nullable=null, validator=null) {\n        this.type = typeof type === 'function' ? new type() : type;\n\n        this.missing = missing;\n        this.nullable = nullable;\n        this.validator = validator;\n    }\n\n    deserialize(data, key) {\n        let value = data[key];\n\n        if(value === undefined) {\n            if(this.missing === REQUIRED) {\n                throw new ValidationError(`Attribute ${key} is required`);\n            } else if(this.missing === DROP) {\n                throw DROP;\n            } else {\n                return this.missing;\n            }\n        } else if(value === null) {\n            if(this.nullable === FALSE || this.nullable === REQUIRED) {\n                throw new ValidationError(`Attribute ${key} cannot be null.`);\n            } if(this.nullable === null || this.nullable === TRUE || this.nullable === NULL) {\n                return null;\n            } else {\n                return this.nullable;\n            }\n        }\n\n        if(this.type) {\n            value = this.type.deserialize(value);\n        }\n\n        if(this.validator) {\n            value = this.validator(value);\n        }\n\n        return value;\n    }\n}\n","import {DROP} from \"./helper\";\n\n\nexport default class AttributeSchema {\n    constructor(attributes) {\n        this.attributes = attributes;\n    }\n\n    deserialize(data) {\n        let r = {};\n\n        for(let key in this.attributes) {\n            if(this.attributes.hasOwnProperty(key)) {\n                try {\n                    r[key] = this.attributes[key].deserialize(data, key);\n                } catch (e) {\n                    if(e !== DROP) {\n                        throw e;\n                    }\n                }\n            }\n        }\n\n        return r;\n    }\n}\n","\n\nexport const NULL = {},\n    TRUE = {},\n    FALSE = {},\n    REQUIRED = {},\n    DROP = {};\n","/**\n * A module for creating schema that can be used to create objects that can serialize and deserialize data structures\n * into different formats.\n */\n\nimport Attribute from \"./Attribute\";\nimport AttributeSchema from \"./AttributeSchema\";\nimport {Str, Integer, Bool, CompoundType, CSV, Float, Type} from './types';\nimport {any, all, choice, length, range, regex} from './validators';\nimport {REQUIRED, FALSE, TRUE, DROP, NULL} from './helper';\n\n\nexport {\n    Attribute, AttributeSchema, Str, Integer, Bool, CompoundType, CSV, FALSE, Float, NULL, DROP, TRUE, REQUIRED, regex,\n    range, length, choice, all, any, Type\n};\n","import {ValidationError} from \"../errors\";\n\n\nconst REG_COMMA = /\\s*,\\s*/;\n\n\nexport class Type {\n    /**\n     * @abstract\n     * @param value\n     */\n    deserialize(value) {\n\n    }\n\n    /**\n     * @param value\n     */\n    serialize(value) {\n        return value;\n    }\n}\n\n\nexport class Integer extends Type {\n    constructor(radix=10, allowInfinity=false) {\n        super();\n        this.radix = radix;\n        this.allowInfinity = allowInfinity;\n    }\n\n    deserialize(value) {\n        if(this.allowInfinity) {\n            if(typeof value === 'string') {\n                value = value.trim();\n            }\n\n            if(value === 'Infinity') {\n                return Infinity;\n            } else if(value === '-Infinity') {\n                return -Infinity;\n            }\n        }\n\n        value = parseInt(value, this.radix);\n\n        if(Number.isNaN(value)) {\n            throw ValidationError(\"Could not parse integer.\");\n        }\n\n        return value;\n    }\n}\n\n\nexport class Float extends Type {\n    constructor(fixed=null, allowInfinity=false) {\n        super();\n        this.fixed = fixed;\n        this.allowInfinity = allowInfinity;\n    }\n\n    deserialize(value) {\n        if(this.allowInfinity) {\n            if(typeof value === 'string') {\n                value = value.trim();\n            }\n\n            if(value === 'Infinity') {\n                return Infinity;\n            } else if(value === '-Infinity') {\n                return -Infinity;\n            }\n        }\n\n        if(this.fixed !== null) {\n            value = (value + '').toFixed(this.fixed);\n        }\n\n        value = parseFloat(value);\n\n        if(Number.isNaN(value)) {\n            throw new ValidationError(\"Could not parse float\");\n        }\n\n        return value;\n    }\n}\n\n\nexport class Bool extends Type {\n    deserialize(value) {\n        if(value === true || value === false) {\n            return value;\n        }\n\n        if(typeof value === 'string') {\n            value = value.toLowerCase().trim();\n\n            if(value === 'true') {\n                return true;\n            } else if(value === 'false') {\n                return false;\n            }\n        }\n\n        throw new ValidationError(\"Could not parse boolean from value.\");\n    }\n}\n\n\nexport class Str extends Type {\n    constructor(allow_empty=true, trim=false, transform=null) {\n        super();\n        this.allow_empty = allow_empty;\n        this.trim = trim;\n        this.transform = transform;\n    }\n\n    deserialize(value) {\n        value = value + '';\n\n        if(this.trim) {\n            value = value.trim();\n        }\n\n        if(this.transform) {\n            value = value.transform();\n        }\n\n        if(value === '' && !this.allow_empty) {\n            throw new ValidationError(\"String cannot be empty\");\n        }\n\n        return value;\n    }\n}\n\n\nexport class CSV extends Type {\n    constructor(separator=REG_COMMA) {\n        super();\n        this.separator = separator;\n    }\n\n    deserialize(value) {\n        let type = typeof value;\n\n        if(type !== 'string') {\n            throw new ValidationError(`Could not deserialize ${type}`);\n        }\n\n        value = value.trim().split(this.separator);\n\n        return value;\n    }\n\n    serialize(value) {\n        return value.join(', ');\n    }\n}\n\n\nexport class CompoundType extends Type {\n    constructor(...types) {\n        super();\n        this.types = [];\n\n        for(let type of types) {\n            this.types.push(typeof type === 'function' ? new type() : type);\n        }\n    }\n\n    deserialize(value) {\n        for(let t of this.types) {\n            try {\n                return t(value);\n            } catch (e) {\n                if(!(e instanceof ValidationError)) {\n                    throw e;\n                }\n            }\n        }\n\n        throw new ValidationError(\"Value did not match any type.\");\n    }\n}\n","import {ValidationError} from \"../errors\";\n\n\nexport function choice(...choices) {\n    return function(value) {\n        if(choices.indexOf(value) === -1) {\n            throw new ValidationError(\"Invalid choice\");\n        }\n\n        return value;\n    }\n}\n\n\nexport function length(minLength=null, maxLength=null) {\n    return function(value) {\n        let l = value.length;\n\n        if(minLength !== null && l < minLength) {\n            throw new ValidationError(\"Array length is to small\");\n        }\n\n        if(maxLength !== null && l > maxLength) {\n            throw new ValidationError(\"Array length is to big\");\n        }\n\n        return value;\n    }\n}\n\n\nexport function range(min=null, max=null) {\n    return function(value) {\n        if(min !== null && value < min) {\n            throw new ValidationError(\"Value is to small.\");\n        }\n\n        if(max !== null && value > max) {\n            throw new ValidationError(\"Value is to big.\");\n        }\n\n        return value;\n    }\n}\n\n\nexport function regex(pattern, flags=null) {\n    let reg = flags ? new RegExp(pattern, flags) : new RegExp(pattern);\n\n    return function(value) {\n        if(!reg.test(value)) {\n            throw new ValidationError(\"Value did not match pattern.\");\n        }\n\n        return value;\n    }\n}\n\n\nexport function all(...validators) {\n    return function(value) {\n        for(let validator of validators) {\n            value = validator(value);\n        }\n\n        return value;\n    }\n}\n\n\nexport function any(...validators) {\n    return function(value) {\n        for(let validator of validators) {\n            try {\n                value = validator(value);\n                return value;\n            } catch (e) {\n                if(!(e instanceof ValidationError)) {\n                    throw e;\n                }\n            }\n        }\n\n        throw new ValidationError(\"Value did not pass any validator.\");\n    }\n}\n","import {Rect, Vec2, Vec3} from \"../vectors\";\nimport {clamp} from \"../utility\";\n\n\nconst regMatrix = /matrix(3d)?\\(([^)]+)\\)/;\n\n\n/**\n * Returns the elements offset parent.\n *\n * @param element\n * @returns {HTMLElement}\n */\nexport function getOffsetElement(element) {\n    let o = element.parentElement;\n\n    while(o) {\n        let position = getComputedStyle(o).position;\n        if(position !== 'static') return o;\n        o = o.parentElement;\n    }\n}\n\n\n/**\n * Returns the rectangle of the client area.\n *\n * @returns {Rect}\n */\nexport function getClientRect() {\n    return Rect.getClientRect();\n}\n\n\n/**\n * Returns a bounding rect who's positions are relative to the provided offsetParent.\n * If offsetParent is null then the targets natural offsetParent is used as returned by the getOffsetElement function.\n * @param element\n * @param offsetParent\n * @returns {{top: number, left: number, bottom: number, width: number, right: number, height: number}}\n */\nexport function getBoundingOffsetRect(element, offsetParent=null) {\n    let offsetRect, rect;\n\n    if(!offsetParent) offsetParent = getOffsetElement(element);\n\n    // no offset parent.  Position relative to the client.\n    if(!offsetParent) {\n        offsetRect = Rect.getRootContainingClientRect();\n    } else {\n        offsetRect = Rect.getBoundingClientRect(offsetParent);\n    }\n\n    rect = element.getBoundingClientRect();\n\n    return new Rect(\n        rect.left - offsetRect.left,\n        rect.top - offsetRect.top,\n        offsetRect.right - rect.right,\n        offsetRect.bottom - rect.bottom\n    );\n}\n\n\n/**\n * Returns a bounding rect who's positions are relative to the document.\n * @param element\n * @returns {{top: number, left: number, bottom: number, width: number, x: number, y: number, right: number, height: number}}\n */\nexport function getBoundingDocumentRect(element) {\n    let rect = element.getBoundingClientRect();\n\n    return new Rect(\n        rect.left + window.pageXOffset,\n        rect.top + window.pageYOffset,\n        rect.right + window.pageXOffset,\n        rect.bottom + window.pageYOffset\n    );\n}\n\n\n/**\n * Returns the css translation from the transformation matrix applied to the element.\n *\n * @param element\n * @returns {Vec3}\n */\nexport function getTranslation(element) {\n    let transform = getComputedStyle(element).transform,\n        m = regMatrix.exec(transform);\n\n    if(!m) {\n        return new Vec3(\n            0,\n            0,\n            0\n        );\n    }\n\n    let data = m[2].split(/\\s*,\\s*/);\n\n    if(m[1]) {\n        return new Vec3(\n            parseFloat(data[12]),\n            parseFloat(data[13]),\n            parseFloat(data[14])\n        );\n    } else {\n        return new Vec3(\n            parseFloat(data[4]),\n            parseFloat(data[5]),\n            0\n        );\n    }\n}\n\n\n/**\n * Sets the element's transformation matrix to 2d translate with the specified left and top properties.\n *\n * @param element\n * @param x\n * @param y\n * @param z\n */\nexport function setTranslation(element, {x, y, z=null}) {\n    if(z !== null) {\n        element.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;\n    } else {\n        element.style.transform = `translate(${x}px, ${y}px)`;\n    }\n}\n\n\n/**\n * Gets the elements left and top style properties as numbers.\n *\n * @param element\n * @returns {Vec2}\n */\nexport function getCssPosition(element) {\n    let style = getComputedStyle(element);\n\n    return new Vec2(\n        parseInt(style.left, 10),\n        parseInt(style.top, 10)\n    );\n}\n\n\n/**\n * Sets the left and top style properties of an element.  If the element is positioned statically it will be changed to\n * relative.\n *\n * @param element\n * @param left\n * @param top\n */\nexport function setCssPosition(element, {left=null, top=null}) {\n    let style = getComputedStyle(element);\n\n    if(style.position === 'static') {\n        style.position = 'relative';\n    }\n\n    if(left !== null && left !== undefined) {\n        element.style.left = `${left}px`;\n    }\n\n    if(top !== null && top !== undefined) {\n        element.style.top = `${top}px`;\n    }\n}\n\n\n/**\n * Sets the elements position relative to the client window.  The `method` parameter controls how the elements position\n * is modified.  The options are 'top-left', 'top-right', 'bottom-left', 'bottom-right', 'translate', and 'translate3d'.\n *\n * top-left, top-right, bottom-left and bottom-right set the css left, top, right, and bottom properties of the element.\n * translate and translate3d position the element by setting the transform property.\n *\n * @param element {HTMLElement}\n * @param position {{x, y}|{left, top, right, bottom}|Array|Vec2}\n * @param method {'top-left'|'top-right'|'bottom-left'|'bottom-right'|'translate'|'translate3d'}\n */\nexport function setElementClientPosition(element, position, method='top-left') {\n    position = new Rect(position);\n\n    if(method === 'top-left' || method === 'top-right' || method === 'bottom-left' || method === 'bottom-right') {\n        let style = getComputedStyle(element);\n\n        let positionType = style.position, box, deltaX, deltaY, current;\n\n        // position can't be static for this operation.  Switch to relative.\n        if(positionType === 'static') {\n            element.style.position = 'relative';\n            positionType = \"relative\";\n        }\n\n        style = getComputedStyle(element);\n        box = Rect.getBoundingClientRect(element);\n\n        current = {\n            left: parseInt(style.left, 10) || 0,\n            right: parseInt(style.right, 10) || 0,\n            top: parseInt(style.top, 10) || 0,\n            bottom: parseInt(style.bottom, 10) || 0\n        };\n\n        if(method === 'top-left') {\n            deltaX = position.left - box.left;\n            deltaY = position.top - box.top;\n\n            element.style.left = (current.left + deltaX) + 'px';\n            element.style.top = (current.top + deltaY) + 'px';\n            element.style.right = '';\n            element.style.bottom = '';\n        } else if(method === 'top-right') {\n            deltaX = position.right - box.right;\n            deltaY = position.top - box.top;\n\n            element.style.right = (current.right - deltaX) + 'px';\n            element.style.top = (current.top + deltaY) + 'px';\n            element.style.left = '';\n            element.style.bottom = '';\n        } else if(method === 'bottom-left') {\n            deltaX = position.left - box.left;\n            deltaY = position.bottom - box.bottom;\n\n            console.log({\n                right: (current.left + deltaX) + 'px',\n                bottom: (current.bottom - deltaY) + 'px'\n            });\n\n            element.style.left = (current.left + deltaX) + 'px';\n            element.style.bottom = (current.bottom - deltaY) + 'px';\n            element.style.right = '';\n            element.style.top = '';\n        } else { // bottom-right\n            deltaX = position.right - box.right;\n            deltaY = position.bottom - box.bottom;\n\n            element.style.right = (current.right - deltaX) + 'px';\n            element.style.bottom = (current.bottom - deltaY) + 'px';\n            element.style.left = '';\n            element.style.top = '';\n        }\n    } else if(method === 'translate') {\n        let box = Rect.getBoundingClientRect(element),\n            deltaX = position.left - box.left,\n            deltaY = position.top - box.top,\n            cssPosition = getTranslation(element);\n\n        setTranslation(element, {\n            x: cssPosition.x + deltaX,\n            y: cssPosition.y + deltaY\n        });\n    } else if(method === 'translate3d') {\n        let box = Rect.getBoundingClientRect(element),\n            deltaX = position.left - box.left,\n            deltaY = position.top - box.top,\n            cssPosition = getTranslation(element);\n\n        setTranslation(element, {\n            x: cssPosition.x + deltaX,\n            y: cssPosition.y + deltaY,\n            z: cssPosition.z\n        });\n    }\n}\n\n\n/**\n * Transforms the coordinates of a BoundingClientRect like object from client space to document space.\n * @param rect\n */\nexport function clientRectToDocumentSpace(rect) {\n    let r = Rect.fromRect(rect);\n\n    r.left += window.pageXOffset;\n    r.right += window.pageXOffset;\n    if(typeof r.top === 'number') r.top += window.pageYOffset;\n    if(typeof r.bottom === 'number') r.bottom += window.pageYOffset;\n\n    return r;\n}\n\n\n/**\n * Transforms the coordinates of a BoundingClientRect like object from document space to client space.\n * @param rect\n */\nexport function documentRectToClientSpace(rect) {\n    let r = Rect.fromRect(rect);\n\n    r.left -= window.pageXOffset;\n    r.right -= window.pageXOffset;\n    if(typeof r.top === 'number') r.top -= window.pageYOffset;\n    if(typeof r.bottom === 'number') r.bottom -= window.pageYOffset;\n\n    return r;\n}\n\n\n/**\n * Snaps the value to the specified grid using the provided rounding function.\n * @param value\n * @param gridSize\n * @param roundingFunction\n * @returns {number|*}\n */\nexport function snapToGrid(value, gridSize, roundingFunction=Math.round) {\n    if(gridSize !== null && gridSize !== undefined && !Number.isNaN(gridSize)) {\n        return roundingFunction(value / gridSize) * gridSize;\n    }\n\n    return value;\n}\n\n\n/**\n * Deprecated in favor of calling Rect.fromRect() class method.\n *\n * @deprecated\n * @param domRect\n * @returns {Rect}\n */\nexport function convertDomRectToObject(domRect) {\n    return Rect.fromRect(domRect);\n}\n\n\n/**\n * Returns the {x, y} point calculated relative to the reference element.\n *\n * @param referenceElement\n * @param point\n * @param offset\n * @param constrain\n * @returns {Vec2}\n */\nexport function getPointOnElement(referenceElement, point, offset=null, constrain=null) {\n    let rect = referenceElement;\n\n    if(rect.getBoundingClientRect) {\n        rect = rect.getBoundingClientRect();\n    }\n\n    if(constrain) {\n        if (typeof constrain === 'string') {\n            constrain = document.querySelector(constrain);\n        }\n\n        if (constrain.getBoundingClientRect) {\n            constrain = Rect.fromRect(constrain.getBoundingClientRect());\n        }\n    }\n\n    // Convert array to {x, y} object.\n    if(Array.isArray(point)) {\n        point = {\n            x: point[0],\n            y: point[1]\n        };\n    } else if(typeof point === 'string') {\n        if(point === 'top-left') {\n            point = {x: 0, y: 0};\n        } else if(point === 'top') {\n            point = {x: '50%', y: 0};\n        } else if(point === 'top-right') {\n            point = {x: '100%', y: 0};\n        } else if(point === 'right') {\n            point = {x: '100%', y: '50%'};\n        } else if(point === 'bottom-right') {\n            point = {x: '100%', y: '100%'};\n        } else if(point === 'bottom') {\n            point = {x: '50%', y: '100%'};\n        } else if(point === 'bottom-left') {\n            point = {x: 0, y: '100%'};\n        } else if(point === 'left') {\n            point = {x: 0, y: '50%'};\n        } else if(point === 'middle') {\n            point = {x: '50%', y: '50%'};\n        } else {\n            throw new Error(`Unknown point option ${point}`);\n        }\n    }\n\n    if(typeof point.x === 'string') {\n        point.x = (rect.right - rect.left) * (parseFloat(point.x) / 100);\n    }\n\n    if(typeof point.y === 'string') {\n        point.y = (rect.bottom - rect.top) * (parseFloat(point.y) / 100);\n    }\n\n    if(constrain) {\n        if(typeof constrain.left === 'string') {\n            constrain.left = (rect.right - rect.left) * (parseFloat(constrain.left) / 100);\n        }\n\n        if(typeof constrain.right === 'string') {\n            constrain.right = (rect.right - rect.left) * (parseFloat(constrain.right) / 100);\n        }\n\n        if(typeof constrain.top === 'string') {\n            constrain.top = (rect.bottom - rect.top) * (parseFloat(constrain.top) / 100);\n        }\n\n        if(typeof constrain.bottom === 'string') {\n            constrain.bottom = (rect.bottom - rect.top) * (parseFloat(constrain.bottom) / 100);\n        }\n\n        point.x = clamp(point.x, constrain.left, constrain.right);\n        point.y = clamp(point.y, constrain.top, constrain.bottom);\n    }\n\n    if(offset) {\n        if(Array.isArray(offset)) {\n            offset = {\n                x: offset[0],\n                y: offset[1]\n            };\n        }\n\n        if(offset.x !== null) {\n            point.x += offset.x;\n        }\n\n        if(offset.y !== null) {\n            point.y += offset.y;\n        }\n    }\n\n    return new Vec2(rect.left + point.x, rect.top + point.y);\n}\n\n\n/**\n * Gets the bounding client rect for a rectangle defined by the position rectangle with left, top, right and bottom\n * properties relative to the element's position.\n *\n * @param element {{getBoundingClientRect}|Element|String|{left, top, right, bottom}}\n * @param position {{left, top, bottom, right}}\n * @return {Rect}\n */\nexport function getSubBoundingBox(element, position) {\n    let rect;\n\n    // Get the bounding client rect of the element.   The user should have passed either a css selector, an object with a\n    // getBoundingClientRect interface.  Or a bounding client rect directly.\n    if(element.getBoundingClientRect) {\n        rect = element.getBoundingClientRect();\n    } else if(typeof element === 'string') {\n        rect = document.querySelector(element).getBoundingClientRect();\n    } else {\n        rect = element;\n    }\n\n    let width = rect.right - rect.left,\n        height = rect.bottom - rect.top;\n\n    // The user can pass a rect with left, top, right and bottom properties.  The value can either be the desired\n    // coordinates relative to the top-left corner of the reference element or a percentage.  Another possibility\n    // is that the user passes one of the keyword properties that coorispond to a specific section of the element.\n    // Map those keywords to their rectangle.\n    if(typeof position === 'string') {\n        if(position === 'border-top') {\n            position = {left: 0, right: '100%', top: 0, bottom: 0};\n        } else if(position === 'border-right') {\n            position = {left: '100%', right: '100%', top: 0, bottom: '100%'};\n        } else if(position === 'border-bottom') {\n            position = {left: 0, right: '100%', top: '100%', bottom: '100%'};\n        } else if(position === 'border-left') {\n            position = {left: 0, top: 0, right: 0, bottom: '100%'};\n        } else if(position === 'top-left') {\n            position = {left: 0, top: 0, right: 0, bottom: 0};\n        } else if(position === 'top') {\n            position = {top: 0, left: '50%', right: '50%', bottom: 0};\n        } else if(position === 'top-right') {\n            position = {top: 0, left: '100%', right: '100%', bottom: 0};\n        } else if(position === 'left') {\n            position = {left: 0, top: '50%', bottom: '50%', right: 0};\n        } else if(position === 'origin') {\n            position = {left: '50%', right: '50%', top: '50%', bottom: '50%'};\n        } else if(position === 'bottom-left') {\n            position = {left: 0, right: 0, top: '100%', bottom: '100%'};\n        } else if(position === 'bottom') {\n            position = {left: '50%', right: '50%', top: '100%', bottom: '100%'};\n        } else if(position === 'bottom-right') {\n            position = {left: '100%', right: '100%', top: '100%', bottom: '100%'};\n        } else if(position === 'right') {\n            position = {left: '100%', right: '100%', top: '50%', bottom: '50%'};\n        }\n    }\n\n    position.left = position.left || 0;\n    position.right = position.right || 0;\n    position.top = position.top || 0;\n    position.bottom = position.bottom || 0;\n\n    // left and right percentages are a percentage of the elements width.\n    // top and bottom percentages are a percentage of the elements height.\n    if(typeof position.left === 'string') {\n        position.left = (parseFloat(position.left) / 100) * width;\n    }\n\n    if(typeof position.right === 'string') {\n        position.right = (parseFloat(position.right) / 100) * width;\n    }\n\n    if(typeof position.bottom === 'string') {\n        position.bottom = (parseFloat(position.bottom) / 100) * height;\n    }\n\n    if(typeof position.top === 'string') {\n        position.top = (parseFloat(position.top) / 100) * height;\n    }\n\n    // Convert to client space.\n    return new Rect(\n        rect.left + position.left,\n        rect.top + position.top,\n        rect.left + position.right,\n        rect.top + position.bottom\n    );\n}\n\n\n/**\n * Returns the distance in between the provided Rect objects.  If the objects are touching or overlapping 0\n * will be returned.\n *\n * @param rect1 {{left, top, right, bottom}}\n * @param rect2 {{left, top, right, bottom}}\n * @returns {Number}\n */\nexport function getDistanceBetweenRects(rect1, rect2) {\n    let vec1 = Rect.fromRect(rect1),\n        vec2 = Rect.fromRect(rect2);\n\n    let isXOverlapping = vec1.isXOverlapping(vec2),\n        isYOverlapping = vec1.isYOverlapping(vec2);\n\n    if(isXOverlapping && isYOverlapping) {\n        // Items are overlapping\n        return 0;\n    } else if(isXOverlapping) {\n        return Math.min(\n            Math.abs(vec1.bottom - vec2.top),\n            Math.abs(vec1.top - vec2.bottom)\n        );\n    } else if(isYOverlapping) {\n        return Math.min(\n            Math.abs(vec1.right - vec2.left),\n            Math.abs(vec1.left - vec2.right)\n        );\n    } else {\n        let x1, y1, x2, y2;\n\n        if(vec1.right <= vec2.left) {\n            x1 = vec1.right;\n            x2 = vec2.left;\n        } else {\n            x1 = vec1.left;\n            x2 = vec2.right;\n        }\n\n        if(vec1.bottom <= vec2.top) {\n            y1 = vec1.bottom;\n            y2 = vec2.top;\n        } else {\n            y1 = vec1.top;\n            y2 = vec2.bottom;\n        }\n\n        // Use distance formula to calculate distance.\n        return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\n    }\n}\n\n\n/**\n * Returns the top and left position of an element relative to the document.\n *\n * @param element\n * @return {{top: number, left: number}}\n */\nexport function getElementOffset(element) {\n    let box = element.getBoundingClientRect();\n\n    return {\n        left: box.left + window.pageXOffset,\n        top: box.top + window.pageYOffset\n    };\n}\n\n\n/**\n * Sets an elements position relative to the document.\n *\n * @param element\n * @param coords\n */\nexport function setElementOffset(element, coords) {\n    if (coords.nodeType) {\n        coords = getElementOffset(element);\n    } else if (Array.isArray(coords)) {\n        coords = {\n            left: coords.left,\n            top: coords.top\n        };\n    }\n\n    let offset = element.getBoundingClientRect();\n\n    let style = getComputedStyle(element),\n        left = parseInt(style.left, 10) || 0,\n        top = parseInt(style.top, 10) || 0;\n\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\n}\n\n\nexport {Vec2, Vec3, Rect};\n","/**\n * Throttles a function to only be executed after a given wait period.  If multiple calls to the debounced function\n * are made within that period the waiting period is set.\n * @param fn\n * @param wait\n * @returns {Function}\n */\nexport function debounce(fn, wait) {\n    let timeout;\n\n    return function() {\n        let args = arguments;\n\n        let later = () => {\n            timeout = null;\n            fn.apply(this, args);\n        };\n\n        if(timeout) {\n            clearTimeout(timeout);\n        }\n\n        timeout = setTimeout(later, wait);\n    }\n}\n","export function proto(descriptor) {\n    descriptor.placement = \"prototype\";\n    return descriptor;\n}\n","const REG_WHITESPACE = /\\s+/;\n\n\n/**\n * Parses an html string into a document fragment.\n *\n * @deprecated\n * @param html\n * @return {DocumentFragment}\n */\nexport function parseHTML(html) {\n    let template = document.createElement('template');\n    template.innerHTML = html.trim();\n\n    if (template.content) {\n        return template.content;\n    } else {\n        // Doesn't support template tag.\n        let fragment = document.createDocumentFragment();\n        while (template.firstChild) fragment.appendChild(template.firstChild);\n        return fragment;\n    }\n}\n\nexport function createFragment(html) {\n    // noinspection JSDeprecatedSymbols\n    return parseHTML(html);\n}\n\n/**\n * Adds classes to an element.  Can take a space separated list of classes.\n *\n * @param element\n * @param classes\n */\nexport function addClasses(element, classes) {\n    if (typeof classes === 'string') {\n        classes = classes.split(REG_WHITESPACE);\n    }\n\n    element.classList.add(...classes);\n}\n\n/**\n * Removes classes to an element.  Can take a space separated list of classes.\n *\n * @param element\n * @param classes\n */\nexport function removeClasses(element, classes) {\n    if (typeof classes === 'string') {\n        classes = classes.split(REG_WHITESPACE);\n    }\n\n    element.classList.remove(...classes);\n}\n\n/**\n * Assigns attributes in an object to an element.\n * @param element\n * @param attributes\n */\nexport function assignAttributes(element, attributes) {\n    for (let key in attributes) {\n        if (attributes.hasOwnProperty(key)) {\n            element.setAttribute(key, attributes[key]);\n        }\n    }\n}\n\n/**\n * Matches a single dom element based on the given selector.\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\n * If a css selector is passed it will query for the element.\n * If a jquery object is passed it will return the first matched element.\n * If an element is passed it will return that element.\n *\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\n * Otherwise the context will be the document.\n *\n * @param selector\n * @param context\n * @returns {Element|Document|DocumentFragment}\n */\nexport function selectElement(selector, context = null) {\n    if (!context) {\n        context = document;\n    } else {\n        context = selectElement(context);\n    }\n\n    if (typeof selector === 'string') {\n        return context.querySelector(selector);\n    } else if (selector.jquery) {\n        return selector[0];\n    } else if (selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\n        return selector;\n    }\n}\n\n/**\n * Empties a dom element.\n *\n * @param element\n */\nexport function emptyElement(element) {\n    while (element.firstChild) element.removeChild(element.firstChild);\n}\n\n/**\n * Normalizing accessing scroll position for an element.\n *\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\n * @param element\n * @returns {{left, top}}\n */\nexport function getScroll(element) {\n    if (isWindow(element)) {\n        return {\n            scrollLeft: element.pageXOffset,\n            scrollTop: element.pageYOffset\n        };\n    } else {\n        return {\n            scrollLeft: element.scrollLeft,\n            scrollTop: element.scrollTop\n        }\n    }\n}\n\n/**\n * Normalizes setting a scroll position for an element.\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\n * This methods normalizes them.\n * @param element - The element to scroll\n * @param scroll - An object with a left or a top property or both.\n */\nexport function setScroll(element, scroll) {\n    if (element.scrollTo) {\n        element.scrollTo(scroll);\n    } else {\n        element.scrollLeft = scroll.left;\n        element.scrollTop = scroll.top;\n    }\n}\n\n/**\n * Returns first child element that matches the test function.\n * @param element - Parent element\n * @param fn {Function|String} - Test Function\n * @returns {HTMLElement|Element|null}\n */\nexport function findChild(element, fn) {\n    if (typeof fn === 'string') {\n        let selector = fn;\n        fn = (child) => child.matches(selector);\n    }\n\n    for (let i = 0, l = element.children.length; i < l; i++) {\n        let child = element.children[i];\n\n        if (fn(child)) {\n            return child;\n        }\n    }\n\n    return null;\n}\n\n/**\n * Creates a filtered list of element from the children that match the test function.\n * @param element - Parent element.\n * @param fn - Test function.\n * @returns {Array}\n */\nexport function filterChildren(element, fn) {\n    let r = [];\n\n    for (let i = 0, l = element.children.length; i < l; i++) {\n        let child = element.children[i];\n\n        if (fn(child)) {\n            r.push(child);\n        }\n    }\n\n    return r;\n}\n\n\n/**\n * Test to see if the variable is a window.\n * @param variable\n * @returns {boolean}\n */\nexport function isWindow(variable) {\n    return variable && typeof variable === 'object' && setInterval in variable;\n}\n\n\n/**\n * Returns the closest element with the context.\n * @param target\n * @param selector\n * @param context\n * @returns {MenuNode|jQuery|any|Element|null}\n */\nexport function closest(target, selector, context=null) {\n    let closest = target.closest(selector);\n\n    if(typeof context === 'string') {\n        context = document.querySelector(context);\n    }\n\n    if(closest && (context === null || context.contains(closest))) {\n        return closest;\n    }\n\n    return null;\n}\n","import {debounce} from \"./debounce\";\nimport {proto} from \"./decorators\";\nimport {createFragment, findChild, filterChildren, emptyElement, addClasses, removeClasses, selectElement, assignAttributes, getScroll, isWindow, setScroll, closest} from \"./dom\";\nimport {all, any, chain, enumerate, firstValue, items, keys, values} from \"./iter\";\nimport {clamp, modulo, calcDistance} from \"./math\";\nimport {arraysEqual, getOwnProperty, getPropertyByPath, isEmptyObject, randomChoice, rangeFindItem} from \"./object\";\n\nexport {\n    debounce,\n    proto,\n    createFragment, findChild, filterChildren, emptyElement, addClasses, removeClasses, selectElement, assignAttributes,\n    getScroll, isWindow, setScroll, all, any, chain, enumerate, firstValue, items, keys, values,\n    clamp, modulo, calcDistance,\n    arraysEqual, getPropertyByPath, getOwnProperty, isEmptyObject, randomChoice, rangeFindItem, closest\n};\n","\n\n\nexport function *items(object) {\n    for(let key in object) {\n        if(object.hasOwnProperty(key)) {\n            yield [key, object[key]];\n        }\n    }\n}\n\n\nexport function *keys(object) {\n    for(let key in object) {\n        if(object.hasOwnProperty(key)) {\n            yield key;\n        }\n    }\n}\n\n\nexport function *values(object) {\n    for(let key in object) {\n        if(object.hasOwnProperty(key)) {\n            yield object[key];\n        }\n    }\n}\n\n\nexport function *enumerate(iterable) {\n    let i = 0;\n\n    for(let value of iterable) {\n        yield [i, value];\n    }\n}\n\n\nexport function *chain(...iterables) {\n    for(let iter of iterables) {\n        for(let value of iter) {\n            yield value;\n        }\n    }\n}\n\n\n/**\n * Takes an iterable and returns the first none null or undefined value.\n * @param args\n */\nexport function firstValue(args) {\n    for(let item of args) {\n        if(item !== null && item !== undefined) {\n            return item;\n        }\n    }\n}\n\n\n/**\n * Takes an iterable and returns true if all of the values are trueish.\n * @param iterable\n */\nexport function all(iterable) {\n    for(let item of iterable) {\n        if(!item) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n\n/**\n * Takes an iterable and returns true if any of the values are trueish.\n * @param iterable\n */\nexport function any(iterable) {\n    for(let item of iterable) {\n        if(item) return true;\n    }\n\n    return false;\n}\n","/**\n * Clamps a value between a minimum and maximum values.\n * @param value\n * @param minValue\n * @param maxValue\n * @returns {*}\n */\nexport function clamp(value, minValue = null, maxValue = null) {\n    if (minValue !== null) {\n        value = Math.max(value, minValue);\n    }\n\n    if (maxValue !== null) {\n        value = Math.min(value, maxValue);\n    }\n\n    return value;\n}\n\nexport function modulo(value, mod) {\n    return ((value % mod) + mod) % mod;\n}\n\n\nexport function calcDistance(x1, y1, x2, y2) {\n    return Math.sqrt(\n        Math.pow(x2 - x1, 2) + Math.pow(y2 - y2, 2)\n    );\n}\n","/**\n * Returns a random value from an array.\n * @param array\n * @returns {*}\n */\nexport function randomChoice(array) {\n    return array[Math.floor(Math.random() * array.length)];\n}\n\n/**\n * Checks to see if 2 arrays are \"equal\".\n * @param array1\n * @param array2\n */\nexport function arraysEqual(array1, array2) {\n    if (array1 === array2) return true; // The same object.\n    if (array1 == null || array2 == null) return false;\n    if (array1.length !== array2.length) return false;\n\n    for (let i = 0, l = array1.length; i < l; i++) {\n        if (array1[i] !== array2[i]) return false;\n    }\n\n    return true;\n}\n\n/**\n * Tests to see if the object is empty.\n *\n * @param object\n * @return {boolean}\n */\nexport function isEmptyObject(object) {\n    // noinspection LoopStatementThatDoesntLoopJS\n    for (let key in object) {\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * Returns the object own property or the default value if it does not have that property.\n * @param obj\n * @param propName\n * @param defaultValue\n * @returns {*}\n */\nexport function getOwnProperty(obj, propName, defaultValue = undefined) {\n    if (obj.hasOwnProperty(propName)) {\n        return obj[propName];\n    } else {\n        return defaultValue;\n    }\n}\n\n/**\n * Returns the obj value by following it's property path.  For example getPropertyByPath(a, 'b.c.d') is equivalent to\n * a.b.c.d but can be passed in string form.\n * @param obj\n * @param path\n * @returns {*}\n */\nexport function getPropertyByPath(obj, path) {\n    let parts = path.split('.'),\n        r = obj;\n\n    for (let part of parts) {\n        r = r[part];\n    }\n\n    return r;\n}\n\n\n/**\n * rangeFindItem\n *\n * Searches an array starting at the starting index and heads towards the ending index and returns the first item that\n * matches the predicate function.  If no item is found then undefined will be returned.  This function can search an\n * array both forwards and backwards.  Just start at a greater point then the ending point and the function will\n * handle the rest.\n *\n * @param array - The array to search\n * @param predicate - The matching function.  Should return true if the item is a match.\n * @param startingIndex - The index to start from.\n * @param endingIndex - The index to end at.  (Will also search this index)\n * @returns {*}\n */\nexport function rangeFindItem(array, predicate, startingIndex=0, endingIndex=null) {\n    let i;\n\n    if(endingIndex === null) {\n        endingIndex = array.length-1;\n    }\n\n    i = startingIndex;\n\n    while(true) {\n        let item = array[i];\n\n        if(predicate(item)) {\n            return item;\n        }\n\n        if(startingIndex > endingIndex) {\n            if(i <= endingIndex) return;\n            i--;\n        } else {\n            if(i >= endingIndex) return;\n            i++;\n        }\n    }\n}\n","import Vec4 from './Vec4';\n\nconst regPercentage = /^(\\d+\\.?\\d*)%$/;\n\n\nexport default class RGBA extends Vec4 {\n    constructor(r, g, b, a) {\n        if(typeof r === 'object') {\n            super(r);\n        } else {\n            super(r, g, b, a);\n        }\n    }\n\n    toString() {\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n    }\n\n    static parseRGBAColorStringArgs(value) {\n        value = value.trim().split(/\\s+/);\n\n        let r = value[0],\n            g = value[1],\n            b = value[2],\n            a = value[3];\n\n        if(r) {\n            if(regPercentage.test(r)) {\n                r = (parseFloat(r) / 100) * 255;\n            } else {\n                r = parseInt(r, 10);\n            }\n        }\n\n        if(g) {\n            if(regPercentage.test(g)) {\n                g = (parseFloat(g) / 100) * 255;\n            } else {\n                g = parseInt(g, 10);\n            }\n        }\n\n        if(b) {\n            if(regPercentage.test(b)) {\n                b = (parseFloat(b) / 100) * 255;\n            } else {\n                b = parseInt(b, 10);\n            }\n        }\n\n        if(a) {\n            if(regPercentage.test(a)) {\n                a = (parseFloat(a) / 100);\n            } else {\n                a = parseFloat(a);\n            }\n        }\n\n        a = a || 1.0;\n\n        return new RGBA(r, g, b, a);\n    }\n\n    static parseHexColorStringArg(value) {\n        value = value.trim().substring(1);\n\n        let r, g, b, a = 1.0;\n\n        if(value.length === 3) {\n            r = value[0];\n            g = value[1];\n            b = value[2];\n\n            r = parseInt(r+r, 16);\n            g = parseInt(g+g, 16);\n            b = parseInt(b+b, 16);\n        } else if(value.length === 6) {\n            r = value.substr(0, 2);\n            g = value.substr(2, 2);\n            b = value.substr(4, 2);\n\n            r = parseInt(r, 16);\n            g = parseInt(g, 16);\n            b = parseInt(b, 16);\n        } else if(value.length === 8) {\n            r = value.substr(0, 2);\n            g = value.substr(2, 2);\n            b = value.substr(4, 2);\n            a = value.substr(6, 2);\n\n            r = parseInt(r, 16);\n            g = parseInt(g, 16);\n            b = parseInt(b, 16);\n            a = parseInt(a, 16) / 255;\n        }\n\n        return new RGBA(r, g, b, a);\n    }\n}\n","import {ValueError} from \"../errors\";\nimport Vec2 from \"./Vec2\";\nimport Vec4 from \"./Vec4\";\nimport {clamp, calcDistance} from '../utility';\nimport {UnitError} from '../errors';\n\n\nconst regWhitespace = /\\s+/,\n    regPositionPart = /^([a-zA-Z]*)([+-]?\\d*\\.?\\d*)([a-z%]*)$/; // Parses string like \"left+10px\" into [\"left\", \"+10px\"]\n\n\nconst positionShortHandValues = {\n    top: 'center top',\n    right: 'right middle',\n    bottom: 'center bottom',\n    left: 'left middle',\n    topleft: 'left top',\n    topright: 'right top',\n    bottomleft: 'left bottom',\n    bottomright: 'right bottom'\n};\n\n\nexport default class Rect extends Vec4 {\n    constructor(left, top, right, bottom, domElement=null) {\n        if(typeof left === 'function') {\n            left = left();\n        }\n\n        if(typeof left === 'object') {\n            if(left.getBoundingClientRect) {\n                domElement = left;\n                let bb = domElement.getBoundingClientRect();\n                left = bb.left;\n                top = bb.top;\n                right = bb.right;\n                bottom = bb.bottom;\n            } else {\n                top = left.top;\n                right = left.right;\n                bottom = left.bottom;\n                left = left.left;\n            }\n        }\n\n        super(left, top, right, bottom);\n\n        // noinspection JSUnusedGlobalSymbols\n        this.domElement = domElement;\n\n        if(arguments.length === 1 && left instanceof Rect) {\n            Object.assign(this, left);\n        }\n    }\n\n    bind(element) {\n        return this._new(this.left, this.top, this.right, this.bottom, element);\n    }\n\n    _new(left, top, right, bottom, domElement=undefined) {\n        let r = new this.constructor(this);\n        r.left = left;\n        r.top = top;\n        r.right = right;\n        r.bottom = bottom;\n        if(domElement !== undefined) r.domElement = domElement;\n        return r;\n    }\n\n    toPoint() {\n        return new Vec2(this[0], this[1]);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    getArea() {\n        return this.width * this.height;\n    }\n\n    translate(x, y) {\n        if(Array.isArray(x)) {\n            [x, y] = x;\n        } else if(typeof x === 'object') {\n            y = x.y;\n            x = x.x;\n        }\n\n        return this._new(\n            this[0] + x,\n            this[1] + y,\n            this[2] + x,\n            this[3] + y\n        );\n    }\n\n    addMargins({left, top, right, bottom}) {\n        return this._new(\n            this.left - left,\n            this.top - top,\n            this.right + right,\n            this.bottom + bottom\n        );\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    addPadding({left, top, right, bottom}) {\n        return this._new(\n            this.left + left,\n            this.top + top,\n            this.right - right,\n            this.bottom - bottom\n        );\n    }\n\n    moveTo({left, top}) {\n        let deltaX = left - this.left,\n            deltaY = top - this.top;\n\n        return this._new(\n            this.left + deltaX,\n            this.top + deltaY,\n            this.right + deltaX,\n            this.bottom + deltaY\n        );\n    }\n\n    intersection({left, top, right, bottom}) {\n        left = Math.max(this.left, left);\n        right = Math.min(this.right, right);\n        bottom = Math.min(this.bottom, bottom);\n        top = Math.max(this.top, top);\n\n        if(left > right || top > bottom) {\n            return null;\n        }\n\n        return this._new(left, top, right, bottom);\n    }\n\n    /**\n     * Creates a new rectangle exactly big enough to hold the current rectangle and the provided rectangle.\n     * @param left\n     * @param top\n     * @param right\n     * @param bottom\n     * @returns {null|Rect}\n     */\n    union({left, top, right, bottom}) {\n        left = Math.min(left, this.left);\n        right = Math.max(right, this.right);\n        bottom = Math.max(bottom, this.bottom);\n        top = Math.min(top, this.top);\n\n        if(left > right || top > bottom) {\n            return null;\n        }\n\n        return this._new(left, top, right, bottom);\n    }\n\n    contains(rect) {\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\n    }\n\n    containsX(rect) {\n        return this.left <= rect.left && this.right >= rect.right;\n    }\n\n    containsY(rect) {\n        return this.top <= rect.top && this.bottom >= rect.bottom;\n    }\n\n    isXOverlapping(rect) {\n        return (rect.left <= this.right && rect.right >= this.left);\n    }\n\n    isYOverlapping(rect) {\n        return (rect.top <= this.bottom && rect.bottom >= this.top);\n    }\n\n    isAbove(rect) {\n        rect = new Rect(rect);\n\n        return rect.top > this.bottom;\n    }\n\n    isBelow(rect) {\n        rect = new Rect(rect);\n\n        return rect.bottom < this.top;\n    }\n\n    isLeftOf(rect) {\n        rect = new Rect(rect);\n\n        return rect.left > this.right;\n    }\n\n    isRightOf(rect) {\n        rect = new Rect(rect);\n\n        return rect.right < this.left;\n    }\n\n    isOverlapping(rect) {\n        rect = new Rect(rect);\n        return this.isXOverlapping(rect) && this.isYOverlapping(rect);\n    }\n\n    /**\n     * Attempts to fit the rect inside of the container anchoring from the anchor point.  The anchor point defaults\n     * to the top left corner or (0, 0).\n     *\n     * If possible entire rect should be clamped to the closest position inside of the container.\n     * Else position anchor point the closest possible point inside container.\n     *\n     * @param container\n     * @param anchor\n     */\n    fit(container, anchor=null) {\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\n        container = new Rect(container);\n        let starting = container;\n\n        container = container.add(new Rect(\n            anchor.left,\n            anchor.top,\n            -this.width + anchor.left,\n            -this.height + anchor.top\n        ));\n\n        container = new Rect(\n            clamp(container.left, starting.left, starting.right),\n            clamp(container.top, starting.top, starting.bottom),\n            clamp(container.right, starting.left, starting.right),\n            clamp(container.bottom, starting.top, starting.bottom)\n        );\n\n        let left = clamp(this.left, container.left, container.right) - anchor.left,\n            top = clamp(this.top, container.top, container.bottom) - anchor.top,\n            width = this.width,\n            height = this.height;\n\n        return this._new(\n            left,\n            top,\n            left + width,\n            top + height\n        );\n    }\n\n    fitX(container, anchor=null) {\n        let pos = this.fit(container, anchor);\n        return this._new(pos.left, this.top, pos.right, this.bottom);\n    }\n\n    fitY(container, anchor=null) {\n        let pos = this.fit(container, anchor);\n        return this._new(this.left, pos.top, this.right, pos.bottom);\n    }\n\n    /**\n     * Clamps the anchor point inside the rect.  Anchor point defaults to top left or (0, 0).\n     *\n     * @param rect\n     * @param anchor\n     * @returns {Rect}\n     */\n    clamp(rect, anchor=null) {\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\n        rect = new Rect(rect);\n\n        let width = this.width,\n            height = this.height,\n            left = clamp(this.left + anchor.left, rect.left, rect.right) - anchor.left,\n            top = clamp(this.top + anchor.top, rect.top, rect.bottom) - anchor.top;\n\n        return this._new(\n            left,\n            top,\n            left + width,\n            top + height\n        );\n    }\n\n    clampX(rect, anchor=null) {\n        let pos = this.clamp(rect, anchor);\n        return this._new(pos.left, this.top, pos.right, this.bottom);\n    }\n\n    clampY(rect, anchor=null) {\n        let pos = this.clamp(rect, anchor);\n        return this._new(this.left, pos.top, this.right, pos.bottom);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the distance between two rects.\n     * @param rect\n     * @returns {number}\n     */\n    getDistanceBetween(rect) {\n        rect = Rect.fromRect(rect);\n\n        let isXOverlapping = this.isXOverlapping(rect),\n            isYOverlapping = this.isYOverlapping(rect);\n\n        if(isXOverlapping && isYOverlapping) {\n            // Items are overlapping\n            return 0;\n        } else if(isXOverlapping) {\n            return Math.min(\n                Math.abs(this.bottom - rect.top),\n                Math.abs(this.top - rect.bottom)\n            );\n        } else if(isYOverlapping) {\n            return Math.min(\n                Math.abs(this.right - rect.left),\n                Math.abs(this.left - rect.right)\n            );\n        } else {\n            let x1, y1, x2, y2;\n\n            if(this.right <= rect.left) {\n                x1 = this.right;\n                x2 = rect.left;\n            } else {\n                x1 = this.left;\n                x2 = rect.right;\n            }\n\n            if(this.bottom <= rect.top) {\n                y1 = this.bottom;\n                y2 = rect.top;\n            } else {\n                y1 = this.top;\n                y2 = rect.bottom;\n            }\n\n            // Use distance formula to calculate distance.\n            return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    getDistanceFromPoint(point) {\n        point = new Rect(point.left, point.top, point.left, point.top);\n\n        let closestX = Math.abs(this.left - point.left) < Math.abs(this.right - point.left) ? this.left : this.right,\n            closestY = Math.abs(this.top - point.top) < Math.abs(this.bottom - point.top) ? this.top : this.bottom,\n            distance = calcDistance(closestX, closestY, point.left, point.top);\n\n        return this.contains(point) ? -distance : distance;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    getCenterPoint() {\n        return new Vec2(\n            this.left + (this.width / 2),\n            this.top + (this.height / 2)\n        );\n    }\n\n    reflect(point=null, axis='xy') {\n        // Reflect around the given point or origin\n        point = point ? new Vec2(point) : new Vec2(0, 0);\n\n        let x = this.left + (this.width / 2) - point.x,\n            y = this.top + (this.height / 2) - point.y;\n\n        if(axis === 'x' || axis === 'xy') {\n            x *= -1;\n        }\n\n        if(axis === 'y' || axis === 'xy') {\n            y *= -1;\n        }\n\n        x = x - (this.width / 2) + point.x;\n        y = y - (this.height / 2) + point.y;\n\n        return this._new(x, y, x + this.width, y + this.height);\n    }\n\n    position({my, at, of, offset=null, inside=null, collision=null}) {\n        // Of should be a Rect object.\n        if(of.getBoundingClientRect) {\n            of = new Rect(of);\n        }\n\n        // inside should be a Rect object.\n        if(inside && inside.getBoundingClientRect) {\n            inside = new Rect(inside);\n        }\n\n        // collision can be string with a space separating the x and y values.\n        // for example \"fit flipfit\"\n        // normalize it to an {x, y} object.\n        if(collision && typeof collision === 'string') {\n            let parts = collision.trim().split(regWhitespace);\n            collision = {\n                x: parts[0],\n                y: parts[1] || parts[0]\n            };\n        }\n\n        let anchor = this.evaluatePositionString(my),\n            reference = of.evaluatePositionString(at),\n            deltaX = reference.x - anchor.x,\n            deltaY = reference.y - anchor.y;\n\n        let rect = this.translate(deltaX, deltaY);\n\n        if(offset) {\n            rect = this.translate(offset);\n        }\n\n        // If the rect is already inside the container or if not container or collision function where given\n        // return immediately, there is not more work to be done.\n        if(!collision || !inside || inside.contains(rect)) {\n            return rect;\n        }\n\n        if(!inside.containsX(rect) && (collision.x === 'flip' || collision.x === 'flipfit')) {\n            rect = rect.reflect(of.getCenterPoint(), 'x');\n        }\n\n        if(!inside.containsY(rect) && (collision.y === 'flip' || collision.y === 'flipfit')) {\n            rect = rect.reflect(of.getCenterPoint(), 'y');\n        }\n\n        if(collision.x === 'fit' || collision.x === 'flipfit') {\n            rect = rect.fitX(inside);\n        }\n\n        if(collision.y === 'fit' || collision.y === 'flipfit') {\n            rect = rect.fitY(inside);\n        }\n\n        return rect;\n    }\n\n    evaluatePositionString(string) {\n        if(positionShortHandValues[string]) {\n            string = positionShortHandValues[string];\n        }\n\n        let pos = string.trim().split(regWhitespace),\n            x = pos[0],\n            y = pos[1],\n            rx = null,\n            ry = null;\n\n        if(x) {\n            rx = this._evaluatePositionStringComponent(x, 'x');\n        }\n\n        if(y) {\n            ry = this._evaluatePositionStringComponent(y, 'y');\n        }\n\n        return new Vec2(rx, ry);\n    }\n\n    /**\n     * Gets the anchor position relative to the element.  The anchor can be any of the following:\n     *\n     * A position string.\n     * A [x, y, offsetX=0, offsetY=0] array.\n     * An object of {left, top, offsetX=0, offsetY=0} properties.\n     *\n     * @param anchor\n     * @returns {Vec2}\n     */\n    getAnchor(anchor) {\n        if(positionShortHandValues[anchor]) {\n            anchor = positionShortHandValues[anchor];\n        }\n\n        let x, y, offsetX = 0, offsetY = 0;\n\n        if(typeof anchor === 'string') {\n            [x, y] = anchor.trim().split(regWhitespace);\n        } else if(Array.isArray(anchor)) {\n            [x, y, offsetX=0, offsetY=0] = anchor;\n        } else {\n            x = anchor.left;\n            y = anchor.top;\n            offsetX = anchor.offsetX || 0;\n            offsetY = anchor.offsetY || 0;\n        }\n\n        if(typeof x === 'string') {\n            x = this._evaluatePositionStringComponent(x, 'x') - this.left;\n        }\n\n        if(typeof y === 'string') {\n            y = this._evaluatePositionStringComponent(y, 'y') - this.top;\n        }\n\n        return new Vec2(x + offsetX, y + offsetY);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Takes a anchor point coordient relative the the rect and returns the true coordients.\n     * @param anchor\n     * @returns {Vec2}\n     */\n    getPoint(anchor) {\n        let point = this.getAnchor(anchor);\n        return new Vec2(point.left + this.left, point.top + this.top);\n    }\n\n    /**\n     * Evaluates a position string value such as \"left+10px\" into it final position on the rect.\n     * @param value - The value to evaluate.\n     * @param direction - The direction type.  Should be either \"x\" or \"y\".\n     * @returns {number}\n     * @private\n     */\n    _evaluatePositionStringComponent(value, direction) {\n        let parts = regPositionPart.exec(value),\n            r = 0;\n\n        if(parts[1]) {\n            let p = parts[1];\n\n            if(direction === 'x') {\n                if(p === 'left') {\n                    r = this.left;\n                } else if(p === 'center' || p === 'middle') {\n                    r = this.left + (this.width / 2);\n                } else if(p === 'right') {\n                    r = this.left + this.width;\n                } else {\n                    throw new ValueError(`Invalid Option: ${p}`);\n                }\n            } else {\n                if(p === 'top') {\n                    r = this.top;\n                } else if(p === 'middle' || p === 'center') {\n                    r = this.top + (this.height / 2);\n                } else if(p === 'bottom') {\n                    r = this.top + this.height;\n                } else {\n                    throw new ValueError(`Invalid Option: ${p}`);\n                }\n            }\n        } else if(direction === 'x') {\n            r = this.left;\n        } else {\n            r = this.top;\n        }\n\n        if(parts[2]) {\n            let value = parseFloat(parts[2]),\n                type = parts[3] || 'px';\n\n            if(type === 'px') {\n                r += value;\n            } else if(type === '%') {\n                if(direction === 'x') {\n                    r += (value / 100) * this.width;\n                } else {\n                    r += (value / 100) * this.height;\n                }\n            } else {\n                throw new UnitError(\"Invalid unit: Must be either % or px.\");\n            }\n        }\n\n        return r;\n    }\n\n    static fromRect({left, top, right, bottom}) {\n        return new Rect(left, top, right, bottom);\n    }\n\n    static getBoundingClientRect(element) {\n        return new Rect(element);\n    }\n\n    /**\n     * Returns the elements Rect without any inline styles applied.\n     * @param element\n     * @param restore - If true inline style will be restored after measuring.\n     * @returns {Rect}\n     */\n    static getCleanBoundingClientRect(element, restore=true) {\n        let state = {},\n            keys = [];\n\n        for(let i = 0; i < element.style.length; i++) {\n            keys.push(element.style[i]);\n        }\n\n        for(let key of keys) {\n            state[key] = element.style[key];\n            element.style[key] = \"\";\n        }\n\n        let r = Rect.getBoundingClientRect(element);\n\n        if(restore) {\n            Object.assign(element.style, state);\n        }\n\n        return r;\n    }\n\n    static getClientRect() {\n        return new Rect(\n            0,\n            0,\n            window.innerWidth,\n            window.innerHeight\n        );\n    }\n\n    static getRootContainingClientRect() {\n        return new Rect(\n            -window.scrollX,\n            -window.scrollY,\n            document.documentElement.clientWidth - window.scrollX,\n            document.documentElement.clientHeight - window.scrollY\n        );\n    }\n\n    get left() {\n        return this[0];\n    }\n\n    get top() {\n        return this[1];\n    }\n\n    get right() {\n        return this[2];\n    }\n\n    get bottom() {\n        return this[3];\n    }\n\n    set left(value) {\n        this[0] = value;\n    }\n\n    set top(value) {\n        this[1] = value;\n    }\n\n    set right(value) {\n        this[2] = value;\n    }\n\n    set bottom(value) {\n        this[3] = value;\n    }\n\n    get width() {\n        return this.right - this.left;\n    }\n\n    get height() {\n        return this.bottom - this.top;\n    }\n\n    set width(value) {\n        this.right = this.left + value;\n    }\n\n    set height(value) {\n        this.bottom = this.top + value;\n    }\n\n    get x() {\n        return this.left;\n    }\n\n    get y() {\n        return this.top;\n    }\n\n    set x(value) {\n        this.left = value;\n    }\n\n    set y(value) {\n        this.top = value;\n    }\n}\n","import {clamp} from '../utility';\n\n\n/**\n * Stores a 2 value Vector.\n */\nexport default class Vec2 {\n    constructor(x=0, y=0) {\n        if(x instanceof Vec2) {\n            this[0] = x.x;\n            this[1] = x.y;\n        } else if(Array.isArray(x)) {\n            this[0] = x[0];\n            this[1] = x[1];\n        } else if(typeof x === 'object') {\n            if(x.left !== undefined) {\n                this[0] = x.left;\n                this[0] = x.top;\n            } else {\n                this[0] = x.x;\n                this[1] = x.y;\n            }\n        } else {\n            this[0] = x;\n            this[1] = y;\n        }\n    }\n\n    add(vec2) {\n        if(typeof vec2 === 'number') {\n            return new Vec2(\n                this[0] + vec2,\n                this[1] + vec2\n            );\n        } else {\n            return new Vec2(\n                this[0] + vec2[0],\n                this[1] + vec2[1]\n            );\n        }\n    }\n\n    subtract(vec2) {\n        if(typeof vec2 === 'number') {\n            return new Vec2(\n                this[0] - vec2,\n                this[1] - vec2\n            );\n        } else {\n            return new Vec2(\n                this[0] - vec2[0],\n                this[1] - vec2[1]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    scalar(value) {\n        return new Vec2(this[0] * value, this[1] * value);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    mod(vec2) {\n        if(typeof vec2 === 'number') {\n            return new Vec2(\n                this[0] % vec2,\n                this[1] % vec2\n            );\n        } else {\n            return new Vec2(\n                this[0] % vec2[0],\n                this[1] % vec2[1]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    equals(vec2) {\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\n    }\n\n    set(value) {\n        if(typeof value !== 'object') {\n            this[0] = value;\n            this[1] = value;\n        } else {\n            this[0] = value[0];\n            this[1] = value[1];\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    clone() {\n        return Vec2(this[0], this[1]);\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get left() {\n        return this[0];\n    }\n\n    get right() {\n        return this[0];\n    }\n\n    get top() {\n        return this[1];\n    }\n\n    get bottom() {\n        return this[1];\n    }\n\n    set x(value) {\n        this[0] = value;\n    }\n\n    set y(value) {\n        this[1] = value;\n    }\n\n    set left(value) {\n        this[0] = value;\n    }\n\n    set top(value) {\n        this[1] = value;\n    }\n\n    get width() {\n        return this[0];\n    }\n\n    set width(value) {\n        this[0] = value;\n    }\n\n    get height() {\n        return this[1];\n    }\n\n    set height(value) {\n        this[1] = value;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toTranslate() {\n        return `translate(${this.x}px, ${this.y}px)`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toTranslate3d() {\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\n    }\n\n    clamp(vec4) {\n        return new Vec2(\n            clamp(this.left, vec4.left, vec4.right),\n            clamp(this.top, vec4.top, vec4.bottom)\n        );\n    }\n\n    static fromVertex(vertex) {\n        if(Array.isArray(vertex)) {\n            return new Vec2(vertex[0], vertex[1]);\n        } else if(vertex.hasOwnProperty('left')) {\n            return new Vec2(vertex.left, vertex.top);\n        } else {\n            return new Vec2(vertex.x, vertex.y);\n        }\n    }\n}\n","\n\n/**\n * Stores a 3 value vector.\n */\nexport default class Vec3 {\n    constructor(x=0, y=0, z=0) {\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    set x(value) {\n        this[0] = value;\n    }\n\n    set y(value) {\n        this[1] = value;\n    }\n\n    set z(value) {\n        this[2] = value;\n    }\n\n    get r() {\n        return this[0];\n    }\n\n    get g() {\n        return this[1];\n    }\n\n    get b() {\n        return this[2];\n    }\n\n    set r(value) {\n        this[0] = value;\n    }\n\n    set g(value) {\n        this[1] = value;\n    }\n\n    set b(value) {\n        this[2] = value;\n    }\n\n    set(value) {\n        if(typeof value !== 'object') {\n            this[0] = value;\n            this[1] = value;\n            this[2] = value;\n        } else {\n            this[0] = value[0];\n            this[1] = value[1];\n            this[2] = value[2];\n        }\n    }\n\n    add(vec3) {\n        if(typeof vec3 === 'number') {\n            return new Vec3(\n                this[0] + vec3,\n                this[1] + vec3,\n                this[2] + vec3\n            );\n        } else {\n            return new Vec3(\n                this[0] + vec3[0],\n                this[1] + vec3[1],\n                this[2] + vec3[2]\n            );\n        }\n    }\n\n    subtract(vec3) {\n        if(typeof vec3 === 'number') {\n            return new Vec3(\n                this[0] - vec3,\n                this[1] - vec3,\n                this[2] - vec3\n            );\n        } else {\n            return new Vec3(\n                this[0] - vec3[0],\n                this[1] - vec3[1],\n                this[2] - vec3[2]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    scalar(value) {\n        return new Vec3(\n            this[0] * value,\n            this[1] * value,\n            this[2] * value\n        );\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    equals(vec3) {\n        return vec3 === this || (vec3[0] === this[0] && vec3[1] === this[1] && vec3[2] === this[2]);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    mod(vec3) {\n        if(typeof vec3 === 'number') {\n            return new Vec3(\n                this[0] % vec3,\n                this[1] % vec3,\n                this[2] % vec3\n            );\n        } else {\n            return new Vec3(\n                this[0] % vec3[0],\n                this[1] % vec3[1],\n                this[2] % vec3[2]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    clone() {\n        return new Vec3(this[0], this[1], this[2]);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toHex() {\n        let r = Math.round(this.r).toString(16),\n            g = Math.round(this.g).toString(16),\n            b = Math.round(this.b).toString(16);\n\n        if(r.length === 1) {\n            r = '0' + r;\n        }\n\n        if(g.length === 1) {\n            g = '0' + g;\n        }\n\n        if(b.length === 1) {\n            b = '0' + b;\n        }\n\n        return `#${r}${g}${b}`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toRGB() {\n        return `rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toTranslate3d() {\n        return `translate3d(${this.x}px, ${this.y}px, ${this.z}px)`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    static fromHex(hex) {\n        let m = /^#?([0-9a-f]{3})$/i.exec(hex);\n\n        if(m) {\n            hex = m[1][0] + m[1][0] + m[1][1] + m[1][1] + m[1][2] + m[1][2];\n        } else {\n            m = /^#?([0-9a-f]{6})$/i.exec(hex);\n\n            if(m) {\n                hex = m[1];\n            } else {\n                throw new Error(`Could not parse value ${hex}`);\n            }\n        }\n\n        hex = parseInt(hex, 16);\n\n        // r, g, b\n        return new Vec3(\n            hex & 0xff0000 >> 16,\n            hex & 0x00ff00 >> 8,\n            hex & 0x0000ff\n        );\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    static fromRGB(value) {\n        let m = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/.exec(value);\n\n        if(!m) {\n            throw new Error(`Could not parse rgb value ${value}`);\n        }\n\n        return new Vec3(\n            parseInt(m[1], 10),\n            parseInt(m[2], 10),\n            parseInt(m[3], 10),\n        );\n    }\n}\n","/**\n * Class to store a 4 value vector.\n * Provides DOMRect interface.\n */\nexport default class Vec4 {\n    /**\n     * r, g, b, a\n     * left, top, right, bottom\n     *\n     * @param left\n     * @param top\n     * @param right\n     * @param bottom\n     */\n    constructor(left, top, right, bottom) {\n        this[0] = left;\n        this[1] = top;\n        this[2] = right;\n        this[3] = bottom;\n    }\n\n    get r() {\n        return this[0];\n    }\n\n    set r(value) {\n        this[0] = value;\n    }\n\n    get g() {\n        return this[1];\n    }\n\n    set g(value) {\n        this[1] = value;\n    }\n\n    get b() {\n        return this[2];\n    }\n\n    set b(value) {\n        this[2] = value;\n    }\n\n    get a() {\n        return this[3];\n    }\n\n    set a(value) {\n        this[3] = value;\n    }\n\n    set(valueOrVec4) {\n        if(typeof valueOrVec4 !== 'object') {\n            this[0] = valueOrVec4;\n            this[1] = valueOrVec4;\n            this[2] = valueOrVec4;\n            this[3] = valueOrVec4;\n        } else {\n            this[0] = valueOrVec4[0];\n            this[1] = valueOrVec4[1];\n            this[2] = valueOrVec4[2];\n            this[3] = valueOrVec4[3];\n        }\n    }\n\n    add(valueOrVec4) {\n        if(typeof valueOrVec4 === 'number') {\n            return this._new(\n                this[0] + valueOrVec4,\n                this[1] + valueOrVec4,\n                this[2] + valueOrVec4,\n                this[3] + valueOrVec4\n            );\n        } else {\n            return this._new(\n                this[0] + valueOrVec4[0],\n                this[1] + valueOrVec4[1],\n                this[2] + valueOrVec4[2],\n                this[3] + valueOrVec4[3]\n            );\n        }\n    }\n\n    subtract(valueOrVec4) {\n        if(typeof valueOrVec4 === 'number') {\n            return this._new(\n                this[0] - valueOrVec4,\n                this[1] - valueOrVec4,\n                this[2] - valueOrVec4,\n                this[3] - valueOrVec4\n            );\n        } else {\n            return this._new(\n                this[0] - valueOrVec4[0],\n                this[1] - valueOrVec4[1],\n                this[2] - valueOrVec4[2],\n                this[3] - valueOrVec4[3]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    scalar(value) {\n        return this._new(\n            this[0] * value,\n            this[1] * value,\n            this[2] * value,\n            this[3] * value\n        );\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    equals(vec4) {\n        return vec4 === this || (vec4[0] === this[0] && vec4[1] === this[1] && vec4[2] === this[2] && vec4[3] === this[3]);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    mod(valueOrVec4) {\n        if(typeof valueOrVec4 === 'number') {\n            return this._new(\n                this[0] % valueOrVec4,\n                this[1] % valueOrVec4,\n                this[2] % valueOrVec4,\n                this[3] % valueOrVec4,\n            );\n        } else {\n            return this._new(\n                this[0] % valueOrVec4[0],\n                this[1] % valueOrVec4[1],\n                this[2] % valueOrVec4[2],\n                this[3] % valueOrVec4[3]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toRGBA() {\n        return `rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.a})`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    clone() {\n        return new this.constructor(this[0], this[1], this[2], this[3]);\n    }\n\n    _new(left, top, right, bottom) {\n        return new this.constructor(left, top, right, bottom);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    static fromRGBAObject({r, g, b, a}) {\n        return new Vec4(r, g, b, a);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    static fromRGBA(value) {\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\n\n        if(!m) {\n            throw new Error(`Could not parse rgba value ${value}`);\n        }\n\n        return new Vec4(\n            parseInt(m[1], 10),\n            parseInt(m[2], 10),\n            parseInt(m[3], 10),\n            parseFloat(m[4]),\n        );\n    }\n}\n","import Rect from \"./Rect\";\nimport Vec2 from \"./Vec2\";\nimport Vec3 from \"./Vec3\";\nimport Vec4 from \"./Vec4\";\nimport RGBA from \"./RGBA\";\nimport {UnitError} from \"../errors\";\n\n\nexport {Rect, Vec2, Vec3, Vec4, RGBA, UnitError};\n","/**\n * @interface\n * @abstract\n */\nexport default class FormWidgetBase {\n    constructor(element) {\n        this.element = null;\n\n        if(typeof element === 'string') {\n            this.element = document.querySelector(element);\n        } else if(element) {\n            this.element = element;\n        }\n    }\n\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.element);\n        } else if(selector.appendChild) {\n            selector.appendChild(this.element);\n        } else if(selector.append) {\n            selector.append(this.element);\n        }\n    }\n\n    remove() {\n        this.element.parentElement.removeChild(this.element);\n    }\n\n    /**\n     * Returns the current raw value without any cleaning, typecasting, or validation.\n     * @abstract\n     */\n    getValue() {\n\n    }\n\n    /**\n     * Sets the widgets raw value.\n     *\n     * @abstract\n     * @param value {*}\n     */\n    setValue(value) {\n\n    }\n\n    /**\n     * Sets the name of the widget.\n     *\n     * @abstract\n     * @param name {String}\n     */\n    setName(name) {\n\n    }\n\n    /**\n     * Returns the name of the widget.\n     * @abstract\n     * @returns {String}\n     */\n    getName() {\n\n    }\n\n    get id() {\n        return this.element.id;\n    }\n\n    set id(id) {\n        this.element.id = id;\n    }\n\n    get classList() {\n        return this.element.classList;\n    }\n\n    set classList(value) {\n        this.element.classList = value;\n    }\n\n    get dataset() {\n        return this.element.dataset;\n    }\n\n    set dataset(dataset) {\n        this.element.dataset = dataset;\n    }\n\n    get name() {\n        return this.getName();\n    }\n\n    set name(value) {\n        this.setName(value);\n    }\n\n    get value() {\n        return this.getValue();\n    }\n\n    set value(value) {\n        this.setValue(value);\n    }\n}\n","import {emptyElement} from \"../core/utility\";\nimport FormWidgetBase from \"./FormWidgetBase\";\nimport InputWidget from \"./InputWidget\";\n\n\nexport class MultiHiddenInputWidget extends FormWidgetBase {\n    constructor(container=null) {\n        let element = container || document.createElement('span');\n        super(element);\n        this.element.style.display = \"none\";\n        this._name = \"\";\n        this.inputs = [];\n        this._value = [];\n    }\n\n    render() {\n        let value = this.value;\n\n        emptyElement(this.element);\n\n        if(!Array.isArray(value)) {\n            value = [value];\n        }\n\n        let fragment = document.createDocumentFragment();\n\n        for(let v of value) {\n            let input = document.createElement('input');\n            input.type = \"hidden\";\n            input.value = v + \"\";\n            if(this.name) input.name = this.name;\n            fragment.appendChild(input);\n        }\n\n        this.element.appendChild(fragment);\n    }\n\n    getValue() {\n        if(this._value.length === 1) {\n            return this._value[0];\n        } else {\n            return this._value;\n        }\n    }\n\n    setValue(value) {\n        if(!Array.isArray(value)) {\n            value = [value];\n        }\n\n        this._value = value.map(item => item+'');\n        this.render();\n    }\n\n    getName() {\n        return this._name;\n    }\n\n    setName(name) {\n        this._name = name;\n\n        for(let input of this.element.querySelectorAll('input')) {\n            input.name = name;\n        }\n    }\n}\n\n\nexport default class HiddenInputWidget extends InputWidget {\n    constructor(input=null) {\n        super(input);\n        this.type = 'hidden';\n    }\n}\n","import {emptyElement} from \"../core/utility\";\nimport FormWidgetBase from \"./FormWidgetBase\";\n\n\nexport default class InputWidget extends FormWidgetBase {\n    constructor(input=null) {\n        if(!input) {\n            input = document.createElement('input');\n        }\n\n        super(input);\n        this.input = input;\n    }\n\n    getValue() {\n        return this.input.value;\n    }\n\n    setValue(value) {\n        this.input.value = value;\n    }\n\n    getName() {\n        return this.input.name;\n    }\n\n    setName(name) {\n        this.input.name = name;\n    }\n\n    get type() {\n        return this.input.type;\n    }\n\n    set type(type) {\n        this.input.type = type;\n    }\n\n    get placeholder() {\n        return this.input.placeholder;\n    }\n\n    set placeholder(value) {\n        this.input.placeholder = value;\n    }\n}\n","import FormWidgetBase from \"./FormWidgetBase\";\n\n\nexport default class SelectInputWidget extends FormWidgetBase {\n    constructor(select, multiple=null, name=null, hidden=null) {\n        if(typeof select === 'string') {\n            select = document.querySelector(select);\n        }\n\n        super(select);\n\n        if(name !== null) {\n            this.element.name = name;\n        }\n\n        if(multiple !== null) {\n            this.element.multiple = multiple;\n        }\n\n        if(hidden !== null) {\n            this.isHidden = hidden;\n        }\n    }\n\n    get isHidden() {\n        return this.element.style.display === 'none';\n    }\n\n    set isHidden(value) {\n        if(this.isHidden !== value) {\n            if(value) {\n                this.element.style.display = \"none\";\n            } else {\n                this.element.style.display = \"\";\n            }\n        }\n    }\n\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.element);\n        } else if(selector.appendChild) {\n            selector.appendChild(this.element);\n        } else if(selector.append) {\n            selector.append(this.element);\n        }\n    }\n\n    getValue() {\n        let r = [];\n\n        for(let option of this.element.querySelectorAll(\"option\")) {\n            if(option.selected) {\n                r.push(option.value);\n            }\n        }\n\n        return r;\n    }\n\n    setValue(values) {\n        if(!Array.isArray(values)) {\n            values = [values];\n        }\n\n        let options = [];\n\n        for(let option of this.element.querySelectorAll(\"option\")) {\n            options.push({\n                element: option,\n                value: option.value,\n                selected: false\n            });\n        }\n\n        for(let value of values) {\n            value += \"\";\n            let found = false;\n\n            for(let option of options) {\n                if(option.value === value && !option.selected) {\n                    option.selected = true;\n                    found = true;\n                    break;\n                }\n            }\n\n            if(!found) {\n                throw new Error(`Unknown value: ${value}`);\n            }\n        }\n\n        // Select will set its value back to selected if there is no currently selected elements.\n        // To fix this select the elements first, then deselect.\n        for(let option of options) {\n            if(option.selected) {\n                option.element.selected = true;\n            }\n        }\n\n        for(let option of options) {\n            if(!option.selected) {\n                option.element.selected = false;\n            }\n        }\n    }\n\n    clearSelected() {\n        let options = this.element.querySelectorAll(\"option\");\n\n        for(let option of options) {\n            option.selected = false;\n        }\n    }\n\n    getName() {\n        return this.element.name;\n    }\n\n    setName(name) {\n        this.element.name = name;\n    }\n}\n","export SelectInputWidget from \"./SelectInputWidget\";\nexport HiddenInputWidget, {MultiHiddenInputWidget} from \"./HiddenInputWidget\";\nexport FormWidgetBase from \"./FormWidgetBase\";\nexport InputWidget from \"./InputWidget\";\n","import Menu, {AbstractMenu} from \"./Menu\";\nimport MenuItem from \"./MenuItem\";\nimport * as positioners from \"./positioners\";\nimport {createFragment} from \"../core/utility\";\nimport {Rect, setElementClientPosition} from \"../core/ui/position\";\n\n\nexport default class ContextMenu extends AbstractMenu {\n    constructor({target=null, targetMenu=null, closeOnBlur=true, timeout=false, autoActivate=true, multiple=false, openOnHover=true,\n                toggle=true, closeOnSelect=true, delay=500, enableKeyboardNavigation=true, ...context}) {\n        if(!target) {\n            target = createFragment(`\n                <div class=\"menu\">\n                    <div class=\"menu__body\" data-body></div>\n                </div>\n            `).children[0];\n        }\n\n        super({\n            closeOnBlur,\n            timeout,\n            autoActivate,\n            openOnHover,\n            toggle,\n            closeOnSelect,\n            delay,\n            positioner: positioners.CONTEXT_MENU,\n            direction: 'vertical',\n            target,\n            ...context\n        });\n\n        this.element.classList.add('context-menu');\n        this.isVisible = false;\n        this.registerTopics();\n        this.parseDOM();\n        this.init();\n        this.initKeyboardNavigation();\n\n        this._onContextMenu = event => {\n            if(this.isActive) {\n                this.deactivate();\n                this.hide();\n            }\n\n            event.preventDefault();\n            this.show();\n\n            let rect = Rect.getBoundingClientRect(this.element),\n                space = Rect.getBoundingClientRect(event.target),\n                deltaX = event.clientX - space.left,\n                deltaY = event.clientY - space.top;\n\n            rect = rect.position({\n                my: \"left top\",\n                at: `${deltaX}px ${deltaY}px`,\n                of: space,\n                inside: space,\n                collision: 'fit fit'\n            });\n\n            setElementClientPosition(this.element, rect);\n        };\n    }\n\n    registerTopics() {\n        super.registerTopics();\n\n        let onClick = event => {\n            // noinspection JSUnresolvedFunction\n            if(!this.element.contains(event.target)) {\n                this.hide();\n            }\n        };\n\n        this.on('menu.show', () => {\n            document.addEventListener('click', onClick);\n        });\n\n        this.on('menu.hide', topic => {\n            if(topic.target === this) {\n                if(this.isActive) this.deactivate();\n                document.removeEventListener('click', onClick);\n            }\n        });\n\n        this.on('menuitem.select', () => {\n            if(this.closeOnSelect) {\n                this.hide();\n                if(this.isActive) this.deactivate();\n            }\n        });\n    }\n\n    constructMenuItem(config) {\n        return new MenuItem(config);\n    }\n\n    constructSubMenu(config) {\n        return new Menu(config);\n    }\n\n    setContainer(container) {\n        if(typeof container === 'string') {\n            container = document.querySelector(container);\n        }\n\n        this.positioner = positioners.contextMenuPosition(container);\n    }\n\n    setTargetMenu(target) {\n        if(this._targetMenu) {\n            this._targetMenu.removeEventListener('contextmenu', this._onContextMenu);\n            this._targetMenu = null;\n        }\n\n        if(!target) return;\n\n        if(typeof target === 'string') {\n            target = document.querySelector(target);\n        }\n\n        this._targetMenu = target;\n        this._targetMenu.addEventListener('contextmenu', this._onContextMenu);\n    }\n}\n","import MenuItem from \"./MenuItem\";\nimport * as positioners from \"./positioners\";\n\nexport default class DropDown extends MenuItem {\n    constructor({toggle=\"both\", closeOnSelect=true, closeOnBlur=true, ...options}) {\n        super({toggle, closeOnSelect, closeOnBlur, ...options});\n        this.positioner = positioners.DROPDOWN;\n        this.init();\n    }\n}\n","import MenuNode from \"./MenuNode\";\nimport MenuItem from \"./MenuItem\";\n// import {inherit} from './decorators';\nimport {Attribute, AttributeSchema, Integer, Bool, CompoundType} from \"../core/serialize\";\nimport {modulo} from \"../core/utility/math\";\nimport {createFragment} from \"../core/utility/dom\";\n\n\nconst INT_OR_BOOL_TYPE = new Attribute(new CompoundType(Bool, Integer), Attribute.DROP, Attribute.DROP),\n    BOOL_TYPE = new Attribute(Bool, Attribute.DROP, Attribute.DROP);\n\n\nexport const MENU_ATTRIBUTE_SCHEMA = new AttributeSchema({\n    closeOnBlur: INT_OR_BOOL_TYPE,\n    timeout: INT_OR_BOOL_TYPE,\n    autoActivate: INT_OR_BOOL_TYPE,\n    openOnHover: INT_OR_BOOL_TYPE,\n    closeOnSelect: INT_OR_BOOL_TYPE,\n    delay: INT_OR_BOOL_TYPE,\n    toggle: BOOL_TYPE,\n    visible: BOOL_TYPE\n});\n\n\nfunction _isNavigableChild(item) {\n    return item.isNavigable;\n}\n\n\nfunction _findFirstNavigableChild(children) {\n    return children.find(_isNavigableChild);\n}\n\n\nfunction _findAllNavigableChildren(children) {\n    return children.filter(_isNavigableChild);\n}\n\n\n/**\n * @abstract\n */\nexport class AbstractMenu extends MenuNode {\n    // @inherit positioner;\n    // @inherit delay = false;\n\n    #positioner;\n    #delay;\n\n    constructor({\n            target,\n            closeOnBlur=false, timeout=false, autoActivate=false, openOnHover=false, toggle=false,\n            closeOnSelect=true, delay=\"inherit\", positioner=\"inherit\", direction=\"vertical\"}={}\n            ) {\n\n        super(target);\n\n        this.closeOnBlur = closeOnBlur; // both sub-item and menu\n        this.timeout = timeout; // both sub-item and menu\n        // noinspection JSUnusedGlobalSymbols\n        this.autoActivate = autoActivate; // sub-item property\n        // noinspection JSUnusedGlobalSymbols\n        this.openOnHover = openOnHover; // sub-item property\n        this.toggle = toggle;\n        this.closeOnSelect = closeOnSelect; // both sub-item and menu.\n        // noinspection JSUnusedGlobalSymbols\n        this.delay = delay; // sub-item property\n        this.positioner = positioner;\n        this.direction = direction;\n\n        this.parseDOM();\n    }\n\n    registerTopics() {\n        if(this._isTopicInit) return;\n        super.registerTopics();\n\n        // On child is activate\n        // deactivate siblings if multiple is false.\n        this.on('menuitem.activate', (target) => {\n            if(target.parent === this) {\n                if (!this.isActive) {\n                    this.activate();\n                }\n\n                for(let child of this.children) {\n                    if(child !== target && child.isActive) {\n                        child.deactivate();\n                    }\n                }\n            }\n        });\n\n        let _timer = null;\n\n        this.on('menuitem.deactivate', (target) => {\n            if(_timer) {\n                clearTimeout(_timer);\n                _timer = null;\n            }\n\n            _timer = setTimeout( () => {\n                _timer = null;\n                if (target.parent === this) {\n                    if (this.isActive && !this.activeChild) {\n                        this.deactivate();\n                    }\n                }\n            }, 0);\n        });\n\n        this.on('event.click', (event) => this.onClick(event));\n        this.on('event.mouseover', (event) => this.onMouseOver(event));\n        this.on('event.mouseout', (event) => this.onMouseOut(event));\n        this.on('menuitem.select', (event) => this.onSelect(event));\n    }\n\n    activate() {\n        if(!this.isActive) {\n            let parent = this.parent;\n\n            // Set isActivate flag and add active classes.\n            this.isActive = true;\n\n            // Register document click handler\n            if(this.closeOnBlur && !this._captureDocumentClick) {\n                this._captureDocumentClick = {\n                    target: document,\n\n                    onDocumentClick: (event) => {\n                        if(!this.element.contains(event.target)) {\n                            this.deactivate();\n                        }\n                    }\n                };\n\n                // Add to the end of the call stack.\n                setTimeout(() => {\n                    if(this._captureDocumentClick) {\n                        this._captureDocumentClick.target.addEventListener('click', this._captureDocumentClick.onDocumentClick);\n                    }\n                }, 0);\n            }\n\n            // Notify parent that submenu activated.\n            if(parent) {\n                if(!parent.isActive) parent.activate();\n            }\n\n            this.publish('menu.activate');\n\n            this.dispatchTopic('menu.activate', {\n                target: this\n            });\n\n            // Dispatch dom events.\n            this.element.dispatchEvent(new CustomEvent('menu.activate', {\n                detail: this,\n                bubbles: true\n            }));\n        }\n    }\n\n    deactivate() {\n        if(this.isActive) {\n            // Set flag and remove active classes.\n            this.isActive = false;\n\n            // Clear any active child items.\n            this.clearActiveChild();\n\n            // Remove document click handler that tracks user clicks outside of menu tree.\n            if(this._captureDocumentClick) {\n                this._captureDocumentClick.target.removeEventListener('click', this._captureDocumentClick.onDocumentClick);\n                this._captureDocumentClick = null;\n            }\n\n            // clear timers\n            this.clearTimer('timeout');\n\n            for(let child of this.children) {\n                child.clearTimer('activateItem');\n            }\n\n            this.dispatchTopic('menu.deactivate', {\n                target: this\n            });\n\n            // Dispatch dom events.\n            this.element.dispatchEvent(new CustomEvent('menu.deactivate', {\n                detail: this,\n                bubbles: true\n            }));\n        }\n    }\n\n    show() {\n        if(!this.isVisible) {\n            this.isVisible = true;\n            this.element.classList.add('show');\n            this.element.classList.remove('hide');\n\n            this.dispatchTopic('menu.show', {target: this});\n        }\n    }\n\n    hide() {\n        if(this.isVisible) {\n            this.isVisible = false;\n            this.element.classList.add('hide');\n            this.element.classList.remove('show');\n\n            this.dispatchTopic('menu.hide', {target: this});\n        }\n    }\n\n    position() {\n        let positioner = this.positioner;\n\n        if(positioner) {\n            positioner.call(this, this);\n        }\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Tree methods.\n\n    createItems(data) {\n        for(let {submenu, ...args} of data) {\n            let item = this.constructMenuItem(args);\n\n            if(submenu) {\n                let _submenu = this.constructSubMenu(submenu);\n                item.attachSubMenu(_submenu);\n            }\n\n            this.append(item);\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    addItem(text, action=null) {\n        let item = this.constructMenuItem({text, action});\n        this.append(item);\n        return this;\n    }\n\n    removeItem(item) {\n        if(this.hasItem(item)) {\n            this.removeChildMenuNode(item);\n            if(item.element.parentElement) item.element.parentElement.removeChild(item.element);\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    hasItem(item) {\n        return this.hasChild(item);\n    }\n\n    append(item) {\n        let body = this.getMenuBody();\n\n        body = body[body.length - 1];\n\n        if(item.nodeType) {\n            body.appendChild(item);\n            return this;\n        }\n\n        if(item.parent) {\n            item.parent.removeItem(item);\n        }\n\n        item.appendTo(body);\n\n        if(item.isMenuItem && item.isMenuItem()) {\n            this.appendChildMenuNode(item);\n        }\n\n        return this;\n    }\n\n    get activeChild() {\n        for(let item of this.children) {\n            if(item.isActive) {\n                return item;\n            }\n        }\n\n        return null;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get activeIndex() {\n        let children = this.children;\n\n        for(let i = 0, l = children.length; i < l; i++) {\n            if(children[i].isActive) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    get firstChild() {\n        return this.children[0];\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get lastChild() {\n        return this.children[this.children.length-1];\n    }\n\n    get firstEnabledChild() {\n        let children = this.children;\n\n        for(let i = 0, l = children.length; i < l; i++) {\n            if(!children[i].isDisabled) {\n                return children[i];\n            }\n        }\n\n        return null;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get lastEnabledChild() {\n        let children = this.children;\n\n        for(let i = children.length-1, l = 0; i >= l; i--) {\n            if(!children[i].isDisabled) {\n                return children[i];\n            }\n        }\n\n        return null;\n    }\n\n    get positioner() {\n        if(this.#positioner === 'inherit' || this.#positioner === undefined) {\n            let parent = this.parent;\n            return parent ? parent.positioner : undefined;\n        } else if(this.#positioner === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.positioner;\n            }\n        } else {\n            return this.#positioner;\n        }\n    }\n\n    set positioner(value) {\n        this.#positioner = value;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get delay() {\n        if(this.#delay === 'inherit' || this.#delay === undefined) {\n            let parent = this.parent;\n            return parent ? parent.delay : undefined;\n        } else if(this.#delay === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.delay;\n            }\n        } else {\n            return this.#delay;\n        }\n    }\n\n    set delay(value) {\n        this.#delay = value;\n    }\n\n    clearActiveChild() {\n        for(let child of this.children) {\n            if(child.isActive) {\n                child.deactivate();\n            }\n        }\n    }\n\n    /**\n     * Returns list of all menu bodies for the menu.\n     *\n     * Menu bodies are where item are appended when using function like addItem or append.  They will be added to the\n     * last menu body in the menu.\n     *\n     * @returns {NodeListOf<HTMLElementTagNameMap[string]> | NodeListOf<Element> | NodeListOf<SVGElementTagNameMap[string]> | HTMLElement[]}\n     */\n    getMenuBody() {\n        let bodies = Array.prototype.slice.call(this.element.querySelectorAll(':scope > .menu__body'));\n\n        if(!bodies.length) {\n            return [this.element];\n        } else {\n            // noinspection JSValidateTypes\n            return bodies;\n        }\n    }\n\n    isMenu() {\n        return true;\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Event Handlers\n\n    onMouseOver() {\n        this.clearTimer('timeout');\n    }\n\n    onMouseOut(event) {\n        if(!this.element.contains(event.originalEvent.relatedTarget)) {\n            if(this.isActive && typeof this.timeout === 'number' && this.timeout >= 0) {\n                // noinspection JSCheckFunctionSignatures\n                this.startTimer('timeout', () => {\n                    this.deactivate();\n                }, this.timeout);\n            }\n        }\n    }\n\n    onClick(event) {\n        if(event.target === this) {\n            if(this.isActive && this.toggle) {\n                this.deactivate();\n            } else if(!this.isActive) {\n                this.activate();\n            }\n\n            this.dispatchTopic('menu.click', event);\n        }\n    }\n\n    onSelect() {\n        if(this.closeOnSelect && this.isActive) {\n            this.deactivate();\n        }\n    }\n\n    /**\n     * Handles navigating the selection to an item during keyboard navigation.\n     * @param item\n     * @param showSubMenu\n     * @private\n     */\n    _navigateToItem(item, showSubMenu=false) {\n        if(!item) return;\n\n        let parent = item.parent;\n\n        if(!parent.isVisible) parent.show();\n        if(!parent.isActive) parent.activate();\n        if(!item.isActive) item.activate(false);\n        if(showSubMenu && item.hasSubMenu() && !item.submenu.isVisible) item.showSubMenu();\n    }\n\n    /**\n     * Handles keyboard navigation.\n     * @param event\n     * @param allowTargetKeys\n     * @param _depth\n     * @returns {boolean|boolean|*}\n     * @private\n     */\n    _navigate(event, allowTargetKeys=true, _depth=0) {\n        let key = event.key,\n            ARROW_BACK = 'ArrowUp',\n            ARROW_FORWARD = 'ArrowDown',\n            ARROW_NEXT = 'ArrowRight',\n            ARROW_PREVIOUS = 'ArrowLeft',\n            arrowKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'],\n            arrowKeyPressed = arrowKeys.indexOf(key) !== -1;\n\n        if(this.direction === 'vertical') {\n            ARROW_BACK = 'ArrowLeft';\n            ARROW_FORWARD = 'ArrowRight';\n            ARROW_NEXT = 'ArrowDown';\n            ARROW_PREVIOUS = 'ArrowUp';\n        }\n\n        if(arrowKeyPressed) {\n            if(!this.isVisible) {\n                this.show();\n                event.preventDefault();\n                return true;\n            }\n\n            let children = _findAllNavigableChildren(this.children),\n                index = children.indexOf(this.activeChild),\n                child = children[index];\n\n            if(key === ARROW_PREVIOUS) {\n                if(index === -1) {\n                    // When their is no active item, activate the last item.\n                    this._navigateToItem(children[children.length-1], this.isRoot);\n                } else {\n                    this._navigateToItem(children[modulo(index-1, children.length)], this.isRoot);\n                }\n\n                event.preventDefault();\n                return true;\n            } else if(key === ARROW_NEXT) {\n                if(index === -1) {\n                    this._navigateToItem(children[0], this.isRoot);\n                } else {\n                    this._navigateToItem(children[modulo(index+1, children.length)], this.isRoot);\n                }\n\n                event.preventDefault();\n                return true;\n            } else if(key === ARROW_FORWARD) {\n                if(child && child.hasSubMenu() && (!child.submenu.isVisible || !child.submenu.activeChild)) {\n                    let ret = false;\n\n                    if(!child.submenu.isVisible) {\n                        ret = true;\n                        child.showSubMenu();\n                    }\n\n                    let firstChild = _findFirstNavigableChild(child.submenu.children);\n\n                    if(firstChild) {\n                        ret = true;\n                        this._navigateToItem(firstChild, false);\n                    }\n\n                    if(ret) {\n                        event.preventDefault();\n                        return true;\n                    }\n                } else if(!child) {\n                    let firstChild = _findFirstNavigableChild(this.children);\n\n                    if(firstChild) {\n                        this._navigateToItem(firstChild, this.isRoot);\n\n                        if(firstChild.hasSubMenu() && firstChild.submenu.isVisible) {\n                            let firstSubMenuChild = _findFirstNavigableChild(firstChild.submenu.children);\n\n                            if(firstSubMenuChild) {\n                                this._navigateToItem(firstSubMenuChild, false);\n                            }\n                        }\n\n                        event.preventDefault();\n                        return true;\n                    }\n                } else if(!this.isRoot) {\n                    return this.parent._navigate(event, allowTargetKeys, _depth+1);\n                }\n            } else if(key === ARROW_BACK) {\n                if(!this.isRoot) {\n                    if (this.activeChild && this.activeChild.hasSubMenu() && this.activeChild.submenu.isVisible) {\n                        this.activeChild.hideSubMenu();\n                        event.preventDefault();\n                        return true;\n                    } else {\n                        return this.parent._navigate(event, allowTargetKeys, _depth + 1);\n                    }\n                } else if(_depth === 0) {\n                    if(child && child.submenu) {\n                        return child._navigate(event, allowTargetKeys, 0);\n                    } else if(!child) {\n                        let firstChild = _findFirstNavigableChild(this.children);\n\n                        if(firstChild) {\n                            return firstChild._navigate(event, allowTargetKeys, 0);\n                        }\n                    }\n                }\n            }\n        } else if(key === \"Enter\") {\n            // The menu is not visible at this point make it visible and return.\n            if(!this.isVisible) {\n                this.show();\n                event.preventDefault();\n\n                if(!this.activeChild) {\n                    let childToActivate = _findFirstNavigableChild(this.children);\n                    if(childToActivate) this.firstEnabledChild.activate();\n                }\n\n                return true;\n            }\n\n            if(this.activeChild) {\n                if(this.activeChild.hasSubMenu()) {\n                    let ret = false;\n\n                    if(!this.activeChild.submenu.isVisible) {\n                        this.activeChild.showSubMenu();\n                        event.preventDefault();\n                        ret = true;\n                    }\n\n                    if(!this.activeChild.submenu.activeChild) {\n                        let childToActivate = _findFirstNavigableChild(this.activeChild.submenu.children);\n\n                        if(childToActivate) {\n                            childToActivate.activate(false);\n                            event.preventDefault();\n                            ret = true;\n                        }\n                    }\n\n                    if(ret) return true;\n                } else {\n                    this.activeChild.select();\n                    event.preventDefault();\n                    return true;\n                }\n            } else {\n                let firstChild = _findFirstNavigableChild(this.children);\n\n                if(firstChild) {\n                    firstChild.activate();\n\n                    if(firstChild.hasSubMenu()) {\n                        firstChild.showSubMenu();\n\n                        if(!firstChild.submenu.activeChild) {\n                            let targetChild = _findFirstNavigableChild(firstChild.submenu.children);\n\n                            if(targetChild) targetChild.activate(false);\n                        }\n                    }\n\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        } else if(allowTargetKeys) {\n            let children = _findAllNavigableChildren(this.children);\n\n            for(let child of children) {\n                if(child.targetKey === key) {\n                    event.preventDefault();\n\n                    if(child.hasSubMenu()) {\n                        if(!child.isActive) {\n                            child.activate();\n                            child.showSubMenu();\n                        } else if(!child.submenu.isVisible) {\n                            child.showSubMenu();\n                        }\n                    } else {\n                        child.select();\n                    }\n\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    static getAttributes(element) {\n        return {\n            ...super.getAttributes(element),\n            ...MENU_ATTRIBUTE_SCHEMA.deserialize(element.dataset)\n        };\n    }\n}\n\n\n/**\n * A component for rendering nestable list of selectable items.\n */\nexport default class Menu extends AbstractMenu {\n    /**\n     *\n     * @param target {String|HTMLElement|Element}\n     * @param closeOnBlur {Boolean|Number}\n     * @param timeout {Boolean|Number}\n     * @param autoActivate {Boolean|Number}\n     * @param openOnHover {Boolean|Number}\n     * @param toggle {boolean}\n     * @param closeOnSelect {Boolean}\n     * @param delay {Boolean|Number|'inherit'}\n     * @param id {String}\n     * @param children {Array}\n     */\n    constructor({target=null, closeOnBlur=false, timeout=false, autoActivate=true, openOnHover=true,\n                    toggle=false, closeOnSelect=true, delay='inherit', children=null, arrow=false}={}) {\n        if(!target) {\n            target = createFragment(`\n                <div class=\"menu\">\n                    ${arrow ? `<div class=\"menu__arrow\"></div>` : \"\"}\n                    <div class=\"menu__body\" data-body></div>\n                </div>\n            `).children[0];\n        }\n\n        super({\n            closeOnBlur, timeout, autoActivate, toggle, closeOnSelect, delay, positioner: 'inherit',\n            direction: 'vertical', openOnHover, target\n        });\n\n        this.events = null;\n\n        this.registerTopics();\n        this.init();\n\n        if(children) {\n            this.createItems(children);\n        }\n    }\n\n    constructSubMenu(config) {\n        return new Menu(config);\n    }\n\n    constructMenuItem(config) {\n        return new MenuItem(config);\n    }\n}\n","import Menu, {AbstractMenu} from \"./Menu\";\nimport MenuItem from './MenuItem';\nimport * as positioners from \"./positioners\";\nimport {createFragment, findChild} from \"../core/utility\";\n\n\nexport class MenuBarItem extends MenuItem {\n    render({target, text, nodeName='div', href=null}={}) {\n        let content = null;\n\n        if(target) {\n            this.element = target;\n\n            let btn = findChild(this.element, '[data-button]');\n\n            if(!btn) {\n                content = document.createDocumentFragment();\n\n                while(this.element.firstChild) {\n                    content.appendChild(this.element.firstChild);\n                }\n\n                this.element.appendChild(createFragment(`\n                <a class=\"menuitem__button\" data-button>${text}</a>`));\n            }\n        } else {\n            let element = document.createElement(nodeName);\n            element.appendChild(createFragment(`<a class=\"menuitem__button\" data-button>${text}</a>`));\n            this.element = element;\n        }\n\n        this.button = this.element.querySelector(\"[data-button]\");\n        this.textContainer = this.element.querySelector(\"[data-text]\") || this.button;\n        this.element.classList.add('menuitem');\n\n        if(content) {\n            this.textContainer.appendChild(content);\n        }\n\n        if(text !== null && text !== undefined) {\n            this.text = text;\n        }\n\n        if(href !== null) this.href = href;\n        this.element.tabIndex = -1;\n    }\n}\n\n\nexport default class MenuBar extends AbstractMenu {\n    constructor({target=null, closeOnBlur=true, timeout=false, autoActivate=false, multiple=false, openOnHover=true,\n                    toggle=true, closeOnSelect=true, delay=false, enableKeyboardNavigation=true, ...context}={}) {\n\n        if(!target) {\n            target = document.createElement('div');\n        }\n\n        super({\n            closeOnBlur, timeout, autoActivate, openOnHover, toggle, closeOnSelect, delay,\n            positioner: positioners.DROPDOWN,\n            direction: 'horizontal',\n            target,\n            ...context\n        });\n\n        this.element.classList.add('menubar');\n        this.isVisible = true;\n        this.parseDOM();\n        this.registerTopics();\n        this.init();\n\n        this.initKeyboardNavigation();\n    }\n\n    getMenuBody() {\n        return [this.element];\n    }\n\n    constructMenuItem(config) {\n        return new MenuBarItem(config);\n    }\n\n    constructSubMenu(config) {\n        return new Menu(config);\n    }\n}\n\n\nexport class SideMenuBar extends MenuBar {\n    constructor(config={}) {\n        super(config);\n        this.direction = 'vertical';\n        this.positioner = positioners.SIDE_MENU;\n\n        this.element.classList.remove('menubar');\n        this.element.classList.add('side-menu-bar');\n    }\n\n    constructMenuItem(config) {\n        return new MenuItem(config);\n    }\n}\n","import MenuNode from \"./MenuNode\";\n// import {inherit} from \"./decorators\";\nimport Menu from './Menu';\nimport {findChild, createFragment, selectElement} from \"../core/utility\";\nimport {AttributeSchema, Attribute, CompoundType, Bool, Integer, Str} from \"../core/serialize\";\n\n\nconst INT_OR_BOOL_TYPE = new Attribute(new CompoundType(Bool, Integer), Attribute.DROP, Attribute.DROP),\n    BOOL_TYPE = new Attribute(Bool, Attribute.DROP, Attribute.DROP),\n    STRING_TYPE = new Attribute(Str, Attribute.DROP, Attribute.DROP);\n\n\nexport const MENU_ITEM_ATTRIBUTE_SCHEMA = new AttributeSchema({\n    closeOnBlur: INT_OR_BOOL_TYPE,\n    timeout: INT_OR_BOOL_TYPE,\n    autoActivate: INT_OR_BOOL_TYPE,\n    openOnHover: INT_OR_BOOL_TYPE,\n    closeOnSelect: BOOL_TYPE,\n    delay: INT_OR_BOOL_TYPE,\n    positioner: STRING_TYPE,\n    toggle: BOOL_TYPE\n});\n\n\n/**\n * @abstract\n */\nexport class AbstractMenuItem extends MenuNode {\n    // @inherit toggle;\n    // @inherit autoActivate;\n    // @inherit openOnHover;\n    // @inherit delay = false;\n    // @inherit positioner;\n\n    #positioner;\n    #delay;\n    #toggle;\n    #autoActivate;\n    #openOnHover;\n\n    constructor({target, targetKey, toggle, autoActivate, openOnHover, delay, closeOnSelect, closeOnBlur, timeout, positioner,\n                clearSubItemsOnHover, autoDeactivateItems}) {\n        super(target);\n\n        /**\n         * During keyboard navigation, specifies the key that the user the click to target the menuitem directly.\n         * @type {null|String}\n         */\n        this.targetKey = targetKey;\n\n        /**\n         * Controls how click behavior works.  on is for toggle on only when clicked, off is for toggle off only, both\n         * will toggle both on and off and none will cause the item to not be toggleable.\n         * @type {string}\n         */\n        this.toggle = toggle;\n\n        /**\n         * Controls if the menuitem will activating when the user mouses over it when it's parent is unactive or if the menuitem has no parent.\n         * When the parent is active, openOnHover is used instead.\n         * @type {string|Number|Boolean}\n         */\n        this.autoActivate = autoActivate;\n\n        /**\n         * Overrides autoActivate when the items parent menu is active.  If null autoActivate is still used.\n         * See autoActivate for more details.\n         * @type {string}\n         */\n        this.openOnHover = openOnHover;\n\n        /**\n         * Adds adds a delay between a menuitem activating and the menuitem displaying it's submenu.\n         * @type {string|Number|Boolean}\n         */\n        this.delay = delay;\n\n        /**\n         * If true the item will close when a descendent menuitem is selected.\n         * @type {boolean}\n         */\n        this.closeOnSelect = closeOnSelect;\n\n        /**\n         * If true the menuitem will close when the user clicks the page outside of the item.\n         * @type {boolean}\n         */\n        this.closeOnBlur = closeOnBlur;\n\n        /**\n         * Controls the amount of time after the user leaves the menuitem that it will remain open.  Time is given in milliseconds.\n         * Negative values or false will cause the menuitem to never timeout.  True is interpreted as 0 milliseconds.\n         * @type {boolean|Number}\n         */\n        this.timeout = timeout;\n\n        /**\n         * A function that is used to position the menuitem's submenu.\n         * @type {null|Function}\n         */\n        this.positioner = positioner;\n\n        /**\n         * If true the menuitem will attempt to deactivate any descending menu-items when the user hover over the direct item.\n         * @type {boolean}\n         */\n        this.clearSubItemsOnHover = clearSubItemsOnHover;\n\n        /**\n         * If true the menuitem will deactivate when the user leaves it if it doesn't have a submenu that it needs to keep open.\n         * @type {boolean}\n         */\n        this.autoDeactivateItems = autoDeactivateItems;\n\n        this.button = null;\n    }\n\n    registerTopics() {\n        if(!this._isTopicInit) {\n            super.registerTopics();\n            this.on('event.click', (event) => this.onClick(event));\n            this.on('event.mouseover', (event) => this.onMouseOver(event));\n            this.on('event.mouseout', (event) => this.onMouseOut(event));\n            this.on('menuitem.select', (event) => this.onSelect(event));\n        }\n    }\n\n    /**\n     * Activates the item.\n     *\n     * @param show {boolean|number} - The number of milliseconds after the item activates that the submenu will display.\n     */\n    activate(show=true) {\n        if(this.isActive) return;\n        this.isActive = true;\n\n        this.clearTimer('activateItem');\n\n        if(this.hasSubMenu()) {\n            if(show === true) {\n                this.showSubMenu();\n            } else if(typeof show === 'number' && show >= 0) {\n                this.startTimer('showTimer', () => {\n                    this.showSubMenu();\n                }, show);\n            }\n        }\n\n        // Register document click handler\n        if(this.closeOnBlur && !this._captureDocumentClick) {\n            this._captureDocumentClick = {\n                target: document,\n\n                onDocumentClick: (event) => {\n                    if(!this.contains(event.target)) {\n                        this.deactivate();\n                    }\n                }\n            };\n\n            this._captureDocumentClick.target.addEventListener('click', this._captureDocumentClick.onDocumentClick);\n        }\n\n        let parent = this.parent;\n        if(parent && !parent.isActive) {\n            parent.activate();\n        }\n\n        this.dispatchTopic('menuitem.activate', this);\n    }\n\n    /**\n     * Deactivates the item.\n     */\n    deactivate() {\n        if(!this.isActive) return;\n        this.isActive = false;\n        this.clearTimer('showTimer');\n\n        this.hideSubMenu();\n\n        // Remove document click handler that tracks user clicks outside of menu tree.\n        if(this._captureDocumentClick) {\n            this._captureDocumentClick.target.removeEventListener('click', this._captureDocumentClick.onDocumentClick);\n            this._captureDocumentClick = null;\n        }\n\n        this.dispatchTopic('menuitem.deactivate', this);\n    }\n\n    /**\n     * Triggers a select item event.\n     */\n    select(data={}) {\n        let topic = {target: this, ...data};\n\n        this.publish('select', topic);\n\n        this.dispatchTopic('menuitem.select', topic);\n\n        this.element.dispatchEvent(new CustomEvent('menuitem.select', {\n            detail: topic,\n            bubbles: true\n        }));\n    }\n\n    /**\n     * Returns true if the menu node is a menu item.\n     *\n     * @returns {boolean}\n     */\n    isMenuItem() {\n        return true;\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Action management\n\n    /**\n     * Adds an action that will be called when the user selects the item.\n     *\n     * @param action {Function|String} - A callback to call when the action occurs.\n     * @returns {Function}\n     */\n    addAction(action) {\n        if(typeof action === 'string') {\n            let fn = () => {\n                window.location = action;\n            };\n\n            this.on('select', fn);\n            return fn;\n        } else {\n            this.on('select', action);\n            return action;\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Removes an action.\n     * @param action\n     */\n    removeAction(action) {\n        this.off('select', action);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Tests to see if the item has an action.\n     * @param action\n     * @returns {boolean}\n     */\n    hasAction(action) {\n        return this.hasEvent('select', action);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Removes all actions from the item.\n     */\n    clearActions() {\n        this.off('select');\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Manage submenu\n\n    showSubMenu() {\n        let submenu = this.submenu;\n\n        if(submenu) {\n            submenu.show();\n            submenu.position();\n        }\n    }\n\n    hideSubMenu() {\n        if(this.submenu) {\n            this.submenu.deactivate();\n            this.submenu.hide();\n        }\n    }\n\n    /**\n     * Attaches a submenu to the menuitem.\n     *\n     * @param submenu\n     */\n    attachSubMenu(submenu) {\n        return this.appendChildMenuNode(submenu);\n    }\n\n    appendChildMenuNode(submenu) {\n        if(submenu.parent === this || this.submenu === submenu) return;\n\n        if(this.submenu) {\n            throw new Error(\"MenuItem can only have one submenu.\");\n        }\n\n        if(submenu.parent) {\n            submenu.parent.detachSubMenu();\n        }\n\n        super.appendChildMenuNode(submenu);\n\n        this.element.classList.add('has-submenu');\n\n        if(!submenu.element.parentElement) {\n            submenu.appendTo(this.element);\n        }\n    }\n\n    /**\n     * Detaches the submenu from the item.\n     * @param remove {Boolean} If true the submenu will be removed from the dom.\n     * @returns {*} The detached submenu.\n     */\n    detachSubMenu(remove=true) {\n        if(this.submenu) {\n            let submenu = this.submenu;\n            this.removeChildMenuNode(submenu);\n            if(remove) submenu.element.parentElement.removeChild(submenu.element);\n            return submenu;\n        }\n    }\n\n    removeChildMenuNode(submenu) {\n        super.removeChildMenuNode(submenu);\n\n        if(!this.children.length) {\n            this.element.classList.remove('has-submenu');\n        }\n\n        return submenu;\n    }\n\n    /**\n     * Returns true if the menu item has a submenu.\n     * @returns {boolean}\n     */\n    hasSubMenu() {\n        return !!this.submenu;\n    }\n\n    /**\n     * Returns true if the item has a submenu and that submenu is visible.\n     * @returns {boolean}\n     */\n    isSubMenuVisible() {\n        return this.hasSubMenu() ? this.submenu.isVisible : false;\n    }\n\n    clearActiveChild() {\n        if(this.submenu && this.submenu.clearActiveChild) {\n            this.submenu.clearActiveChild();\n        }\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Event handlers\n\n    /**\n     * Handles select events.\n     */\n    onSelect() {\n        if(this.closeOnSelect && this.isActive) {\n            this.deactivate();\n        }\n    }\n\n    /**\n     * Handles click events.\n     * @param event\n     */\n    onClick(event) {\n        let isDisabled = this.getDisabled();\n\n        if(isDisabled) {\n            event.originalEvent.preventDefault();\n        }\n\n        if(event.target !== this) return;\n\n        let isDefaultPrevented = false;\n\n        // noinspection JSUnusedGlobalSymbols\n        this.dispatchTopic('menuitem.click', {\n            ...event,\n            relatedTarget: event.target,\n            target: this,\n\n            preventDefault() {\n                isDefaultPrevented = true;\n            },\n\n            isDefaultPrevented() {\n                return isDefaultPrevented;\n            }\n        });\n\n        let isActive = this.isActive,\n            hasSubMenu = this.hasSubMenu(),\n            isSubMenuVisible = this.isSubMenuVisible(),\n            toggle = this.toggle;\n\n        // Recheck in case it was updated by an event.\n        isDisabled = this.getDisabled();\n\n        if(!isDisabled && !isDefaultPrevented) {\n            if (isActive && hasSubMenu && !isSubMenuVisible) {\n                this.showSubMenu();\n            } else if (!isActive) {\n                this.activate();\n            } else if (isActive && toggle && hasSubMenu) {\n                this.deactivate();\n            }\n\n            if (isActive && !hasSubMenu) {\n                this.select({trigger: event});\n            }\n        }\n    }\n\n    /**\n     * Handles on mouse over events.\n     * @param event\n     */\n    onMouseOver(event) {\n        this.clearTimer('timeout');\n\n        if(event.target === this) {\n            // When the mouse moves on an item clear any active items in it's submenu.\n            if (this.hasSubMenu() && this.clearSubItemsOnHover) {\n                // this.submenu.clearActiveChild();\n                this.clearActiveChild();\n            }\n\n            if(this.element.contains(event.originalEvent.relatedTarget)) return;\n\n            let activate = this.parent && this.parent.isActive && this.openOnHover !== null ? this.openOnHover : this.autoActivate;\n\n            if (this.parent) {\n                this.parent.publish('mouse-enter-item', this, event);\n            }\n\n            if (!this.isActive && !this.isDisabled) {\n                if (activate === true) {\n                    this.activate(typeof this.delay === 'boolean' ? !this.delay : this.delay);\n                } else if (typeof activate === 'number' && activate >= 0) {\n                    this.startTimer('activateItem', () => {\n                        if (!this.isDisabled) {\n                            this.activate(typeof this.delay === 'boolean' ? !this.delay : this.delay);\n                        }\n                    }, activate);\n                }\n            }\n        }\n    }\n\n    /**\n     * Handles on mouse out events.\n     *\n     * @param event\n     */\n    onMouseOut(event) {\n        if(this.element.contains(event.originalEvent.relatedTarget)) return;\n\n        this.clearTimer('activateItem');\n\n        if(this.parent) {\n            this.parent.publish('mouse-leave-item', this, event);\n        }\n\n        if(this.autoDeactivateItems === true && event.target === this && (!this.hasSubMenu() || !this.isSubMenuVisible()) && this.isActive) {\n            this.deactivate();\n        }\n\n        if(this.isActive && typeof this.timeout === 'number' && this.timeout >= 0) {\n            this.startTimer('timeout', () => {\n                this.deactivate();\n            }, this.timeout);\n        }\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Getters and Setters\n\n    get submenu() {\n        return this.children[0];\n    }\n\n    get positioner() {\n        if(this.#positioner === 'inherit' || this.#positioner === undefined) {\n            let parent = this.parent;\n            return parent ? parent.positioner : undefined;\n        } else if(this.#positioner === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.positioner;\n            }\n        } else {\n            return this.#positioner;\n        }\n    }\n\n    set positioner(value) {\n        this.#positioner = value;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get delay() {\n        if(this.#delay === 'inherit' || this.#delay === undefined) {\n            let parent = this.parent;\n            return parent ? parent.delay : undefined;\n        } else if(this.#delay === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.delay;\n            }\n        } else {\n            return this.#delay;\n        }\n    }\n\n    set delay(value) {\n        this.#delay = value;\n    }\n\n    get openOnHover() {\n        if(this.#openOnHover === 'inherit' || this.#openOnHover === undefined) {\n            let parent = this.parent;\n            return parent ? parent.openOnHover : undefined;\n        } else if(this.#openOnHover === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.openOnHover;\n            }\n        } else {\n            return this.#openOnHover;\n        }\n    }\n\n    set openOnHover(value) {\n        this.#openOnHover = value;\n    }\n\n    get autoActivate() {\n        if(this.#autoActivate === 'inherit' || this.#autoActivate === undefined) {\n            let parent = this.parent;\n            return parent ? parent.autoActivate : undefined;\n        } else if(this.#autoActivate === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.autoActivate;\n            }\n        } else {\n            return this.#autoActivate;\n        }\n    }\n\n    set autoActivate(value) {\n        this.#autoActivate = value;\n    }\n\n    get toggle() {\n        if(this.#toggle === 'inherit' || this.#toggle === undefined) {\n            let parent = this.parent;\n            return parent ? parent.toggle : undefined;\n        } else if(this.#toggle === 'root') {\n            let root = this.root;\n\n            if(root && root !== this) {\n                return root.toggle;\n            }\n        } else {\n            return this.#toggle;\n        }\n    }\n\n    set toggle(value) {\n        this.#toggle = value;\n    }\n\n    _navigate(event, _depth=0) {\n        if(_depth === 0 && this.hasSubMenu()) {\n            return this.submenu._navigate(event, 0);\n        } else if(this.parent) {\n            return this.parent._navigate(event, _depth);\n        }\n    }\n\n    static getAttributes(element) {\n        return {\n            ...super.getAttributes(element),\n            ...MENU_ITEM_ATTRIBUTE_SCHEMA.deserialize(element.dataset)\n        }\n    }\n}\n\n\nexport default class MenuItem extends AbstractMenuItem {\n    constructor({target, text=null, action, href=null, toggle=\"inherit\", autoActivate=\"inherit\", openOnHover=\"inherit\",\n                    delay='inherit', closeOnSelect=false, closeOnBlur=false, timeout=false,\n                    nodeName=\"div\", positioner=\"inherit\"}={}) {\n        let btn, content, submenu;\n\n        if(target) {\n            target = selectElement(target);\n\n            btn = findChild(target, \"[data-button]\");\n            submenu = findChild(target, \"[data-menu]\");\n\n            if(submenu) {\n                submenu.parentElement.removeChild(submenu);\n            }\n\n            if(!btn) {\n                content = document.createDocumentFragment();\n\n                while(target.firstChild) {\n                    content.appendChild(target.firstChild);\n                }\n\n                target.appendChild(createFragment(`\n                <a class=\"menuitem__button\" data-button>\n                    <span class=\"menuitem__check\"></span>\n                    <span class=\"menuitem__text\" data-text></span>\n                    <span class=\"menuitem__alt-text\" data-alt-text></span>\n                    <span class=\"menuitem__caret\"></span>\n                </a>`));\n\n                let textContainer = target.querySelector('[data-text]');\n\n                textContainer.appendChild(content);\n            }\n        } else {\n            target = document.createElement(nodeName);\n\n            target.appendChild(createFragment(`\n                <a class=\"menuitem__button\" data-button>\n                    <span class=\"menuitem__check\"></span>\n                    <span class=\"menuitem__text\" data-text></span>\n                    <span class=\"menuitem__alt-text\" data-alt-text></span>\n                    <span class=\"menuitem__caret\"></span>\n                </a>`));\n        }\n\n        super({\n            toggle,\n            autoActivate,\n            openOnHover,\n            delay,\n            closeOnSelect,\n            closeOnBlur,\n            timeout,\n            positioner,\n            clearSubItemsOnHover: true,\n            autoDeactivateItems: true,\n\n            target,\n            text,\n            href,\n            nodeName\n        });\n\n        this.textContainer = this.element.querySelector(\"[data-text]\");\n        // noinspection JSUnusedGlobalSymbols\n        this.altTextContainer = this.element.querySelector(\"[data-alt-text]\");\n        this.button = this.element.querySelector(\"[data-button]\");\n        this.element.classList.add('menuitem');\n        this.element.tabIndex = -1;\n\n        if(action) this.addAction(action);\n\n        if(submenu) {\n            this.attachSubMenu(this.constructSubMenu({target: submenu}));\n        }\n\n        if(text !== null) {\n            this.text = text;\n        }\n\n        if(href !== null) {\n            this.href = href;\n        }\n\n        this.registerTopics();\n    }\n\n    constructMenuItem(config) {\n        return new MenuItem(config);\n    }\n\n    constructSubMenu(config) {\n        return new Menu(config);\n    }\n\n    get text() {\n        return this.textContainer.innerText;\n    }\n\n    set text(value) {\n        this.textContainer.innerText = value;\n    }\n\n    get href() {\n        if(this.button.nodeName === \"A\") {\n            return this.button.href;\n        } else {\n            return null;\n        }\n    }\n\n    set href(value) {\n        if(this.button.nodeName === 'A') {\n            this.button.href=  value;\n        } else {\n            throw new Error(\"Cannot assign href to menuitem who's button is not an anchor tag.\");\n        }\n    }\n}\n","import Publisher, {STOP} from \"core/Publisher\";\nimport {KeyError} from \"core/errors\";\nimport {attachMenuInstance, detachMenuInstance, hasMenuInstance, getMenuInstance, getClosestMenuNodeByElement} from \"./utility\";\nimport {addClasses, removeClasses, selectElement} from \"../core/utility/dom\";\n\n\n/**\n * The base class for Menu and MenuItem.  Provides the utilities that are necessary to manage and transverse the menu tree\n * and propagate events throughout it.\n * @extends {Publisher}\n */\nexport default class MenuNode extends Publisher {\n    #parent;\n    #children;\n    #element;\n    #timers;\n\n    constructor(element) {\n        super();\n\n        this.#parent = null;\n        this.#children = [];\n        this.#timers = {};\n\n        this._eventListeners = {};\n        this._keyboardNavigationEnabled = false;\n\n        this.nodeType = null;\n        this.isController = false;\n        // noinspection JSUnusedGlobalSymbols\n        this.closeOnSelect = false;\n\n        this.element = element ? selectElement(element): null;\n    }\n\n    /**\n     * Initializes the event listeners for the menu tree.  Click, mouse-over and mouse-out are bound.  Events are\n     * delegated to their child nodes as needed.  If an event is received where the node is the direct controller of\n     * the event will be ignored.\n     */\n    init() {\n        let handleEvent = (event) => {\n            let target = this.getTargetNode(event.target),\n                wrappedEvent = {\n                    target,\n                    originalEvent: event\n                };\n\n            if(target.getEventDelegator() === this) {\n                target.dispatchTopic(`event.${event.type}`, wrappedEvent);\n            }\n        };\n\n        this.addEventListener('mousedown', handleEvent);\n        this.addEventListener('mouseover', handleEvent);\n        this.addEventListener('mouseout', handleEvent);\n        this.addEventListener('click', handleEvent);\n        this.addEventListener('keydown', handleEvent);\n\n        this.isController = true;\n\n        this.publish('init', this);\n    }\n\n    initKeyboardNavigation() {\n        if(!this._keyboardNavigationEnabled) {\n            this._keyboardNavigationEnabled = true;\n        }\n    }\n\n    registerTopics() {\n        if (this._isTopicInit) return;\n        this._isTopicInit = true;\n\n        this.on('event.keydown', (topic) => this.onKeyDown(topic));\n    }\n\n    /**\n     * Unbinds all event listeners.\n     */\n    destroy() {\n        this.clearAllRegisteredEvents();\n\n        this.isController = false;\n        // noinspection JSUnusedGlobalSymbols\n        this._keyboardNavigationEnabled = false;\n        this.element = null;\n\n        this.publish('destroy', this);\n\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Tree transversal and manipulation functions.\n\n    /**\n     * Reference to the nodes parent or null if it is the root node of the tree.\n     *\n     * @returns {null|MenuNode}\n     */\n    get parent() {\n        return this.#parent || null;\n    }\n\n    /**\n     * A list of all children for the node.\n     *\n     * @returns {[]}\n     */\n    get children() {\n        return this.#children.slice(0);\n    }\n\n    appendChildMenuNode(menuNode) {\n        if(menuNode.#parent === this) return;\n\n        if(menuNode.#parent) {\n            menuNode.#parent.removeChildMenuNode(menuNode);\n        }\n\n        this.#children.push(menuNode);\n        menuNode.#parent = this;\n    }\n\n    removeChildMenuNode(menuNode) {\n        if(menuNode.#parent !== this) return;\n\n        let i = menuNode.#parent.#children.indexOf(this);\n\n        if(i !== -1) {\n            menuNode.#parent.#children.splice(i, 1);\n        }\n\n        menuNode.#parent = null;\n    }\n\n    hasChildMenuNode(menuNode) {\n        return this.#children.indexOf(menuNode) !== -1;\n    }\n\n    clearChildMenuNodes() {\n        while(this.#children.length) {\n            this.removeChildMenuNode(this.#children[0]);\n        }\n    }\n\n    /**\n     * Reference to the root node of the tree.\n     *\n     * @returns {MenuNode}\n     */\n    get root() {\n        let r = this,\n            o = this;\n\n        while(o) {\n            o = o.parent;\n\n            if(o) {\n                r = o;\n            }\n        }\n\n        return r;\n    }\n\n    /**\n     * Reference to the first ancestor node in the menu tree who is a menu.  Returns null if it does not exist.\n     *\n     * @returns {MenuNode|null}\n     */\n    get parentMenu() {\n        let parent = this.parent;\n        // noinspection JSUnresolvedVariable,JSUnresolvedFunction\n        return parent ? parent.closest(node => node.isMenu()) : null;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Reference to the first ancestor node in the menu tree who is an item. Returns null if it does not exist.\n     *\n     * @returns {MenuNode|null}\n     */\n    get parentItem() {\n        let parent = this.parent;\n        // noinspection JSUnresolvedVariable,JSUnresolvedFunction\n        return parent ? parent.closest(node => node.isMenuItem()) : null;\n    }\n\n    /**\n     * Reference to the next sibling node in the menu tree.\n     *\n     * @returns {MenuNode|null}\n     */\n    get nextSibling() {\n        return this.getOffsetSibling(1);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Reference to the previous sibling node in the menu tree.\n     *\n     * @returns {MenuNode|null}\n     */\n    get previousSibling() {\n        return this.getOffsetSibling(-1);\n    }\n\n    hasChild(child) {\n        return this.#children.indexOf(child) !== -1;\n    }\n\n    get isRoot() {\n        return this.root === this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get enabledChildren() {\n        return this.children.filter(item => !item.isDisabled);\n    }\n\n    /**\n     * Returns the target active item in the tree.\n     * @returns {*|{isActive}|null}\n     */\n    get activeItem() {\n        let activeItem = null;\n\n        if(this.isActive) {\n            for(let child of this.children) {\n                if(child.isActive) {\n                    if(child.isMenuItem && child.isMenuItem()) {\n                        activeItem = child.activeItem || child;\n                    } else {\n                        activeItem = child.activeItem || activeItem;\n                    }\n                    break;\n                }\n            }\n        }\n\n        return activeItem;\n    }\n\n    /**\n     * Return the sibling offset from the current node.\n     *\n     * @param offset\n     * @returns {null|MenuNode}\n     */\n    getOffsetSibling(offset=1) {\n        let parent = this.parent;\n\n        if(parent) {\n            let children = parent.children,\n                i = children ? children.indexOf(this) : -1;\n\n            if(i >= 0) {\n                i += offset;\n\n                if(i >= 0) {\n                    return children[i];\n                }\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Returns the closest MenuNode up the tree that matches the provided test function.\n     *\n     * @param fn {function(node)}\n     * @returns {MenuNode|null}\n     */\n    closest(fn) {\n        let o = this;\n\n        while(o) {\n            if(fn.call(this, o)) return o;\n            o = o.parent;\n        }\n\n        return null;\n    }\n\n    /**\n     * Returns true if the provided node is a descendant of the current node.\n     *\n     * @param node\n     * @returns {boolean}\n     */\n    contains(node) {\n        if(node.nodeType) {\n            node = getClosestMenuNodeByElement(node);\n            return node ? this.contains(node) : false;\n        }\n\n        while(node) {\n            if(node === this) {\n                return true;\n            }\n\n            node = node.parent;\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks to see if the element is contained within the menu node.  Has to check every child manually since\n     * it's not guaranteed that children are descendants of their parent menu nodes in the dom tree.  Probably a very\n     * costly method, shouldn't be overused.\n     *\n     * @param element\n     * @returns {boolean}\n     */\n    containsElement(element) {\n        if(this.element.contains(element)) {\n            return true;\n        }\n\n        for(let child of this.children) {\n            if(child.containsElement(element)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Yields all descendants.\n     *\n     * @returns {IterableIterator<MenuNode>}\n     */\n    *getDescendants() {\n        for(let child of this.children) {\n            yield child;\n\n            for(let grandchild of child.getDescendants()) {\n                yield grandchild;\n            }\n        }\n    }\n\n    /**\n     * Returns the closest menu node instance bound to an element for the target HTMLElement in the current menu tree.\n     *\n     * @param target {HTMLElement}\n     * @returns {null|MenuNode}\n     */\n    getTargetNode(target) {\n        let o = target;\n\n        while(o) {\n            let instance = getMenuInstance(o);\n\n            if(instance) {\n                return instance;\n            }\n\n            if(o === this.element) {\n                break;\n            }\n\n            o = o.parentElement;\n        }\n\n        return null;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the target item for the given HTMLElement in the current menu tree.\n     *\n     * @param target\n     * @returns {null}\n     */\n    getTargetItem(target) {\n        let o = target;\n\n        while(o) {\n            let instance = getMenuInstance(o);\n\n            if(instance && instance.isMenuItem()) {\n                return instance;\n            }\n\n            if(o === this.element) {\n                break;\n            }\n\n            o = o.parentElement;\n        }\n\n        return null;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the target menu for the given HTMLElement in the current menu tree.\n     *\n     * @param target\n     * @returns {null}\n     */\n    getTargetMenu(target) {\n        let o = target;\n\n        while(o) {\n            let instance = getMenuInstance(o);\n\n            if(instance && instance.isMenu()) {\n                return instance;\n            }\n\n            if(o === this.element) {\n                break;\n            }\n\n            o = o.parentElement;\n        }\n\n        return null;\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Widget functions\n    /**\n     * Returns true if the current node is visible.\n     *\n     * @returns {boolean}\n     */\n    get isVisible() {\n        return !this.element.classList.contains('hidden');\n    }\n\n    /**\n     * Sets the visible state of the node.\n     *\n     * @param value\n     */\n    set isVisible(value) {\n        value = !!value;\n\n        if(value !== this.isVisible) {\n            if(value) {\n                this.element.classList.remove('hidden');\n                this.element.classList.add('visible');\n            } else {\n                this.element.classList.add('hidden');\n                this.element.classList.remove('visible');\n            }\n        }\n    }\n\n    /**\n     * Returns true if the current node is disabled.\n     *\n     * @returns {boolean}\n     */\n    get isDisabled() {\n        return this.element.classList.contains('disabled');\n    }\n\n    /**\n     * Sets the disabled state for the current node.\n     *\n     * @param value\n     */\n    set isDisabled(value) {\n        value = !!value;\n\n        if(value !== this.isDisabled) {\n            if(value) {\n                this.element.classList.add('disabled');\n            } else {\n                this.element.classList.remove('disabled');\n            }\n        }\n    }\n\n    /**\n     * Alias for isDisabled getter.\n     * @returns {boolean}\n     */\n    get disabled() {\n        return this.isDisabled;\n    }\n\n    /**\n     * Alias for isDisabled setter.\n     * @param value\n     */\n    set disabled(value) {\n        this.isDisabled = value;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns true if the nodes element is defined.\n     *\n     * @returns {boolean}\n     */\n    hasElement() {\n        return !!this.#element;\n    }\n\n    /**\n     * Gets the root HTMLElement of the node.\n     *\n     * @returns {HTMLElement}\n     */\n    get element() {\n        if(this.#element === undefined) {\n            this.element = this.render({});\n        }\n\n        return this.#element;\n    }\n\n    /**\n     * Sets the root HTMLElement of the node.\n     *\n     * @param element\n     */\n    set element(element) {\n        if(typeof element === 'string') {\n            element = document.querySelector(element);\n        } else if(typeof element === 'function') {\n            element = element.call(this);\n        }\n\n        if(this.#element === element) return;\n\n        if(hasMenuInstance(element)) {\n            throw new Error(\"Element is already bound to menu controller\");\n        }\n\n        if(this.#element) {\n            this.clearAllRegisteredEvents();\n            detachMenuInstance(this.#element);\n            this.#element = undefined;\n        }\n\n        attachMenuInstance(element, this);\n        this.#element = element;\n        this._registerAllEvents();\n    }\n\n    /**\n     * Appends the component to the target selector.\n     *\n     * @param selector {string|HTMLElement|{append}}\n     */\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.element);\n        } else if(selector.appendChild) {\n            selector.appendChild(this.element);\n        } else if(selector.append) {\n            selector.append(this.element);\n        }\n    }\n\n    /**\n     * Removes the component from the dom.\n     *\n     * @returns {MenuNode}\n     */\n    remove() {\n        if(this.element.parentElement) {\n            this.element.parentElement.removeChild(this.element);\n        }\n\n        return this;\n    }\n\n    get id() {\n        return this.element.id;\n    }\n\n    set id(id) {\n        if(this.element) this.element.id = id;\n    }\n\n    get classList() {\n        return this.element.classList;\n    }\n\n    set classList(value) {\n        this.element.classList = value;\n    }\n\n    get dataset() {\n        return this.element.dataset;\n    }\n\n    set dataset(value) {\n        this.element.dataset = value;\n    }\n\n    get style() {\n        return this.element.style;\n    }\n\n    set style(style) {\n        this.element.style = style;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    addClass(classes) {\n        return addClasses(this.element, classes);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    removeClass(classes) {\n        return removeClasses(this.element, classes);\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Menu state functions\n\n    /**\n     * True if the node is active.\n     *\n     * @returns {boolean}\n     */\n    get isActive() {\n        return this.element.classList.contains('active');\n    }\n\n    /**\n     * Sets the isActive state for the node.\n     *\n     * Will toggle the active class on the root element as needed.\n     *\n     * @param value\n     */\n    set isActive(value) {\n        value = !!value;\n\n        if(value !== this.isActive) {\n            if(value) {\n                this.element.classList.add('active');\n            } else {\n                this.element.classList.remove('active');\n            }\n        }\n    }\n\n    /**\n     * Returns true if the current node is disabled or if any ancestor node is disabled.\n     *\n     * @returns {boolean}\n     */\n    getDisabled() {\n        let o = this;\n\n        while(o) {\n            if(o.isDisabled) {\n                return true;\n            }\n\n            o = o.parent;\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns true if the node is a menu item.  Should be overridden by subclasses that are menu item like.\n     *\n     * @returns {boolean}\n     */\n    isMenuItem() {\n        return false;\n    }\n\n    /**\n     * Returns true if the node is a menu.  Method should be defined by any object that should be treated like a menu.\n     *\n     * @returns {boolean}\n     */\n    isMenu() {\n        return false;\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Timer, topic and event functions\n\n    /**\n     * Creates a timer with the given name.  Only one timer with that name can be active per object.\n     * If another timer with the same name is created the previous one will be cleared if `clear` is true.\n     * Otherwise if `clear` is false a KeyError with be thrown.  The callback function for the timer is called\n     * with the current object as it's `this` and the timer object as it's only parameter following the pattern\n     *\n     * this::fn(timer);\n     *\n     * @param name {String} The name of the timer.\n     * @param fn {function(timer)} Function to call.\n     * @param time {Number} The time to wait.\n     * @param interval If true setInterval will be used instead of setTimeout\n     * @param clear If true an previous timers of the same name will be canceled before creating a new one.  Otherwise a KeyError will be thrown.\n     * @returns {{status, id, cancel, type}}\n     */\n    startTimer(name, fn, time, interval=false, clear=true) {\n        if(clear && this.#timers[name]) {\n            this.#timers[name].cancel();\n        } else if(this.#timers[name]) {\n            throw new KeyError(\"Timer already exists.\");\n        }\n\n        let timer = this.#timers[name] = {\n            status: 'running',\n            id: null,\n            cancel: null,\n            type: null,\n        };\n\n        if(interval) {\n            let id = timer.id = setInterval((timer) => {\n                fn.call(this, timer);\n            }, time, timer);\n\n            timer.type = 'interval';\n\n            timer.cancel = () => {\n                if(this.#timers[name] === timer) {\n                    clearInterval(id);\n                    delete this.#timers[name];\n                    timer.status = 'canceled';\n                }\n            };\n        } else {\n            let id = timer.id = setTimeout((timer) => {\n                delete this.#timers[name];\n                timer.status = 'complete';\n                fn.call(this, timer);\n            }, time, timer);\n\n            timer.type = 'timeout';\n\n            timer.cancel = () => {\n                if(this.#timers[name] === timer) {\n                    clearTimeout(id);\n                    delete this.#timers[name];\n                    timer.status = 'canceled';\n                }\n            };\n        }\n\n        return timer;\n    }\n\n    /**\n     * Clears the timer with the given name.\n     *\n     * @param name\n     * @returns {boolean} True if a timer was canceled. False if not timer exists.\n     */\n    clearTimer(name) {\n        if(this.#timers[name]) {\n            this.#timers[name].cancel();\n            return true;\n        }\n\n        return false;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the timer object if it exists.\n     *\n     * @param name\n     * @returns {*}\n     */\n    getTimer(name) {\n        return this.#timers[name];\n    }\n\n    /**\n     * Returns the MenuNode that is responsible for delegating the events.\n     *\n     * @returns {null|{isController}|*}\n     */\n    getEventDelegator() {\n        let o = this.element;\n\n        while(o) {\n            let instance = getMenuInstance(o);\n\n            if(instance && instance.isController) {\n                return instance;\n            }\n\n            o = o.parentElement;\n        }\n\n        return null;\n    }\n\n    /**\n     * Publishes the topic to itself and bubbles up the menu tree.\n     *\n     * @param topic\n     * @param args\n     */\n    dispatchTopic(topic, ...args) {\n        let o = this;\n\n        while(o) {\n            if(o.publish(topic, ...args) === STOP) {\n                return STOP;\n            }\n\n            o = o.parent;\n        }\n    }\n\n    clearAllRegisteredEvents() {\n        if(this.element) {\n            for(let key of Object.keys(this._eventListeners)) {\n                for(let listener of this._eventListeners[key]) {\n                    this.element.removeEventListener(key, listener.callback, listener.bubble);\n                }\n            }\n        }\n\n        this._eventListeners = {};\n    }\n\n    _registerAllEvents() {\n        for(let key of Object.keys(this._eventListeners)) {\n            for(let listener of this._eventListeners[key]) {\n                this.element.addEventListener(key, listener.callback, listener.bubble);\n            }\n        }\n    }\n\n    /**\n     * A wrapper function around calling this.element.addEventListener.  Will register a listener on the element.\n     * This function keeps a record of the event listeners that are attached to the element.  If the element\n     * hasn't been rendered yet and this function is called attaching the element will be delayed until element is set.\n     *\n     * @param name\n     * @param callback\n     * @param bubble\n     */\n    addEventListener(name, callback, bubble=false) {\n        if(!this._eventListeners[name]) {\n            this._eventListeners[name] = [];\n        }\n\n        let listener = {callback, bubble};\n        this._eventListeners[name].push(listener);\n\n        if(this.element) {\n            this.element.addEventListener(name, callback, bubble);\n        }\n    }\n\n    removeEventListener(name, callback, bubble=false) {\n        if(this._eventListeners[name]) {\n            for(let i = 0, l = this._eventListeners[name].length; i < l; i++) {\n                let listener = this._eventListeners[name][i];\n\n                if(listener.callback === callback && listener.bubble === bubble) {\n                    this._eventListeners.splice(i, 1);\n\n                    if(!this._eventListeners[name].length) {\n                        delete this._eventListeners[name];\n                    }\n\n                    return listener;\n                }\n            }\n        }\n\n        return null;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    hasEventListener(name, callback, bubble=false) {\n        if(this._eventListeners[name]) {\n            for(let listener of this._eventListeners[name]) {\n                if(listener.callback === callback && listener.bubble === bubble) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    _rootKeyDown(topic) {\n        if(this.isRoot) {\n            let event = topic.originalEvent;\n\n            if(event.key === \"Escape\") {\n                this.deactivate();\n                // noinspection JSUnresolvedFunction\n                document.activeElement.blur();\n                return;\n            }\n\n            let activeItem = this.activeItem,\n                target = activeItem ? activeItem.parentMenu : this;\n\n            target._navigate(event);\n        }\n    }\n\n    onKeyDown(topic) {\n        if(this._keyboardNavigationEnabled) {\n            this._rootKeyDown(topic);\n        }\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Tree parsing functions.\n\n    /**\n     * Parses the dom and initializes any menu or menuitem elements that are found.\n     */\n    parseDOM() {\n        let walk = (node) => {\n            for(let child of node.children) {\n                if(hasMenuInstance(child)) {\n                    let instance = getMenuInstance(child);\n\n                    if(!this.hasChildMenuNode(instance)) {\n                        this.appendChildMenuNode(instance);\n                    }\n\n                    instance.parseDOM();\n                } else {\n                    let hasMenuItemAttribute = child.hasAttribute('data-menuitem'),\n                        hasMenuAttribute = child.hasAttribute('data-menu');\n\n                    if(hasMenuAttribute && hasMenuItemAttribute) {\n                        throw new Error(\"Element cannot be both a menuitem and a menu.\");\n                    } else if(hasMenuAttribute) {\n                        let menu = this.constructSubMenu({target: child});\n\n                        this.appendChildMenuNode(menu);\n                    } else if(hasMenuItemAttribute) {\n                        let item = this.constructMenuItem({target: child});\n                        this.appendChildMenuNode(item);\n                    } else {\n                        walk(child);\n                    }\n                }\n            }\n        };\n\n        walk(this.element);\n    }\n\n    /**\n     * @abstract\n     * @param config\n     */\n    constructMenuItem(config) {\n\n    }\n\n    /**\n     * @abstract\n     * @param config\n     */\n    constructSubMenu(config) {\n\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Invalidates all parent and child references.\n     */\n    invalidateTree() {\n        this.#parent = null;\n\n        for(let child of this.children) {\n            child.invalidateTree();\n        }\n\n        this.#children = [];\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Static functions\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the bound menu controller for the provided node.\n     *\n     * @static\n     * @param element {HTMLElement}\n     */\n    static getInstance(element) {\n        return getMenuInstance(element);\n    }\n\n    // noinspection JSUnusedLocalSymbols\n    static getAttributes(element) {\n        return {};\n    }\n\n    /**\n     * Constructs a menu node element for an HTMLElement.\n     * @param element {HTMLElement|string}\n     * @returns {MenuNode}\n     * @constructor\n     */\n    static FromHTML(element) {\n        if(typeof element === 'string') {\n            element = document.querySelector(element);\n        }\n\n        let config = this.getAttributes(element);\n\n        // let parameters = Attribute.deserialize(element.dataset, this.__attributes__);\n        //\n        // parameters.target = element;\n\n        return new this({\n            target: element,\n            ...config\n        });\n    }\n\n    /**\n     * Used to determine if an item is navigable during keyboard navigation.\n     * @returns {boolean}\n     * @private\n     */\n    get isNavigable() {\n        return !this.isDisabled && this.isVisible;\n    }\n}\n","import MenuItem, {AbstractMenuItem} from \"./MenuItem\";\nimport Menu, {AbstractMenu} from \"./Menu\";\nimport * as positioners from \"./positioners\";\nimport {getClosestMenuByElement} from \"./utility\";\n// import {inherit} from \"./decorators\";\nimport {MultiHiddenInputWidget} from \"../forms/\";\nimport {AttributeSchema, Attribute, Bool, Integer, Str} from \"../core/serialize\";\nimport {createFragment, findChild, selectElement} from \"../core/utility/dom\";\n\n\nfunction copyNodeData(targetNode, referenceNode) {\n    targetNode.className = referenceNode.className;\n    targetNode.id = referenceNode.id;\n    Object.assign(targetNode.dataset, referenceNode.dataset);\n}\n\nfunction createOption(node) {\n    let option = document.createElement('div');\n    copyNodeData(option, node);\n\n    option.dataset.value = node.value;\n    option.innerHTML = node.innerHTML;\n    option.setAttribute('data-menuitem', '');\n\n    if(node.selected) {\n        option.classList.add('selected');\n    }\n\n    return option;\n}\n\nfunction createOptGroup(node) {\n    let r = document.createElement('div');\n    copyNodeData(r, node);\n    r.classList.add('menu__optgroup');\n\n    if(node.label) {\n        let title = document.createElement('h3');\n        title.innerHTML = node.label;\n        r.appendChild(title);\n    }\n\n    for(let child of node.children) {\n        r.appendChild(createOption(child));\n    }\n\n    return r;\n}\n\n\n/**\n * The class SelectOption is used to construct an item contained in SelectMenu object.\n */\nexport class SelectOption extends AbstractMenuItem {\n    constructor({target, text, value=null, targetKey=null}={}) {\n        let targetChildren = null;\n\n        if(typeof target === 'string') {\n            target = document.querySelector(target);\n        }\n\n        if(target) {\n            // Save target children to add to the text output later.\n            targetChildren = document.createDocumentFragment();\n\n            while(target.firstChild) {\n                targetChildren.appendChild(target.firstChild);\n            }\n        } else {\n            target = document.createElement('div');\n        }\n\n        target.classList.add('select-option');\n        let fragment = createFragment(`\n            <a class=\"select-option__body\">\n                <span class=\"select-option__check\" data-check><i class=\"fas fa-check\"></i></span>\n                <span data-text class=\"select-option__text\"></span>\n                <span data-alt-text class=\"select-option__alt\"></span>\n            </a>\n        `);\n        target.appendChild(fragment);\n        target.setAttribute('aria-role', 'option');\n\n        super({\n            toggle: \"inherit\",\n            autoActivate: true,\n            openOnHover: true,\n            delay: 0,\n            closeOnSelect: false,\n            closeOnBlur: false,\n            timeout: false,\n            clearSubItemsOnHover: true,\n            autoDeactivateItems: \"auto\",\n            targetKey,\n            target\n        });\n\n        this.textContainer = this.element.querySelector('[data-text]');\n\n        // If initializing the object from a target element\n        // the label text is gathered from the children of the target\n        if(targetChildren) {\n            this.textContainer.appendChild(targetChildren);\n        } else if(text) {\n            let textNode = document.createTextNode(text);\n            this.textContainer.appendChild(textNode);\n        }\n\n        if(value !== null && value !== undefined) {\n            this.value = value;\n        }\n\n        this.registerTopics();\n    }\n\n    registerTopics() {\n        super.registerTopics();\n\n        this.on('menuitem.select', topic => {\n            if(this.isSelected && this.toggle) {\n                this.isSelected = false;\n\n                this.dispatchTopic('option.deselect', {\n                    ...topic,\n                    target: this,\n                    menu: this,\n                    relatedTarget: topic.target,\n                    trigger: topic\n                });\n            } else if(!this.isSelected) {\n                this.isSelected = true;\n\n                this.dispatchTopic('option.select', {\n                    ...topic,\n                    target: this,\n                    menu: this,\n                    relatedTarget: topic.target,\n                    trigger: topic\n                });\n            }\n        });\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Selects the options and publishes a [option.select] topic.\n     *\n     * @param topicData\n     */\n    optionSelect(topicData={}) {\n        super.select();\n\n        if(this.isSelected) return;\n\n        this.isSelected = true;\n\n        if(!this.isActive) {\n            this.activate();\n        }\n\n        this.dispatchTopic('option.select', {target: this, menu: this, ...topicData});\n    }\n\n    /**\n     * Deselect the SelectOption if it is selected and publishes an [option.deselect] topic.\n     * @param topicData\n     */\n    optionDeselect(topicData={}) {\n        if(!this.isSelected) return;\n        this.isSelected = false;\n        if(this.isActive) this.deactivate();\n        this.dispatchTopic('option.deselect', {target: this, menu: this, ...topicData});\n    }\n\n    /**\n     * Handles on mouse out events.\n     *\n     * @param event\n     */\n    onMouseOut(event) {\n        if(this.element.contains(event.originalEvent.relatedTarget)) return;\n\n        // Do default action.\n        let r = super.onMouseOut(event);\n\n        // If autoDeactiveItems is auto determine if the SelectOption should deactivate\n        // by checking parent allows multiSelect.\n        // noinspection JSIncompatibleTypesComparison\n        if(this.isActive && event.target === this && this.autoDeactivateItems === 'auto') {\n            let parent = this.parent;\n            let autoDeactivateItems = !!(parent && parent.multiSelect);\n\n            if(autoDeactivateItems && (!this.hasSubMenu() || !this.isSubMenuVisible())) {\n                this.deactivate();\n            }\n        }\n\n        return r;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    isSelectMenu() {\n        return true;\n    }\n\n    /**\n     * Returns true if the option is selected.\n     * @returns {boolean}\n     */\n    get isSelected() {\n        return this.element.classList.contains('selected');\n    }\n\n    /**\n     * Sets the options selected state to true or false.\n     * @param value\n     */\n    set isSelected(value) {\n        value = !!value;\n\n        if(value !== this.isSelected) {\n            if(value) {\n                this.element.classList.add('selected');\n            } else {\n                this.element.classList.remove('selected');\n            }\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get isFiltered() {\n        return this.classList.contains('filtered');\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    set isFiltered(value) {\n        if(value) {\n            this.classList.add('filtered');\n            this.isVisible = false;\n        } else {\n            this.classList.remove('filtered');\n            this.isVisible = true;\n        }\n    }\n\n    /**\n     * Returns the options value.\n     * @returns {string}\n     */\n    get value() {\n        return this.element.dataset.value;\n    }\n\n    /**\n     * Sets the options value.\n     * @param value\n     */\n    set value(value) {\n        this.element.dataset.value = value;\n    }\n\n    /**\n     * Return the options inner html.\n     * @returns {*}\n     */\n    get text() {\n        return this.textContainer.innerText.trim();\n    }\n\n    /**\n     * Sets the options inner html.\n     * @param value\n     */\n    set text(value) {\n        this.textContainer.innerText = (value+\"\").trim();\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the options parent select-menu or null.\n     * @returns {null|{isSelect}|MenuNode}\n     */\n    get parentSelect() {\n        let o = this.parent;\n\n        while(o) {\n            if(o.isSelect && o.isSelect()) {\n                return o;\n            }\n\n            o = o.parent;\n        }\n\n        return null;\n    }\n\n    get isNavigable() {\n        return !this.isDisabled && this.isVisible && !this.isFiltered;\n    }\n\n    constructMenuItem(config) {\n        return new MenuItem(config);\n    }\n\n    constructSubMenu(config) {\n        return new Menu(config);\n    }\n}\n\n\n// noinspection JSUnusedGlobalSymbols\nexport const FILTERS = {\n    startsWith(value) {\n        return function(item) {\n            return item.text.indexOf(value) !== 0;\n        }\n    },\n\n    istartsWith(value) {\n        return function(item) {\n            return item.text.toLowerCase().indexOf(value.toLowerCase()) !== 0;\n        }\n    },\n\n    contains(value) {\n        return function(item) {\n            return item.text.indexOf(value) !== -1;\n        }\n    },\n\n    icontains(value) {\n        return function(item) {\n            return item.text.toLowerCase().indexOf(value.toLowerCase()) !== -1;\n        }\n    }\n};\n\n\n/**\n * Creates a menu that contains SelectOptions.\n */\nexport class SelectMenu extends AbstractMenu {\n    // @inherit multiSelect;\n    #multiSelect;\n\n    constructor({\n                target, filter=null, placeholder=\"No Items Found\", filterDelay=500,\n                filterPlaceholderText=\"Search\", toggle=false, enableShiftSelect=true, enableCtrlToggle=true, clearOldSelection=false, ...context\n    }={}) {\n        if(!target) {\n            target = createFragment(`\n                <div class=\"select-menu\">\n                    <div class=\"select-menu__header\" data-header></div>\n                    <div class=\"select-menu__body menu__body\" data-body></div>\n                    <div class=\"select-menu__footer\" data-footer></div>\n                </div>\n            `).children[0];\n        } else {\n            target = selectElement(target);\n        }\n\n        super({\n            closeOnBlur: false,\n            timeout: false,\n            autoActivate: true,\n            openOnHover: false,\n            closeOnSelect: false,\n            delay: 0,\n            positioner: \"inherit\",\n            target,\n            ...context\n        });\n\n        this.header = findChild(this.element, '[data-header]');\n        this.body = findChild(this.element, '[data-body]');\n        this.footer = findChild(this.element, '[data-footer]');\n        this.filterInput = null;\n        this.element.classList.add('select-menu');\n\n        this.multiSelect = 'inherit';\n\n        this.enableShiftSelect = enableShiftSelect;\n        this.enableCtrlToggle = enableCtrlToggle;\n        this.clearOldSelection = clearOldSelection;\n\n        this.placeholder = document.createElement('div');\n        this.placeholder.classList.add('placeholder');\n        this.placeholder.innerHTML = placeholder;\n\n        this.isVisible = false;\n\n        this.registerTopics();\n        this.parseDOM();\n        this.init();\n\n        if(filter) {\n            this.filterDelay = filterDelay;\n            this.placeholder = placeholder;\n            this._initFilter(filter, filterPlaceholderText);\n        }\n    }\n\n    registerTopics() {\n        super.registerTopics();\n\n        this.on('option.select', topic => {\n            if(!this.multiSelect) {\n                for(let item of this.selection) {\n                    if(item !== topic.target) {\n                        item.isSelected = false;\n                    }\n                }\n            }\n\n            this.dispatchTopic('selection.change', this);\n        });\n\n        this.on('option.deselect', topic => {\n            this.dispatchTopic('selection.change', {\n                target: this,\n                trigger: topic\n            });\n        });\n\n        this.on('menuitem.click', topic => {\n            if(topic.target.parent !== this) return;\n\n            let event = topic.originalEvent;\n\n            if(this._lastClick && event.shiftKey && this.enableShiftSelect) {\n                topic.preventDefault();\n\n                let children = this.children,\n                    targetIndex = children.indexOf(topic.target),\n                    lastIndex = children.indexOf(this._lastClick);\n\n                if(targetIndex !== -1 && lastIndex !== -1) {\n                    let startIndex = Math.min(targetIndex, lastIndex),\n                        endingIndex = Math.max(targetIndex, lastIndex),\n                        change = false;\n\n                    for(let i = 0, l = children.length; i < l; i++) {\n                        let child = children[i];\n\n                        if(i >= startIndex && i <= endingIndex && !child.isDisabled) {\n                            if(!child.isSelected) {\n                                child.isSelected = true;\n                                change = true;\n                            }\n                        } else if(child.isSelected) {\n                            child.isSelected = false;\n                            change = true;\n                        }\n                    }\n\n                    if(change) {\n                        this.dispatchTopic('selection.change', this);\n                    }\n                }\n            } else if(event.ctrlKey && this.enableCtrlToggle) {\n                topic.preventDefault();\n\n                let changed;\n\n                if(topic.target.isSelected) {\n                    event.target.isSelected = false;\n                    changed = true;\n                } else {\n                    event.target.isSelected = true;\n                    changed = true;\n                }\n\n                this._lastClick = topic.target;\n\n                if(changed) {\n                    this.dispatchTopic('selection.change', this);\n                }\n            } else if(this.clearOldSelection) {\n                for(let child of this.children) {\n                    if(child !== topic.target && child.isSelected) {\n                        child.isSelected = false;\n                    }\n                }\n\n                this._lastClick = topic.target;\n            } else {\n                this._lastClick = topic.target;\n            }\n        });\n\n        this.on('menu.show', () => {\n            this.clearFilter();\n\n            if(!this.multiSelect && !this.activeChild) {\n                for (let child of this.children) {\n                    if (child.isSelected && !child.isActive) {\n                        child.activate();\n                    }\n                }\n            }\n        });\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    isSelectMenu() {\n        return true;\n    }\n\n    get selection() {\n        let r = [];\n\n        for(let item of this.children) {\n            if(item.isSelected) {\n                r.push(item);\n            }\n        }\n\n        return r;\n    }\n\n    get selectedOptions() {\n        return this.selection;\n    }\n\n    get options() {\n        return this.children;\n    }\n\n    filter(fn) {\n        if(fn === null) {\n            return this.clearFilter();\n        }\n\n        this.element.classList.add('items-filtered');\n\n        for(let option of this.options) {\n            option.isFiltered = fn(option);\n        }\n\n        if(this.placeholder) {\n            if(this.getFilteredItems().length < this.options.length) {\n                if(this.placeholder.parentElement) {\n                    this.placeholder.parentElement.removeChild(this.placeholder);\n                }\n            } else {\n                let container = this.element.querySelector('.select-menu__body') || this.element;\n                container.appendChild(this.placeholder);\n            }\n        }\n    }\n\n    clearFilter() {\n        for(let option of this.options) {\n            option.isFiltered = false;\n        }\n\n        if(this.placeholder && this.placeholder.parentElement && this.getFilteredItems().length < this.options.length) {\n            this.placeholder.parentElement.removeChild(this.placeholder);\n        }\n\n        if(this.filterInput) {\n            this.filterInput.value = \"\";\n        }\n\n        this.element.classList.remove('items-filtered');\n    }\n\n    getFilteredItems() {\n        let r = [];\n\n        for(let option of this.options) {\n            if(option.isFiltered) {\n                r.push(option);\n            }\n        }\n\n        return r;\n    }\n\n    _initFilter(fn, filterPlaceholderText) {\n        // let filterInput = this.element.querySelectorAll('[data-filter]');\n        let filterInput = Array.prototype.slice.call(document.querySelectorAll('[data-filter]')).find(node => getClosestMenuByElement(node) === this);\n\n        if(!filterInput) {\n            this.filterInput = document.createElement('input');\n            this.filterInput.type = 'text';\n            this.filterInput.placeholder = filterPlaceholderText || \"\";\n            this.filterInput.setAttribute('data-filter', \"\");\n\n            let filterContainer = document.createElement('div');\n            filterContainer.className = \"select-menu__filter\";\n            filterContainer.appendChild(this.filterInput);\n\n            let container = this.header || this.element;\n            container.insertBefore(filterContainer, container.firstChild);\n        } else {\n            this.filterInput = filterInput;\n        }\n\n        let _timer = null;\n\n        this.element.addEventListener('input', event => {\n            if(event.target.hasAttribute('data-filter') && getClosestMenuByElement(event.target) === this) {\n                if(_timer) {\n                    clearTimeout(_timer);\n                    _timer = null;\n                }\n\n                _timer = setTimeout(() => {\n                    _timer = null;\n                    this.filter(fn(this.filterInput.value));\n                }, this.filterDelay);\n            }\n        });\n    }\n\n    constructMenuItem(config) {\n        return new SelectOption(config);\n    }\n\n    constructSubMenu(config) {\n        return new SelectMenu(config);\n    }\n\n    get multiSelect() {\n        let value = this.#multiSelect;\n\n        if(value === 'inherit' || value === undefined) {\n            let parent = this.parent;\n            return parent ? parent.multiSelect : undefined;\n        } else if(value === 'root') {\n            let root = this.root;\n\n            if(this !== root) {\n                return root.multiSelect;\n            }\n        } else {\n            return value;\n        }\n    }\n\n    set multiSelect(value) {\n        this.#multiSelect = value;\n    }\n}\n\n\n/**\n * @implements FormWidgetBase\n * @abstract\n */\nexport class AbstractSelect extends AbstractMenuItem {\n    constructor({target, widget, name=null, ...config}) {\n        super({target, ...config});\n\n        // Set the widget component control.\n        this.widget = widget;\n        if(!this.widget.element.parentElement) {\n            this.widget.appendTo(this.element);\n        }\n\n        let submenu = findChild(target, \"[data-menu]\");\n\n        if(submenu) {\n            submenu.parentElement.removeChild(submenu);\n            this.attachSubMenu(this.constructSubMenu({target: submenu}));\n        } else {\n            this.attachSubMenu(this.constructSubMenu({}));\n        }\n\n        if(name !== null) {\n            this.name = name;\n        }\n    }\n\n    isSelect() {\n        return true;\n    }\n\n    /**\n     * Refresh ui\n     *\n     * @abstract\n     * @private\n     */\n    refreshUI() {\n\n    }\n\n    registerTopics() {\n        super.registerTopics();\n\n        this.on('menuitem.click', topic => {\n            // Close the select if the user clicks a disabled select item.\n            if(this.closeOnSelect && this.isActive) {\n                if(topic.target.isDisabled) {\n                    topic.preventDefault();\n                    this.deactivate();\n                }\n            }\n        });\n\n        this.on('option.select', () => {\n            if(this.closeOnSelect && this.isActive) {\n                this.deactivate();\n            }\n        });\n\n        this.on('option.deselect', () => {\n            if(this.closeOnSelect && this.isActive) {\n                this.deactivate();\n            }\n        });\n\n        this.on('selection.change', () => {\n            this.refreshUI();\n            this.submenu.position();\n        });\n    }\n\n    append(option) {\n        return this.submenu.append(option);\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Properties\n\n    /**\n     * @returns {SelectOption}\n     */\n    get options() {\n        return this.submenu.options;\n    }\n\n    get selectedOptions() {\n        return this.submenu.selectedOptions;\n    }\n\n    getName() {\n        return this.widget.name;\n    }\n\n    setName(value) {\n        this.widget.name = value;\n    }\n\n    getValue() {\n        return this.widget.value;\n    }\n\n    /**\n     * Sets the value of the widget and updates the ui without triggering any topics.\n     *\n     * @abstract\n     * @param value\n     */\n    setValue(value) {\n\n    }\n\n    get value() {\n        return this.getValue();\n    }\n\n    set value(value) {\n        this.setValue(value);\n    }\n\n    get name() {\n        return this.getName();\n    }\n\n    set name(value) {\n        this.setName(value);\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    //\n\n    static FromHTML(element) {\n        if(typeof element === 'string') {\n            element = document.querySelector(element);\n        }\n\n        let config = this.getAttributes(element);\n\n        let instance = new this(config);\n\n        for(let child of element.querySelectorAll('li')) {\n            let option = new SelectOption({text: child.innerHTML.trim(), value: child.dataset.value || null});\n            instance.append(option);\n        }\n\n        element.parentElement.replaceChild(instance.element, element);\n\n        return instance;\n    }\n\n    static ConstructFromHTML(element) {\n        if(typeof element === 'string') {\n            element = document.querySelector(element);\n        }\n\n        if(element.nodeName === 'SELECT') {\n            let select = element;\n            element = document.createElement('div');\n            copyNodeData(element, select);\n\n            if(select.name) {\n                element.dataset.name = select.name;\n            }\n\n            if(select.multiple) {\n                element.dataset.multiple = select.multiple;\n            }\n\n            for(let child of select.children) {\n                if(child.nodeName === \"OPTION\") {\n                    element.appendChild(createOption(child));\n                } else if(child.nodeName === 'OPTGROUP') {\n                    element.appendChild(createOptGroup(child));\n                }\n            }\n\n            select.parentElement.replaceChild(element, select);\n        }\n\n        // todo move into constructor.\n        let config = this.getAttributes(element);\n\n        return new this({\n            ...config,\n            target: element\n        });\n    }\n\n    /**\n     * @abstract\n     * @param config\n     */\n    constructMenuItem(config) {}\n\n    /**\n     * @abstract\n     * @param config\n     */\n    constructSubMenu(config) {}\n}\n\n\nconst RICH_SELECT_SCHEMA = new AttributeSchema({\n    multiple: new Attribute(Bool, Attribute.DROP, Attribute.DROP),\n    maxItems: new Attribute(Integer, Attribute.DROP, Attribute.DROP),\n    name: new Attribute(Str, Attribute.DROP, Attribute.DROP),\n    placeholder: new Attribute(Str, Attribute.DROP, Attribute.DROP)\n});\n\n\nexport class RichSelect extends AbstractSelect {\n    constructor({target=null, timeout=false, widget=null, multiple=false, maxItems=5, name=null, placeholder=null}={}) {\n        widget = widget || new MultiHiddenInputWidget();\n\n        const TEMPLATE = `\n        <div class=\"select-button\">\n            <input type=\"text\" class=\"select-button__input\" data-text />\n            <span class=\"select-button__caret\"><i class=\"fas fa-caret-down\"></i></span>\n        </div>\n        `;\n\n        let textbox,\n            children = [];\n\n        if(target) {\n            target = selectElement(target);\n\n            if(target.nodeName === 'INPUT') {\n                textbox = target;\n            } else {\n                for(let child of [...target.children]) {\n                    if(!child.hasAttribute('data-button') && !child.hasAttribute('data-menu')) {\n                        target.removeChild(child);\n                        children.push(child);\n                    }\n                }\n\n                let button = findChild(target, \"[data-button]\");\n\n                if(!button) {\n                    target.appendChild(createFragment(TEMPLATE));\n                }\n            }\n        } else {\n            target = document.createElement('div');\n            target.appendChild(createFragment(TEMPLATE));\n        }\n\n        super({\n            toggle: true,\n            autoActivate: false,\n            openOnHover: false,\n            delay: false,\n            timeout,\n            closeOnBlur: true,\n            clearSubItemsOnHover: false,\n            positioner: positioners.DROPDOWN,\n            closeOnSelect: true,\n            target,\n            widget,\n            name\n        });\n\n        this.textbox = textbox || this.element.querySelector('input, [data-text]');\n        this.textbox.readOnly = true;\n        this._label = '';\n        this.element.tabIndex = 0;\n        this.element.classList.add('rich-select');\n\n        this.textbox.addEventListener('blur', event => {\n            if(!this.containsElement(event.relatedTarget)) {\n                this.textbox.value = this._label;\n            }\n        });\n\n        this.registerTopics();\n        this.initKeyboardNavigation();\n        this.init();\n\n        this.multiple = multiple;\n        this.maxItems = maxItems;\n\n        if(placeholder !== null) this.placeholder = placeholder;\n\n        for(let child of children) {\n            if(child.hasAttribute('data-menuitem')) {\n                this.append(this.submenu.constructMenuItem({target: child}));\n            } else {\n                this.append(child);\n            }\n        }\n\n        this.parseDOM();\n        this.refreshUI();\n    }\n\n    refreshUI() {\n        let options = this.selectedOptions,\n            labels = options.map(item => item.text);\n\n        let values = [];\n\n        for(let option of options) {\n            values.push(option.value || option.text || '');\n        }\n\n        this.value = values;\n\n        if(labels.length <= this.maxItems) {\n            this._label = labels.join(\", \");\n        } else {\n            this._label = `${labels.length} Items Selected`;\n        }\n\n        this.textbox.value = this._label;\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Properties\n\n    setValue(value) {\n        this.widget.value = value;\n    }\n\n    get placeholder() {\n        return this.textbox.placeholder;\n    }\n\n    set placeholder(value) {\n        this.textbox.placeholder = value;\n    }\n\n    get multiple() {\n        return this.submenu.multiSelect;\n    }\n\n    set multiple(value) {\n        value = !!value;\n\n        if(value) {\n            this.submenu.multiSelect = true;\n            this.submenu.toggle = true;\n            this.closeOnSelect = false;\n        } else {\n            this.submenu.multiSelect = false;\n            this.submenu.toggle = false;\n            this.closeOnSelect = true;\n        }\n    }\n\n    get maxItems() {\n        return this._maxItems;\n    }\n\n    set maxItems(value) {\n        this._maxItems = value;\n        this.refreshUI();\n    }\n\n    static getAttributes(element) {\n        return {\n            ...super.getAttributes(element),\n            ...RICH_SELECT_SCHEMA.deserialize(element.dataset)\n        };\n    }\n\n    constructMenuItem(config) {\n        return new SelectOption(config);\n    }\n\n    constructSubMenu(config) {\n        return new SelectMenu(config);\n    }\n}\n\n\nexport class MultiComboBox extends AbstractSelect {\n    constructor({target=null, timeout=false, widget=null, filter=FILTERS.istartsWith, wait=500, name=null}={}) {\n        widget = widget || new MultiHiddenInputWidget();\n\n        const TEMPLATE = `\n            <div class=\"multi-combo-box__button\" data-body>\n                <div contenteditable=\"true\" class=\"multi-combo-box__input\" data-text />\n            </div>\n        `;\n\n        let children = [];\n\n        if(target) {\n            target = selectElement(target);\n\n            for(let child of [...target.children]) {\n                if(!child.hasAttribute('data-button') && !child.hasAttribute('data-menu')) {\n                    target.removeChild(child);\n                    children.push(child);\n                }\n            }\n\n            let button = findChild(target, \"[data-button]\");\n\n            if(!button) {\n                target.appendChild(createFragment(TEMPLATE));\n            }\n        } else {\n            target = document.createElement('div');\n            target.appendChild(createFragment(TEMPLATE));\n        }\n\n        super({\n            toggle: true,\n            autoActivate: false,\n            openOnHover: false,\n            delay: false,\n            timeout,\n            closeOnBlur: true,\n            positioner: positioners.DROPDOWN,\n            closeOnSelect: false,\n            clearSubItemsOnHover: false,\n            target,\n            widget,\n            name\n        });\n\n        this.textbox = this.element.querySelector(\"[data-text]\");\n        this.body = this.element.querySelector(\"[data-body]\");\n        this.element.classList.add('multi-combo-box');\n\n        // this.multiSelect = true;\n\n        this.optionToPillMap = new WeakMap();\n        this.pilltoOptionMap = new WeakMap();\n\n        this.submenu.multiSelect = true;\n        this.submenu.toggle = true;\n        this.submenu.enableShiftSelect = true;\n\n        this.initKeyboardNavigation();\n        this.registerTopics();\n        this.init();\n\n        this._filterTimer = null;\n\n        this._applyFilter = () => {\n            this._filterTimer = null;\n\n            this.submenu.filter(filter(this.getFilterValue()));\n\n            if(this.submenu.activeItem) this.submenu.activeItem.deactivate();\n        };\n\n        this.textbox.addEventListener('input', () => {\n            if(this._filterTimer) {\n                clearTimeout(this._filterTimer);\n                this._filterTimer = null;\n            }\n\n            if(wait === false || wait < 0) {\n                this._applyFilter();\n            } else {\n                this._filterTimer = setTimeout(this._applyFilter, wait);\n            }\n        });\n\n        for(let child of children) {\n            if(child.hasAttribute('data-menuitem')) {\n                this.append(this.submenu.constructMenuItem({target: child}));\n            } else {\n                this.append(child);\n            }\n        }\n\n        this.parseDOM();\n        this.refreshUI();\n    }\n\n    getFilterValue() {\n        if(this.textbox.nodeName === \"INPUT\") {\n            return this.textbox.value;\n        } else {\n            return this.textbox.innerText;\n        }\n    }\n\n    setFilterValue(value) {\n        if(this.textbox.nodeName === \"INPUT\") {\n            this.textbox.value = value;\n        } else {\n            this.textbox.innerText = value;\n        }\n    }\n\n    registerTopics() {\n        super.registerTopics();\n\n        this.on('event.click', topic => {\n            // noinspection JSUnresolvedFunction\n            let exitButton = topic.originalEvent.target.closest('.pill__exit-button'),\n                pill = exitButton ? exitButton.closest('.multi-combo-box__pill') : null,\n                option = pill ? this.pilltoOptionMap.get(pill) : null;\n\n            if(option) {\n                option.optionDeselect();\n            }\n\n            topic.originalEvent.preventDefault();\n            this.textbox.focus();\n        });\n\n        this.on('menu.hide', topic => {\n            if(topic.target === this.submenu) {\n                this.setFilterValue(\"\");\n                this.submenu.clearFilter();\n            }\n        })\n    }\n\n    _buildChoicePill(text) {\n        let pill = document.createElement('div');\n        pill.className = \"multi-combo-box__pill\";\n\n        let exitButton = document.createElement('div'),\n            textContainer = document.createElement('div');\n\n        exitButton.className = \"pill__exit-button\";\n        exitButton.innerHTML = `<i class=\"far fa-times-circle\"></i>`;\n        textContainer.className = \"pill__text\";\n        textContainer.innerHTML = text;\n\n        pill.appendChild(textContainer);\n        pill.appendChild(exitButton);\n\n        return pill;\n    }\n\n    onKeyDown(topic) {\n        if(!this._keyboardNavigationEnabled || !this.isRoot) {\n            return;\n        }\n\n        let event = topic.originalEvent;\n\n        if(!this.isActive) {\n            this.activate();\n            return;\n        }\n\n        if(event.key === \"Backspace\" && this.getFilterValue() === \"\") {\n            let pills = this.body.querySelectorAll('.multi-combo-box__pill'),\n                pill = pills[pills.length-1],\n                option = pill ? this.pilltoOptionMap.get(pill) : null;\n\n            if(option) {\n                option.optionDeselect();\n            }\n        } else if(event.key === 'Enter') {\n            event.preventDefault();\n\n            if(this._filterTimer) {\n                clearTimeout(this._filterTimer);\n                this._filterTimer = null;\n                this._applyFilter();\n            } else {\n                /**\n                 * @type {null|SelectOption}\n                 */\n                let activeItem = null,\n                    /**\n                     * @type {null|SelectOption}\n                     */\n                    firstItem = null;\n\n                // Find both the first none filtered item and the active item.\n                for(let option of this.options) {\n                    if(!option.isFiltered && firstItem === null) {\n                        firstItem = option;\n                    }\n\n                    if(!option.isFiltered && option.isActive) {\n                        activeItem = option;\n                    }\n                }\n\n                if(!activeItem) {\n                    this.setFilterValue(\"\");\n                    this.submenu.clearFilter();\n                    this.submenu.position();\n\n                    if(firstItem && !firstItem.isSelected) {\n                        firstItem.select();\n                    }\n\n                    firstItem.deactivate();\n                } else {\n                    activeItem.select();\n                }\n            }\n        } else if(event.key === \"ArrowUp\" || event.key === \"ArrowDown\") {\n            return super.onKeyDown(topic);\n        }\n    }\n\n    refreshUI() {\n        if(!this._refreshUIId) {\n            this._refreshUIId = window.requestAnimationFrame(() => {\n                this._refreshUIId = null;\n\n                let fragment = document.createDocumentFragment(),\n                    _new = false,\n                    values = [];\n\n                for(let option of this.options) {\n                    let pill = this.optionToPillMap.get(option);\n\n                    if(option.isSelected) {\n                        if(!pill) {\n                            pill = this._buildChoicePill(option.text);\n                            this.pilltoOptionMap.set(pill, option);\n                            this.optionToPillMap.set(option, pill);\n                            fragment.appendChild(pill);\n                            _new = true;\n                        }\n\n                        values.push(option.value || option.text);\n                    } else if(pill) {\n                        if(pill.parentElement) pill.parentElement.removeChild(pill);\n                        this.optionToPillMap.delete(option);\n                        this.pilltoOptionMap.delete(pill);\n                    }\n                }\n\n                if(_new) {\n                    this.body.insertBefore(fragment, this.textbox);\n                }\n\n                if(this.widget) {\n                    this.widget.setValue(values);\n                }\n            });\n        }\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Properties\n\n    setValue(values) {\n        let changed = false;\n\n        for(let option of this.options) {\n            let index = values.indexOf(option.value);\n            if(index !== -1) {\n                if(!option.isSelected && !option.isDisabled) {\n                    option.isSelected = true;\n                    changed = true;\n                }\n\n                values.splice(index, 1);\n            } else {\n                if(option.isSelected) {\n                    option.isSelected = false;\n                    changed = true;\n                }\n            }\n        }\n\n        this.refreshUI();\n    }\n\n    constructMenuItem(config) {\n        return new SelectOption(config);\n    }\n\n    constructSubMenu(config) {\n        return new SelectMenu(config);\n    }\n}\n\n\nexport class ComboBox extends RichSelect {\n    constructor({target=null, timeout=false, submenu=null, widget=null, wait=500, filter=FILTERS.istartsWith, name=null}={}) {\n        super({\n            target,\n            timeout,\n            submenu,\n            widget,\n            multiple: false,\n            filter: null,\n            name\n        });\n\n        this.element.classList.add('combo-box');\n        this.element.classList.remove('rich-select');\n\n        this.wait = wait;\n        this.filter = filter;\n\n        this.parseDOM();\n        this.refreshUI();\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Private methods\n\n    _rootKeyDown(topic) {\n        if(this.isRoot) {\n            let key = topic.originalEvent.key;\n\n            if(this.hasFilter && (key === 'ArrowLeft' || key === 'ArrowRight')) {\n                return;\n            }\n\n            return super._rootKeyDown(topic);\n        }\n    }\n\n    set filter(method) {\n        if(this._destroyFilter) {\n            this._destroyFilter();\n            this._destroyFilter = null;\n        }\n\n        if(!method) return;\n\n        this._filterMethod = method;\n\n        let _timer = null;\n\n        let applyFilter = () => {\n            _timer = null;\n            this.submenu.filter(this._filterMethod(this.textbox.value));\n\n            // Flag if we found a select item.\n            let f = false;\n\n            // Activate the selected items.\n            if (!this.submenu.multiSelect) {\n                for (let option of this.submenu.options) {\n                    if (!option.isDisabled && !option.isFiltered && option.isSelected) {\n                        option.activate();\n                        f = true;\n                        break;\n                    }\n                }\n            }\n\n            if (!f) {\n                for (let option of this.submenu.options) {\n                    if (!option.isDisabled && !option.isFiltered) {\n                        option.activate();\n                        break;\n                    }\n                }\n            }\n        };\n\n        let onInput = () => {\n            if(_timer) {\n                clearTimeout(_timer);\n                _timer = null;\n            }\n\n            if(this.wait === false || this.wait < 0) {\n                applyFilter();\n            } else {\n                _timer = setTimeout(applyFilter, this.wait);\n            }\n        };\n\n        let onKeyDown = event => {\n            // Apply the filter immediately on enter.\n            if(event.key === \"Enter\" && _timer) {\n                clearTimeout(_timer);\n                _timer = null;\n                applyFilter();\n            }\n        };\n\n        this.textbox.addEventListener('input', onInput);\n        this.textbox.addEventListener('keydown', onKeyDown);\n        this.textbox.readOnly = false;\n\n        // Create method to destroy event listener.\n        this._destroyFilter = () => {\n            this.textbox.removeEventListener('input', onInput);\n            this.textbox.removeEventListener('keydown', onKeyDown);\n            this.textbox.readOnly = true;\n\n            this._destroyFilter = null;\n        };\n    }\n\n    get filter() {\n        return !!this._filterMethod;\n    }\n\n    get hasFilter() {\n        return !!this._destroyFilter;\n    }\n\n    static getAttributes(element) {\n        return {\n            ...super.getAttributes(element),\n            multiple: false\n        };\n    }\n}\n","import Menu, {AbstractMenu} from \"./Menu\";\nimport MenuItem from \"./MenuItem\";\n\n\nexport default class SlideMenu extends AbstractMenu {\n    constructor({target=null, modal=false}) {\n        if(!target) {\n            if(modal) {\n                target = document.createElement('div');\n                let menu = document.createElement('div');\n\n                target.className = \"modal\";\n                menu.className = \"side-menu\";\n\n                target.appendChild(menu);\n            } else {\n                target = document.createElement('div');\n                target.className = 'side-menu';\n            }\n        }\n\n        super({\n            target,\n            closeOnBlur: true,\n            timeout: false,\n            autoActivate: false,\n            openOnHover: false,\n            toggle: false,\n            closeOnSelect: true,\n            delay: false,\n            positioner: null,\n            direction: \"vertical\"\n        });\n\n        this.isVisible = false;\n        this.registerTopics();\n        this.parseDOM();\n        this.init();\n    }\n\n    registerTopics() {\n        super.registerTopics();\n\n        let onDocumentClick;\n\n\n        this.on(\"menu.show\", event => {\n            this.activate();\n\n            if(this.closeOnBlur) {\n                onDocumentClick = event => {\n                    if(!this.element.contains(event.target)) {\n                        document.removeEventListener('click', onDocumentClick);\n                        onDocumentClick = null;\n                        this.hide();\n                    }\n                };\n\n                setTimeout(() => {\n                    if(onDocumentClick) document.addEventListener('click', onDocumentClick);\n                }, 0);\n            }\n        });\n\n        this.on('menu.hide', event => {\n            if(onDocumentClick) {\n                document.removeEventListener('click', onDocumentClick);\n                onDocumentClick = null;\n            }\n\n            this.deactivate();\n        });\n\n        this.on('event.click', event => {\n            let dismiss = event.originalEvent.target.closest(\"[data-action='dismiss']\");\n\n            if(this.isVisible && dismiss && this.getTargetNode(dismiss) === this) {\n                this.hide();\n            }\n        });\n    }\n\n    constructMenuItem(config) {\n        return new MenuItem(config);\n    }\n\n    constructSubMenu(config) {\n        return new Menu(config);\n    }\n}\n","export MenuBar from \"./MenuBar\";\nexport MenuItem, {AbstractMenuItem} from \"./MenuItem\";\nexport Menu, {AbstractMenu} from \"./Menu\";\nexport DropDown from \"./DropDown\";\nexport MenuNode from \"./MenuNode\";\nexport {SelectMenu, RichSelect, ComboBox, MultiComboBox, SelectOption, AbstractSelect} from \"./Select2\";\nexport ContextMenu from \"./ContextMenu\";\nexport SlideMenu from \"./SlideMenu\";\nimport \"./loaders.js\";\n","import AutoLoader from \"../autoloader\";\nimport ContextMenu from \"./ContextMenu\";\nimport DropDown from \"./DropDown\";\nimport Menu from \"./Menu\";\nimport MenuBar, {SideMenuBar} from \"./MenuBar\";\nimport {ComboBox, MultiComboBox, RichSelect} from \"./Select2\";\n\n\nAutoLoader.register('dropdown', (element) => DropDown.FromHTML(element));\n\n\nAutoLoader.register('context-menu', (element) => {\n    let instance = ContextMenu.FromHTML(element),\n        target = document.querySelector(element.dataset.target);\n\n    instance.setTargetMenu(target);\n    instance.setContainer(target);\n\n    return instance;\n});\n\n\nAutoLoader.register('menu', (element) => {\n    return Menu.FromHTML(element);\n});\n\n\nAutoLoader.register('menubar', (element) => MenuBar.FromHTML(element));\nAutoLoader.register('side-menubar', (element) => SideMenuBar.FromHTML(element));\n\n\nAutoLoader.register('select', (element) => RichSelect.ConstructFromHTML(element));\nAutoLoader.register('combobox', (element) => ComboBox.ConstructFromHTML(element));\nAutoLoader.register('multi-combobox', (element) => MultiComboBox.ConstructFromHTML(element));\n","import {Rect} from \"core/vectors\";\nimport {getClientRect, setElementClientPosition} from \"core/ui/position\";\n\nconst opposites = {\n    left: 'right',\n    top: 'bottom',\n    right: 'left',\n    bottom: 'top',\n    center: 'center',\n    middle: 'middle'\n};\n\n\nfunction getInheritedPosition(menu) {\n    if(menu.parentMenu && !menu.parentMenu.isRoot) {\n        return menu.parentMenu.element.dataset.position;\n    }\n}\n\n\nfunction _applyPosition(target, overlay, container) {\n    let position = overlay.dataset.position,\n        [my, at, method] = position.split(/\\s*;\\s*/),\n        overlayRect = Rect.getBoundingClientRect(overlay),\n        targetRect = Rect.getBoundingClientRect(target),\n        containerRect = container.nodeType ? Rect.getBoundingClientRect(container) : container;\n\n    my = my.trim();\n    at = at.trim();\n\n    let [myX, myY] = my.split(/\\s+/),\n        [atX, atY] = at.split(/\\s+/),\n        methodX, methodY;\n\n    if(method) {\n        method = method.trim();\n        [methodX, methodY] = method.split(/\\s+/);\n    }\n\n    let pos = overlayRect.position({my: `${myX} ${myY}`, at: `${atX} ${atY}`, of: targetRect, inside: containerRect, collision: null}),\n        refresh = false; // flag that determines is position will be refreshed.\n\n    if(!containerRect.containsX(pos)) {\n        myX = opposites[myX];\n        atX = opposites[atX];\n        if(methodX) methodX = opposites[methodX];\n        refresh = true;\n    }\n\n    if(!containerRect.containsY(pos)) {\n        myY = opposites[myY];\n        atY = opposites[atY];\n        if(methodY) methodY = opposites[methodY];\n        refresh = true;\n    }\n\n    if(refresh) {\n        pos = overlayRect.position({my: `${myX} ${myY}`, at: `${atX} ${atY}`, of: targetRect, inside: containerRect, collision: null});\n\n        if(methodX && methodY) {\n            overlay.dataset.position = `${myX} ${myY}; ${atX} ${atY}; ${methodX} ${methodY};`;\n        } else {\n            overlay.dataset.position = `${myX} ${myY}; ${atX} ${atY};`;\n        }\n    }\n\n    methodX = methodX || 'left';\n    methodY = methodY || 'top';\n\n    setElementClientPosition(overlay, pos, `${methodY}-${methodX}`);\n}\n\n\n/**\n * Positions first level of menus statically\n * Then position second level of menus at the bottom left of the first level.\n * Finally positions every other level to the top right of the previous level.\n * Menu's can flip if they fall out of bounds of the container.\n * By default the container is the client area.\n *\n * @param container\n * @param topLevelPosition\n * @param defaultPosition\n * @returns {Function}\n */\nexport function dropdown(container=null, topLevelPosition=\"left top; left bottom; left top;\", defaultPosition=\"left top; right top; left top;\") {\n    if(!container) {\n        container = getClientRect;\n    } else if(typeof container === 'string') {\n        let target = document.querySelector(container);\n        container = () => Rect.getBoundingClientRect(target);\n    } else {\n        let target = container;\n        container = () => Rect.getBoundingClientRect(target);\n    }\n\n    return function(menu) {\n        let parentMenu = menu.parentMenu,\n            containerElement = container,\n            target = menu.parent;\n\n        if(typeof containerElement === 'function') {\n            containerElement = containerElement(target, menu);\n        }\n\n        if (!parentMenu || parentMenu.isRoot) {\n            menu.element.dataset.position = topLevelPosition;\n            // flipPositionIfOutOfBounds(menu.element, container, 'xy');\n            _applyPosition(target.element, menu.element, containerElement);\n        } else if(!parentMenu.parentMenu || parentMenu.parentMenu.isRoot) {\n            menu.element.dataset.position = defaultPosition;\n            _applyPosition(target.element, menu.element, containerElement);\n        } else {\n            menu.element.dataset.position = getInheritedPosition(menu) || defaultPosition;\n            // flipPositionIfOutOfBounds(menu.element, container, 'xy');\n            _applyPosition(target.element, menu.element, containerElement);\n        }\n    };\n}\n\n\nexport function contextMenuPosition(container=null, position=\"left top; right top;\") {\n    if(!container) {\n        container = getClientRect;\n    } else if(typeof container === 'string') {\n        let target = document.querySelector(container);\n        container = () => Rect.getBoundingClientRect(target);\n    } else {\n        let target = container;\n        container = () => Rect.getBoundingClientRect(target);\n    }\n\n    return function(menu) {\n        let containerElement = container,\n            target = menu.parent;\n\n        if(typeof containerElement === 'function') {\n            containerElement = containerElement(target, menu);\n        }\n\n        menu.element.dataset.position = getInheritedPosition(menu) || position;\n        _applyPosition(target.element, menu.element, containerElement);\n    };\n}\n\n\nexport const DROPDOWN = dropdown();\n// noinspection JSUnusedGlobalSymbols\nexport const SIDE_MENU = dropdown(null, \"left top; right top;\", \"left top; right top;\");\nexport const CONTEXT_MENU = contextMenuPosition();\n","export const MENU_MAP = new WeakMap();\n\n\n/**\n * Maps elements to menu node controller instances.\n * @param element\n * @param instance\n */\nexport function attachMenuInstance(element, instance) {\n    if(instance === null) {\n        return detachMenuInstance(element);\n    }\n\n    if(MENU_MAP.get(element)) {\n        throw new Error(\"Element is already bound to menu node instance.\");\n    }\n\n    MENU_MAP.set(element, instance);\n}\n\n\n/**\n * Unmaps menu node controller instance from an element.\n * @param element\n */\nexport function detachMenuInstance(element) {\n    MENU_MAP.delete(element);\n}\n\n\n/**\n * Returns true if the element has a menu controller instance mapped.\n * @param element\n * @returns {boolean}\n */\nexport function hasMenuInstance(element) {\n    return MENU_MAP.has(element);\n}\n\n\n/**\n * Retrieves the mapped menu node controller instance for the element.\n * @param element\n * @returns {null|MenuNode|*}\n */\nexport function getMenuInstance(element) {\n    return MENU_MAP.get(element);\n}\n\n\n/**\n * Finds the closest menu node controller for the element in the DOM tree.\n * @param element\n * @returns {null|*}\n */\nexport function getClosestMenuNodeByElement(element) {\n    while(element) {\n        let instance = getMenuInstance(element);\n\n        if(instance) {\n            return instance;\n        }\n\n        element = element.parentElement;\n    }\n\n    return null;\n}\n\n\n// noinspection JSUnusedGlobalSymbols\n/**\n * Finds the closest menuitem controller for the element in the DOM tree.\n * @param element\n * @returns {null|*}\n */\nexport function getClosestMenuItemByElement(element) {\n    while(element) {\n        let instance = getMenuInstance(element);\n\n        if(instance && instance.isMenuItem()) {\n            return instance;\n        }\n\n        element = element.parentElement;\n    }\n\n    return null;\n}\n\n\n/**\n * Finds the closest menu node controller for the element in the DOM tree\n * @param element\n * @returns {null|*}\n */\nexport function getClosestMenuByElement(element) {\n    while(element) {\n        let instance = getMenuInstance(element);\n\n        if(instance && instance.isMenu()) {\n            return instance;\n        }\n\n        element = element.parentElement;\n    }\n\n    return null;\n}\n"],"sourceRoot":""}