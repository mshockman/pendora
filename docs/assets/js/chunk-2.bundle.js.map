{"version":3,"sources":["webpack://pendora/./docs/js/pages/documentation/test_resizeable.js","webpack://pendora/./src/core/ui/PointerTracker.js","webpack://pendora/./src/core/ui/Resizeable.js"],"names":["window","Rect","getBoundingOffsetRect","TestResizeablePage","loadDraggables","debugTracker","PointerTracker","DebugMouseTracker","document","body","appendChild","element","resizeable1","Resizeable","elements","querySelectorAll","d","container","closest","Draggable","capture","context","target","exclude","selectElement","cancel","removeEventListener","isTracking","releasePointerCapture","Error","pageXOffset","pageYOffset","value","zIndex","output","createElement","tracker","on","event","innerHTML","clientX","clientY","style","position","right","top","padding","backgroundColor","border","Publisher","PointerEvent","targetElement","excludedElement","pointerId","setPointerCapture","addEventListener","handle","name","args","publish","type","originalEvent","minWidth","maxWidth","minHeight","maxHeight","axis","keepAspectRatio","grid","handles","helper","className","addClasses","width","height","config","startingRect","rect","centerX","left","centerY","resize","Infinity","clamp","bottom","setElementClientPosition","dataset","trim","split","scale"],"mappings":"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","file":"chunk-2.bundle.js","sourcesContent":["import Resizeable from \"core/ui/Resizeable\";\nimport Draggable from \"core/ui/Draggable\";\nimport PointerTracker from \"../../../../src/core/ui/PointerTracker\";\nimport Rect from \"../../../../src/core/vectors/Rect\";\nimport {getBoundingOffsetRect} from \"../../../../src/core/ui/position\";\n\n\nwindow.Rect = Rect;\nwindow.getBoundingOffsetRect = getBoundingOffsetRect;\n\n\nexport default class TestResizeablePage {\n    load() {\n        this.loadDraggables();\n\n        let debugTracker = PointerTracker.DebugMouseTracker();\n        document.body.appendChild(debugTracker.element);\n\n        this.resizeable1 = new Resizeable('#resizeable1');\n    }\n\n    loadDraggables() {\n        let elements = document.querySelectorAll('.draggable');\n\n        for(let d of elements) {\n            let container = d.closest('.example-zone') || null;\n            new Draggable(d, {container});\n        }\n    }\n}","import Publisher from \"../Publisher\";\nimport {selectElement} from \"../utility\";\nimport {closest} from \"../utility\";\n\n\n/**\n * A class that tracks mouse position oven an element or the document.\n * Will use PointerEvents if browser support is available, otherwise it will fall back to using mousedown, mouseover, and mousemove.\n */\nexport default class PointerTracker extends Publisher {\n    #element;\n    #pointerId;\n    #isDisabled;\n\n    #pageX;\n    #pageY;\n\n    #type;\n    #onPointerDown;\n    #onPointerMove;\n    #onPointerUp;\n    #isTracking;\n\n    #capture;\n    #context;\n    #target;\n    #exclude;\n\n    constructor(element, {capture=false, context=null, target=null, exclude=null}={}) {\n        super();\n\n        this.#element = selectElement(element);\n\n        this.#isTracking = false;\n        this.#isDisabled = false;\n\n        this.#capture = capture;\n        this.#context = context;\n        this.#target = target;\n        this.#exclude = exclude;\n\n        this.#init();\n    }\n\n    destroy() {\n        this.cancel();\n\n        if(this.#onPointerDown) {\n            this.#element.removeEventListener('pointerdown', this.#onPointerDown);\n        }\n\n        this.#onPointerDown = null;\n        this.#element = null;\n    }\n\n    cancel() {\n        if(this.#type === 'pointer') {\n            if(this.isTracking) {\n                if (this.#onPointerMove) {\n                    this.#element.removeEventListener('pointermove', this.#onPointerMove);\n                }\n\n                if(this.#onPointerUp) {\n                    this.#element.removeEventListener('pointerup', this.#onPointerUp);\n                }\n            }\n\n            if(this.#pointerId) {\n                this.#element.releasePointerCapture(this.#pointerId);\n            }\n\n            this.#isTracking = false;\n            this.#type = null;\n            this.#onPointerUp = null;\n            this.#onPointerMove = null;\n            this.#pointerId = null;\n        } else if(this.#type === 'mouse') {\n\n        } else {\n            throw new Error(\"Unknown pointer type.\");\n        }\n    }\n\n    get isTracking() {\n        return this.#isTracking;\n    }\n\n    #init() {\n        if(this.#type) return;\n\n        if(window.PointerEvent) {\n            this.#initPointerTracker();\n        } else {\n            this.#initMouseTracker();\n        }\n    }\n\n    #initPointerTracker() {\n        if(this.#type) return;\n        this.#type = \"pointer\";\n\n        this.#onPointerMove = event => {\n            if(!this.#isDisabled) {\n                this.#triggerPointerEvent('pointer-move', event);\n            }\n        };\n\n        if(this.#capture) {\n            this.#onPointerDown = event => {\n                if(this.isTracking) return;\n\n                let targetElement = this.#target ? closest(event.target, this.#target, this.#element) : null,\n                    excludedElement = this.#exclude ? closest(event.target, this.#exclude, this.#element) : null;\n\n                if((!this.#target || targetElement) && (!this.#exclude || !excludedElement)) {\n                    this.#isTracking = true;\n                    this.#pointerId = event.pointerId;\n\n                    this.#element.setPointerCapture(event.pointerId);\n                    this.#element.addEventListener('pointermove', this.#onPointerMove);\n                    this.#element.addEventListener('pointerup', this.#onPointerUp);\n\n                    this.#triggerPointerEvent('pointer-capture', event, {handle: targetElement});\n                }\n            };\n\n            this.#onPointerUp = event => {\n                this.#isTracking = false;\n                this.#element.releasePointerCapture(event.pointerId);\n                this.#pointerId = null;\n                this.#element.removeEventListener('pointerup', this.#onPointerUp);\n                this.#element.removeEventListener('pointermove', this.#onPointerMove);\n                this.#triggerPointerEvent('pointer-release', event);\n            };\n\n            this.#element.addEventListener('pointerdown', this.#onPointerDown);\n        } else {\n            this.#element.addEventListener('pointermove', this.#onPointerMove);\n        }\n    }\n\n    #initMouseTracker() {\n        this.#type = \"mouse\";\n    }\n\n    #triggerPointerEvent(name, event, args=null) {\n        this.#pageX = event.clientX + window.pageXOffset;\n        this.#pageY = event.clientY + window.pageYOffset;\n\n        if(!args) {\n            args = {};\n        }\n\n        this.publish(name, {\n            type: this.#type,\n            name: name,\n            target: event.target,\n            clientX: event.clientX,\n            clientY: event.clientY,\n            tracker: this,\n            originalEvent: event,\n            ...args\n        });\n    }\n\n    get element() {\n        return this.#element;\n    }\n\n    get clientX() {\n        return this.#pageX - window.pageXOffset;\n    }\n\n    get clientY() {\n        return this.#pageY - window.pageYOffset;\n    }\n\n    get isDisabled() {\n        return this.#isDisabled;\n    }\n\n    set isDisabled(value) {\n        if(!value) {\n\n        } else {\n\n        }\n    }\n\n    static DebugMouseTracker(zIndex=10000) {\n        let output = document.createElement('div');\n\n        let tracker = new PointerTracker(document.body);\n\n        tracker.on('pointer-move', event => {\n            output.innerHTML = `(${event.clientX}, ${event.clientY})`;\n        });\n\n        output.style.position = \"absolute\";\n        output.style.right = \"5px\";\n        output.style.top = \"5px\";\n        output.style.padding = \"5px\";\n        output.style.backgroundColor = \"#ffffff\";\n        output.style.border = \"1px solid #cccccc\";\n        output.style.zIndex = \"\"+zIndex;\n\n        return {element: output, tracker: tracker};\n    }\n}","import Publisher from \"../Publisher\";\nimport {addClasses, selectElement, clamp} from \"../utility\";\nimport PointerTracker from \"./PointerTracker\";\nimport Rect from \"../vectors/Rect\";\nimport {setElementClientPosition} from \"./position\";\n\n\nexport default class Resizeable extends Publisher {\n    #element;\n\n    #isResizing;\n    #isDisabled;\n    #container;\n    #axis;\n    #grid;\n    #keepAspectRatio;\n    #handles;\n    #helper;\n    #exclude;\n\n    minWidth;\n    maxWidth;\n    minHeight;\n    maxHeight;\n\n    #position;\n\n    #tracker;\n\n    constructor(element, {minWidth=null, maxWidth=null, minHeight=null, maxHeight=null, axis='xy', keepAspectRatio=false, container=null, grid=null, handles='.ui-resize-handle', helper=null, exclude='.no-resize', className='ui-resizeable', position=\"top-left\"}={}) {\n        super();\n\n        this.#element = selectElement(element);\n\n        this.minWidth = minWidth;\n        this.maxWidth = maxWidth;\n        this.minHeight = minHeight;\n        this.maxHeight = maxHeight;\n\n        this.#axis = axis;\n        this.#keepAspectRatio = keepAspectRatio;\n        this.#container = container ? selectElement(container) : null;\n        this.#grid = grid;\n        this.#handles = handles;\n        this.#exclude = exclude;\n        this.#helper = helper;\n        this.#position = position;\n\n        if(className) {\n            addClasses(this.#element, className);\n        }\n\n        this.#isResizing = false;\n        this.#isDisabled = false;\n\n        this.#tracker = new PointerTracker(this.#element, {capture: true, context: document, target: handles, exclude: exclude});\n\n        this.#initResizing();\n    }\n\n    #initResizing() {\n        let config,\n            startingRect;\n\n        this.#tracker.on('pointer-capture', event => {\n            config = this.#getHandleConfig(event.handle);\n            startingRect = new Rect(this.#element);\n        });\n\n        this.#tracker.on('pointer-move', event => {\n            let rect = new Rect(startingRect),\n                centerX = rect.left + (rect.width/2),\n                centerY = rect.top + (rect.height/2),\n                resize = config.resize;\n\n            let minWidth = this.minWidth || 0,\n                maxWidth = this.maxWidth || Infinity,\n                minHeight = this.minHeight || 0,\n                maxHeight = this.maxHeight || Infinity;\n\n            if(config.resize === 'bottom-right' || config.resize === 'top-right' || config.resize === 'right') {\n                rect.right = clamp(event.clientX, rect.left + minWidth, rect.left + maxWidth);\n            }\n            if(config.resize === 'bottom-right' || config.resize === 'bottom-left' || config.resize === 'bottom') {\n                rect.bottom = clamp(event.clientY, rect.top + minHeight, rect.top + maxHeight);\n            }\n            if(config.resize === 'bottom-left' || config.resize === 'top-left' || config.resize === 'left') {\n                rect.left = clamp(event.clientX, rect.right - maxWidth, rect.right - minWidth);\n            }\n            if(config.resize === 'top-left' || config.resize === 'top-right' || config.resize === 'top') {\n                rect.top = clamp(event.clientY, rect.bottom - maxHeight, rect.bottom - minHeight);\n            }\n            \n            setElementClientPosition(this.#element, rect, this.#position);\n            this.#element.style.width = `${rect.width}px`;\n            this.#element.style.height = `${rect.height}px`;\n        });\n\n        this.#tracker.on('pointer-release', event => {\n\n        });\n    }\n\n    #getHandleConfig(handle) {\n        let resize = handle.dataset.resize.trim().split(/\\s*;\\s*/);\n\n        return {\n            resize: resize[0],\n            scale: resize[1]\n        };\n    }\n\n    get position() {\n\n    }\n\n    set position(position) {\n\n    }\n\n    get width() {\n\n    }\n\n    set width(width) {\n\n    }\n\n    get height() {\n\n    }\n\n    set height(height) {\n\n    }\n}\n\n\n"],"sourceRoot":""}