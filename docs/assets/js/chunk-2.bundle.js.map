{"version":3,"sources":["webpack://pendora/./src/core/ui/PointerTracker.js","webpack://pendora/./src/core/ui/Resizeable.js"],"names":["PointerTracker","element","capture","context","target","exclude","selectElement","cancel","removeEventListener","isTracking","releasePointerCapture","Error","window","pageXOffset","pageYOffset","value","zIndex","output","document","createElement","tracker","body","on","event","innerHTML","clientX","clientY","style","position","right","top","padding","backgroundColor","border","Publisher","PointerEvent","targetElement","closest","excludedElement","pointerId","setPointerCapture","addEventListener","handle","name","args","publish","type","originalEvent","Resizeable","minWidth","maxWidth","minHeight","maxHeight","axis","keepAspectRatio","container","grid","handles","helper","className","addClasses","rect","width","height","setElementClientPosition","config","startingRect","finalRect","Rect","call","nodeType","buildHelperFromElement","topic","resizeable","onResizeStart","centerX","left","centerY","scaleX","scale","scaleY","ratio","pointer","Vec2","x","Math","floor","y","clamp","getBoundingClientRect","max","Infinity","resize","bottom","onResize","applyRect","onResizeComplete","dataset","trim","split","e","parentElement","appendChild","removeChild","cloneHelperFactory","opacity","r","cloneNode"],"mappings":"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","file":"chunk-2.bundle.js","sourcesContent":["import Publisher from \"../Publisher\";\nimport {selectElement} from \"../utility\";\nimport {closest} from \"../utility\";\n\n\n/**\n * A class that tracks mouse position oven an element or the document.\n * Will use PointerEvents if browser support is available, otherwise it will fall back to using mousedown, mouseover, and mousemove.\n */\nexport default class PointerTracker extends Publisher {\n    #element;\n    #pointerId;\n    #isDisabled;\n\n    #pageX;\n    #pageY;\n\n    #type;\n    #onPointerDown;\n    #onPointerMove;\n    #onPointerUp;\n    #isTracking;\n\n    #capture;\n    #context;\n    #target;\n    #exclude;\n\n    constructor(element, {capture=false, context=null, target=null, exclude=null}={}) {\n        super();\n\n        this.#element = selectElement(element);\n\n        this.#isTracking = false;\n        this.#isDisabled = false;\n\n        this.#capture = capture;\n        this.#context = context;\n        this.#target = target;\n        this.#exclude = exclude;\n\n        this.#init();\n    }\n\n    destroy() {\n        this.cancel();\n\n        if(this.#onPointerDown) {\n            this.#element.removeEventListener('pointerdown', this.#onPointerDown);\n        }\n\n        this.#onPointerDown = null;\n        this.#element = null;\n    }\n\n    cancel() {\n        if(this.#type === 'pointer') {\n            if(this.isTracking) {\n                if (this.#onPointerMove) {\n                    this.#element.removeEventListener('pointermove', this.#onPointerMove);\n                }\n\n                if(this.#onPointerUp) {\n                    this.#element.removeEventListener('pointerup', this.#onPointerUp);\n                }\n            }\n\n            if(this.#pointerId) {\n                this.#element.releasePointerCapture(this.#pointerId);\n            }\n\n            this.#isTracking = false;\n            this.#type = null;\n            this.#onPointerUp = null;\n            this.#onPointerMove = null;\n            this.#pointerId = null;\n        } else if(this.#type === 'mouse') {\n\n        } else {\n            throw new Error(\"Unknown pointer type.\");\n        }\n    }\n\n    get isTracking() {\n        return this.#isTracking;\n    }\n\n    #init() {\n        if(this.#type) return;\n\n        if(window.PointerEvent) {\n            this.#initPointerTracker();\n        } else {\n            this.#initMouseTracker();\n        }\n    }\n\n    #initPointerTracker() {\n        if(this.#type) return;\n        this.#type = \"pointer\";\n\n        this.#onPointerMove = event => {\n            if(!this.#isDisabled) {\n                this.#triggerPointerEvent('pointer-move', event);\n            }\n        };\n\n        if(this.#capture) {\n            this.#onPointerDown = event => {\n                if(this.isTracking) return;\n\n                let targetElement = this.#target ? closest(event.target, this.#target, this.#element) : null,\n                    excludedElement = this.#exclude ? closest(event.target, this.#exclude, this.#element) : null;\n\n                if((!this.#target || targetElement) && (!this.#exclude || !excludedElement)) {\n                    this.#isTracking = true;\n                    this.#pointerId = event.pointerId;\n\n                    this.#element.setPointerCapture(event.pointerId);\n                    this.#element.addEventListener('pointermove', this.#onPointerMove);\n                    this.#element.addEventListener('pointerup', this.#onPointerUp);\n\n                    this.#triggerPointerEvent('pointer-capture', event, {handle: targetElement});\n                }\n            };\n\n            this.#onPointerUp = event => {\n                this.#isTracking = false;\n                this.#element.releasePointerCapture(event.pointerId);\n                this.#pointerId = null;\n                this.#element.removeEventListener('pointerup', this.#onPointerUp);\n                this.#element.removeEventListener('pointermove', this.#onPointerMove);\n                this.#triggerPointerEvent('pointer-release', event);\n            };\n\n            this.#element.addEventListener('pointerdown', this.#onPointerDown);\n        } else {\n            this.#element.addEventListener('pointermove', this.#onPointerMove);\n        }\n    }\n\n    #initMouseTracker() {\n        this.#type = \"mouse\";\n    }\n\n    #triggerPointerEvent(name, event, args=null) {\n        this.#pageX = event.clientX + window.pageXOffset;\n        this.#pageY = event.clientY + window.pageYOffset;\n\n        if(!args) {\n            args = {};\n        }\n\n        this.publish(name, {\n            type: this.#type,\n            name: name,\n            target: event.target,\n            clientX: event.clientX,\n            clientY: event.clientY,\n            tracker: this,\n            originalEvent: event,\n            ...args\n        });\n    }\n\n    get element() {\n        return this.#element;\n    }\n\n    get clientX() {\n        return this.#pageX - window.pageXOffset;\n    }\n\n    get clientY() {\n        return this.#pageY - window.pageYOffset;\n    }\n\n    get isDisabled() {\n        return this.#isDisabled;\n    }\n\n    set isDisabled(value) {\n        if(!value) {\n\n        } else {\n\n        }\n    }\n\n    static DebugMouseTracker(zIndex=10000) {\n        let output = document.createElement('div');\n\n        let tracker = new PointerTracker(document.body);\n\n        tracker.on('pointer-move', event => {\n            output.innerHTML = `(${event.clientX}, ${event.clientY})`;\n        });\n\n        output.style.position = \"absolute\";\n        output.style.right = \"5px\";\n        output.style.top = \"5px\";\n        output.style.padding = \"5px\";\n        output.style.backgroundColor = \"#ffffff\";\n        output.style.border = \"1px solid #cccccc\";\n        output.style.zIndex = \"\"+zIndex;\n\n        return {element: output, tracker: tracker};\n    }\n}","import Publisher from \"../Publisher\";\nimport {addClasses, selectElement, clamp} from \"../utility\";\nimport PointerTracker from \"./PointerTracker\";\nimport Rect from \"../vectors/Rect\";\nimport Vec2 from \"../vectors/Vec2\";\nimport {setElementClientPosition} from \"./position\";\n\n\n/**\n * Creates a resizable component.\n *\n * Publisher Events\n *\n * resize-start\n * resize\n * resize-complete\n * resize-cancel\n */\nexport default class Resizeable extends Publisher {\n    #element;\n\n    #isResizing;\n    #isDisabled;\n    #container;\n    #axis;\n    #grid;\n    #keepAspectRatio;\n    #handles;\n    #helper;\n    #exclude;\n\n    minWidth;\n    maxWidth;\n    minHeight;\n    maxHeight;\n\n    #position;\n\n    #tracker;\n\n    constructor(element, {minWidth=null, maxWidth=null, minHeight=null, maxHeight=null, axis='xy', keepAspectRatio=false, container=null, grid=null, handles='.ui-resize-handle', helper=null, exclude='.no-resize', className='ui-resizeable', position=\"top-left\"}={}) {\n        super();\n\n        this.#element = selectElement(element);\n\n        this.minWidth = minWidth;\n        this.maxWidth = maxWidth;\n        this.minHeight = minHeight;\n        this.maxHeight = maxHeight;\n\n        this.#axis = axis;\n        this.#keepAspectRatio = keepAspectRatio;\n        this.#container = container ? selectElement(container) : null;\n        this.#grid = grid;\n        this.#handles = handles;\n        this.#exclude = exclude;\n        this.#helper = helper;\n        this.#position = position;\n\n        if(className) {\n            addClasses(this.#element, className);\n        }\n\n        this.#isResizing = false;\n        this.#isDisabled = false;\n\n        this.#tracker = new PointerTracker(this.#element, {capture: true, context: document, target: handles, exclude: exclude});\n\n        this.#initResizing();\n    }\n\n    #initResizing() {\n        let config,\n            startingRect,\n            target,\n            finalRect = null;\n\n        // todo pointer-cancel, resize-cancel\n\n        this.#tracker.on('pointer-capture', event => {\n            this.#isResizing = true;\n            config = this.#getHandleConfig(event.handle);\n            startingRect = new Rect(this.#element);\n            target = this.#element;\n\n            if(this.#helper) {\n                if(typeof this.#helper === 'function') {\n                    target = this.#helper.call(this, this.#element);\n                } else {\n                    target = this.#helper;\n                }\n\n                if(target.nodeType) {\n                    target = buildHelperFromElement(target, this.#element);\n                }\n            } else {\n                target = buildHelperFromElement(this.#element, this.#element);\n            }\n\n            let topic = {topic: \"resize-start\", resizeable: this, element: this.#element, position: this.#position, config, startingRect, event};\n\n            if(target.onResizeStart) {\n                target.onResizeStart({...topic});\n            }\n\n            this.publish('resize-start', {...topic})\n        });\n\n        this.#tracker.on('pointer-move', event => {\n            let rect = new Rect(startingRect),\n                centerX = rect.left + (rect.width/2),\n                centerY = rect.top + (rect.height/2),\n                scaleX = config.scale === 'scale-x' || config.scale === 'scale-xy',\n                scaleY = config.scale === 'scale-y' || config.scale === 'scale-xy',\n                ratio = rect.width / rect.height,\n                pointer = new Vec2(event.clientX, event.clientY);\n\n            if(this.#grid) {\n                pointer.x = Math.floor(pointer.x / this.#grid) * this.#grid;\n                pointer.y = Math.floor(pointer.y / this.#grid) * this.#grid;\n            }\n\n            if(this.#container) {\n                pointer = pointer.clamp(Rect.getBoundingClientRect(this.#container));\n            }\n\n            let minWidth = Math.max(0, this.minWidth || 0),\n                maxWidth = this.maxWidth || Infinity,\n                minHeight = Math.max(0, this.minHeight || 0),\n                maxHeight = this.maxHeight || Infinity,\n                width, height;\n\n            if(this.#axis === 'x' || this.#axis === 'xy') {\n                if(config.resize === 'bottom-left' || config.resize === 'top-left' || config.resize === 'left') {\n                    if(scaleX) {\n                        width = clamp(2*(centerX - pointer.x), minWidth, maxWidth);\n                        rect.left = centerX - (width/2);\n                        rect.right = centerX + (width/2);\n                    } else {\n                        width = clamp(rect.right - pointer.x, minWidth, maxWidth);\n                        rect.left = rect.right - width;\n                    }\n                } else if(config.resize === 'bottom-right' || config.resize === 'top-right' || config.resize === 'right') {\n                    if(scaleX) {\n                        width = clamp(2*(pointer.x - centerX), minWidth, maxWidth);\n                        rect.left = centerX - (width/2);\n                        rect.right = centerX + (width/2);\n                    } else {\n                        width = clamp(pointer.x - rect.left, minWidth, maxWidth);\n                        rect.right = rect.left + width;\n                    }\n                }\n            }\n\n            if(this.#axis === 'y' || this.#axis === 'xy') {\n                if(config.resize === 'bottom-right' || config.resize === 'bottom-left' || config.resize === 'bottom') {\n                    if(scaleY) {\n                        height = clamp(2*(pointer.y - centerY), minHeight, maxHeight);\n                        rect.bottom = centerY + (height / 2);\n                        rect.top = centerY - (height / 2);\n                    } else {\n                        height = clamp(pointer.y - rect.top, minHeight, maxHeight);\n                        rect.bottom = rect.top + height;\n                    }\n                } else if(config.resize === 'top-left' || config.resize === 'top-right' || config.resize === 'top') {\n                    if(scaleY) {\n                        height = clamp(2*(centerY - pointer.y), minHeight, maxHeight);\n                        rect.bottom = centerY + (height / 2);\n                        rect.top = centerY - (height / 2);\n                    } else {\n                        height = clamp(rect.bottom - pointer.y, minHeight, maxHeight);\n                        rect.top = rect.bottom - height;\n                    }\n                }\n            }\n\n            if(this.#keepAspectRatio) {\n                if(this.#axis === 'x' || this.#axis === 'xy') {\n                    rect.bottom = rect.top + (rect.width / ratio);\n                } else {\n                    rect.right = rect.left + (rect.height * ratio);\n                }\n            }\n\n            finalRect = rect;\n\n            let topic = {topic: \"resize\", rect, resizeable: this, position: this.#position, element: this.#element, event: event, config, startingRect};\n\n            if(target && target.onResize) {\n                target.onResize({...topic});\n            }\n\n            this.publish(topic.topic, {...topic});\n        });\n\n        this.#tracker.on('pointer-release', event => {\n            this.#isResizing = false;\n\n            if(this.#position) {\n                this.applyRect(this.#element, finalRect);\n            }\n\n            this.#element.style.width = `${finalRect.width}px`;\n            this.#element.style.height = `${finalRect.height}px`;\n\n            let topic = {topic: \"resize-complete\", finalRect, resizeable: this, element: this.#element, position: this.#position, event, config, startingRect, rect: finalRect};\n\n            if(target && target.onResizeComplete) {\n                target.onResizeComplete({...topic});\n            }\n\n            this.publish(topic.topic, {...topic});\n        });\n    }\n\n    applyRect(element, rect) {\n        if(this.#position === 'width-height') {\n            element.style.width = rect.width + \"px\";\n            element.style.height = rect.height + \"px\";\n        } else if(this.#position === \"width\") {\n            element.style.width = rect.width + \"px\";\n        } else if(this.#position === \"height\") {\n            element.style.height = rect.height + \"px\";\n        } else {\n            setElementClientPosition(element, rect, this.#position);\n        }\n    }\n\n    /**\n     * Returns the resize config object from the given handle element.\n     * To specify options for resizing the handle should have a [data-resize] property in the format:\n     * <resize>; <scale>\n     *\n     * resize: Specifies the direction to resize in.  Can be top, right, bottom, left, top-left, top-right, bottom-left, bottom-right.\n     * scale: If specified it tells the instance to scale that object in the given axis.  Can be either none, scale-x, scale-y, scale-xy.  Defaults to none.\n     * @param handle\n     * @returns {{resize: string, scale: string}}\n     */\n    #getHandleConfig(handle) {\n        let resize = handle.dataset.resize.trim().split(/\\s*;\\s*/);\n\n        return {\n            resize: resize[0],\n            scale: resize[1] || \"none\"\n        };\n    }\n\n    get position() {\n        return this.#position;\n    }\n}\n\n\nfunction buildHelperFromElement(helper, element) {\n    return {\n        helper,\n        element,\n\n        onResizeStart(e) {\n            if(helper !== element && !helper.parentElement) {\n                element.parentElement.appendChild(helper);\n            }\n        },\n\n        onResize(e) {\n            if(e.position) {\n                e.resizeable.applyRect(helper, e.rect);\n            }\n\n            helper.style.width = `${e.rect.width}px`;\n            helper.style.height = `${e.rect.height}px`;\n        },\n\n        onResizeComplete(e) {\n            if(helper !== element && helper.parentElement) {\n                helper.parentElement.removeChild(helper);\n            }\n        }\n    }\n}\n\n\nexport function cloneHelperFactory(zIndex, opacity) {\n    return function(element) {\n        let r = element.cloneNode(true);\n        r.style.zIndex = zIndex;\n        r.style.opacity = opacity;\n        return r;\n    }\n}"],"sourceRoot":""}