{"version":3,"sources":["webpack://pendora/./docs/js/pages/documentation/test_resizeable.js","webpack://pendora/./src/core/ui/PointerTracker.js","webpack://pendora/./src/core/ui/Resizeable.js"],"names":["window","Rect","getBoundingOffsetRect","TestResizeablePage","loadDraggables","debugTracker","PointerTracker","DebugMouseTracker","document","body","appendChild","element","resizeable1","Resizeable","elements","querySelectorAll","d","container","closest","Draggable","capture","context","target","exclude","selectElement","cancel","removeEventListener","isTracking","releasePointerCapture","Error","pageXOffset","pageYOffset","value","zIndex","output","createElement","tracker","on","event","innerHTML","clientX","clientY","style","position","right","top","padding","backgroundColor","border","Publisher","PointerEvent","targetElement","excludedElement","pointerId","setPointerCapture","addEventListener","handle","name","args","publish","type","originalEvent","minWidth","maxWidth","minHeight","maxHeight","axis","keepAspectRatio","grid","handles","helper","className","addClasses","width","height","config","rect","centerX","left","centerY","resize","Infinity","clamp","bottom","setElementClientPosition","c","console","log","dataset","trim","split","scale"],"mappings":"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","file":"chunk-2.bundle.js","sourcesContent":["import Resizeable from \"core/ui/Resizeable\";\r\nimport Draggable from \"core/ui/Draggable\";\r\nimport PointerTracker from \"../../../../src/core/ui/PointerTracker\";\r\nimport Rect from \"../../../../src/core/vectors/Rect\";\r\nimport {getBoundingOffsetRect} from \"../../../../src/core/ui/position\";\r\n\r\n\r\nwindow.Rect = Rect;\r\nwindow.getBoundingOffsetRect = getBoundingOffsetRect;\r\n\r\n\r\nexport default class TestResizeablePage {\r\n    load() {\r\n        this.loadDraggables();\r\n\r\n        let debugTracker = PointerTracker.DebugMouseTracker();\r\n        document.body.appendChild(debugTracker.element);\r\n\r\n        this.resizeable1 = new Resizeable('#resizeable1');\r\n    }\r\n\r\n    loadDraggables() {\r\n        let elements = document.querySelectorAll('.draggable');\r\n\r\n        for(let d of elements) {\r\n            let container = d.closest('.example-zone') || null;\r\n            new Draggable(d, {container});\r\n        }\r\n    }\r\n}","import Publisher from \"../Publisher\";\r\nimport {selectElement} from \"../utility\";\r\nimport {closest} from \"../utility\";\r\n\r\n\r\n/**\r\n * A class that tracks mouse position oven an element or the document.\r\n * Will use PointerEvents if browser support is available, otherwise it will fall back to using mousedown, mouseover, and mousemove.\r\n */\r\nexport default class PointerTracker extends Publisher {\r\n    #element;\r\n    #pointerId;\r\n    #isDisabled;\r\n\r\n    #pageX;\r\n    #pageY;\r\n\r\n    #type;\r\n    #onPointerDown;\r\n    #onPointerMove;\r\n    #onPointerUp;\r\n    #isTracking;\r\n\r\n    #capture;\r\n    #context;\r\n    #target;\r\n    #exclude;\r\n\r\n    constructor(element, {capture=false, context=null, target=null, exclude=null}={}) {\r\n        super();\r\n\r\n        this.#element = selectElement(element);\r\n\r\n        this.#isTracking = false;\r\n        this.#isDisabled = false;\r\n\r\n        this.#capture = capture;\r\n        this.#context = context;\r\n        this.#target = target;\r\n        this.#exclude = exclude;\r\n\r\n        this.#init();\r\n    }\r\n\r\n    destroy() {\r\n        this.cancel();\r\n\r\n        if(this.#onPointerDown) {\r\n            this.#element.removeEventListener('pointerdown', this.#onPointerDown);\r\n        }\r\n\r\n        this.#onPointerDown = null;\r\n        this.#element = null;\r\n    }\r\n\r\n    cancel() {\r\n        if(this.#type === 'pointer') {\r\n            if(this.isTracking) {\r\n                if (this.#onPointerMove) {\r\n                    this.#element.removeEventListener('pointermove', this.#onPointerMove);\r\n                }\r\n\r\n                if(this.#onPointerUp) {\r\n                    this.#element.removeEventListener('pointerup', this.#onPointerUp);\r\n                }\r\n            }\r\n\r\n            if(this.#pointerId) {\r\n                this.#element.releasePointerCapture(this.#pointerId);\r\n            }\r\n\r\n            this.#isTracking = false;\r\n            this.#type = null;\r\n            this.#onPointerUp = null;\r\n            this.#onPointerMove = null;\r\n            this.#pointerId = null;\r\n        } else if(this.#type === 'mouse') {\r\n\r\n        } else {\r\n            throw new Error(\"Unknown pointer type.\");\r\n        }\r\n    }\r\n\r\n    get isTracking() {\r\n        return this.#isTracking;\r\n    }\r\n\r\n    #init() {\r\n        if(this.#type) return;\r\n\r\n        if(window.PointerEvent) {\r\n            this.#initPointerTracker();\r\n        } else {\r\n            this.#initMouseTracker();\r\n        }\r\n    }\r\n\r\n    #initPointerTracker() {\r\n        if(this.#type) return;\r\n        this.#type = \"pointer\";\r\n\r\n        this.#onPointerMove = event => {\r\n            if(!this.#isDisabled) {\r\n                this.#triggerPointerEvent('pointer-move', event);\r\n            }\r\n        };\r\n\r\n        if(this.#capture) {\r\n            this.#onPointerDown = event => {\r\n                if(this.isTracking) return;\r\n\r\n                let targetElement = this.#target ? closest(event.target, this.#target, this.#element) : null,\r\n                    excludedElement = this.#exclude ? closest(event.target, this.#exclude, this.#element) : null;\r\n\r\n                if((!this.#target || targetElement) && (!this.#exclude || !excludedElement)) {\r\n                    this.#isTracking = true;\r\n                    this.#pointerId = event.pointerId;\r\n\r\n                    this.#element.setPointerCapture(event.pointerId);\r\n                    this.#element.addEventListener('pointermove', this.#onPointerMove);\r\n                    this.#element.addEventListener('pointerup', this.#onPointerUp);\r\n\r\n                    this.#triggerPointerEvent('pointer-capture', event, {handle: targetElement});\r\n                }\r\n            };\r\n\r\n            this.#onPointerUp = event => {\r\n                this.#isTracking = false;\r\n                this.#element.releasePointerCapture(event.pointerId);\r\n                this.#pointerId = null;\r\n                this.#element.removeEventListener('pointerup', this.#onPointerUp);\r\n                this.#element.removeEventListener('pointermove', this.#onPointerMove);\r\n                this.#triggerPointerEvent('pointer-release', event);\r\n            };\r\n\r\n            this.#element.addEventListener('pointerdown', this.#onPointerDown);\r\n        } else {\r\n            this.#element.addEventListener('pointermove', this.#onPointerMove);\r\n        }\r\n    }\r\n\r\n    #initMouseTracker() {\r\n        this.#type = \"mouse\";\r\n    }\r\n\r\n    #triggerPointerEvent(name, event, args=null) {\r\n        this.#pageX = event.clientX + window.pageXOffset;\r\n        this.#pageY = event.clientY + window.pageYOffset;\r\n\r\n        if(!args) {\r\n            args = {};\r\n        }\r\n\r\n        this.publish(name, {\r\n            type: this.#type,\r\n            name: name,\r\n            target: event.target,\r\n            clientX: event.clientX,\r\n            clientY: event.clientY,\r\n            tracker: this,\r\n            originalEvent: event,\r\n            ...args\r\n        });\r\n    }\r\n\r\n    get element() {\r\n        return this.#element;\r\n    }\r\n\r\n    get clientX() {\r\n        return this.#pageX - window.pageXOffset;\r\n    }\r\n\r\n    get clientY() {\r\n        return this.#pageY - window.pageYOffset;\r\n    }\r\n\r\n    get isDisabled() {\r\n        return this.#isDisabled;\r\n    }\r\n\r\n    set isDisabled(value) {\r\n        if(!value) {\r\n\r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n    static DebugMouseTracker(zIndex=10000) {\r\n        let output = document.createElement('div');\r\n\r\n        let tracker = new PointerTracker(document.body);\r\n\r\n        tracker.on('pointer-move', event => {\r\n            output.innerHTML = `(${event.clientX}, ${event.clientY})`;\r\n        });\r\n\r\n        output.style.position = \"absolute\";\r\n        output.style.right = \"5px\";\r\n        output.style.top = \"5px\";\r\n        output.style.padding = \"5px\";\r\n        output.style.backgroundColor = \"#ffffff\";\r\n        output.style.border = \"1px solid #cccccc\";\r\n        output.style.zIndex = \"\"+zIndex;\r\n\r\n        return {element: output, tracker: tracker};\r\n    }\r\n}","import Publisher from \"../Publisher\";\r\nimport {addClasses, selectElement, clamp} from \"../utility\";\r\nimport PointerTracker from \"./PointerTracker\";\r\nimport Rect from \"../vectors/Rect\";\r\nimport {setElementClientPosition} from \"./position\";\r\n\r\n\r\nexport default class Resizeable extends Publisher {\r\n    #element;\r\n\r\n    #isResizing;\r\n    #isDisabled;\r\n    #container;\r\n    #axis;\r\n    #grid;\r\n    #keepAspectRatio;\r\n    #handles;\r\n    #helper;\r\n    #exclude;\r\n\r\n    minWidth;\r\n    maxWidth;\r\n    minHeight;\r\n    maxHeight;\r\n\r\n    #position;\r\n\r\n    #tracker;\r\n\r\n    constructor(element, {minWidth=null, maxWidth=null, minHeight=null, maxHeight=null, axis='xy', keepAspectRatio=false, container=null, grid=null, handles='.ui-resize-handle', helper=null, exclude='.no-resize', className='ui-resizeable', position=\"top-left\"}={}) {\r\n        super();\r\n\r\n        this.#element = selectElement(element);\r\n\r\n        this.minWidth = minWidth;\r\n        this.maxWidth = maxWidth;\r\n        this.minHeight = minHeight;\r\n        this.maxHeight = maxHeight;\r\n\r\n        this.#axis = axis;\r\n        this.#keepAspectRatio = keepAspectRatio;\r\n        this.#container = container ? selectElement(container) : null;\r\n        this.#grid = grid;\r\n        this.#handles = handles;\r\n        this.#exclude = exclude;\r\n        this.#helper = helper;\r\n        this.#position = position;\r\n\r\n        if(className) {\r\n            addClasses(this.#element, className);\r\n        }\r\n\r\n        this.#isResizing = false;\r\n        this.#isDisabled = false;\r\n\r\n        this.#tracker = new PointerTracker(this.#element, {capture: true, context: document, target: handles, exclude: exclude});\r\n\r\n        this.#initResizing();\r\n    }\r\n\r\n    #initResizing() {\r\n        let config;\r\n\r\n        this.#tracker.on('pointer-capture', event => {\r\n            config = this.#getHandleConfig(event.handle);\r\n        });\r\n\r\n        this.#tracker.on('pointer-move', event => {\r\n            let rect = new Rect(this.#element),\r\n                centerX = rect.left + (rect.width/2),\r\n                centerY = rect.top + (rect.height/2),\r\n                resize = config.resize;\r\n\r\n            let minWidth = this.minWidth || 0,\r\n                maxWidth = this.maxWidth || Infinity,\r\n                minHeight = this.minHeight || 0,\r\n                maxHeight = this.maxHeight || Infinity;\r\n\r\n            // if(config.resize === 'bottom-right' || config.resize === 'top-right' || config.resize === 'right') {\r\n            //     rect.right = clamp(event.clientX, rect.left + minWidth, rect.left + maxWidth);\r\n            // }\r\n            // if(config.resize === 'bottom-right' || config.resize === 'bottom-left' || config.resize === 'bottom') {\r\n            //     rect.bottom = clamp(event.clientY, rect.top + minHeight, rect.top + maxHeight);\r\n            // }\r\n            // if(config.resize === 'bottom-left' || config.resize === 'top-left' || config.resize === 'left') {\r\n            //     rect.left = clamp(event.clientX, rect.right - maxWidth, rect.right - minWidth);\r\n            // }\r\n            if(config.resize === 'top-left' || config.resize === 'top-right' || config.resize === 'top') {\r\n                rect.top = clamp(event.clientY, rect.bottom - maxHeight, rect.bottom - minHeight);\r\n            }\r\n            setElementClientPosition(this.#element, rect, this.#position);\r\n            this.#element.style.width = `${rect.width}px`;\r\n            this.#element.style.height = `${rect.height}px`;\r\n\r\n            let c = new Rect(this.#element);\r\n\r\n            if(rect.top !== c.top || rect.height !== c.height) {\r\n                console.log(this.#position);\r\n                console.log(rect.top, '==', c.top);\r\n                console.log(rect.height, '==', c.height);\r\n                console.log(\"\\n\\n\");\r\n            }\r\n        });\r\n\r\n        this.#tracker.on('pointer-release', event => {\r\n\r\n        });\r\n    }\r\n\r\n    #getHandleConfig(handle) {\r\n        let resize = handle.dataset.resize.trim().split(/\\s*;\\s*/);\r\n\r\n        return {\r\n            resize: resize[0],\r\n            scale: resize[1]\r\n        };\r\n    }\r\n\r\n    get position() {\r\n\r\n    }\r\n\r\n    set position(position) {\r\n\r\n    }\r\n\r\n    get width() {\r\n\r\n    }\r\n\r\n    set width(width) {\r\n\r\n    }\r\n\r\n    get height() {\r\n\r\n    }\r\n\r\n    set height(height) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"],"sourceRoot":""}