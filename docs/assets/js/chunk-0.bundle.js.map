{"version":3,"sources":["webpack://pendora/./src/core/fx/Animation.js","webpack://pendora/./src/core/fx/FX.js","webpack://pendora/./src/core/fx/easing.js","webpack://pendora/./src/core/fx/frame.js","webpack://pendora/./src/core/fx/types.js"],"names":["Animation","duration","frames","applyFrame","defaultApplyFrame","bubbleFrameEvent","finishFrame","element","easing","onStart","onFrame","onPause","onCancel","onEnd","onComplete","FX","animation","fx","EASING","linear","position","autoPlay","init","call","destroy","play","animate","complete","config","defaults","_options","Object","assign","canceled","paused","pending","error","playing","regNumberWithUnit","regColor","regFunction","TYPE_FUNCTIONS","hex","RGBA","parseHexColorStringArg","rgb","parseRGBAColorStringArgs","rgba","DeadFXError","ExtendableError","assertFXAlive","status","doPromiseAction","onAction","value","resolveOrReject","_prepareValue","trim","m","exec","NumberWithUnit","parseFloat","_getFrames","r","keyframeIndex","hasOwnProperty","frame","property","Symbol","toStringTag","selectElement","undefined","key","pos","freeze","push","properties","sort","a","b","startPosition","startValue","endPosition","endValue","getFrameFX","options","p","delta","subtract","add","scalar","tick","performance","now","frameFN","timestamp","dispatchEvent","CustomEvent","bubbles","detail","window","requestAnimationFrame","_complete","cancelAnimationFrame","_triggerEndEvent","completeAnimation","_cancel","getFrame","onResolve","state","onReject","Promise","resolve","reject","onFinally","then","slice","style","toString","unit","TypeError","Error"],"mappings":"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","file":"chunk-0.bundle.js","sourcesContent":["import {EASING} from \"./easing\";\nimport FX from \"./FX\";\nimport {defaultApplyFrame} from \"./frame\";\n\n\nexport default class Animation {\n    static defaultApplyFrame = defaultApplyFrame;\n\n    static complete = FX.complete;\n    static canceled = FX.canceled;\n    static paused = FX.paused;\n    static pending = FX.pending;\n    static error = FX.error;\n    static playing = FX.playing;\n\n    /**\n     *\n     * @param duration\n     * @param frames {{}|function(Element element, Animation animation):{}}\n     * @param applyFrame - The function that takes a frame and applies it to the element.\n     * @param bubbleFrameEvent\n     * @param finishFrame\n     */\n    constructor({duration=null, frames, applyFrame = defaultApplyFrame, bubbleFrameEvent = false, finishFrame = null}) {\n        this.frames = frames;\n        this.applyFrame = applyFrame || Animation.defaultApplyFrame;\n        this.bubbleFrameEvent = bubbleFrameEvent;\n        this.finishFrame = finishFrame;\n        this.duration = duration;\n    }\n\n    /**\n     * Creates an fx object.\n     *\n     * @param element\n     * @param frames\n     * @param duration\n     * @param applyFrame\n     * @param easing\n     * @param onStart\n     * @param onFrame\n     * @param onPause\n     * @param onCancel\n     * @param onEnd\n     * @param onComplete\n     * @param bubbleFrameEvent\n     * @param finishFrame\n     * @returns {FX}\n     */\n    init({element, frames, duration, applyFrame, easing, onStart, onFrame, onPause, onCancel, onEnd, onComplete, bubbleFrameEvent, finishFrame}) {\n        return new FX(element, frames, duration, {\n            applyFrame,\n            easing,\n            animation: this,\n            onStart,\n            onFrame,\n            onPause,\n            onCancel,\n            onEnd,\n            onComplete,\n            bubbleFrameEvent,\n            finishFrame,\n        });\n    }\n\n    /**\n     * Ran after the fx completes.\n     * @param fx\n     */\n    destroy(fx) {\n\n    }\n\n    /**\n     * Animates the given element.  Returns the FX object that can be used to control the animation.\n     *\n     * @param element {HTMLElement|Element} The element to animate.\n     * @param duration {Number} The duration of the animation in milliseconds.\n     * @param easing {function(Number)} An easing function that controls the rate of change for the animation.  If null linear animation is used.\n     * @param onStart {function(FX)} A callback function that is called right before the animation starts playing.\n     * @param onFrame {function(FX, frame)} A callback that is called per frame.\n     * @param onPause {function(FX)} A callback that is called when the FX pauses.\n     * @param onCancel {function(FX)} A callback that is called when the FX cancels.\n     * @param onEnd {function(FX)} A callback that is called when the animation ends.  Whether by completing, pausing, or canceling.  See Fx.status to determine what happened.\n     * @param onComplete {function(FX)} A callback that is called when the animation complete successfully.\n     * @param position\n     * @param autoPlay\n     * @returns {FX}\n     */\n    animate(element, {duration=null, easing = EASING.linear, onStart = null, onFrame = null, onPause = null, onCancel = null, onEnd = null, onComplete = null, position=0, autoPlay=true} = {}) {\n        if(duration === null) {\n            duration = this.duration;\n        }\n\n        let fx = this.init({\n            element: element,\n            frames: this.frames,\n            duration,\n            applyFrame: this.applyFrame,\n            easing,\n            animation: this,\n            onStart,\n            onFrame,\n            onPause,\n            onCancel,\n            onEnd: (fx) => {\n                if(onEnd) onEnd.call(fx, fx);\n                this.destroy(fx);\n            },\n            onComplete,\n            bubbleFrameEvent: this.bubbleFrameEvent,\n            finishFrame: this.finishFrame\n        });\n\n        if(position) {\n            fx.goto(position);\n        }\n\n        if(autoPlay) {\n            fx.play();\n        }\n        return fx;\n    }\n\n    goto(element, position) {\n        this.animate(element, {autoPlay: false, position: position});\n        return Animation.complete;\n    }\n\n    /**\n     * Creates a function that calls the animate method with the bound parameters.\n     * Parameters can be overridden in the created function when called.\n     * Method has the same signature as the animate method.\n     *\n     * Usage:\n     * let animation = new Animation(...),\n     *     fx = animation.bind(null, 2000);\n     *\n     * fx(element) // Animation the element over 2000 milliseconds.\n     *\n     * @param element\n     * @param config\n     * @returns {function(HTMLElement element, Number duration, Object config): FX}\n     */\n    bind(element = null, config = null) {\n        let defaults = {\n            element,\n            config\n        };\n\n        return (element = defaults, config=null) => {\n            element = element === defaults ? element.defaults : element;\n\n            let _options = {};\n            if (defaults.config) Object.assign(_options, defaults.config);\n            if (config) Object.assign(_options, config);\n\n            return this.animate(element, _options);\n        };\n    }\n}\n","import {ExtendableError} from \"../errors\";\nimport {selectElement} from \"../utility\";\nimport {RGBA} from \"../vectors\";\nimport {NumberWithUnit} from \"./types\";\nimport {EASING} from \"./easing\";\nimport {defaultApplyFrame} from \"./frame\";\n\n\nconst regNumberWithUnit = /^(\\d+\\.?\\d*)([a-z]+|%)$/i,\n    regColor = /^(?:#([a-f0-9]{3})|#([a-f0-9]{6})|#([a-f0-9]{8}))$/i,\n    regFunction = /^([a-z_][a-z_0-9]*)\\((.+?)\\)$/i;\n\n\nconst TYPE_FUNCTIONS = {\n    hex: RGBA.parseHexColorStringArg,\n    rgb: RGBA.parseRGBAColorStringArgs,\n    rgba: RGBA.parseRGBAColorStringArgs\n};\n\n\nexport class DeadFXError extends ExtendableError {}\n\n\nfunction assertFXAlive(fx) {\n    if (fx.status === FX.complete || fx.status === FX.error || fx.status === FX.complete) {\n        throw new DeadFXError(\"FX object is dead.\");\n    }\n}\n\n\nfunction doPromiseAction(onAction, value, resolveOrReject) {\n    if (typeof onAction === 'function') {\n        value = onAction(value);\n    }\n\n    resolveOrReject(value);\n}\n\n\nfunction _prepareValue(value) {\n    if (typeof value === 'string') {\n        value = value.trim();\n\n        let m = regNumberWithUnit.exec(value);\n\n        if (m) {\n            return new NumberWithUnit(parseFloat(m[1]), m[2]);\n        }\n\n        m = regColor.exec(value);\n\n        if (m) {\n            return TYPE_FUNCTIONS.hex(m[0]);\n        }\n\n        m = regFunction.exec(value);\n\n        if (m) {\n            return TYPE_FUNCTIONS[m[1]](m[2]);\n        }\n    }\n\n    return value;\n}\n\n\nfunction _getFrames(fx, element, frames) {\n    let r = {};\n\n    if (typeof frames === 'function') {\n        frames = frames.call(fx, element, fx);\n    }\n\n    for (let keyframeIndex in frames) {\n        if (!frames.hasOwnProperty(keyframeIndex)) continue;\n\n        let frame = frames[keyframeIndex];\n        r[keyframeIndex] = {};\n\n        for (let property in frame) {\n            if (!frame.hasOwnProperty(property)) continue;\n            r[keyframeIndex][property] = _prepareValue(frame[property]);\n        }\n    }\n\n    return r;\n}\n\n\n/**\n * @implements Promise\n */\nexport default class FX {\n    static pending = \"Pending\";\n    static complete = \"Complete\";\n    static error = \"Error\";\n    static paused = \"Paused\";\n    static canceled = \"Canceled\";\n    static playing = \"Playing\";\n\n    #element;\n    #chained;\n    #frames;\n    #internalValue;\n\n    #animation;\n\n    #frameId;\n    #status;\n    #position;\n\n    #finishFrame;\n    #applyFrame;\n    #easing;\n    #duration;\n\n    [Symbol.toStringTag] = \"[Object FX]\";\n\n    constructor(element, frames, duration, {applyFrame = defaultApplyFrame, animation = null, easing = EASING.linear, onComplete = null, onCancel = null, onFrame = null, onStart = null, onEnd = null, bubbleFrameEvent = false, finishFrame = null, init = null} = {}) {\n        this.#frames = [];\n        this.#chained = [];\n        this.#element = selectElement(element);\n        this.#internalValue = undefined;\n\n        this.onComplete = onComplete;\n        this.onCancel = onCancel;\n        this.onFrame = onFrame;\n        this.onStart = onStart;\n        this.onEnd = onEnd;\n        this.bubbleFrameEvent = bubbleFrameEvent;\n\n        this.#animation = animation;\n        this.#finishFrame = finishFrame;\n        this.#applyFrame = applyFrame;\n        this.#easing = easing;\n        this.#frameId = null;\n        this.#status = FX.pending;\n\n        this.#duration = duration;\n        this.#position = 0;\n\n        if (init) {\n            init.call(this, this);\n        }\n\n        // Prepare frames\n        frames = _getFrames(this, this.#element, frames);\n\n        for (let key in frames) {\n            if (frames.hasOwnProperty(key)) {\n                let frame = frames[key],\n                    pos = parseFloat(key) / 100;\n\n                if (typeof frame === 'function') {\n                    frame = frame.call(this, this.#element);\n                }\n\n                frame = Object.freeze(Object.assign({}, frame));\n\n                this.#frames.push(Object.freeze({\n                    position: pos,\n                    properties: frame\n                }));\n            }\n        }\n\n        this.#frames.sort((a, b) => a.position - b.pos);\n    }\n\n    get animation() {\n        return this.#animation;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get easing() {\n        return this.#easing;\n    }\n\n    get status() {\n        return this.#status;\n    }\n\n    get position() {\n        return this.#position;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get duration() {\n        return this.#duration;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get frames() {\n        return this.#frames.slice();\n    }\n\n    get element() {\n        return this.#element;\n    }\n\n    // set position(value) {\n    //     if (typeof value === 'string') {\n    //         value = (parseFloat(value) / 100) * this.#duration;\n    //     }\n    //\n    //     this.#position = Math.max(0.0, Math.min(this.#duration, value));\n    // }\n\n    get state() {\n        if (this.status === FX.complete || this.status === FX.canceled) {\n            return \"Fulfilled\";\n        } else if (this.status === FX.error) {\n            return \"Rejected\";\n        } else {\n            return \"Pending\";\n        }\n    }\n\n    /**\n     * Returns the frame options at the given position.\n     * @param position\n     */\n    getFrameFX(position) {\n        // position can either be a percentage string (aka 50%) or the time in milliseconds into the animation\n        // which will be converted into a percentage.\n        if (typeof position === 'string') {\n            position = parseFloat(position) / 100;\n        }\n\n        // At this point position should be a value between 0.0 and 1.0.\n        // Easing functions specify that rate of change in the properties.\n        // It takes the position and maps it to another value between 0.0f and 1.0f.\n        // By default linear easing is used.\n        if (this.#easing) {\n            position = this.#easing(position);\n        }\n\n        let r = {};\n\n        for (let frame of this.#frames) {\n            for (let key in frame.properties) {\n                if (frame.properties.hasOwnProperty(key)) {\n                    let value = frame.properties[key];\n\n                    if (!r[key]) {\n                        r[key] = {startPosition: null, startValue: null, endPosition: null, endValue: null};\n                    }\n\n                    if (frame.position <= position) {\n                        r[key].startPosition = frame.position;\n                        r[key].startValue = value;\n                    } else if (frame.position > position && r[key].endPosition === null) {\n                        r[key].endPosition = frame.position;\n                        r[key].endValue = value;\n                    }\n                }\n            }\n        }\n\n        return r;\n    }\n\n    /**\n     * Returns the final frame at the given position.  All options at this point should be parsed and there final values\n     * should be available.\n     *\n     * @param position\n     */\n    getFrame(position) {\n        let frame = this.getFrameFX(position),\n            r = {};\n\n        if (typeof position === 'string') {\n            position = parseFloat(position) / 100;\n        }\n\n        // Takes the frame config options and calculates the final values.\n        for (let property in frame) {\n            if (frame.hasOwnProperty(property)) {\n                let options = frame[property];\n\n                if ((options.endPosition === null || options.endPosition <= position) && options.startValue !== null) {\n                    r[property] = options.startValue;\n                } else if (options.startValue !== null) {\n                    if (typeof options.startValue === 'object') {\n                        let p = (position - options.startPosition) / (options.endPosition - options.startPosition),\n                            delta = options.endValue.subtract(options.startValue);\n\n                        r[property] = options.startValue.add(delta.scalar(p));\n                    } else if (typeof options.startValue === 'number') {\n                        let duration = (options.endPosition - options.startPosition),\n                            p = (position - options.startPosition) / duration,\n                            delta = options.endValue - options.startValue;\n\n                        r[property] = options.startValue + (delta * p);\n                    } else {\n                        r[property] = options.startValue;\n                    }\n                }\n            }\n        }\n\n        // User provided hook that can perform the final touch ups on the frame.\n        if (this.#finishFrame) {\n            r = this.#finishFrame(this, frame);\n        }\n\n        return r;\n    }\n\n    play() {\n        assertFXAlive(this);\n\n        if (this.#frameId === null) {\n            this.goto(this.#position);\n\n            let tick = performance.now();\n\n            let frameFN = () => {\n                let timestamp = performance.now(),\n                    delta = timestamp - tick,\n                    position = this.#position + (delta / this.duration);\n\n                tick = timestamp;\n                let frame = this.goto(position);\n                this.#status = FX.playing;\n\n                if (this.onFrame) this.onFrame.call(this, this, frame);\n\n                this.#element.dispatchEvent(new CustomEvent('animation.frame', {\n                    bubbles: this.bubbleFrameEvent,\n                    detail: this\n                }));\n\n                if (this.#position < 1) {\n                    this.#frameId = window.requestAnimationFrame(frameFN);\n                } else {\n                    this._complete(FX.complete, FX.complete);\n                    this.#frameId = null;\n                }\n            };\n\n            if (this.onStart) {\n                this.onStart.call(this, this);\n            }\n\n            this.#element.dispatchEvent(new CustomEvent('animation.start', {\n                bubbles: true,\n                detail: this\n            }));\n\n            this.#frameId = window.requestAnimationFrame(frameFN);\n        }\n\n        return this;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Pauses the animation.  Does not resolve it.\n     * @returns {FX}\n     */\n    pause() {\n        if (this.#frameId) {\n            window.cancelAnimationFrame(this.#frameId);\n            this.#frameId = null;\n            this.#status = FX.paused;\n\n            this.#element.dispatchEvent(new CustomEvent('animation.paused', {\n                bubbles: true,\n                detail: this\n            }));\n        }\n\n        return this;\n    }\n\n    _cancel(complete = false, status = FX.canceled) {\n        if (this.#frameId) {\n            window.cancelAnimationFrame(this.#frameId);\n            this.#frameId = null;\n\n            if (complete) {\n                this.goto(1);\n                this._complete(status, status);\n            } else {\n                this.#status = status;\n                this.#internalValue = status;\n            }\n\n            if (this.onCancel) this.onCancel.call(this, this);\n\n            this.#element.dispatchEvent(new CustomEvent('animation.canceled', {\n                bubbles: true,\n                detail: this\n            }));\n\n            this._triggerEndEvent();\n        }\n\n        return this;\n    }\n\n    /**\n     * Cancel the animation with the canceled state.   optionally sets the animation to it's final frame if\n     * completeAnimation is true.\n     *\n     * @param completeAnimation\n     * @returns {FX}\n     */\n    cancel(completeAnimation = false) {\n        return this._cancel(completeAnimation, FX.canceled);\n    }\n\n    /**\n     * Completes the animation immediately and sets is status to complete.\n     * @returns {FX}\n     */\n    complete() {\n        return this._cancel(true, FX.complete);\n    }\n\n    goto(position) {\n        assertFXAlive(this);\n\n        if (typeof position === 'string') {\n            position = parseFloat(position) / 100;\n        }\n\n        this.#position = position;\n        return this.applyFrame(this.position);\n    }\n\n    applyFrame(position) {\n        let frame = this.getFrame(position);\n        this.#applyFrame.call(this, this, frame);\n        return frame;\n    }\n\n    _triggerEndEvent() {\n        if (this.onEnd) this.onEnd.call(this, this);\n\n        this.#element.dispatchEvent(new CustomEvent('animation.end', {\n            bubbles: true,\n            detail: this\n        }));\n\n        for (let {onResolve} of this.#chained) {\n            if (onResolve) onResolve(this.#internalValue);\n        }\n        this.#chained = [];\n    }\n\n    _complete(value, status = FX.complete) {\n        if (this.state !== \"Pending\") {\n            return;\n        }\n\n        this.#status = status;\n        this.#internalValue = value;\n\n        if (this.onComplete) this.onComplete.call(this, this);\n\n        this.#element.dispatchEvent(new CustomEvent('animation.complete', {\n            bubbles: true,\n            detail: this\n        }));\n\n        this._triggerEndEvent();\n    }\n\n    then(onResolve, onReject) {\n        if (this.state === \"Pending\") {\n            return new Promise((resolve, reject) => {\n                // noinspection JSUnusedGlobalSymbols\n                this.#chained.push({\n                    onResolve: (value) => {\n                        doPromiseAction(onResolve, value, resolve);\n                    },\n\n                    onReject: (value) => {\n                        doPromiseAction(onReject, value, reject);\n                    }\n                });\n            });\n        } else if (this.state === 'Fulfilled' && typeof onResolve === 'function') {\n            return new Promise((resolve) => {\n                doPromiseAction(onResolve, this.#internalValue, resolve);\n            });\n        } else if (this.state === 'Rejected' && typeof onReject === 'function') {\n            return new Promise((resolve, reject) => {\n                doPromiseAction(onReject, this.#internalValue, reject);\n            });\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    finally(onFinally) {\n        onFinally = (value) => {\n            if (typeof onFinally === 'function') {\n                onFinally();\n            }\n\n            return value;\n        };\n\n        return this.then(onFinally, onFinally);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    catch(onReject) {\n        return this.then(undefined, onReject);\n    }\n}\n","/**\n *\n * @param p\n * @returns {*}\n */\nexport function linear(p) {\n    return p;\n}\n\n\n// noinspection JSUnusedGlobalSymbols\nexport const EASING = {\n    linear: linear\n};\n","export function defaultApplyFrame(fx, frame) {\n    for (let key in frame) {\n        if (frame.hasOwnProperty(key)) {\n            fx.element.style[key] = frame[key].toString();\n        }\n    }\n}\n","export class NumberWithUnit {\n    constructor(value, unit) {\n        this.value = value;\n        this.unit = unit;\n    }\n\n    add(value) {\n        if (typeof value !== \"number\") {\n            if (!(value instanceof NumberWithUnit)) {\n                throw new TypeError(\"Cannot perform action on invalid type.\");\n            }\n\n            if (this.unit !== value.unit) {\n                throw new Error(\"Mismatched units\");\n            }\n\n            value = value.value;\n        }\n\n\n        return new NumberWithUnit(this.value + value, this.unit);\n    }\n\n    subtract(value) {\n        if (typeof value !== \"number\") {\n            if (!(value instanceof NumberWithUnit)) {\n                throw new TypeError(\"Cannot perform action on invalid type.\");\n            }\n\n            if (this.unit !== value.unit) {\n                throw new Error(\"Mismatched units\");\n            }\n\n            value = value.value;\n        }\n\n        return new NumberWithUnit(this.value - value, this.unit);\n    }\n\n    scalar(value) {\n        if (typeof value !== \"number\") {\n            if (!(value instanceof NumberWithUnit)) {\n                throw new TypeError(\"Cannot perform action on invalid type.\");\n            }\n\n            if (this.unit !== value.unit) {\n                throw new Error(\"Mismatched units\");\n            }\n\n            value = value.value;\n        }\n\n        return new NumberWithUnit(this.value * value, this.unit);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    divide(value) {\n        if (typeof value !== \"number\") {\n            if (!(value instanceof NumberWithUnit)) {\n                throw new TypeError(\"Cannot perform action on invalid type.\");\n            }\n\n            if (this.unit !== value.unit) {\n                throw new Error(\"Mismatched units\");\n            }\n\n            value = value.value;\n        }\n\n        return new NumberWithUnit(this.value / value, this.unit);\n    }\n\n    toString() {\n        return `${this.value}${this.unit}`;\n    }\n}\n"],"sourceRoot":""}