{"version":3,"sources":["webpack://pendora/./src/core/ui/Sortable.js"],"names":["placeholder","className","nodeName","element","document","createElement","box","getBoundingClientRect","style","boxSizing","width","height","Sortable","items","layout","dropOnEmpty","accepts","setPlaceholderSize","container","axis","exclude","delay","offset","cursor","resistance","handle","helper","revert","revertDuration","scrollSpeed","tolerance","setHelperSize","grid","droppables","querySelector","Draggable","selector","connect","initEvents","disconnect","droppable","hasDroppable","isOver","init","target","initialize","event","detail","item","addEventListener","onDragMove","onDragComplete","onSortAppend","startBB","classList","add","Array","isArray","contains","parentElement","insertBefore","setElementClientPosition","destroy","removeEventListener","removeChild","transform","remove","matches","prototype","slice","call","getItems","filter","i","before","getItemBeforePoint","clientX","clientY","after","getItemAfterPoint","beforeBB","dataset","undefined","length","appendChild","_refreshPositions","_triggerSortAppendEvent","nextSibling","x","y","mx","left","my","top","bottom","r","getRelativePosition","right","querySelectorAll","position","current","deltaLeft","deltaTop","translation","getTranslation","CustomEvent","bubbles","dispatchEvent"],"mappings":"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","file":"chunk-4.bundle.js","sourcesContent":["import {getTranslation, setElementClientPosition} from \"core/ui/position\";\nimport Draggable, {cursor} from './Draggable';\n\n\nexport function placeholder(className, nodeName=null) {\n    return function(element) {\n        let placeholder = document.createElement(nodeName || element.nodeName),\n            box = element.getBoundingClientRect();\n\n        placeholder.style.boxSizing = \"border-box\";\n        box.style.width = `${box.width}px`;\n        box.style.height = `${box.height}px`;\n\n        if(className) {\n            placeholder.className = className;\n        }\n    }\n}\n\n\n/**\n * Creates a sortable list of items.\n */\nexport default class Sortable {\n    #draggable;\n\n    constructor(element, {items=\".ui-sort-item\", placeholder=null, layout='y', dropOnEmpty=true, accepts=null, setPlaceholderSize=false,\n        container=null, axis='xy', exclude=null, delay=null, offset=cursor,\n        resistance=null, handle=null, helper=null, revert=null, revertDuration, scrollSpeed=null, tolerance=0.5,\n        setHelperSize=false, grid=null, droppables=null}={}) {\n\n        if(typeof element === 'string') {\n            this.element = document.querySelector(element);\n        } else {\n            this.element = element;\n        }\n\n        this.#draggable = new Draggable(this.element, {container, axis, exclude, delay, offset, resistance, handle, helper, revert, revertDuration, scrollSpeed, selector: items, tolerance, setHelperSize, grid});\n\n        if(droppables) {\n            this.connect(droppables);\n        }\n\n        this.items = items;\n        this.layout = layout;\n        this.placeholder = placeholder;\n        this.dropOnEmpty = dropOnEmpty;\n        this.accepts = accepts;\n        this.setPlaceholderSize = setPlaceholderSize;\n\n        this.initEvents();\n    }\n\n    connect(droppables) {\n        this.#draggable.connect(droppables);\n    }\n\n    disconnect(droppables) {\n        this.#draggable.disconnect(droppables);\n    }\n\n    hasDroppable(droppable) {\n        return this.#draggable.hasDroppable(droppable);\n    }\n\n    get droppables() {\n        return this.#draggable.droppables;\n    }\n\n    /**\n     * Initializes event listeners.\n     */\n    initEvents() {\n        let placeholder,\n            isOver = false,\n            init = false,\n            target;\n\n        // Attaches temporary events when drag starts.\n        let initialize = (event) => {\n            init = true;\n            target = event.detail.item;\n            target.addEventListener('drag.move', onDragMove);\n            target.addEventListener('drag.end', onDragComplete);\n            target.addEventListener('sort-append', onSortAppend);\n            let startBB = target.getBoundingClientRect();\n            target.classList.add('ui-sorting');\n\n            if(!placeholder && this.placeholder) {\n                if(typeof this.placeholder === 'string') {\n                    placeholder = document.createElement(target.nodeName);\n                    placeholder.className = this.placeholder;\n                } else if(typeof this.placeholder === 'function') {\n                    placeholder = this.placeholder(target, this);\n                } else if(this.placeholder === true) {\n                    placeholder = document.createElement(target.nodeName);\n                } else {\n                    placeholder = this.placeholder;\n                }\n\n                placeholder.classList.add('ui-placeholder');\n\n                if(this.setPlaceholderSize) {\n                    if(this.setPlaceholderSize === true) {\n                        placeholder.style.width = `${startBB.width}px`;\n                        placeholder.style.height = `${startBB.height}px`;\n                        placeholder.style.boxSizing = 'border-box';\n                    } else if(Array.isArray(this.setPlaceholderSize)) {\n                        placeholder.style.width = `${this.setPlaceholderSize[0]}px`;\n                        placeholder.style.height = `${this.setPlaceholderSize[1]}px`;\n                    } else {\n                        placeholder.style.width = `${this.setPlaceholderSize.width}px`;\n                        placeholder.style.height = `${this.setPlaceholderSize.height}px`;\n                    }\n                }\n\n                if(this.element.contains(target)) {\n                    target.parentElement.insertBefore(placeholder, target);\n                }\n            }\n\n            setElementClientPosition(target, startBB, 'translate3d');\n        };\n\n        // Cleanup after sorting finishes.\n        let destroy = () => {\n            if(target) {\n                target.removeEventListener('drag.move', onDragMove);\n                target.removeEventListener('drag.end', onDragComplete);\n                target.removeEventListener('sort-append', onSortAppend);\n                init = false;\n                isOver = false;\n\n                if(placeholder && placeholder.parentElement) {\n                    placeholder.parentElement.removeChild(placeholder);\n                }\n\n                placeholder = null;\n\n                target.style.transform = \"\";\n                target.classList.remove('ui-sorting');\n                target = null;\n            }\n        };\n\n        // Ensures that the placeholder is removed if the item gets moves to another sortable.\n        let onSortAppend = event => {\n            if(event.detail !== this && placeholder && placeholder.parentElement) {\n                placeholder.parentElement.removeChild(placeholder);\n            }\n        };\n\n        // Moves the item to the correct position on mouse move.\n        let onDragMove = (event) => {\n            if(!isOver || (this.accepts && !event.detail.item.matches(this.accepts))) {\n                return;\n            }\n\n            let target = event.detail.item,\n                items = Array.prototype.slice.call(this.getItems()).filter(i => i !== target);\n\n            let before = this.getItemBeforePoint(event.detail.clientX, event.detail.clientY, items),\n                after = this.getItemAfterPoint(event.detail.clientX, event.detail.clientY, items),\n                beforeBB = event.detail.helper.getBoundingClientRect(),\n                dropOnEmpty = target.dataset.dropOnEmpty !== null && target.dataset.dropOnEmpty !== undefined ? target.dataset.dropOnEmpty === 'true' : this.dropOnEmpty; // Allow overriding on item level.\n\n            if(!items.length) {\n                if(dropOnEmpty) {\n                    this.element.appendChild(target);\n                    if(placeholder) target.parentElement.insertBefore(placeholder, target);\n                    this._refreshPositions(event.detail.helper, beforeBB);\n                    this._triggerSortAppendEvent(target);\n                }\n            } else if(before && before !== target) {\n                before.parentElement.insertBefore(target, before.nextSibling);\n                if(placeholder) target.parentElement.insertBefore(placeholder, target);\n                this._refreshPositions(event.detail.helper, beforeBB);\n                this._triggerSortAppendEvent(target);\n            } else if(after && after !== target) {\n                after.parentElement.insertBefore(target, after);\n                if(placeholder) target.parentElement.insertBefore(placeholder, target);\n                this._refreshPositions(event.detail.helper, beforeBB);\n                this._triggerSortAppendEvent(target);\n            }\n        };\n\n        // Cleanup\n        let onDragComplete = () => {\n            destroy();\n        };\n\n        // Initialize sorting.\n        this.element.addEventListener('drag.enter', event => {\n            if(this.accepts && !event.detail.item.matches(this.accepts)) {\n                return;\n            }\n\n            isOver = true;\n\n            if(!init) {\n                initialize(event);\n            }\n        });\n\n        // Mark isOver state false.\n        this.element.addEventListener('drag.leave', () => {\n            isOver = false;\n        });\n\n        // Initialize sorting that started on another sortable.\n        this.element.addEventListener('drag.start', (event) => {\n            if(!init) {\n                initialize(event);\n            }\n\n            isOver = true;\n        });\n    }\n\n    /**\n     * Tests to see if the given (x, y) point is before or after the element.  Uses layout to determine if the test\n     * is for the x layout, the y layout or the xy layout.\n     * @param element\n     * @param x\n     * @param y\n     * @returns {string|null}\n     */\n    getRelativePosition(element, x, y) {\n        let box = element.getBoundingClientRect(),\n            mx = box.left + (box.width / 2),\n            my = box.top + (box.height / 2);\n\n        if(this.layout === 'x') {\n            return mx < x ? 'after' : 'before';\n        } else if(this.layout === 'y') {\n            return my < y ? 'after' : 'before';\n        } else if(this.layout === 'xy') {\n            return (box.bottom < y) || (mx < x && box.bottom >= y && box.top <= y) ? 'after' : 'before';\n        }\n\n        return null;\n    }\n\n    /**\n     * Returns the item immediately before the given x, y point.\n     * @param x\n     * @param y\n     * @param items\n     * @returns {*}\n     */\n    getItemBeforePoint(x, y, items) {\n        if(!items) items = this.getItems();\n\n        let r = null;\n\n        for(let i = 0; i < items.length; i++) {\n            let item = items[i];\n\n            if(this.getRelativePosition(item, x, y) === 'after') {\n                r = item;\n            } else {\n                break;\n            }\n        }\n\n        if(r) {\n            let box = r.getBoundingClientRect();\n\n            if((this.layout === 'x' || this.layout === 'xy') && box.top <= y && box.bottom >= y) {\n                return r;\n            } else if(this.layout === 'y' && box.left <= x && box.right >= x) {\n                return r;\n            }\n        }\n    }\n\n    /**\n     * Returns the item immediately after the given (x, y) point.\n     * @param x\n     * @param y\n     * @param items\n     * @returns {null|*}\n     */\n    getItemAfterPoint(x, y, items) {\n        if(!items) items = this.getItems();\n\n        let r = null;\n\n        for(let i = items.length - 1; i >= 0; i--) {\n            let item = items[i];\n\n            if(this.getRelativePosition(item, x, y) === 'before') {\n                r = item;\n            } else {\n                break;\n            }\n        }\n\n        if(r) {\n            let box = r.getBoundingClientRect();\n\n            if((this.layout === 'x' || this.layout === 'xy') && box.top <= y && box.bottom >= y) {\n                return r;\n            } else if(this.layout === 'y' && box.left <= x && box.right >= x) {\n                return r;\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Returns a list of all items for the sortable.\n     * @returns {NodeListOf<SVGElementTagNameMap[string]> | NodeListOf<HTMLElementTagNameMap[string]> | NodeListOf<Element>}\n     */\n    getItems() {\n        return this.element.querySelectorAll(this.items);\n    }\n\n    /**\n     * helper method that translates the target to the provided client position.\n     * @param target {{getBoundingClientRect, style} | Element}\n     * @param position {{left[Number], top[Number]}}\n     * @private\n     */\n    _refreshPositions(target, position) {\n        let current = target.getBoundingClientRect(),\n            deltaLeft = current.left - position.left,\n            deltaTop = current.top - position.top,\n            translation = getTranslation(target);\n\n        target.style.transform = `translate3d(${translation.x - deltaLeft}px, ${translation.y - deltaTop}px, 0)`;\n    }\n\n    /**\n     * Triggers the default sort-append event on the target.\n     * @param target {Element}\n     * @private\n     */\n    _triggerSortAppendEvent(target) {\n        let event = new CustomEvent('sort-append', {\n            bubbles: false,\n            detail: this\n        });\n\n        target.dispatchEvent(event);\n    }\n}\n"],"sourceRoot":""}