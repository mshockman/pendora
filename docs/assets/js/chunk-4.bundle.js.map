{"version":3,"sources":["webpack://pendora/./docs/js/pages/documentation/datagrid/page_dataheader.js","webpack://pendora/./src/core/Component.js","webpack://pendora/./src/core/ui/Arrow.js","webpack://pendora/./src/core/ui/Overlay.js","webpack://pendora/./src/core/ui/TabBar.js","webpack://pendora/./src/core/ui/index.js","webpack://pendora/./src/datagrid/DataGridHeader.js"],"names":["DataHeaderPage","header","DataGridHeader","columns","label","resizeable","tableSort","minWidth","width","sortable","appendTo","on","topic","console","log","SYMBOLS","appendChild","Symbol","Component","element","selectElement","selector","document","querySelector","nodeType","parentElement","removeChild","Rect","getBoundingClientRect","name","getAttribute","hasAttribute","removeAttribute","value","setAttribute","classes","addClasses","removeClasses","fn","time","interval","clear","cancel","_timers","KeyError","timer","status","id","type","setInterval","call","clearInterval","setTimeout","clearTimeout","getTimer","classList","contains","isDisabled","remove","add","style","dataset","Publisher","Arrow","placement","align","createElement","className","parent","target","placementString","split","render","direction","left","right","top","bottom","parentRect","offsetParent","targetRect","pos","position","my","at","of","fitX","fitY","setElementClientPosition","symbolShow","symbolHide","getXIntersectAmount","rect1","rect2","Math","max","min","getYIntersectAmount","DEFAULT_PLACEMENTS","arrow","Overlay","container","sticky","fit","showFX","showDuration","hideFX","hideDuration","timeout","removeOnHide","visibleClassName","hiddenClassName","undefined","addClass","removeClass","removeFrom","options","key","method","push","Object","freeze","addPlacement","mode","length","containerRect","startingIndex","currentPos","currentIntersectAmount","currentPlacement","getRootContainingClientRect","i","index","getPlacement","clampSpace","newIntersectAmount","subBoundingBox","getSubBoundingBox","arrowOffset","arrowRect","getCleanBoundingClientRect","setPlacement","unionBox","union","subtract","height","clamp","getDistanceBetweenRects","publish","immediate","clearTimeOut","body","result","Animation","complete","visible","state","startingState","hidden","showing","onFrame","animate","duration","startTimeoutTimer","hiding","TypeError","hide","isTimingOut","slice","TabBar","onClass","offClass","openClass","closeClass","addEventListener","event","tab","closest","activateTab","querySelectorAll","current","getActiveTab","deactivateTab","autoloader","register","COLUMN_MAP","WeakMap","Sortable","helper","clone","layout","axis","resistance","startingColumns","sorter","arraysEqual","setColumns","clearColumns","column","appendColumn","indexOf","getColumnIndex","splice","removeColumn","DataColumn","cache","get","after","insertBefore","before","insertColumn","Error","append","set","onResize","onResizeComplete","off","r","children","child","maxWidth","Infinity","dataSort","renderer","attributes","data","innerHTML","keys","assign","resize","Resizeable","originalEvent","preventDefault","rect","e"],"mappings":"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","file":"chunk-4.bundle.js","sourcesContent":["import DataGridHeader, {DataColumn} from \"datagrid/DataGridHeader\";\n\n\nexport default class DataHeaderPage {\n    load() {\n        let header = new DataGridHeader({\n            columns: [\n                {label: \"Test #1\", resizeable: true, tableSort: true, minWidth: 100, width: 200},\n                {label: \"Test #2\", resizeable: true, tableSort: true, minWidth: 100, width: 200},\n                {label: \"Test #3\", resizeable: true, tableSort: true, minWidth: 100, width: 200},\n                {label: \"Test #4\", resizeable: true, tableSort: true, minWidth: 100, width: 200},\n                {label: \"Test #5\", resizeable: true, tableSort: true, minWidth: 100, width: 200}\n            ],\n\n            sortable: true\n        });\n\n        header.appendTo(\"#data-grid-header-container1\");\n\n        header.on('sort-change', topic => {\n            console.log(topic);\n        });\n    }\n}\n","import Publisher from \"./Publisher\";\nimport {selectElement, addClasses, removeClasses} from \"./utility\";\nimport Rect from \"./vectors/Rect\";\nimport {KeyError} from \"./errors\";\n\n\nexport const SYMBOLS = {\n    appendChild: Symbol(\"appendChild\")\n};\n\n\nexport default class Component extends Publisher {\n    #element;\n    #timers;\n\n    constructor(element) {\n        super();\n\n        this.#element = selectElement(element);\n    }\n\n    render() {\n\n    }\n\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.#element);\n        } else if(selector.nodeType && selector.appendChild) {\n            selector.appendChild(this.#element);\n        } else if(selector[SYMBOLS.appendChild]) {\n            selector[SYMBOLS].appendChild(this.#element);\n        } else if(selector.#element) {\n            selector.#element.appendChild(this.#element);\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    removeFrom() {\n        if(this.#element.parentElement) {\n            this.#element.parentElement.removeChild(this.#element);\n        }\n    }\n\n    getBoundingClientRect() {\n        return Rect.getBoundingClientRect(this.#element);\n    }\n\n    getAttribute(name) {\n        return this.#element.getAttribute(name);\n    }\n\n    hasAttribute(name) {\n        return this.#element.hasAttribute(name);\n    }\n\n    removeAttribute(name) {\n        return this.#element.removeAttribute(name);\n    }\n\n    setAttribute(name, value) {\n        return this.#element.setAttribute(name, value);\n    }\n\n    addClass(classes) {\n        return addClasses(this.#element, classes);\n    }\n\n    removeClass(classes) {\n        return removeClasses(this.#element, classes);\n    }\n\n    /**\n     * Creates a timer with the given name.  Only one timer with that name can be active per object.\n     * If another timer with the same name is created the previous one will be cleared if `clear` is true.\n     * Otherwise if `clear` is false a KeyError with be thrown.  The callback function for the timer is called\n     * with the current object as it's `this` and the timer object as it's only parameter following the pattern\n     *\n     * this::fn(timer);\n     *\n     * @param name {String} The name of the timer.\n     * @param fn {function(timer)} Function to call.\n     * @param time {Number} The time to wait.\n     * @param interval If true setInterval will be used instead of setTimeout\n     * @param clear If true an previous timers of the same name will be canceled before creating a new one.  Otherwise a KeyError will be thrown.\n     * @returns {{status, id, cancel, type}}\n     */\n    startTimer(name, fn, time, interval=false, clear=true) {\n        if(!this.#timers) {\n            this.#timers = {};\n        }\n\n        if(clear && this.#timers[name]) {\n            this.#timers[name].cancel();\n        } else if(this._timers[name]) {\n            throw new KeyError(\"Timer already exists.\");\n        }\n\n        let timer = this.#timers[name] = {\n            status: 'running',\n            id: null,\n            cancel: null,\n            type: null,\n        };\n\n        if(interval) {\n            let id = timer.id = setInterval((timer) => {\n                fn.call(this, timer);\n            }, time, timer);\n\n            timer.type = 'interval';\n\n            timer.cancel = () => {\n                if(this.#timers[name] === timer) {\n                    clearInterval(id);\n                    delete this.#timers[name];\n                    timer.status = 'canceled';\n                }\n            };\n        } else {\n            let id = timer.id = setTimeout((timer) => {\n                delete this.#timers[name];\n                timer.status = 'complete';\n                fn.call(this, timer);\n            }, time, timer);\n\n            timer.type = 'timeout';\n\n            timer.cancel = () => {\n                if(this.#timers[name] === timer) {\n                    clearTimeout(id);\n                    delete this.#timers[name];\n                    timer.status = 'canceled';\n                }\n            };\n        }\n\n        return timer;\n    }\n\n    /**\n     * Clears the timer with the given name.\n     *\n     * @param name\n     * @returns {boolean} True if a timer was canceled. False if not timer exists.\n     */\n    clearTimer(name) {\n        if(this.#timers && this.#timers[name]) {\n            this.#timers[name].cancel();\n            return true;\n        }\n\n        return false;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the timer object if it exists.\n     *\n     * @param name\n     * @returns {*}\n     */\n    getTimer(name) {\n        return this.#timers && this.#timers[name] ? this.#timers[name] : null;\n    }\n\n    hasTimer(name) {\n        return !!this.getTimer(name);\n    }\n\n    get isDisabled() {\n        return this.classList.contains('disabled');\n    }\n\n    set isDisabled(value) {\n        let isDisabled = this.isDisabled;\n\n        if(!isDisabled && value) {\n            this.classList.remove('disabled');\n        } else if(isDisabled && !value) {\n            this.classList.add('disabled');\n        }\n    }\n\n    get disabled() {\n        return this.isDisabled;\n    }\n\n    set disabled(value) {\n        this.isDisabled = value;\n    }\n\n    get id() {\n        return this.#element.id;\n    }\n\n    set id(value) {\n        this.#element.id = value;\n    }\n\n    get style() {\n        return this.#element.style;\n    }\n\n    set style(value) {\n        this.#element.style = value;\n    }\n\n    get classList() {\n        return this.#element.classList;\n    }\n\n    set classList(value) {\n        this.#element.classList = value;\n    }\n\n    get dataset() {\n        return this.#element.dataset;\n    }\n\n    set dataset(value) {\n        this.#element.dataset = value;\n    }\n\n    get element() {\n        return this.#element;\n    }\n}\n","import Component from \"../Component\";\nimport Rect from \"../vectors/Rect\";\nimport {setElementClientPosition} from \"./position\";\n\n\n/**\n * A class that creates an arrow that can be placed at the edge of elements that will point towards the target element.\n * The arrow will be positioned to be as close to the target why still fitting inside it's parent.\n */\nexport default class Arrow extends Component {\n    /**\n     * The starting alignment of the arrow.\n     * Can be start, end, or center.\n     */\n    #align;\n\n    constructor(placement=\"bottom\", align=\"center\") {\n        let element = document.createElement('div');\n        element.className = \"arrow\";\n\n        super(element);\n\n        this.parent = null;\n        this.target = null;\n        this.#align = align;\n\n        this.element.dataset.placement = placement;\n    }\n\n    set align(value) {\n        this.#align = value;\n        this.render();\n    }\n\n    get align() {\n        return this.#align;\n    }\n\n    set placement(value) {\n        this.element.dataset.placement = value;\n        this.render();\n    }\n\n    get placement() {\n        return this.element.dataset.placement;\n    }\n\n    /**\n     * Sets the placement and align of the arrow.  Can take a string of placement-align separated by a dash.\n     *\n     * @param placementString\n     */\n    setPlacement(placementString) {\n        let [placement, align] = placementString.split(\"-\");\n\n        this.placement = placement;\n        this.align = align || \"center\";\n\n        this.render();\n    }\n\n    render() {\n        this.element.dataset.direction = this.direction;\n        this.element.style.left = \"\";\n        this.element.style.right = \"\";\n        this.element.style.top = \"\";\n        this.element.style.bottom = \"\";\n\n        let parentRect = new Rect(this.parent || this.element.offsetParent),\n            targetRect = this.target ? new Rect(this.target) : null,\n            pos = new Rect(this.element);\n\n        if(this.placement === \"top\") {\n            if(this.align === \"start\") {\n                pos = pos.position({my: \"left bottom\", at: \"left top\", of: parentRect});\n            } else if(this.align === \"end\") {\n                pos = pos.position({my: \"right bottom\", at: \"right top\", of: parentRect});\n            } else {\n                pos = pos.position({my: \"bottom\", at: \"top\", of: parentRect});\n            }\n\n            if(targetRect) pos = pos.fitX(targetRect);\n            pos = pos.fitX(parentRect);\n        } else if(this.placement === \"right\") {\n            if(this.align === \"start\") {\n                pos = pos.position({my: \"left top\", at: \"right top\", of: parentRect});\n            } else if(this.align === \"end\") {\n                pos = pos.position({my: \"left bottom\", at: \"right bottom\", of: parentRect});\n            } else {\n                pos = pos.position({my: \"left\", at: \"right\", of: parentRect});\n            }\n\n            if(targetRect) pos = pos.fitY(targetRect);\n            pos = pos.fitY(parentRect);\n        } else if(this.placement === \"bottom\") {\n            if(this.align === \"start\") {\n                pos = pos.position({my: \"left top\", at: \"left bottom\", of: parentRect});\n            } else if(this.align === \"end\") {\n                pos = pos.position({my: \"right top\", at: \"right bottom\", of: parentRect});\n            } else {\n                pos = pos.position({my: \"top\", at: \"bottom\", of: parentRect});\n            }\n\n            if(targetRect) pos = pos.fitX(targetRect);\n            pos = pos.fitX(parentRect);\n        } else if(this.placement === \"left\") {\n            if(this.align === \"start\") {\n                pos = pos.position({my: \"right top\", at: \"left top\", of: parentRect});\n            } else if(this.align === \"end\") {\n                pos = pos.position({my: \"right bottom\", at: \"left bottom\", of: parentRect});\n            } else {\n                pos = pos.position({my: \"right\", at: \"left\", of: parentRect});\n            }\n\n            if(targetRect) pos = pos.fitY(targetRect);\n            pos = pos.fitY(parentRect);\n        }\n\n        setElementClientPosition(this.element, pos);\n    }\n}\n","import Rect from \"../vectors/Rect\";\nimport {getDistanceBetweenRects, getSubBoundingBox, setElementClientPosition} from \"core/ui/position\";\nimport Component from \"../Component\";\nimport Animation from \"../fx/Animation\";\n\n\nexport const symbolShow = Symbol(\"show\"),\n    symbolHide = Symbol(\"hide\");\n\n\nfunction getXIntersectAmount(rect1, rect2) {\n    let left = Math.max(rect1.left, rect2.left),\n        right = Math.min(rect1.right, rect2.right);\n\n    return left > right ? 0 : right - left;\n}\n\n\nfunction getYIntersectAmount(rect1, rect2) {\n    let top = Math.max(rect1.top, rect2.top),\n        bottom = Math.min(rect1.bottom, rect2.bottom);\n\n    return top > bottom ? 0 : bottom - top;\n}\n\n\nconst DEFAULT_PLACEMENTS = {\n    top: {\n        my: \"bottom\",\n        at: \"top\",\n        of: \"border-top\",\n        arrow: \"bottom\"\n    },\n\n    bottom: {\n        my: \"top\",\n        at: \"bottom\",\n        of: \"border-bottom\",\n        arrow: \"top\"\n    },\n\n    right: {\n        my: \"left\",\n        at: \"right\",\n        of: \"border-right\",\n        arrow: \"left\"\n    },\n\n    left: {\n        my: \"right\",\n        at: \"left\",\n        of: \"border-left\",\n        arrow: \"right\"\n    }\n};\n\n\nexport default class Overlay extends Component {\n    static hiding = \"Hiding\";\n    static showing = \"Showing\";\n    static hidden = \"Hidden\";\n    static visible = \"Visible\";\n\n    #currentIndex;\n    #placements;\n    #container;\n    #target;\n    #arrow;\n    #state;\n\n    #showFX;\n    #showDuration;\n    #hideFX;\n    #hideDuration;\n    #fx;\n\n    #visibleClassName;\n    #hiddenClassName;\n\n    #timer;\n\n    constructor(element, {target=null, container=null, sticky=true, fit=null, showFX=null, showDuration=null, hideFX=null, hideDuration=null, timeout=null, removeOnHide=false, visibleClassName=null, hiddenClassName=\"hidden\"}={}) {\n        super(element);\n\n        if(typeof target === 'string') {\n            target = document.querySelector(target);\n        }\n\n        if(typeof container === 'string') {\n            container = document.querySelector(container);\n        }\n\n        this.sticky = sticky;\n        this.fit = fit;\n        this.timeout = timeout;\n        this.removeOnHide = removeOnHide;\n\n        this.#currentIndex = 0; // The index of the current placement.\n        this.#placements = [];\n        this.#arrow = container;\n        this.#timer = null;\n\n        this.#visibleClassName = visibleClassName;\n        this.#hiddenClassName = hiddenClassName;\n\n        this.#state = undefined;\n\n        if(typeof showFX === 'function') {\n            showFX = new showFX();\n        }\n        if(typeof hideFX === 'function') {\n            hideFX = new hideFX();\n        }\n\n        this.#fx = null;\n        this.#showFX = showFX;\n        this.#showDuration = showDuration;\n        this.#hideFX = hideFX;\n        this.#hideDuration= hideDuration;\n\n        this.target = target;\n        this.container = container;\n    }\n\n    // noinspection JSUnusedLocalSymbols\n    [symbolHide](element) {\n        if(this.#hiddenClassName) {\n            this.addClass(this.#hiddenClassName);\n        }\n\n        if(this.#visibleClassName) {\n            this.removeClass(this.#visibleClassName);\n        }\n    }\n\n    // noinspection JSUnusedLocalSymbols\n    [symbolShow](element) {\n        if(this.#hiddenClassName) {\n            this.removeClass(this.#hiddenClassName);\n        }\n\n        if(this.#visibleClassName) {\n            this.addClass(this.#visibleClassName);\n        }\n    }\n\n    setArrow(arrow) {\n        if(this.#arrow) {\n            this.#arrow.removeFrom();\n            this.#arrow = null;\n        }\n\n        this.#arrow = arrow;\n        this.#arrow.appendTo(this.element);\n    }\n\n    addPlacement(name, options=undefined) {\n        if(!options) {\n            options = DEFAULT_PLACEMENTS[name];\n        }\n\n        let placement = {name};\n\n        for(let key of ['my', 'at', 'of', 'arrow', 'offset', 'collision', 'method']) {\n            if(options[key] !== undefined) {\n                placement[key] = options[key];\n            }\n        }\n\n        placement.method = placement.method || 'top-left';\n\n        this.#placements.push(Object.freeze(placement));\n    }\n\n    setPlacement(name, options=undefined) {\n        if(!options) {\n            options = DEFAULT_PLACEMENTS[name];\n        }\n\n        this.#placements = [];\n        this.addPlacement(name, options);\n    }\n\n    position(mode=\"current\") {\n        if(!this.#placements.length) {\n            return;\n        }\n\n        let targetRect,\n            containerRect,\n            startingIndex = 0,\n            currentPos = null,\n            currentIntersectAmount = 0,\n            currentPlacement;\n\n        if(typeof this.target === 'function') {\n            targetRect = new Rect(this.target());\n        } else if(this.target) {\n            targetRect = Rect.getBoundingClientRect(this.target);\n        } else {\n            targetRect = Rect.getRootContainingClientRect();\n        }\n\n        if(typeof this.container === 'function') {\n            containerRect = this.container();\n        } else if(this.container) {\n            containerRect = Rect.getBoundingClientRect(this.container);\n        } else {\n            containerRect = null;\n        }\n\n        // If sticky start searching from the last position instead of starting from the begining.\n        if(this.sticky) {\n            startingIndex = this.#currentIndex;\n        }\n\n        // Find the best position.\n        for(let i = 0; i < this.#placements.length; i++) {\n            let index = (startingIndex + i) % this.#placements.length,\n                position = this.getPlacement(index),\n                clampSpace = targetRect,\n                pos,\n                newIntersectAmount,\n                subBoundingBox = position.of ? getSubBoundingBox(targetRect, position.of) : targetRect,\n                arrowOffset = new Rect(0, 0, 0, 0),\n                arrowRect;\n\n            this.element.dataset.placement = position.name;\n\n            if(mode === \"current\") {\n                pos = Rect.getBoundingClientRect(this.element);\n            } else {\n                pos = Rect.getCleanBoundingClientRect(this.element);\n            }\n\n            if(this.#arrow && position.arrow) {\n                this.#arrow.setPlacement(position.arrow);\n                arrowRect = this.#arrow.getBoundingClientRect();\n                let unionBox = pos.union(arrowRect);\n                arrowOffset = pos.subtract(unionBox);\n                pos = unionBox;\n            }\n\n            clampSpace = targetRect.add(new Rect(\n                -pos.width,\n                -pos.height,\n                0,\n                0\n            ));\n\n            if(arrowRect) {\n                if(this.#arrow.placement === \"top\" || this.#arrow.placement === \"bottom\") {\n                    clampSpace = clampSpace.add(new Rect(\n                        arrowRect.width,\n                        0,\n                        -arrowRect.width,\n                        0\n                    ));\n                } else {\n                    clampSpace = clampSpace.add(new Rect(\n                        0,\n                        arrowRect.height,\n                        0,\n                        -arrowRect.height\n                    ));\n                }\n            }\n\n            pos = pos.position({\n                my: position.my,\n                at: position.at,\n                of: targetRect\n            });\n\n            if(containerRect) {\n                pos = pos.fit(containerRect);\n            }\n\n            if(position.of) {\n                clampSpace = getSubBoundingBox(clampSpace, position.of);\n            }\n\n            pos = pos.clamp(clampSpace);\n\n            newIntersectAmount = getXIntersectAmount(subBoundingBox, containerRect) + getYIntersectAmount(subBoundingBox, containerRect);\n\n            // noinspection JSCheckFunctionSignatures\n            if(!currentPos || (containerRect && containerRect.contains(pos)) || (newIntersectAmount > currentIntersectAmount && getDistanceBetweenRects(pos, containerRect) <= getDistanceBetweenRects(currentPos, containerRect))) {\n                if(containerRect) {\n                    if(this.fit === true || this.fit === \"xy\") {\n                        pos = pos.fit(containerRect);\n                    } else if(this.fit === \"y\") {\n                        pos = pos.fitY(containerRect);\n                    } else if(this.fit === \"x\") {\n                        pos = pos.fitX(containerRect);\n                    }\n                }\n\n                currentPos = pos.add(arrowOffset);\n                currentIntersectAmount = newIntersectAmount;\n                currentPlacement = position;\n\n                this.#currentIndex = index;\n\n                if(!containerRect || containerRect.contains(pos)) {\n                    break;\n                }\n            }\n        }\n\n        // Apply the best position.\n        this.element.dataset.placement = currentPlacement.name;\n\n        setElementClientPosition(this.element, currentPos, currentPlacement.method || \"top-left\");\n\n        if(this.#arrow) {\n            this.#arrow.setPlacement(currentPlacement.arrow);\n        }\n\n        // Publish topics.\n        this.publish(\"overlay.render\", {\n            target: this,\n            name: 'overlay.render',\n            position: currentPos,\n            placement: currentPlacement,\n            index: this.#currentIndex\n        });\n\n        return currentPos;\n    }\n\n    getPlacement(index) {\n        return this.#placements[index];\n    }\n\n    async show(immediate=false) {\n        this.clearTimeOut();\n\n        this.publish(\"overlay.show\", this);\n\n        if(!this.element.parentElement) {\n            document.body.appendChild(this.element);\n        }\n\n        let result;\n\n        if(immediate) {\n            if(this.#fx) {\n                await this.#fx.cancel();\n            }\n\n            this[symbolShow](this.element);\n\n            if(this.#showFX) {\n                this.#showFX.goto(this.element, 1);\n            }\n\n            this.position(\"current\");\n\n            result = Animation.complete;\n            this.#state = Overlay.visible;\n            this.publish(\"overlay.visible\", this);\n        } else if(this.state !== Overlay.visible) {\n            if(this.#fx) {\n                await this.#fx.cancel();\n            }\n\n            let startingState = this.state;\n\n            this[symbolShow](this.element);\n            this.position(\"current\");\n\n            if(startingState === Overlay.hidden && this.#hideFX) {\n                await this.#hideFX.goto(this.element, 1);\n            }\n\n            this.position(\"current\");\n\n            this.#state = Overlay.showing;\n            this.publish(\"overlay.showing\", this);\n\n            let onFrame = () => {\n                this.position(\"current\");\n            };\n\n            if(this.#showFX) {\n                this.#fx = this.#showFX.animate(this.element, {duration: this.#showDuration, onFrame});\n            }\n\n            this.position(\"current\");\n\n            if(this.#fx) {\n                result = await this.#fx;\n                this.#fx = null;\n            } else {\n                result = Animation.complete;\n            }\n\n            if(result === Animation.complete) {\n                this.#state = Overlay.visible;\n                this.publish(\"overlay.visible\", this);\n            }\n        } else {\n            result = Animation.complete;\n        }\n\n        if(result === Animation.complete) {\n            if (this.#timer) {\n                clearTimeout(this.#timer);\n                this.#timer = null;\n            }\n\n            if (typeof this.timeout === 'number' && this.timeout >= 0) {\n                this.startTimeoutTimer(this.timeout);\n            }\n        }\n\n        return result;\n    }\n\n    async hide(immediate=false) {\n        this.clearTimeOut();\n\n        this.publish(\"overlay.hide\", this);\n\n        if(immediate) {\n            if(this.#fx) {\n                await this.#fx.cancel();\n            }\n\n            if(this.#hideFX) {\n                this.#hideFX.goto(this.element, 1);\n            }\n\n            this[symbolHide](this.element);\n            this.#state = Overlay.hidden;\n            this.publish(\"overlay.hidden\", this);\n\n            if(this.removeOnHide) {\n                this.removeFrom();\n            }\n\n            return Animation.complete;\n        } if(this.state !== Overlay.hidden) {\n            if(this.#fx) {\n                await this.#fx.cancel();\n            }\n\n            let result;\n\n            let onFrame = () => {\n                this.position(\"current\");\n            };\n\n            if(this.#hideFX) {\n                this.#fx = this.#hideFX.animate(this.element, {duration: this.#hideDuration, onFrame});\n            }\n\n            this.#state = Overlay.hiding;\n            this.publish(\"overlay.hiding\", this);\n\n            if(this.#fx) {\n                result = await this.#fx;\n            } else {\n                result = Animation.complete;\n            }\n\n            if(result === Animation.complete) {\n                this[symbolHide](this.element);\n                this.#state = Overlay.hidden;\n\n                if(this.removeOnHide) {\n                    this.removeFrom();\n                }\n\n                this.publish(\"overlay.hidden\", this);\n            }\n\n            return result;\n        } else {\n            return Animation.complete;\n        }\n    }\n\n    startTimeoutTimer(timeout=null) {\n        if(timeout === null) {\n            timeout = this.timeout;\n        }\n\n        if(typeof timeout !== \"number\" || timeout < 0) {\n            throw new TypeError(\"Timeout must be a positive integer.\");\n        }\n\n        this.clearTimeOut();\n\n        this.#timer = setTimeout(() => {\n            this.hide();\n            this.publish(\"overlay.timeout\", this);\n        }, this.timeout);\n    }\n\n    clearTimeOut() {\n        if(this.isTimingOut()) {\n            clearTimeout(this.#timer);\n            this.#timer = null;\n            return true;\n        }\n\n        return false;\n    }\n\n    isTimingOut() {\n        return !!this.#timer;\n    }\n\n    async clearFX() {\n        if(this.#fx) {\n            await this.#fx.cancel();\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    get placements() {\n        return this.#placements.slice(0);\n    }\n\n    get target() {\n        return this.#target;\n    }\n\n    get container() {\n        return this.#container;\n    }\n\n    set target(target) {\n        if(typeof value === 'string') {\n            this.#target = document.querySelector(target);\n        } else {\n            this.#target = target || null;\n        }\n    }\n\n    set container(container) {\n        if(typeof container === 'string') {\n            this.#container = document.querySelector(container);\n        } else {\n            this.#container = container || null;\n        }\n    }\n\n    get fx() {\n        return this.#fx;\n    }\n\n    get state() {\n        return this.#state;\n    }\n}\n","import Component from \"../Component\";\nimport autoloader from \"../../autoloader\";\n\n\nexport default class TabBar extends Component {\n    #onClass;\n    #offClass;\n    #openClass;\n    #closeClass;\n\n    constructor(element, {onClass=\"active\", offClass=null, openClass=\"open\", closeClass=null}={}) {\n        if(!element) {\n            element = document.createElement('div');\n        }\n\n        super(element);\n\n        this.#onClass = onClass;\n        this.#offClass = offClass;\n        this.#openClass = openClass;\n        this.#closeClass = closeClass;\n\n        this.element.classList.add('tab-bar');\n\n        this.element.addEventListener('click', event => {\n            let tab = event.target.closest(\"[data-tab]\");\n\n            if(tab && this.element.contains(tab)) {\n                this.activateTab(tab);\n            }\n        });\n    }\n\n    getTabs() {\n        return this.element.querySelectorAll(\"[data-tab]\");\n    }\n\n    getActiveTab() {\n        return this.element.querySelector(`[data-tab].${this.#onClass}`);\n    }\n\n    activateTab(tab) {\n        let current = this.getActiveTab();\n\n        if(current !== tab) {\n            this.deactivateTab(current);\n\n            let target = document.querySelector(tab.dataset.tab);\n\n            if(target) {\n                target.classList.add(this.#openClass);\n                if (this.#closeClass) target.classList.remove(this.#closeClass);\n            }\n\n            tab.classList.add(this.#onClass);\n            if(this.#offClass) tab.classList.remove(this.#offClass);\n        }\n    }\n\n    deactivateTab(tab) {\n        let target = document.querySelector(tab.dataset.tab);\n\n        if(target) {\n            target.classList.remove(this.#openClass);\n            if (this.#closeClass) target.classList.add(this.#closeClass);\n        }\n\n        tab.classList.remove(this.#onClass);\n        if(this.#offClass) tab.classList.add(this.#offClass);\n    }\n}\n\n\nautoloader.register('tab-bar', element => {\n    return new TabBar(element);\n});\n","import Draggable from \"./Draggable\";\nimport Resizeable from \"./Resizeable\";\nimport Sortable from \"./Sortable\";\nimport Arrow from \"./Arrow\";\nimport Overlay from \"./Overlay\";\nimport TabBar from \"./TabBar\";\n\nexport {Draggable, Resizeable, Sortable, Arrow, Overlay, TabBar};\n","/**\n * column.resize-start\n * column.resize\n * column.resize-end\n * resize-complete\n *\n * column.order-by\n *\n * column.drag-start\n * column.drag\n * column.drag-complete\n * sort-change\n */\nimport {Resizeable} from \"../core/ui\";\nimport Publisher from \"../core/Publisher\";\nimport {clone} from \"../core/ui/Draggable\";\nimport Sortable from \"../core/ui/Sortable\";\nimport {arraysEqual} from \"../core/utility\";\n\n\nconst COLUMN_MAP = new WeakMap();\n\n\nexport default class DataGridHeader extends Publisher {\n    #element;\n    #body;\n    #columns;\n\n    #resizeable;\n    #sortable;\n    #tableSort;\n    #sorter;\n\n    #columnElementMap;\n\n    constructor({columns=null, resizeable=false, sortable=false, tableSort=false}={}) {\n        super();\n        this.#element = document.createElement(\"div\");\n        this.#element.className = \"data-grid-header\";\n        this.#body = document.createElement(\"div\");\n        this.#body.className = \"data-grid-header__body\";\n        this.#element.appendChild(this.#body);\n\n        this.#columnElementMap = new WeakMap();\n\n        this.#columns = [];\n        this.#resizeable = resizeable;\n        this.#sortable = sortable;\n        this.#tableSort = tableSort;\n\n        if(this.#sortable) {\n            this.#sorter = new Sortable(this.#element, {\n                helper: clone(1, \"sort-clone-helper\", 100),\n                layout: 'x',\n                axis: 'x',\n                resistance: 25\n            });\n\n            this.#sorter.on(['sort-append', 'sort-complete', 'sort-start'], () => {\n                this.#columns = this.#compileColumnListFromDom();\n            });\n\n            let startingColumns = null;\n\n            this.#sorter.on(\"sort-append\", () => {\n                this.#columns = this.#compileColumnListFromDom();\n                this.publish(\"sort-append\", {topic: \"sort-append\", sorter: this.#sorter, target: this});\n            });\n\n            this.#sorter.on('sort-start', () => {\n                this.#columns = this.#compileColumnListFromDom();\n                startingColumns = this.#columns.slice(0);\n                this.publish(\"sort-start\", {topic: \"sort-start\", sorter: this.#sorter, target: this});\n            });\n\n            this.#sorter.on(\"sort-complete\", topic => {\n                this.#columns = this.#compileColumnListFromDom();\n                this.publish(\"sort-complete\", topic);\n\n                if(!startingColumns || !arraysEqual(startingColumns, this.#columns)) {\n                    this.publish(\"sort-change\", {topic: \"sort-change\", target: this, sorter: this.#sorter});\n                }\n\n                startingColumns = null;\n            });\n        }\n\n        if(columns) {\n            this.setColumns(columns);\n        }\n    }\n\n    setColumns(columns) {\n        this.clearColumns();\n\n        for(let column of columns) {\n            this.appendColumn(column);\n        }\n\n        this.#render();\n    }\n\n    getColumn(index) {\n        return this.#columns[index];\n    }\n\n    getColumnIndex(column) {\n        return this.#columns.indexOf(column);\n    }\n\n    removeColumn(column) {\n        let index = this.getColumnIndex(column);\n\n        if(index !== -1) {\n            this.#columns.splice(index, 1);\n            column.element.parentElement.removeChild(column.element);\n            this.#destroyColumn(column);\n            this.#render();\n        }\n    }\n\n    clearColumns() {\n        for(let column of this.#columns) {\n            this.removeColumn(column);\n        }\n    }\n\n    appendColumn(column) {\n        if(!(column instanceof DataColumn)) {\n            column = new DataColumn({\n                ...column,\n                sortable: column.sortable !== false && this.#sortable\n            });\n        }\n\n        this.#initColumn(column);\n        this.#columns.push(column);\n        column.appendTo(this.#body);\n        this.#render();\n    }\n\n    insertColumn(column, index) {\n        if(!(column instanceof DataColumn)) {\n            column = new DataColumn({\n                ...column,\n                sortable: column.sortable !== false && this.#sortable\n            });\n        } else {\n            let cache = COLUMN_MAP.get(column);\n\n            if(cache) {\n                cache.parent.removeColumn(column);\n            }\n        }\n\n        this.#columns.splice(index, 0, column);\n        index = this.#columns.indexOf(column);\n        let after = this.#columns[index+1];\n\n        if(after) {\n            this.#body.insertBefore(column.element, after.element);\n        } else {\n            column.appendTo(this.#body);\n        }\n\n        this.#render();\n    }\n\n    insertColumnBefore(column, before) {\n        const index = this.getColumnIndex(before);\n\n        if(index !== -1) {\n            this.insertColumn(column, this.getColumnIndex(before));\n        } else {\n            throw new Error(\"Unknown column\");\n        }\n    }\n\n    insertColumnAfter(column, after) {\n        const index = this.getColumnIndex(after);\n\n        if(index !== -1) {\n            this.insertColumn(column, this.getColumnIndex(after) + 1);\n        } else {\n            throw new Error(\"Unknown column\");\n        }\n    }\n\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.#element);\n        } else if(selector.appendChild) {\n            selector.appendChild(this.#element);\n        } else {\n            selector.append(this.#element);\n        }\n    }\n\n    #render() {\n        this.#body.style.width = this.width + \"px\";\n    }\n\n    #initColumn(column) {\n        let cache = COLUMN_MAP.get(column);\n\n        if(cache) {\n            cache.parent.removeColumn(column);\n        }\n\n        cache = {};\n        COLUMN_MAP.set(column, cache);\n\n        cache.onResize = () => {\n            this.#render();\n        };\n\n        cache.onResizeComplete = () => {\n            this.#render();\n        };\n\n        cache.parent = this;\n\n        column.on('resize', cache.onResize);\n        column.on('resize-complete', cache.onResizeComplete);\n        this.#columnElementMap.set(column.element, column);\n\n        return column;\n    }\n\n    #destroyColumn(column) {\n        let cache = COLUMN_MAP.get(column);\n\n        if(cache) {\n            column.off('resize', cache.onResize);\n            column.off('resize-complete', cache.onResizeComplete);\n            COLUMN_MAP.delete(column);\n            this.#columnElementMap.delete(column.element);\n        }\n    }\n\n    #compileColumnListFromDom() {\n        let r = [];\n\n        for(let child of this.#body.children) {\n            let column = this.#columnElementMap.get(child);\n\n            if(column) {\n                r.push(column);\n            }\n        }\n\n        return r;\n    }\n\n    get width() {\n        let width = 0;\n\n        for(let column of this.#columns) {\n            width += column.width;\n        }\n\n        return width + 20;\n    }\n\n    get element() {\n        return this.#element;\n    }\n\n    get columns() {\n        return this.#columns.splice(0);\n    }\n}\n\n\nexport class DataColumn extends Publisher {\n    #element;\n    #body;\n    #resizer;\n    #resizeHandle;\n    #renderer;\n    #width;\n\n    constructor({label, resizeable=false, minWidth=0, maxWidth=Infinity, width=100, tableSort=false, dataSort=\"none\", renderer=null,\n                id=null, classes=null, attributes=null, data=null, sortable=false}) {\n        super();\n\n        this.#renderer = renderer || function(label) {\n            let body = document.createElement(\"div\");\n            body.innerHTML = label;\n            return body;\n        }\n\n        this.#element = document.createElement(\"div\");\n        this.#element.className = classes || '';\n        this.#element.classList.add(\"data-column\");\n        this.#body = this.#renderer.call(this, label);\n        this.#body.className = \"data-column__body\";\n        this.#element.appendChild(this.#body);\n        this.#width = width;\n        this.#element.style.width = `${width}px`;\n\n        if(id) {\n            this.#element.id = id;\n        }\n\n        if(attributes) {\n            for(let key of Object.keys(attributes)) {\n                this.#element.setAttribute(key, attributes[key]);\n            }\n        }\n\n        if(data) {\n            Object.assign(this.#element.dataset, data);\n        }\n\n        if(sortable) {\n            this.#element.classList.add('ui-sort-item');\n        }\n\n        this.#resizer = null;\n        this.#resizeHandle = null;\n\n        if(resizeable) {\n            this.#resizeHandle = document.createElement(\"div\");\n            this.#resizeHandle.className = \"ui-resize-handle no-sort no-drag\";\n            this.#resizeHandle.dataset.resize = \"right\";\n            this.#element.appendChild(this.#resizeHandle);\n\n            this.#resizer = new Resizeable(this.#element, {\n                minWidth,\n                maxWidth,\n                position: \"width\"\n            });\n\n            this.#resizer.on('resize-start', topic => {\n                this.#element.classList.add('no-sort');\n\n                this.publish(\"resize-start\", topic);\n            });\n\n            this.#resizer.on('resize', topic => {\n                topic.event.originalEvent.preventDefault();\n                this.#width = topic.rect.width;\n                this.publish(\"resize\", topic);\n            });\n\n            this.#resizer.on('resize-complete', topic => {\n                this.#element.classList.add(\"no-resize\");\n                this.#width = topic.rect.width;\n\n                setTimeout(() => {\n                    this.#element.classList.remove('no-sort');\n                    this.#element.classList.remove(\"no-resize\");\n                    this.publish(\"resize-complete\", topic);\n                }, 0);\n            });\n\n            this.#resizer.on(\"resize-cancel\", topic => {\n                this.publish(\"resize-cancel\", topic);\n            });\n        }\n\n        if(tableSort) {\n            this.#element.dataset.dataSort = dataSort;\n\n            this.#element.addEventListener(\"click\", e => {\n                if(e.target.closest(\".no-sort\")) {\n                    return;\n                }\n\n                let options = [\"none\", \"ascending\", \"descending\"],\n                    index = options.indexOf(this.#element.dataset.dataSort);\n\n                if(index === -1) {\n                    this.#element.dataset.dataSort = \"none\";\n                } else {\n                    this.#element.dataset.dataSort = options[(index+1) % options.length];\n                }\n\n                this.publish(\"data-sort\", {\n                    event: e,\n                    column: this,\n                    dataSort: this.#element.dataset.dataSort\n                });\n            });\n        }\n    }\n\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.#element);\n        } else if(selector.appendChild) {\n            selector.appendChild(this.#element);\n        } else {\n            selector.append(this.#element);\n        }\n    }\n\n    get width() {\n        return this.#width;\n    }\n\n    get element() {\n        return this.#element;\n    }\n\n    get parent() {\n        let cache = COLUMN_MAP.get(this);\n        return cache ? cache.parent : null;\n    }\n}\n"],"sourceRoot":""}