{"version":3,"sources":["webpack://pendora/webpack/universalModuleDefinition","webpack://pendora/webpack/bootstrap","webpack://pendora/./src/core/Animation.js","webpack://pendora/./src/core/data.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/position.js","webpack://pendora/./src/core/utility.js","webpack://pendora/./src/core/vectors.js","webpack://pendora/./src/ui/Draggable.js","webpack://pendora/./src/ui/Sortable.js","webpack://pendora/./tests/src/test_overlay.js"],"names":["linear","p","EASING","Animation","keyframe1","keyframe2","duration","onFrame","onCancel","onComplete","onPause","easing","status","_position","_start","_end","position","frame","key","hasOwnProperty","from","to","delta","subtract","add","multiply","Error","start","performance","now","end","lastFrame","running","stopFN","_stop","animation","t","Math","min","getFrame","window","requestAnimationFrame","stop","play","isRunning","uuid","prefix","random","replace","Data","expando","owner","cache","acceptData","nodeType","Object","defineProperty","value","configurable","prop","undefined","arguments","length","set","get","keys","isEmptyObject","privateCache","ExtendableError","message","name","constructor","captureStackTrace","stack","IndexError","KeyError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","regMatrix","getOffsetElement","element","o","parentElement","getComputedStyle","getBoundingOffsetRect","offsetParent","offsetRect","getBoundingClientRect","rect","Vec4","left","top","right","bottom","getBoundingDocumentRect","scrollX","scrollY","getTranslation","transform","m","exec","Vec3","data","split","parseFloat","setTranslation","x","y","z","style","getCssPosition","Vec2","parseInt","setCssPosition","setElementClientPosition","method","box","deltaX","deltaY","cssPosition","clientRectToDocumentSpace","r","fromRect","documentRectToClientSpace","snapToGrid","gridSize","roundingFunction","round","Number","isNaN","convertDomRectToObject","domRect","getPointOnElement","referenceElement","point","offset","constrain","document","querySelector","Array","isArray","clamp","getSubBoundingBox","width","height","getDistanceBetweenRects","rect1","rect2","vec1","vec2","isXOverlapping","isYOverlapping","abs","x1","y1","x2","y2","sqrt","pow","REG_WHITESPACE","minValue","maxValue","max","firstValue","args","item","all","iterable","any","proto","descriptor","placement","randomChoice","array","floor","arraysEqual","array1","array2","i","l","parseHTML","html","template","createElement","innerHTML","trim","content","fragment","createDocumentFragment","firstChild","appendChild","object","emptyElement","removeChild","addClasses","classes","classList","removeClasses","remove","setElementOffset","coords","getElementOffset","pageXOffset","pageYOffset","getScroll","isWindow","scrollLeft","scrollTop","variable","setInterval","setScroll","scroll","scrollTo","selectElement","selector","context","jquery","assert","condition","parseBooleanOrInt","radix","defaultValue","TypeError","type","parseBooleanOrFloat","parseBoolean","parseIntValue","parseFloatValue","parseAny","parsers","parser","e","validateChoice","choices","indexOf","choice","findChild","fn","child","filterChildren","push","getOwnProperty","obj","propName","getPropertyByPath","path","parts","part","vec4","vertex","vec3","toString","g","b","hex","a","cursor","clientX","clientY","boundingRect","clone","opacity","draggable","helper","cloneNode","_getScrollParent","scrollWidth","clientWidth","scrollHeight","clientHeight","_translate","target","CONTAINERS","client","innerHeight","innerWidth","viewport","parent","bb","_clampPositionToContainer","container","closest","TOLERANCE_FUNCTIONS","intersect","droppable","origin","Draggable","axis","exclude","delay","disabled","distance","handle","revert","droppables","tolerance","setHelperSize","grid","_onMouseDown","onMouseDown","bind","addDroppables","addEventListener","isDragging","_revertFX","concat","event","contains","excluded","preventDefault","doc","startMouseDocumentX","startMouseDocumentY","mouseDocumentX","mouseDocumentY","startDragging","startDrag","timer","onTimeout","removeEventListener","onMouseUp","clearTimeout","setTimeout","onMouseMove","startMouseX","startMouseY","posX","posY","cancel","getDropTargets","startBoundingBox","startBBDocument","scrollTick","boxSizing","startingTranslation","_offset","startingRect","_getPosition","dropData","_getDropData","intersectsBefore","intersectsAfter","CustomEvent","bubbles","detail","dispatchEvent","_triggerEvent","mouseX","mouseY","originalEvent","lastTick","timestamp","parentBB","helperBB","isOOB","translation","accepted","accept","isAccepted","startX","fx","dropped","_intersects","dataset","dropEvent","startingBoundingClientRect","relatedTarget","querySelectorAll","call","endingRect","dropBox","eventName","details","assign","placeholder","className","nodeName","Sortable","items","layout","dropOnEmpty","accepts","setPlaceholderSize","initEvents","isOver","init","initialize","onDragMove","onDragComplete","onSortAppend","startBB","insertBefore","destroy","matches","prototype","slice","getItems","filter","before","getItemBeforePoint","after","getItemAfterPoint","beforeBB","_refreshPositions","_triggerSortAppendEvent","nextSibling","mx","my","getRelativePosition","current","deltaLeft","deltaTop","test","draggableBox1","CLONE","draggableWindow1","draggableBox2","draggableScrollable","sortableGrid","sortableList1","sortableList2","backgroundColor","output","getElementById","innerText"],"mappings":"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","file":"test_overlay.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pendora\"] = factory();\n\telse\n\t\troot[\"pendora\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tests/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","/**\r\n * Simple animation library that transitions properties from keyframe 1 to keyframe 2 over the duration.\r\n *\r\n * This library doesn't directly handle animated elements.  Instead it takes two objects filled with properties.\r\n * During each frame the class constructs a new object filled with each property transitioned to the property at\r\n * the given position.  It then passes that object to the onFrame callback handler that is responsible for applying\r\n * the properties to the element.\r\n *\r\n * Example Usage:\r\n * let target = document.querySelector('#id');\r\n *\r\n * let animation = new Animation({opacity: 1}, (opacity: 0}, 1000, (frame) => {\r\n *      Object.assign(target.style, frame);\r\n * });\r\n *\r\n * @author Matthew J. Shockman\r\n */\r\n\r\n\r\n/**\r\n *\r\n * @param p\r\n * @returns {*}\r\n */\r\nexport function linear(p) {\r\n    return p;\r\n}\r\n\r\n\r\nexport const EASING = {\r\n    linear: linear\r\n};\r\n\r\n\r\nexport default class Animation {\r\n    /**\r\n     * @param keyframe1 The starting keyframe\r\n     * @param keyframe2 The ending keyframe\r\n     * @param duration The duration of the animation.\r\n     * @param onFrame Callback handle to handle \"drawing\" the frame.\r\n     * @param onCancel\r\n     * @param onComplete\r\n     * @param onPause\r\n     * @param easing An easing function.  Linear by default.\r\n     */\r\n    constructor(keyframe1, keyframe2, duration, {onFrame, onCancel, onComplete, onPause, easing='linear'}={}) {\r\n        this.keyframe1 = keyframe1;\r\n        this.keyframe2 = keyframe2;\r\n        this.easing = EASING[easing];\r\n        this.duration = duration;\r\n        this.onFrame = onFrame;\r\n        this.onComplete = onComplete;\r\n        this.onCancel = onCancel;\r\n        this.onPause = onPause;\r\n\r\n        this.status = 'pending';\r\n\r\n        // The current position pointer.\r\n        this._position = 0;\r\n\r\n        // The starting performance.now() timestamp.\r\n        this._start = null;\r\n\r\n        // When the animation should finish.  this._start + this.duration\r\n        this._end = null;\r\n    }\r\n\r\n    /**\r\n     * Returns the frame properties at the given position.\r\n     *\r\n     * Position given is decimal format where 1.0 is 100% and 0.0 is 0%.\r\n     * @param position\r\n     */\r\n    getFrame(position) {\r\n        let frame = {};\r\n\r\n        position = this.easing(position);\r\n\r\n        for(let key in this.keyframe2) {\r\n            if(this.keyframe2.hasOwnProperty(key)) {\r\n                let from = this.keyframe1[key],\r\n                    to = this.keyframe2[key];\r\n\r\n                if(typeof to === 'object') {\r\n                    let delta = to.subtract(from);\r\n                    frame[key] = from.add(delta.multiply(delta));\r\n                } else {\r\n                    let delta = to - from;\r\n                    frame[key] = from + (position * delta);\r\n                }\r\n            }\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    /**\r\n     * Starts the animation.\r\n     */\r\n    play() {\r\n        if(this.status === 'canceled') {\r\n            throw new Error(\"Animation as been canceled\");\r\n        }\r\n\r\n        let start = performance.now(),\r\n            end = start + (this.duration - (this.duration * this._position)),\r\n            lastFrame = null;\r\n\r\n        this._start = start;\r\n        this._end = end;\r\n        this.status = 'running';\r\n\r\n        let running = true;\r\n\r\n        let stopFN = () => {\r\n            running = false;\r\n            this._stop = null;\r\n            this.status = 'paused';\r\n\r\n            if(this.onPause) {\r\n                this.onPause({\r\n                    animation: this,\r\n                    frame: lastFrame\r\n                });\r\n            }\r\n        };\r\n\r\n        this._stop = stopFN;\r\n\r\n        let frame = (t) => {\r\n            if(running) {\r\n                this._position = Math.min(1, (t-this._start) / (this._end - this._start));\r\n                lastFrame = this.getFrame(this._position);\r\n\r\n                this.onFrame({\r\n                    animation: this,\r\n                    frame: lastFrame\r\n                });\r\n\r\n                if(this._position >= 1) {\r\n                    this.status = 'complete';\r\n                    this._start = null;\r\n                    this._end = null;\r\n\r\n                    if(this._stop === stopFN) {\r\n                        this._stop = null;\r\n                    }\r\n\r\n                    if(this.onComplete) {\r\n                        window.requestAnimationFrame(() => {\r\n                            this.onComplete({\r\n                                animation: this,\r\n                                frame: lastFrame\r\n                            });\r\n                        });\r\n                    }\r\n                } else {\r\n                    window.requestAnimationFrame(frame);\r\n                }\r\n            }\r\n        };\r\n\r\n        window.requestAnimationFrame(frame);\r\n    }\r\n\r\n    /**\r\n     * Stop the current animation.\r\n     */\r\n    stop() {\r\n        if(this._stop) {\r\n            this._stop();\r\n        }\r\n    }\r\n\r\n    cancel() {\r\n        this.stop();\r\n        this.status = 'canceled';\r\n\r\n        if(this.onCancel) {\r\n            this.onCancel({\r\n                animation: this\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Restart the animation.\r\n     */\r\n    restart() {\r\n        this.stop();\r\n        this._position = 0;\r\n        this.play();\r\n    }\r\n\r\n    /**\r\n     * Set the position pointer.\r\n     *\r\n     * @param position\r\n     */\r\n    goto(position) {\r\n        if(this.isRunning) {\r\n            this.stop();\r\n            this._position = position;\r\n            this.play();\r\n        } else {\r\n            this._position = position;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if the animation is running.\r\n     * @returns {boolean}\r\n     */\r\n    get isRunning() {\r\n        return !!this._stop;\r\n    }\r\n}\r\n","import {isEmptyObject} from \"./utility\";\r\n\r\n\r\nlet uuid = 1,\r\n    prefix = 'p-' + (''+Math.random()).replace(/\\D/g, '');\r\n\r\n\r\nexport class Data {\r\n    constructor() {\r\n        this.expando = `${prefix}-${uuid++}`;\r\n    }\r\n\r\n    static acceptData(owner) {\r\n        return owner.nodeType === 1 || owner.nodeType === 9 || !(+owner.nodeType);\r\n    }\r\n\r\n    cache(owner) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) {\r\n            cache = {};\r\n\r\n            if(Data.acceptData(owner)) {\r\n                if(owner.nodeType) {\r\n                    owner[this.expando] = cache;\r\n                } else {\r\n                    Object.defineProperty(owner, this.expando, {\r\n                        value: cache,\r\n                        configurable: true\r\n                    });\r\n                }\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    set(owner, key, value) {\r\n        let cache = this.cache(owner);\r\n\r\n        if(typeof key === 'object') {\r\n            for(let prop in key) {\r\n                cache[prop] = key[prop];\r\n            }\r\n        } else {\r\n            cache[key] = value;\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    get(owner, key) {\r\n        if(key === undefined) {\r\n            return this.cache(owner);\r\n        } else {\r\n            let cache = owner[this.expando];\r\n\r\n            if(cache) {\r\n                return cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    access(owner, key, value) {\r\n        if(arguments.length === 2) {\r\n            if(typeof key === 'object') {\r\n                return this.set(owner, key);\r\n            } else {\r\n                return this.get(owner, key);\r\n            }\r\n        } else if(arguments.length === 1) {\r\n            return this.cache(owner);\r\n        } else if(arguments.length === 3) {\r\n            return this.set(owner, key, value);\r\n        }\r\n    }\r\n\r\n    remove(owner, ...keys) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) return;\r\n\r\n        if(arguments.length === 1) {\r\n            if(owner.nodeType) {\r\n                owner[this.expando] = undefined;\r\n            } else {\r\n                delete owner[this.expando];\r\n            }\r\n        } else {\r\n            for(let key of keys) {\r\n                delete cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    hasData(owner) {\r\n        let cache = owner[this.expando];\r\n        return cache && !isEmptyObject(cache);\r\n    }\r\n}\r\n\r\n\r\nexport let privateCache = new Data();","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n","import {Vec2, Vec3, Vec4} from \"./vectors\";\r\nimport {clamp} from \"./utility\";\r\n\r\n\r\nconst regMatrix = /matrix(3d)?\\(([^)]+)\\)/;\r\n\r\n\r\n/**\r\n * Returns the elements offset parent.\r\n *\r\n * @param element\r\n * @returns {HTMLElement}\r\n */\r\nexport function getOffsetElement(element) {\r\n    let o = element.parentElement;\r\n\r\n    while(o) {\r\n        let position = getComputedStyle(o).position;\r\n        if(position !== 'static') return o;\r\n        o = o.parentElement;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns a bounding rect who's positions are relative to the provided offsetParent.\r\n * If offsetParent is null then the targets natural offsetParent is used as returned by the getOffsetElement function.\r\n * @param element\r\n * @param offsetParent\r\n * @returns {{top: number, left: number, bottom: number, width: number, right: number, height: number}}\r\n */\r\nexport function getBoundingOffsetRect(element, offsetParent=null) {\r\n    if(!offsetParent) offsetParent = getOffsetElement(element);\r\n\r\n    let offsetRect = offsetParent.getBoundingClientRect(),\r\n        rect = element.getBoundingClientRect();\r\n\r\n    return new Vec4(\r\n        rect.left - offsetRect.left,\r\n        rect.top - offsetRect.top,\r\n        rect.right - offsetRect.right,\r\n        rect.bottom - offsetRect.bottom\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns a bounding rect who's positions are relative to the document.\r\n * @param element\r\n * @returns {{top: number, left: number, bottom: number, width: number, x: number, y: number, right: number, height: number}}\r\n */\r\nexport function getBoundingDocumentRect(element) {\r\n    let rect = element.getBoundingClientRect();\r\n\r\n    return new Vec4(\r\n        rect.left + window.scrollX,\r\n        rect.top + window.scrollY,\r\n        rect.right + window.scrollX,\r\n        rect.bottom + window.scrollY\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns the css translation from the transformation matrix applied to the element.\r\n *\r\n * @param element\r\n * @returns {Vec3}\r\n */\r\nexport function getTranslation(element) {\r\n    let transform = getComputedStyle(element).transform,\r\n        m = regMatrix.exec(transform);\r\n\r\n    if(!m) {\r\n        return new Vec3(\r\n            0,\r\n            0,\r\n            0\r\n        );\r\n    }\r\n\r\n    let data = m[2].split(/\\s*,\\s*/);\r\n\r\n    if(m[1]) {\r\n        return new Vec3(\r\n            parseFloat(data[12]),\r\n            parseFloat(data[13]),\r\n            parseFloat(data[14])\r\n        );\r\n    } else {\r\n        return new Vec3(\r\n            parseFloat(data[4]),\r\n            parseFloat(data[5]),\r\n            0\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets the element's transformation matrix to 2d translate with the specified left and top properties.\r\n *\r\n * @param element\r\n * @param x\r\n * @param y\r\n * @param z\r\n */\r\nexport function setTranslation(element, {x, y, z=null}) {\r\n    if(z !== null) {\r\n        element.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;\r\n    } else {\r\n        element.style.transform = `translate(${x}px, ${y}px)`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Gets the elements left and top style properties as numbers.\r\n *\r\n * @param element\r\n * @returns {Vec2}\r\n */\r\nexport function getCssPosition(element) {\r\n    let style = getComputedStyle(element);\r\n\r\n    return new Vec2(\r\n        parseInt(style.left, 10),\r\n        parseInt(style.top, 10)\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Sets the left and top style properties of an element.  If the element is positioned statically it will be changed to\r\n * relative.\r\n *\r\n * @param element\r\n * @param left\r\n * @param top\r\n */\r\nexport function setCssPosition(element, {left=null, top=null}) {\r\n    let style = getComputedStyle(element);\r\n\r\n    if(style.position === 'static') {\r\n        style.position = 'relative';\r\n    }\r\n\r\n    if(left !== null && left !== undefined) {\r\n        element.style.left = `${left}px`;\r\n    }\r\n\r\n    if(top !== null && top !== undefined) {\r\n        element.style.top = `${top}px`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets the elements position relative to the client window.  The `method` parameter controls how the elements position\r\n * is modified.  The options are 'position' and 'translate'.  Position uses the standard left and top properties of the\r\n * elements style.  'translate' uses the transform property.\r\n *\r\n * @param element\r\n * @param position\r\n * @param method\r\n */\r\nexport function setElementClientPosition(element, position, method='position') {\r\n    let box = element.getBoundingClientRect(),\r\n        deltaX = position.left - box.left,\r\n        deltaY = position.top - box.top;\r\n\r\n    if(method === 'position') {\r\n        let cssPosition = getCssPosition(element);\r\n\r\n        setCssPosition(element, {\r\n            left: cssPosition.left + deltaX,\r\n            top: cssPosition.top + deltaY\r\n        });\r\n    } else if(method === 'translate') {\r\n        let cssPosition = getTranslation(element);\r\n\r\n        setTranslation(element, {\r\n            x: cssPosition.x + deltaX,\r\n            y: cssPosition.y + deltaY\r\n        });\r\n    } else if(method === 'translate3d') {\r\n        let cssPosition = getTranslation(element);\r\n\r\n        setTranslation(element, {\r\n            x: cssPosition.x + deltaX,\r\n            y: cssPosition.y + deltaY,\r\n            z: cssPosition.z\r\n        });\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Transforms the coordinates of a BoundingClientRect like object from client space to document space.\r\n * @param rect\r\n */\r\nexport function clientRectToDocumentSpace(rect) {\r\n    let r = Vec4.fromRect(rect);\r\n\r\n    r.left += window.scrollX;\r\n    r.right += window.scrollX;\r\n    if(typeof r.top === 'number') r.top += window.scrollY;\r\n    if(typeof r.bottom === 'number') r.bottom += window.scrollY;\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Transforms the coordinates of a BoundingClientRect like object from document space to client space.\r\n * @param rect\r\n */\r\nexport function documentRectToClientSpace(rect) {\r\n    let r = Vec4.fromRect(rect);\r\n\r\n    r.left -= window.scrollX;\r\n    r.right -= window.scrollX;\r\n    if(typeof r.top === 'number') r.top -= window.scrollY;\r\n    if(typeof r.bottom === 'number') r.bottom -= window.scrollY;\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Snaps the value to the specified grid using the provided rounding function.\r\n * @param value\r\n * @param gridSize\r\n * @param roundingFunction\r\n * @returns {number|*}\r\n */\r\nexport function snapToGrid(value, gridSize, roundingFunction=Math.round) {\r\n    if(gridSize !== null && gridSize !== undefined && !Number.isNaN(gridSize)) {\r\n        return roundingFunction(value / gridSize) * gridSize;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Deprecated in favor of calling Vec4.fromRect() class method.\r\n *\r\n * @deprecated\r\n * @param domRect\r\n * @returns {Vec4}\r\n */\r\nexport function convertDomRectToObject(domRect) {\r\n    return Vec4.fromRect(domRect);\r\n}\r\n\r\n\r\n/**\r\n * Returns the {x, y} point calculated relative to the reference element.\r\n *\r\n * @param referenceElement\r\n * @param point\r\n * @param offset\r\n * @param constrain\r\n * @returns {Vec2}\r\n */\r\nexport function getPointOnElement(referenceElement, point, offset=null, constrain=null) {\r\n    let rect = referenceElement;\r\n\r\n    if(rect.getBoundingClientRect) {\r\n        rect = rect.getBoundingClientRect();\r\n    }\r\n\r\n    if(constrain) {\r\n        if (typeof constrain === 'string') {\r\n            constrain = document.querySelector(constrain);\r\n        }\r\n\r\n        if (constrain.getBoundingClientRect) {\r\n            constrain = Vec4.fromRect(constrain.getBoundingClientRect());\r\n        }\r\n    }\r\n\r\n    // Convert array to {x, y} object.\r\n    if(Array.isArray(point)) {\r\n        point = {\r\n            x: point[0],\r\n            y: point[1]\r\n        };\r\n    } else if(typeof point === 'string') {\r\n        if(point === 'top-left') {\r\n            point = {x: 0, y: 0};\r\n        } else if(point === 'top') {\r\n            point = {x: '50%', y: 0};\r\n        } else if(point === 'top-right') {\r\n            point = {x: '100%', y: 0};\r\n        } else if(point === 'right') {\r\n            point = {x: '100%', y: '50%'};\r\n        } else if(point === 'bottom-right') {\r\n            point = {x: '100%', y: '100%'};\r\n        } else if(point === 'bottom') {\r\n            point = {x: '50%', y: '100%'};\r\n        } else if(point === 'bottom-left') {\r\n            point = {x: 0, y: '100%'};\r\n        } else if(point === 'left') {\r\n            point = {x: 0, y: '50%'};\r\n        } else if(point === 'middle') {\r\n            point = {x: '50%', y: '50%'};\r\n        } else {\r\n            throw new Error(`Unknown point option ${point}`);\r\n        }\r\n    }\r\n\r\n    if(typeof point.x === 'string') {\r\n        point.x = (rect.right - rect.left) * (parseFloat(point.x) / 100);\r\n    }\r\n\r\n    if(typeof point.y === 'string') {\r\n        point.y = (rect.bottom - rect.top) * (parseFloat(point.y) / 100);\r\n    }\r\n\r\n    if(constrain) {\r\n        if(typeof constrain.left === 'string') {\r\n            constrain.left = (rect.right - rect.left) * (parseFloat(constrain.left) / 100);\r\n        }\r\n\r\n        if(typeof constrain.right === 'string') {\r\n            constrain.right = (rect.right - rect.left) * (parseFloat(constrain.right) / 100);\r\n        }\r\n\r\n        if(typeof constrain.top === 'string') {\r\n            constrain.top = (rect.bottom - rect.top) * (parseFloat(constrain.top) / 100);\r\n        }\r\n\r\n        if(typeof constrain.bottom === 'string') {\r\n            constrain.bottom = (rect.bottom - rect.top) * (parseFloat(constrain.bottom) / 100);\r\n        }\r\n\r\n        point.x = clamp(point.x, constrain.left, constrain.right);\r\n        point.y = clamp(point.y, constrain.top, constrain.bottom);\r\n    }\r\n\r\n    if(offset) {\r\n        if(Array.isArray(offset)) {\r\n            offset = {\r\n                x: offset[0],\r\n                y: offset[1]\r\n            };\r\n        }\r\n\r\n        if(offset.x !== null) {\r\n            point.x += offset.x;\r\n        }\r\n\r\n        if(offset.y !== null) {\r\n            point.y += offset.y;\r\n        }\r\n    }\r\n\r\n    return new Vec2(rect.left + point.x, rect.top + point.y);\r\n}\r\n\r\n\r\n/**\r\n * Gets the bounding client rect for a rectangle defined by the position rectangle with left, top, right and bottom\r\n * properties relative to the element's position.\r\n *\r\n * @param element {{getBoundingClientRect}|Element|String|{left, top, right, bottom}}\r\n * @param position {{left, top, bottom, right}}\r\n * @return {Vec4}\r\n */\r\nexport function getSubBoundingBox(element, position) {\r\n    let rect;\r\n\r\n    // Get the bounding client rect of the element.   The user should have passed either a css selector, an object with a\r\n    // getBoundingClientRect interface.  Or a bounding client rect directly.\r\n    if(element.getBoundingClientRect) {\r\n        rect = element.getBoundingClientRect();\r\n    } else if(typeof element === 'string') {\r\n        rect = document.querySelector(element).getBoundingClientRect();\r\n    } else {\r\n        rect = element;\r\n    }\r\n\r\n    let width = rect.right - rect.left,\r\n        height = rect.bottom - rect.top;\r\n\r\n    // The user can pass a vec4 with left, top, right and bottom properties.  The value can either be the desired\r\n    // coordinates relative to the top-left corner of the reference element or a percentage.  Another possibility\r\n    // is that the user passes one of the keyword properties that coorispond to a specific section of the element.\r\n    // Map those keywords to their rectangle.\r\n    if(typeof position === 'string') {\r\n        if(position === 'border-top') {\r\n            position = {left: 0, right: '100%', top: 0, bottom: 0};\r\n        } else if(position === 'border-right') {\r\n            position = {left: '100%', right: '100%', top: 0, bottom: '100%'};\r\n        } else if(position === 'border-bottom') {\r\n            position = {left: 0, right: '100%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'border-left') {\r\n            position = {left: 0, top: 0, right: 0, bottom: '100%'};\r\n        } else if(position === 'top-left') {\r\n            position = {left: 0, top: 0, right: 0, bottom: 0};\r\n        } else if(position === 'top') {\r\n            position = {top: 0, left: '50%', right: '50%', bottom: 0};\r\n        } else if(position === 'top-right') {\r\n            position = {top: 0, left: '100%', right: '100%', bottom: 0};\r\n        } else if(position === 'left') {\r\n            position = {left: 0, top: '50%', bottom: '50%', right: 0};\r\n        } else if(position === 'origin') {\r\n            position = {left: '50%', right: '50%', top: '50%', bottom: '50%'};\r\n        } else if(position === 'bottom-left') {\r\n            position = {left: 0, right: 0, top: '100%', bottom: '100%'};\r\n        } else if(position === 'bottom') {\r\n            position = {left: '50%', right: '50%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'bottom-right') {\r\n            position = {left: '100%', right: '100%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'right') {\r\n            position = {left: '100%', right: '100%', top: '50%', bottom: '50%'};\r\n        }\r\n    }\r\n\r\n    position.left = position.left || 0;\r\n    position.right = position.right || 0;\r\n    position.top = position.top || 0;\r\n    position.bottom = position.bottom || 0;\r\n\r\n    // left and right percentages are a percentage of the elements width.\r\n    // top and bottom percentages are a percentage of the elements height.\r\n    if(typeof position.left === 'string') {\r\n        position.left = (parseFloat(position.left) / 100) * width;\r\n    }\r\n\r\n    if(typeof position.right === 'string') {\r\n        position.right = (parseFloat(position.right) / 100) * width;\r\n    }\r\n\r\n    if(typeof position.bottom === 'string') {\r\n        position.bottom = (parseFloat(position.bottom) / 100) * height;\r\n    }\r\n\r\n    if(typeof position.top === 'string') {\r\n        position.top = (parseFloat(position.top) / 100) * height;\r\n    }\r\n\r\n    // Convert to client space.\r\n    return new Vec4(\r\n        rect.left + position.left,\r\n        rect.top + position.top,\r\n        rect.left + position.right,\r\n        rect.top + position.bottom\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns the distance in between the provided Vec4 objects.  If the objects are touching or overlapping 0\r\n * will be returned.\r\n *\r\n * @param rect1 {{left, top, right, bottom}}\r\n * @param rect2 {{left, top, right, bottom}}\r\n * @returns {Number}\r\n */\r\nexport function getDistanceBetweenRects(rect1, rect2) {\r\n    let vec1 = Vec4.fromRect(rect1),\r\n        vec2 = Vec4.fromRect(rect2);\r\n\r\n    let isXOverlapping = vec1.isXOverlapping(vec2),\r\n        isYOverlapping = vec1.isYOverlapping(vec2);\r\n\r\n    if(isXOverlapping && isYOverlapping) {\r\n        // Items are overlapping\r\n        return 0;\r\n    } else if(isXOverlapping) {\r\n        return Math.min(\r\n            Math.abs(vec1.bottom - vec2.top),\r\n            Math.abs(vec1.top - vec2.bottom)\r\n        );\r\n    } else if(isYOverlapping) {\r\n        return Math.min(\r\n            Math.abs(vec1.right - vec2.left),\r\n            Math.abs(vec1.left - vec2.right)\r\n        );\r\n    } else {\r\n        let x1, y1, x2, y2;\r\n\r\n        if(vec1.right <= vec2.left) {\r\n            x1 = vec1.right;\r\n            x2 = vec2.left;\r\n        } else {\r\n            x1 = vec1.left;\r\n            x2 = vec2.right;\r\n        }\r\n\r\n        if(vec1.bottom <= vec2.top) {\r\n            y1 = vec1.bottom;\r\n            y2 = vec2.top;\r\n        } else {\r\n            y1 = vec1.top;\r\n            y2 = vec2.bottom;\r\n        }\r\n\r\n        // Use distance formula to calculate distance.\r\n        return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n    }\r\n}","import {AssertionError} from './errors';\r\nconst REG_WHITESPACE = /\\s+/;\r\n\r\n\r\n/**\r\n * Clamps a value between a minimum and maximum values.\r\n * @param value\r\n * @param minValue\r\n * @param maxValue\r\n * @returns {*}\r\n */\r\nexport function clamp(value, minValue=null, maxValue=null) {\r\n    if(minValue !== null) {\r\n        value = Math.max(value, minValue);\r\n    }\r\n\r\n    if(maxValue !== null) {\r\n        value = Math.min(value, maxValue);\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns the first none null or undefined value.\r\n * @param args\r\n */\r\nexport function firstValue(args) {\r\n    for(let item of args) {\r\n        if(item !== null && item !== undefined) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if all of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function all(iterable) {\r\n    for(let item of iterable) {\r\n        if(!item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if any of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function any(iterable) {\r\n    for(let item of iterable) {\r\n        if(item) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\nexport function proto(descriptor) {\r\n    descriptor.placement = \"prototype\";\r\n    return descriptor;\r\n}\r\n\r\n\r\n/**\r\n * Returns a random value from an array.\r\n * @param array\r\n * @returns {*}\r\n */\r\nexport function randomChoice(array) {\r\n    return array[Math.floor(Math.random()*array.length)];\r\n}\r\n\r\n\r\n/**\r\n * Checks to see if 2 arrays are \"equal\".\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arraysEqual(array1, array2) {\r\n    if(array1 === array2) return true; // The same object.\r\n    if(array1 == null || array2 == null) return false;\r\n    if(array1.length !== array2.length) return false;\r\n\r\n    for(let i = 0, l = array1.length; i < l; i++) {\r\n        if(array1[i] !== array2[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Parses an html string into a document fragment.\r\n *\r\n * @param html\r\n * @return {DocumentFragment}\r\n */\r\nexport function parseHTML(html) {\r\n    let template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    if(template.content) {\r\n        return template.content;\r\n    } else {\r\n        // Doesn't support template tag.\r\n        let fragment = document.createDocumentFragment();\r\n        while(template.firstChild) fragment.appendChild(template.firstChild);\r\n        return fragment;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Tests to see if the object is empty.\r\n *\r\n * @param object\r\n * @return {boolean}\r\n */\r\nexport function isEmptyObject(object) {\r\n    // noinspection LoopStatementThatDoesntLoopJS\r\n    for(let key in object) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Empties a dom element.\r\n *\r\n * @param element\r\n */\r\nexport function emptyElement(element) {\r\n    while(element.firstChild) element.removeChild(element.firstChild);\r\n}\r\n\r\n\r\n/**\r\n * Adds classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function addClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.add(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Removes classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function removeClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.remove(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Sets an elements position relative to the document.\r\n *\r\n * @param element\r\n * @param coords\r\n */\r\nexport function setElementOffset(element, coords) {\r\n    if(coords.nodeType) {\r\n        coords = getElementOffset(element);\r\n    } else if(Array.isArray(coords)) {\r\n        coords = {\r\n            left: coords.left,\r\n            top: coords.top\r\n        };\r\n    }\r\n\r\n    let offset = element.getBoundingClientRect();\r\n\r\n    let style = getComputedStyle(element),\r\n        left = parseInt(style.left, 10) || 0,\r\n        top = parseInt(style.top, 10) || 0;\r\n\r\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\r\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\r\n}\r\n\r\n\r\n/**\r\n * Returns the top and left position of an element relative to the document.\r\n *\r\n * @param element\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getElementOffset(element) {\r\n    let box = element.getBoundingClientRect();\r\n\r\n    return {\r\n        left: box.left + window.pageXOffset,\r\n        top: box.top + window.pageYOffset\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Normalizing accessing scroll position for an element.\r\n *\r\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\r\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\r\n * @param element\r\n * @returns {{left, top}}\r\n */\r\nexport function getScroll(element) {\r\n    if(isWindow(element)) {\r\n        return {\r\n            scrollLeft: element.pageXOffset,\r\n            scrollTop: element.pageYOffset\r\n        };\r\n    } else {\r\n        return {\r\n            scrollLeft: element.scrollLeft,\r\n            scrollTop: element.scrollTop\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Test to see if the variable is a window.\r\n * @param variable\r\n * @returns {boolean}\r\n */\r\nexport function isWindow(variable) {\r\n    return variable && typeof variable === 'object' && setInterval in variable;\r\n}\r\n\r\n\r\n/**\r\n * Normalizes setting a scroll position for an element.\r\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\r\n * This methods normalizes them.\r\n * @param element - The element to scroll\r\n * @param scroll - An object with a left or a top property or both.\r\n */\r\nexport function setScroll(element, scroll) {\r\n    if(element.scrollTo) {\r\n        element.scrollTo(scroll);\r\n    } else {\r\n        element.scrollLeft = scroll.left;\r\n        element.scrollTop = scroll.top;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Matches a single dom element based on the given selector.\r\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\r\n * If a css selector is passed it will query for the element.\r\n * If a jquery object is passed it will return the first matched element.\r\n * If an element is passed it will return that element.\r\n *\r\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\r\n * Otherwise the context will be the document.\r\n *\r\n * @param selector\r\n * @param context\r\n * @returns {Element|Document|DocumentFragment}\r\n */\r\nexport function selectElement(selector, context=null) {\r\n    if(!context) {\r\n        context = document;\r\n    } else {\r\n        context = selectElement(context);\r\n    }\r\n\r\n    if(typeof selector === 'string') {\r\n        return context.querySelector(selector);\r\n    } else if(selector.jquery) {\r\n        return selector[0];\r\n    } else if(selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\r\n        return selector;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if(!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a integer.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrInt(value, radix=10, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a float.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrFloat(value, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts for parse a boolean value from a string.  Returns the defaultValue on failure if provided.  Otherwise throws\r\n * a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|*}\r\n */\r\nexport function parseBoolean(value, defaultValue=TypeError) {\r\n    if(typeof value === 'boolean') {\r\n        return value;\r\n    } else if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    } else {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseIntValue(value, radix=10, defaultValue=TypeError) {\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into integer.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseFloatValue(value, defaultValue=TypeError) {\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into float.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Runs multiple parsers and returns the first one that doesn't throw a TypeError.\r\n * @param value\r\n * @param parsers\r\n * @returns {*}\r\n */\r\nexport function parseAny(value, ...parsers) {\r\n    for(let parser of parsers) {\r\n        try {\r\n            return parser(value);\r\n        } catch(e) {\r\n            if(!(e instanceof TypeError)) {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\n    throw new TypeError(\"Could not parse value.\");\r\n}\r\n\r\n\r\n/**\r\n * Validates that the value is one of the given choices.\r\n * @param value\r\n * @param choices\r\n * @param defaultValue\r\n * @returns {TypeErrorConstructor|*}\r\n */\r\nexport function validateChoice(value, choices, defaultValue=TypeError) {\r\n    if(choices.indexOf(value) === -1) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Invalid choice.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nexport function choice(...args) {\r\n    return function(value) {\r\n        if(args.indexOf(value) === -1) {\r\n            throw new TypeError(\"Invalid Choice\");\r\n        }\r\n\r\n        return value;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns first child element that matches the test function.\r\n * @param element - Parent element\r\n * @param fn - Test Function\r\n * @returns {Element}\r\n */\r\nexport function findChild(element, fn) {\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            return child;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a filtered list of element from the children that match the test function.\r\n * @param element - Parent element.\r\n * @param fn - Test function.\r\n * @returns {Array}\r\n */\r\nexport function filterChildren(element, fn) {\r\n    let r = [];\r\n\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            r.push(child);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Returns the object own property or the default value if it does not have that property.\r\n * @param obj\r\n * @param propName\r\n * @param defaultValue\r\n * @returns {*}\r\n */\r\nexport function getOwnProperty(obj, propName, defaultValue=undefined) {\r\n    if(obj.hasOwnProperty(propName)) {\r\n        return obj[propName];\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the obj value by following it's property path.  For example getPropertyByPath(a, 'b.c.d') is equivalent to\r\n * a.b.c.d but can be passed in string form.\r\n * @param obj\r\n * @param path\r\n * @returns {*}\r\n */\r\nexport function getPropertyByPath(obj, path) {\r\n    let parts = path.split('.'),\r\n        r = obj;\r\n\r\n    for(let part of parts) {\r\n        r = r[part];\r\n    }\r\n\r\n    return r;\r\n}\r\n","import {clamp} from './utility';\r\n\r\n\r\n/**\r\n * Stores a 2 value Vector.\r\n */\r\nexport class Vec2 {\r\n    constructor(x=0, y=0) {\r\n        this[0] = x;\r\n        this[1] = y;\r\n    }\r\n\r\n    add(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] + vec2,\r\n                this[1] + vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] + vec2[0],\r\n                this[1] + vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] - vec2,\r\n                this[1] - vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] - vec2[0],\r\n                this[1] - vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    multiply(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] * vec2,\r\n                this[1] * vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] * vec2[0],\r\n                this[1] * vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    divide(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] / vec2,\r\n                this[1] / vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] / vec2[0],\r\n                this[1] / vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    mod(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] % vec2,\r\n                this[1] % vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] % vec2[0],\r\n                this[1] % vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    equals(vec2) {\r\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n        }\r\n    }\r\n\r\n    clone() {\r\n        return Vec2(this[0], this[1]);\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this[0];\r\n    }\r\n\r\n    set width(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get height() {\r\n        return this[1];\r\n    }\r\n\r\n    set height(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    toTranslate() {\r\n        return `translate(${this.x}px, ${this.y}px)`;\r\n    }\r\n\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\r\n    }\r\n\r\n    clamp(vec4) {\r\n        return new Vec2(\r\n            clamp(this.left, vec4.left, vec4.right),\r\n            clamp(this.top, vec4.top, vec4.bottom)\r\n        );\r\n    }\r\n\r\n    static fromVertex(vertex) {\r\n        if(Array.isArray(vertex)) {\r\n            return new Vec2(vertex[0], vertex[1]);\r\n        } else if(vertex.hasOwnProperty('left')) {\r\n            return new Vec2(vertex.left, vertex.top);\r\n        } else {\r\n            return new Vec2(vertex.x, vertex.y);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Stores a 3 value vector.\r\n */\r\nexport class Vec3 {\r\n    constructor(x=0, y=0, z=0) {\r\n        this[0] = x;\r\n        this[1] = y;\r\n        this[2] = z;\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get z() {\r\n        return this[2];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set z(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n            this[2] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n            this[2] = value[2];\r\n        }\r\n    }\r\n\r\n    add(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] + vec3,\r\n                this[1] + vec3,\r\n                this[2] + vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] + vec3[0],\r\n                this[1] + vec3[1],\r\n                this[2] + vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] - vec3,\r\n                this[1] - vec3,\r\n                this[2] - vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] - vec3[0],\r\n                this[1] - vec3[1],\r\n                this[2] - vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    divide(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] / vec3,\r\n                this[1] / vec3,\r\n                this[2] / vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] / vec3[0],\r\n                this[1] / vec3[1],\r\n                this[2] / vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    multiply(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] * vec3,\r\n                this[1] * vec3,\r\n                this[2] * vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] * vec3[0],\r\n                this[1] * vec3[1],\r\n                this[2] * vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    equals(vec3) {\r\n        return vec3 === this || (vec3[0] === this[0] && vec3[1] === this[1] && vec3[2] === this[2]);\r\n    }\r\n\r\n    mod(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] % vec3,\r\n                this[1] % vec3,\r\n                this[2] % vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] % vec3[0],\r\n                this[1] % vec3[1],\r\n                this[2] % vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    clone() {\r\n        return new Vec3(this[0], this[1], this[2]);\r\n    }\r\n\r\n    toHex() {\r\n        let r = this.r.toString(16),\r\n            g = this.g.toString(16),\r\n            b = this.b.toString(16);\r\n\r\n        return `#${r}${g}${b}`;\r\n    }\r\n\r\n    toRGB() {\r\n        return `rgb(${this.r}, ${this.g}, ${this.b})`;\r\n    }\r\n\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, ${this.z}px)`;\r\n    }\r\n\r\n    static fromHex(hex) {\r\n        let m = /^#?([0-9a-f]{3})$/i.exec(hex);\r\n\r\n        if(m) {\r\n            hex = m[1][0] + m[1][0] + m[1][1] + m[1][1] + m[1][2] + m[1][2];\r\n        } else {\r\n            m = /^#?([0-9a-f]{6})$/i.exec(hex);\r\n\r\n            if(m) {\r\n                hex = m[1];\r\n            } else {\r\n                throw new Error(`Could not parse value ${hex}`);\r\n            }\r\n        }\r\n\r\n        hex = parseInt(hex, 16);\r\n\r\n        // r, g, b\r\n        return new Vec3(\r\n            hex & 0xff0000 >> 16,\r\n            hex & 0x00ff00 >> 8,\r\n            hex & 0x0000ff\r\n        );\r\n    }\r\n\r\n    static fromRGB(value) {\r\n        let m = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgb value ${value}`);\r\n        }\r\n\r\n        return new Vec3(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Class to store a 4 value vector.\r\n * Provides DOMRect interface.\r\n */\r\nexport class Vec4 {\r\n    /**\r\n     * r, g, b, a\r\n     * left, top, right, bottom\r\n     *\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     */\r\n    constructor(left, top, right, bottom) {\r\n        this[0] = left;\r\n        this[1] = top;\r\n        this[2] = right;\r\n        this[3] = bottom;\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    get x() {\r\n        return this.left;\r\n    }\r\n\r\n    get y() {\r\n        return this.top;\r\n    }\r\n\r\n    set x(value) {\r\n        this.left = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this.top = value;\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get right() {\r\n        return this[2];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[3];\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set right(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set bottom(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get a() {\r\n        return this[3];\r\n    }\r\n\r\n    set a(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n            this[2] = value;\r\n            this[3] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n            this[2] = value[2];\r\n            this[3] = value[3];\r\n        }\r\n    }\r\n\r\n    add(rect) {\r\n        if(typeof rect === 'number') {\r\n            return new Vec4(\r\n                this[0] + rect,\r\n                this[1] + rect,\r\n                this[2] + rect,\r\n                this[3] + rect\r\n            );\r\n        } else {\r\n            return new Vec4(\r\n                this[0] + rect[0],\r\n                this[1] + rect[1],\r\n                this[2] + rect[2],\r\n                this[3] + rect[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(rect) {\r\n        if(typeof rect === 'number') {\r\n            return new Vec4(\r\n                this[0] - rect,\r\n                this[1] - rect,\r\n                this[2] - rect,\r\n                this[3] - rect\r\n            );\r\n        } else {\r\n            return new Vec4(\r\n                this[0] - rect[0],\r\n                this[1] - rect[1],\r\n                this[2] - rect[2],\r\n                this[3] - rect[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    divide(rect) {\r\n        if(typeof rect === 'number') {\r\n            return new Vec4(\r\n                this[0] / rect,\r\n                this[1] / rect,\r\n                this[2] / rect,\r\n                this[3] / rect\r\n            );\r\n        } else {\r\n            return new Vec4(\r\n                this[0] / rect[0],\r\n                this[1] / rect[1],\r\n                this[2] / rect[2],\r\n                this[3] / rect[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    multiply(rect) {\r\n        if(typeof rect === 'number') {\r\n            return new Vec4(\r\n                this[0] * rect,\r\n                this[1] * rect,\r\n                this[2] * rect,\r\n                this[3] * rect\r\n            );\r\n        } else {\r\n            return new Vec4(\r\n                this[0] * rect[0],\r\n                this[1] * rect[1],\r\n                this[2] * rect[2],\r\n                this[3] * rect[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    equals(rect) {\r\n        return rect === this || (rect[0] === this[0] && rect[1] === this[1] && rect[2] === this[2] && rect[3] === this[3]);\r\n    }\r\n\r\n    mod(rect) {\r\n        if(typeof rect === 'number') {\r\n            return new Vec4(\r\n                this[0] % rect,\r\n                this[1] % rect,\r\n                this[2] % rect,\r\n                this[3] % rect,\r\n            );\r\n        } else {\r\n            return new Vec4(\r\n                this[0] % rect[0],\r\n                this[1] % rect[1],\r\n                this[2] % rect[2],\r\n                this[3] % rect[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    translate(x, y) {\r\n        if(typeof x === 'object') {\r\n            y = x.y;\r\n            x = x.x;\r\n        }\r\n\r\n        return new Vec4(\r\n            this[0] + x,\r\n            this[1] + y,\r\n            this[2] + x,\r\n            this[3] + y\r\n        );\r\n    }\r\n\r\n    moveTo(vec2) {\r\n        let deltaX = vec2.left - this.left,\r\n            deltaY = vec2.top - this.top;\r\n\r\n        return new Vec4(\r\n            this.left + deltaX,\r\n            this.top + deltaY,\r\n            this.right + deltaX,\r\n            this.bottom + deltaY\r\n        );\r\n    }\r\n\r\n    intersection(rect) {\r\n        let left = Math.max(this.left, rect.left),\r\n            right = Math.min(this.right, rect.right),\r\n            bottom = Math.min(this.bottom, rect.bottom),\r\n            top = Math.max(this.top, rect.top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return new Vec4(left, top, right, bottom);\r\n    }\r\n\r\n    toRGBA() {\r\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n    }\r\n\r\n    clone() {\r\n        return new Vec4(this[0], this[1], this[2], this[3]);\r\n    }\r\n\r\n    contains(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    toPoint() {\r\n        return new Vec2(this[0], this[1]);\r\n    }\r\n\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n\r\n    isXOverlapping(vec4) {\r\n        return (vec4.left <= this.right && vec4.right >= this.left);\r\n    }\r\n\r\n    isYOverlapping(vec4) {\r\n        return (vec4.top <= this.bottom && vec4.bottom >= this.top);\r\n    }\r\n\r\n    static fromRect({left, top, right, bottom}) {\r\n        return new Vec4(left, top, right, bottom);\r\n    }\r\n\r\n    static fromRGBAObject({r, g, b, a}) {\r\n        return new Vec4(r, g, b, a);\r\n    }\r\n\r\n    static fromRGBA(value) {\r\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgba value ${value}`);\r\n        }\r\n\r\n        return new Vec4(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n            parseFloat(m[4]),\r\n        );\r\n    }\r\n}\r\n","import {clamp} from 'core/utility';\r\nimport Animation from \"core/Animation\";\r\nimport {privateCache} from \"core/data\";\r\nimport {\r\n    getTranslation,\r\n    setElementClientPosition,\r\n    documentRectToClientSpace,\r\n    clientRectToDocumentSpace,\r\n    snapToGrid\r\n} from \"core/position\";\r\n\r\n\r\n/**\r\n * Draggable option for offset that offsets the position by the cursor.\r\n *\r\n * @param clientX\r\n * @param clientY\r\n * @param boundingRect\r\n * @returns {{x, y}}\r\n */\r\nexport function cursor({clientX, clientY, boundingRect}) {\r\n    return {\r\n        x: boundingRect.left - clientX,\r\n        y: boundingRect.top - clientY\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Draggable option that clones the draggable element for the helper element.\r\n *\r\n * @param opacity\r\n * @returns {function(*): (ActiveX.IXMLDOMNode | Node)}\r\n */\r\nexport function clone(opacity=null) {\r\n    return function(draggable) {\r\n        let helper = draggable.element.cloneNode(true);\r\n\r\n        if(opacity !== null) {\r\n            helper.style.opacity = opacity;\r\n        }\r\n\r\n        return helper;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the first scrollable parent.\r\n *\r\n * @param element\r\n * @returns {HTMLElement|null}\r\n * @private\r\n */\r\nfunction _getScrollParent(element) {\r\n    let o = element.parentElement;\r\n\r\n    while(o) {\r\n        if (o.scrollWidth > o.clientWidth || o.scrollHeight > o.clientHeight) {\r\n            return o;\r\n        }\r\n\r\n        o = o.parentElement;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\n/**\r\n * Sets the target elements x and y position by setting the translate3d translation matrix.\r\n *\r\n * @param target\r\n * @param x\r\n * @param y\r\n * @private\r\n */\r\nfunction _translate(target, x, y) {\r\n    target.style.transform = `translate3d(${x}px, ${y}px, 0)`;\r\n}\r\n\r\n\r\n// Group of function that can be passed to Draggables container property that will contain a dragged element to within\r\n// the given parameters.  Function should return a rect with {left, top, width, and height} properties relative to the\r\n// client.  Similiar to Element.getBoundingClientRect().\r\nexport const CONTAINERS = {\r\n    /**\r\n     * Constrains to client area.\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    client: function() {\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            height: window.innerHeight,\r\n            width: window.innerWidth,\r\n            right: window.innerWidth,\r\n            bottom: window.innerHeight\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Constrains to viewport.\r\n     * @param element\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    viewport: function(element) {\r\n        let parent = _getScrollParent(element),\r\n            bb = parent.getBoundingClientRect();\r\n\r\n        return {\r\n            left: bb.left - parent.scrollLeft,\r\n            top: bb.top - parent.scrollTop,\r\n            width: parent.scrollWidth,\r\n            height: parent.scrollHeight\r\n        };\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Takes a bounding client rect and constrains the left and top position to within the container.  Returns a new rect.\r\n *\r\n * @param rect\r\n * @param container\r\n * @param element\r\n * @param helper\r\n * @returns {{top: *, left: *}}\r\n * @private\r\n */\r\nfunction _clampPositionToContainer(rect, container, element, helper) {\r\n    let bb = helper.getBoundingClientRect();\r\n\r\n    let x = rect.left,\r\n        y = rect.top;\r\n\r\n    if(container) {\r\n        if(typeof container === 'function') {\r\n            container = container(element, helper);\r\n        } else if(container.getBoundingClientRect) {\r\n            container = container.getBoundingClientRect();\r\n        } else {\r\n            container = element.closest(container);\r\n            container = container.getBoundingClientRect();\r\n        }\r\n\r\n        if(container) {\r\n            x = clamp(x, container.left, container.left + container.width - bb.width);\r\n            y = clamp(y, container.top, container.top + container.height - bb.height);\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...rect,\r\n        left: x,\r\n        top: y\r\n    };\r\n}\r\n\r\n\r\n// Group of function that can be passed to the tolerance property of Draggable to control when an item is considered\r\n// intersecting another for drop events.\r\nconst TOLERANCE_FUNCTIONS = {\r\n    intersect: function(droppable, item) {\r\n        let origin = {\r\n            x: item.left + (item.width / 2),\r\n            y: item.top + (item.height / 2)\r\n        };\r\n\r\n        return origin.x >= droppable.left\r\n            && origin.x <= droppable.right\r\n            && origin.y >= droppable.top\r\n            && origin.y <= droppable.bottom;\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Behavior class to add the draggable behavior to an element for group of elements.\r\n */\r\nexport default class Draggable {\r\n    static CLONE = clone;\r\n    static OFFSET_CURSOR = cursor;\r\n\r\n    /**\r\n     * @param element {Element|String} The element to attach the draggable behavior to.\r\n     * @param container {string|CONTAINERS.client|CONTAINERS.viewport|function}\r\n     *  Constrains the draggable into the given area.\r\n     *  `container` can either be a css selector to match a parent element, a Function(element, helper)\r\n     *  that should return a bounding box.  Or an element who's bounding box will be used.\r\n     * @param axis {'x'|'y'|'xy'}\r\n     *  Controls what axis the item is draggable.  x can be dragged horizontally, y vertically, and xy can be freely dragged.\r\n     * @param exclude {String}\r\n     *  Prevents dragging from starting on matching elements.\r\n     * @param delay {Number}\r\n     *  The time in milliseconds after the mouse down event occurs that dragging will begin.\r\n     * @param offset {{x, y}|[x, y]|Function}\r\n     *  By default when an item is dragged is position will be set relative to the drop left corner of the item.\r\n     *  Offset is used to offset the element from the cursor.  You can pass an {x, y} object, an array with [x, y] pair,\r\n     *  or a Function({target, draggable, clientX, clientY, boundingRect}) that will be called that return an {x, y} object.\r\n     * @param disabled {Boolean}\r\n     *  Disables dragging.\r\n     * @param distance {Number}\r\n     *  Adds resistance to drag starting.  The users must move at least `distance` amount of pixels away from the\r\n     *  starting position for drag to start.\r\n     * @param handle {String}\r\n     *  If dragging will only start if the user clicks an element that matches the css selectors.\r\n     * @param helper {Function|Element}\r\n     *  An element to use as a helper for dragging.  Can be a Element or a Function that returns an element.\r\n     * @param revert {Number|Boolean}\r\n     *  Controls if the draggable reverts back to the starting position if no droppable accepts the target.\r\n     * @param scroll {Number}\r\n     *  Controls the speed that the draggable will scroll the scrollParent when the draggable leaves the viewable area.\r\n     * @param selector {String}\r\n     *  Used to delegate dragging to sub items.\r\n     * @param droppables\r\n     *  An array of css selectors or elements that will be used as drop targets for the draggable.\r\n     * @param tolerance {String}\r\n     *  Controls the function that determines if an item intersects a drop target.\r\n     * @param setHelperSize {Boolean}\r\n     *  If true the helpers width and height will be set by javascript to match the original element.\r\n     * @param grid {{x, y} | [x, y] | Number}\r\n     *  Snaps draggable movement to a grid with the given x, y dimensions.\r\n     */\r\n    constructor(element, {container=null, axis='xy', exclude=\"input, button, select, .js-no-drag, textarea\", delay=null, offset=cursor, disabled=false,\r\n        distance=null, handle=null, helper=null, revert=null, scroll=null, selector=null, droppables=null, tolerance='intersect',\r\n        setHelperSize=false, grid=null}={}) {\r\n\r\n        if(typeof element === 'string') {\r\n            this.element = document.querySelector(element);\r\n        } else {\r\n            this.element = element;\r\n        }\r\n\r\n        this._onMouseDown = this.onMouseDown.bind(this);\r\n        this.disabled = disabled;\r\n        this.helper = helper;\r\n        this.offset = offset;\r\n        this.axis = axis;\r\n        this.delay = delay;\r\n        this.distance = distance;\r\n        this.container = container;\r\n        this.handle = handle;\r\n        this.exclude = exclude;\r\n        this.revert = revert;\r\n        this.selector = selector;\r\n        this.droppables = [];\r\n        this.tolerance = tolerance;\r\n        this.setHelperSize = setHelperSize;\r\n        this.scroll = scroll;\r\n\r\n        if(typeof grid === 'number') {\r\n            this.grid = {\r\n                x: grid,\r\n                y: grid\r\n            };\r\n        } else if(Array.isArray(grid)) {\r\n            this.grid = {\r\n                x: grid[0],\r\n                y: grid[1]\r\n            };\r\n        } else {\r\n            this.grid = grid;\r\n        }\r\n\r\n        if(droppables) {\r\n            this.addDroppables(droppables);\r\n        }\r\n\r\n        this.element.addEventListener('mousedown', this._onMouseDown);\r\n        this.isDragging = false;\r\n\r\n        this._revertFX = null;\r\n    }\r\n\r\n    /**\r\n     * Adds a drop target item.  A `droppable` can be an element, a css selector or an array of those.\r\n     * @param droppables\r\n     */\r\n    addDroppables(droppables) {\r\n        if(Array.isArray(droppables)) {\r\n            this.droppables = this.droppables.concat(droppables);\r\n        } else {\r\n            this.droppables.push(droppables);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Responsible for detecting dragging and starting the drag depending on delay and distance.\r\n     * @param event\r\n     */\r\n    onMouseDown(event) {\r\n        let element = this.element;\r\n\r\n        if(this.selector) {\r\n            element = event.target.closest(this.selector);\r\n\r\n            if(!this.element.contains(element)) {\r\n                element = null;\r\n            }\r\n        }\r\n\r\n        if(!element) return;\r\n\r\n        let data = privateCache.cache(element);\r\n\r\n        if(data.isDragging || this.disabled) {\r\n            return;\r\n        }\r\n\r\n        if(this.handle) {\r\n            let handle = event.target.closest(this.handle);\r\n\r\n            if(!handle || !element.contains(handle)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(this.exclude) {\r\n            let excluded = event.target.closest(this.exclude);\r\n\r\n            if(excluded && element.contains(excluded)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        event.preventDefault();\r\n\r\n        let distance = this.distance || 0,\r\n            delay = typeof this.delay === 'number' ? this.delay : -1,\r\n            doc = document,\r\n            startMouseDocumentX = event.clientX + window.scrollX,\r\n            startMouseDocumentY = event.clientY + window.scrollY,\r\n            mouseDocumentX = startMouseDocumentX,\r\n            mouseDocumentY = startMouseDocumentY;\r\n\r\n        // Tests to see that delay and distance was met before dragging.\r\n        let startDragging = () => {\r\n            if(distance === 0 && delay < 0) {\r\n                this.startDrag(element, startMouseDocumentX, startMouseDocumentY, mouseDocumentX, mouseDocumentY);\r\n            }\r\n        };\r\n\r\n        // Delay dragging.\r\n        if(delay >= 0) {\r\n            let timer;\r\n\r\n            let onTimeout = () => {\r\n                delay = -1;\r\n                doc.removeEventListener('mouseup', onMouseUp);\r\n                startDragging();\r\n            };\r\n\r\n            let onMouseUp = () => {\r\n                doc.removeEventListener('mouseup', onMouseUp);\r\n                clearTimeout(timer);\r\n            };\r\n\r\n            doc.addEventListener('mouseup', onMouseUp);\r\n            timer = setTimeout(onTimeout, delay);\r\n        }\r\n\r\n        // Delay by distance.\r\n        if(distance > 0) {\r\n            let onMouseUp = () => {\r\n                doc.removeEventListener('mouseup', onMouseUp);\r\n                doc.removeEventListener('mousemove', onMouseMove);\r\n            };\r\n\r\n            let onMouseMove = (event) => {\r\n                mouseDocumentX = event.clientX + window.scrollX;\r\n                mouseDocumentY = event.clientY + window.scrollY;\r\n\r\n                let delta = Math.sqrt(\r\n                    (mouseDocumentX - startMouseDocumentX)**2 + (mouseDocumentY - startMouseDocumentY)**2\r\n                );\r\n\r\n                if(delta > distance) {\r\n                    distance = 0;\r\n                    doc.removeEventListener('mouseup', onMouseUp);\r\n                    doc.removeEventListener('mousemove', onMouseMove);\r\n                    startDragging();\r\n                }\r\n            };\r\n\r\n            doc.addEventListener('mouseup', onMouseUp);\r\n            doc.addEventListener('mousemove', onMouseMove);\r\n        }\r\n\r\n        startDragging();\r\n    }\r\n\r\n    /**\r\n     * Starts the drag animation at the given x, y origin.\r\n     *\r\n     * @param element\r\n     * @param startMouseX\r\n     * @param startMouseY\r\n     * @param posX\r\n     * @param posY\r\n     */\r\n    startDrag(element, startMouseX, startMouseY, posX, posY) {\r\n        if(this.isDragging) {\r\n            return;\r\n        }\r\n\r\n        this.isDragging = true;\r\n\r\n        // Cancel any animation that are running.\r\n        if(this._revertFX) {\r\n            this._revertFX.cancel();\r\n            this._revertFX = null;\r\n        }\r\n\r\n        let doc = document,\r\n            target,\r\n            droppables = this.getDropTargets(),\r\n            startBoundingBox = element.getBoundingClientRect(),\r\n            startBBDocument = clientRectToDocumentSpace(startBoundingBox),\r\n            helper,\r\n            scrollTick;\r\n\r\n        if(!this.helper || this.helper === 'self') {\r\n            target = element;\r\n        } else if(typeof this.helper === 'function') {\r\n            target = this.helper(this);\r\n            helper = target;\r\n        } else if(this.helper) {\r\n            target = this.helper;\r\n            helper = target;\r\n        }\r\n\r\n        if(helper) {\r\n            if(this.setHelperSize) {\r\n                if(this.setHelperSize === true) {\r\n                    helper.style.width = `${startBoundingBox.width}px`;\r\n                    helper.style.height = `${startBoundingBox.height}px`;\r\n                    helper.style.boxSizing = 'border-box';\r\n                } else if(Array.isArray(this.setHelperSize)) {\r\n                    helper.style.width = `${this.setHelperSize[0]}px`;\r\n                    helper.style.height = `${this.setHelperSize[1]}px`;\r\n                } else {\r\n                    helper.style.width = `${this.setHelperSize.width}px`;\r\n                    helper.style.height = `${this.setHelperSize.height}px`;\r\n                }\r\n            }\r\n        }\r\n\r\n        // If the target doesn't have a parentElement it needs to be added to the page.\r\n        if(!target.parentElement) {\r\n            element.parentElement.appendChild(target);\r\n        }\r\n\r\n        // mouseOffsetX and mouseOffsetY is the mouses offset relative to the top left corner of the element\r\n        // being dragged.\r\n\r\n        // offsetX and offsetY is how much the dragged element is offset from the cursor.\r\n        // By default it is at the top left of the element.\r\n        let startingTranslation = getTranslation(target),\r\n            offset = {x: 0, y: 0};\r\n\r\n        // The offset property controls how much the dragged element is offset from top left corner of the element.\r\n        // By default it is [0, 0] but a function can be or array can be passed to control this behavior.\r\n        if(this.offset) {\r\n            let _offset = this.offset;\r\n\r\n            if(typeof _offset === 'function') {\r\n                offset = this.offset({\r\n                    target: target,\r\n                    draggable: this,\r\n                    clientX: startMouseX - window.scrollX,\r\n                    clientY: startMouseY - window.scrollY,\r\n                    boundingRect: startBoundingBox\r\n                });\r\n            }\r\n        }\r\n\r\n        // Offset should be {x, y} not an array.\r\n        if(Array.isArray(offset)) {\r\n            offset = {\r\n                x: offset[0],\r\n                y: offset[1]\r\n            };\r\n        }\r\n\r\n        let onMouseMove = (event) => {\r\n            event.preventDefault();\r\n\r\n            let startingRect = target.getBoundingClientRect(),\r\n                position = this._getPosition(element, target, event.clientX, event.clientY, offset, this.container),\r\n                dropData;\r\n\r\n            setElementClientPosition(target, position, 'translate3d');\r\n            dropData = this._getDropData(droppables, startingRect, position);\r\n\r\n            for(let droppable of dropData) {\r\n                if(!droppable.intersectsBefore && droppable.intersectsAfter) {\r\n                    // drag-enter\r\n                    let event = new CustomEvent('drag-enter', {\r\n                        bubbles: true,\r\n\r\n                        detail: {\r\n                            draggable: this,\r\n                            item: target\r\n                        }\r\n                    });\r\n\r\n                    droppable.target.dispatchEvent(event);\r\n                }\r\n            }\r\n\r\n            this._triggerEvent(element, 'drag-move', {\r\n                mouseX: event.clientX + window.scrollX,\r\n                mouseY: event.clientY + window.scrollY,\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                startMouseX,\r\n                startMouseY,\r\n                offset,\r\n                helper: target,\r\n                originalEvent: event\r\n            });\r\n\r\n            // Refresh dropData incase something moved.\r\n            dropData = this._getDropData(droppables, startingRect, position);\r\n\r\n            for(let droppable of dropData) {\r\n                if(droppable.intersectsBefore && !droppable.intersectsAfter) {\r\n                    // drag-leave\r\n                    let event = new CustomEvent('drag-leave', {\r\n                        bubbles: true,\r\n                        detail: {\r\n                            draggable: this,\r\n                            item: target\r\n                        }\r\n                    });\r\n\r\n                    droppable.target.dispatchEvent(event);\r\n                }\r\n            }\r\n\r\n            if(this.scroll && !scrollTick) {\r\n                let parent = _getScrollParent(element);\r\n\r\n                if(parent) {\r\n                    let lastTick = performance.now(),\r\n                        scrollX = parent.scrollLeft,\r\n                        scrollY = parent.scrollTop;\r\n\r\n                    scrollTick = timestamp => {\r\n                        let parentBB = parent.getBoundingClientRect(),\r\n                            helperBB = target.getBoundingClientRect(),\r\n                            x, y,\r\n                            delta = timestamp - lastTick,\r\n                            isOOB = false;\r\n\r\n                        lastTick = timestamp;\r\n\r\n                        if (helperBB.right > parentBB.right) {\r\n                            x = (helperBB.right - parentBB.right) / helperBB.width;\r\n                            isOOB = true;\r\n                            scrollX += delta * x * this.scroll;\r\n                            parent.scrollLeft = scrollX;\r\n                        } else if (helperBB.left < parentBB.left) {\r\n                            x = (parentBB.left - helperBB.left) / helperBB.width;\r\n                            isOOB = true;\r\n                            scrollX -= delta * x * this.scroll;\r\n                            parent.scrollLeft = scrollX;\r\n                        }\r\n\r\n                        if (helperBB.bottom > parentBB.bottom) {\r\n                            y = (helperBB.bottom - parentBB.bottom) / helperBB.height;\r\n                            isOOB = true;\r\n                            scrollY += delta * y * this.scroll;\r\n                            parent.scrollTop = scrollY;\r\n                        } else if (helperBB.top < parentBB.top) {\r\n                            y = (parentBB.top - helperBB.top) / helperBB.height;\r\n                            isOOB = true;\r\n                            scrollY -= delta * y * this.scroll;\r\n                            parent.scrollTop = scrollY;\r\n                        }\r\n\r\n                        helperBB = _clampPositionToContainer(helperBB, this.container, element, target);\r\n                        setElementClientPosition(target, helperBB, 'translate3d');\r\n\r\n                        if (isOOB && this.isDragging) {\r\n                            window.requestAnimationFrame(scrollTick);\r\n                        } else {\r\n                            scrollTick = null;\r\n                        }\r\n                    };\r\n\r\n                    window.requestAnimationFrame(scrollTick);\r\n                }\r\n            }\r\n        };\r\n\r\n        let onMouseUp = (event) => {\r\n            event.preventDefault();\r\n            doc.removeEventListener('mousemove', onMouseMove);\r\n            doc.removeEventListener('mouseup', onMouseUp);\r\n            doc = null;\r\n            this.isDragging = false;\r\n            element.classList.remove('ui-dragging');\r\n\r\n            let startingRect = target.getBoundingClientRect(),\r\n                position = this._getPosition(element, target, event.clientX, event.clientY, offset, this.container),\r\n                translation = getTranslation(target),\r\n                accepted = null;\r\n\r\n            function accept(element) {\r\n                if(!accepted) {\r\n                    accepted = element;\r\n                } else {\r\n                    throw new Error(\"Draggable has already been accepted.\");\r\n                }\r\n            }\r\n\r\n            function isAccepted() {\r\n                return !!accepted;\r\n            }\r\n\r\n            this._triggerEvent(element, 'drag-end', {\r\n                startX: startMouseX - window.scrollX,\r\n                startMouseY,\r\n                offset,\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n\r\n                originalEvent: event,\r\n                helper: target,\r\n\r\n                accept,\r\n                isAccepted\r\n            },true, {accept, isAccepted});\r\n\r\n            if(!accepted && this.revert === true) {\r\n                _translate(target, startingTranslation.x, startingTranslation.y);\r\n\r\n                if(target !== element && target.parentElement) {\r\n                    target.parentElement.removeChild(target);\r\n                }\r\n\r\n                this._triggerEvent(element, 'drag-complete');\r\n            } else if(!accepted && typeof this.revert === 'number') {\r\n                let animation = new Animation(\r\n                    {\r\n                        left: translation.x + (position.left - startingRect.left),\r\n                        top: translation.y + (position.top - startingRect.top)\r\n                    }, {\r\n                        left: startingTranslation.x,\r\n                        top: startingTranslation.y\r\n                    },\r\n                    this.revert,\r\n                    {\r\n                        onFrame: (fx) => {\r\n                            _translate(target, fx.frame.left, fx.frame.top);\r\n                        },\r\n\r\n                        onComplete: () => {\r\n                            if (target !== element && target.parentElement) {\r\n                                target.parentElement.removeChild(target);\r\n                            }\r\n\r\n                            this._triggerEvent(element, 'drag-complete');\r\n                        },\r\n\r\n                        onCancel: () => {\r\n                            if (target !== element && target.parentElement) {\r\n                                target.parentElement.removeChild(target);\r\n                            }\r\n                        }\r\n                    }\r\n                );\r\n\r\n                animation.play();\r\n                this._revertFX = animation;\r\n            } else {\r\n                if(target !== element && target.parentElement) {\r\n                    target.parentElement.removeChild(target);\r\n                }\r\n\r\n                setElementClientPosition(element, position, 'translate3d');\r\n\r\n                let startingRect = documentRectToClientSpace(startBBDocument),\r\n                    dropped = [];\r\n\r\n                for(let droppable of droppables) {\r\n                    if(this._intersects(element.dataset.tolerance, droppable.getBoundingClientRect(), position)) {\r\n                        let dropEvent = new CustomEvent('drop', {\r\n                            bubbles: true,\r\n                            detail: {\r\n                                draggable: this,\r\n                                originalEvent: event,\r\n                                startingBoundingClientRect: startingRect,\r\n                                droppable: droppable\r\n                            }\r\n                        });\r\n\r\n                        dropEvent.clientX = event.clientX;\r\n                        dropEvent.clientY = event.clientY;\r\n                        dropEvent.relatedTarget = element;\r\n\r\n                        droppable.dispatchEvent(dropEvent);\r\n                    }\r\n                }\r\n\r\n                this._triggerEvent(element, 'drag-complete', {\r\n                    dropped\r\n                });\r\n            }\r\n        };\r\n\r\n        doc.addEventListener('mousemove', onMouseMove);\r\n        doc.addEventListener('mouseup', onMouseUp);\r\n        element.classList.add('ui-dragging');\r\n\r\n        this._triggerEvent(element, 'drag-start', {\r\n            startMouseY,\r\n            startMouseX,\r\n            offset,\r\n            mouseX: posX,\r\n            mouseY: posY,\r\n            clientX: posX - window.scrollX,\r\n            clientY: posY - window.scrollY,\r\n            helper: target\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets an array of elements of all the drop targets.\r\n     * If the drop target is a string, it queries for those elements.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    getDropTargets() {\r\n        let r = [];\r\n\r\n        for(let droppable of this.droppables) {\r\n            let type = typeof droppable;\r\n\r\n            if(type === 'string') {\r\n                for(let target of document.querySelectorAll(droppable)) {\r\n                    if(r.indexOf(target) !== -1) continue;\r\n                    r.push(target);\r\n                }\r\n            } else if(type === 'function') {\r\n                droppable = droppable.call(this, this);\r\n                if(r.indexOf(droppable) !== -1) continue;\r\n                r.push(droppable);\r\n            } else {\r\n                if(r.indexOf(droppable) !== -1) continue;\r\n                r.push(droppable);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Takes an array of drop targets and tests to see if the target intersects the start and ending rectangles.\r\n     *\r\n     * Rects are objects that have the left, right, top, bottom, width and height properties defined.\r\n     * Similar to the results received from Element.getBoundingClientRect().\r\n     *\r\n     * @param droppables - Array of elements to tests.\r\n     * @param startingRect - Starting rect.\r\n     * @param endingRect - Ending rect.\r\n     * @returns {Array}\r\n     * @private\r\n     */\r\n    _getDropData(droppables, startingRect, endingRect) {\r\n        let dropData = [];\r\n\r\n        for(let droppable of droppables) {\r\n            // Convert to client space.\r\n            let dropBox = droppable.getBoundingClientRect();\r\n\r\n            let intersectsBefore = this._intersects(droppable.dataset.tolerance, dropBox, startingRect),\r\n                intersectsAfter = this._intersects(droppable.dataset.tolerance, dropBox, endingRect);\r\n\r\n            dropData.push({\r\n                intersectsBefore,\r\n                intersectsAfter,\r\n                target: droppable,\r\n                ...dropBox\r\n            });\r\n        }\r\n\r\n        return dropData;\r\n    }\r\n\r\n    /**\r\n     * Triggers an event on the current item.\r\n     *\r\n     * @param item\r\n     * @param eventName\r\n     * @param details\r\n     * @param bubbles\r\n     * @param assign\r\n     * @private\r\n     */\r\n    _triggerEvent(item, eventName, details, bubbles=true, assign=null) {\r\n        details = {\r\n            draggable: this,\r\n            item: item,\r\n\r\n            ...details\r\n        };\r\n\r\n        let event = new CustomEvent(eventName, {\r\n            bubbles: bubbles,\r\n            detail: details\r\n        });\r\n\r\n        if(assign) {\r\n            Object.assign(event, assign);\r\n        }\r\n\r\n        item.dispatchEvent(event);\r\n    }\r\n\r\n    /**\r\n     * Tests to see if the item intersects the droppable with the given tolerance function.\r\n     *\r\n     * @param tolerance\r\n     * @param droppable\r\n     * @param item\r\n     * @returns {*}\r\n     * @private\r\n     */\r\n    _intersects(tolerance, droppable, item) {\r\n        tolerance = tolerance || this.tolerance;\r\n        return TOLERANCE_FUNCTIONS[tolerance](droppable, item);\r\n    }\r\n\r\n    /**\r\n     * Retrieves the expected bound box of the helper element at the given mouse coordinates.\r\n     *\r\n     * @param element\r\n     * @param helper\r\n     * @param clientX\r\n     * @param clientY\r\n     * @param offset\r\n     * @param container\r\n     * @returns {{top: *, left: *, bottom: *, width: number, right: *, height: number, target: *}}\r\n     */\r\n    _getPosition(element, helper, clientX, clientY, offset, container) {\r\n        let bb = helper.getBoundingClientRect();\r\n\r\n        let left = clientX + offset.x,\r\n            top = clientY + offset.y;\r\n\r\n        if(this.grid) {\r\n            left = snapToGrid(left, this.grid.x);\r\n            top = snapToGrid(top, this.grid.y);\r\n        }\r\n\r\n        let r = {\r\n            left: left,\r\n            top: top,\r\n            width: bb.width,\r\n            height: bb.height,\r\n            right: left + bb.width,\r\n            bottom: top + bb.height,\r\n            target: helper\r\n        };\r\n\r\n        return {...r, ..._clampPositionToContainer(r, container, element, helper)};\r\n    }\r\n}\r\n","import {getTranslation, setElementClientPosition} from \"core/position\";\r\nimport Draggable, {cursor} from './Draggable';\r\n\r\n\r\nexport function placeholder(className, nodeName=null) {\r\n    return function(element) {\r\n        let placeholder = document.createElement(nodeName || element.nodeName),\r\n            box = element.getBoundingClientRect();\r\n\r\n        placeholder.style.boxSizing = \"border-box\";\r\n        box.style.width = `${box.width}px`;\r\n        box.style.height = `${box.height}px`;\r\n\r\n        if(className) {\r\n            placeholder.className = className;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a sortable list of items.\r\n */\r\nexport default class Sortable {\r\n    constructor(element, {items=\".ui-sort-item\", placeholder=null, layout='y', dropOnEmpty=true, accepts=null, setPlaceholderSize=false,\r\n        container=null, axis='xy', exclude=null, delay=null, offset=cursor, disabled=false,\r\n        distance=null, handle=null, helper=null, revert=null, scroll=null, droppables=null, tolerance='intersect',\r\n        setHelperSize=false, grid=null}={}) {\r\n\r\n        if(typeof element === 'string') {\r\n            this.element = document.querySelector(element);\r\n        } else {\r\n            this.element = element;\r\n        }\r\n\r\n        this.draggable = new Draggable(this.element, {container, axis, exclude, delay, offset, disabled, distance, handle, helper, revert, scroll, selector: items, droppables, tolerance, setHelperSize, grid});\r\n\r\n        this.items = items;\r\n        this.layout = layout;\r\n        this.placeholder = placeholder;\r\n        this.dropOnEmpty = dropOnEmpty;\r\n        this.accepts = accepts;\r\n        this.setPlaceholderSize = setPlaceholderSize;\r\n\r\n        this.initEvents();\r\n    }\r\n\r\n    /**\r\n     * Initializes event listeners.\r\n     */\r\n    initEvents() {\r\n        let placeholder,\r\n            isOver = false,\r\n            init = false,\r\n            target;\r\n\r\n        // Attaches temporary events when drag starts.\r\n        let initialize = (event) => {\r\n            init = true;\r\n            target = event.detail.item;\r\n            target.addEventListener('drag-move', onDragMove);\r\n            target.addEventListener('drag-complete', onDragComplete);\r\n            target.addEventListener('sort-append', onSortAppend);\r\n            let startBB = target.getBoundingClientRect();\r\n            target.classList.add('ui-sorting');\r\n\r\n            if(!placeholder && this.placeholder) {\r\n                if(typeof this.placeholder === 'string') {\r\n                    placeholder = document.createElement(target.nodeName);\r\n                    placeholder.className = this.placeholder;\r\n                } else if(typeof this.placeholder === 'function') {\r\n                    placeholder = this.placeholder(target, this);\r\n                } else if(this.placeholder === true) {\r\n                    placeholder = document.createElement(target.nodeName);\r\n                } else {\r\n                    placeholder = this.placeholder;\r\n                }\r\n\r\n                placeholder.classList.add('ui-placeholder');\r\n\r\n                if(this.setPlaceholderSize) {\r\n                    if(this.setPlaceholderSize === true) {\r\n                        placeholder.style.width = `${startBB.width}px`;\r\n                        placeholder.style.height = `${startBB.height}px`;\r\n                        placeholder.style.boxSizing = 'border-box';\r\n                    } else if(Array.isArray(this.setPlaceholderSize)) {\r\n                        placeholder.style.width = `${this.setPlaceholderSize[0]}px`;\r\n                        placeholder.style.height = `${this.setPlaceholderSize[1]}px`;\r\n                    } else {\r\n                        placeholder.style.width = `${this.setPlaceholderSize.width}px`;\r\n                        placeholder.style.height = `${this.setPlaceholderSize.height}px`;\r\n                    }\r\n                }\r\n\r\n                if(this.element.contains(target)) {\r\n                    target.parentElement.insertBefore(placeholder, target);\r\n                }\r\n            }\r\n\r\n            setElementClientPosition(target, startBB, 'translate3d');\r\n        };\r\n\r\n        // Cleanup after sorting finishes.\r\n        let destroy = () => {\r\n            if(target) {\r\n                target.removeEventListener('drag-move', onDragMove);\r\n                target.removeEventListener('drag-complete', onDragComplete);\r\n                target.removeEventListener('sort-append', onSortAppend);\r\n                init = false;\r\n                isOver = false;\r\n\r\n                if(placeholder && placeholder.parentElement) {\r\n                    placeholder.parentElement.removeChild(placeholder);\r\n                }\r\n\r\n                placeholder = null;\r\n\r\n                target.style.transform = \"\";\r\n                target.classList.remove('ui-sorting');\r\n                target = null;\r\n            }\r\n        };\r\n\r\n        // Ensures that the placeholder is removed if the item gets moves to another sortable.\r\n        let onSortAppend = event => {\r\n            if(event.detail !== this && placeholder && placeholder.parentElement) {\r\n                placeholder.parentElement.removeChild(placeholder);\r\n            }\r\n        };\r\n\r\n        // Moves the item to the correct position on mouse move.\r\n        let onDragMove = (event) => {\r\n            if(!isOver || (this.accepts && !event.detail.item.matches(this.accepts))) {\r\n                return;\r\n            }\r\n\r\n            let target = event.detail.item,\r\n                items = Array.prototype.slice.call(this.getItems()).filter(i => i !== target);\r\n\r\n            let before = this.getItemBeforePoint(event.detail.clientX, event.detail.clientY, items),\r\n                after = this.getItemAfterPoint(event.detail.clientX, event.detail.clientY, items),\r\n                beforeBB = event.detail.helper.getBoundingClientRect(),\r\n                dropOnEmpty = target.dataset.dropOnEmpty !== null && target.dataset.dropOnEmpty !== undefined ? target.dataset.dropOnEmpty === 'true' : this.dropOnEmpty; // Allow overriding on item level.\r\n\r\n            if(!items.length) {\r\n                if(dropOnEmpty) {\r\n                    this.element.appendChild(target);\r\n                    if(placeholder) target.parentElement.insertBefore(placeholder, target);\r\n                    this._refreshPositions(event.detail.helper, beforeBB);\r\n                    this._triggerSortAppendEvent(target);\r\n                }\r\n            } else if(before && before !== target) {\r\n                before.parentElement.insertBefore(target, before.nextSibling);\r\n                if(placeholder) target.parentElement.insertBefore(placeholder, target);\r\n                this._refreshPositions(event.detail.helper, beforeBB);\r\n                this._triggerSortAppendEvent(target);\r\n            } else if(after && after !== target) {\r\n                after.parentElement.insertBefore(target, after);\r\n                if(placeholder) target.parentElement.insertBefore(placeholder, target);\r\n                this._refreshPositions(event.detail.helper, beforeBB);\r\n                this._triggerSortAppendEvent(target);\r\n            }\r\n        };\r\n\r\n        // Cleanup\r\n        let onDragComplete = () => {\r\n            destroy();\r\n        };\r\n\r\n        // Initialize sorting.\r\n        this.element.addEventListener('drag-enter', event => {\r\n            if(this.accepts && !event.detail.item.matches(this.accepts)) {\r\n                return;\r\n            }\r\n\r\n            isOver = true;\r\n\r\n            if(!init) {\r\n                initialize(event);\r\n            }\r\n        });\r\n\r\n        // Mark isOver state false.\r\n        this.element.addEventListener('drag-leave', () => {\r\n            isOver = false;\r\n        });\r\n\r\n        // Initialize sorting that started on another sortable.\r\n        this.element.addEventListener('drag-start', (event) => {\r\n            if(!init) {\r\n                initialize(event);\r\n            }\r\n\r\n            isOver = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Tests to see if the given (x, y) point is before or after the element.  Uses layout to determine if the test\r\n     * is for the x layout, the y layout or the xy layout.\r\n     * @param element\r\n     * @param x\r\n     * @param y\r\n     * @returns {string|null}\r\n     */\r\n    getRelativePosition(element, x, y) {\r\n        let box = element.getBoundingClientRect(),\r\n            mx = box.left + (box.width / 2),\r\n            my = box.top + (box.height / 2);\r\n\r\n        if(this.layout === 'x') {\r\n            return mx < x ? 'after' : 'before';\r\n        } else if(this.layout === 'y') {\r\n            return my < y ? 'after' : 'before';\r\n        } else if(this.layout === 'xy') {\r\n            return (box.bottom < y) || (mx < x && box.bottom >= y && box.top <= y) ? 'after' : 'before';\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns the item immediately before the given x, y point.\r\n     * @param x\r\n     * @param y\r\n     * @param items\r\n     * @returns {*}\r\n     */\r\n    getItemBeforePoint(x, y, items) {\r\n        if(!items) items = this.getItems();\r\n\r\n        let r = null;\r\n\r\n        for(let i = 0; i < items.length; i++) {\r\n            let item = items[i];\r\n\r\n            if(this.getRelativePosition(item, x, y) === 'after') {\r\n                r = item;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(r) {\r\n            let box = r.getBoundingClientRect();\r\n\r\n            if((this.layout === 'x' || this.layout === 'xy') && box.top <= y && box.bottom >= y) {\r\n                return r;\r\n            } else if(this.layout === 'y' && box.left <= x && box.right >= x) {\r\n                return r;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the item immediately after the given (x, y) point.\r\n     * @param x\r\n     * @param y\r\n     * @param items\r\n     * @returns {null|*}\r\n     */\r\n    getItemAfterPoint(x, y, items) {\r\n        if(!items) items = this.getItems();\r\n\r\n        let r = null;\r\n\r\n        for(let i = items.length - 1; i >= 0; i--) {\r\n            let item = items[i];\r\n\r\n            if(this.getRelativePosition(item, x, y) === 'before') {\r\n                r = item;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(r) {\r\n            let box = r.getBoundingClientRect();\r\n\r\n            if((this.layout === 'x' || this.layout === 'xy') && box.top <= y && box.bottom >= y) {\r\n                return r;\r\n            } else if(this.layout === 'y' && box.left <= x && box.right >= x) {\r\n                return r;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns a list of all items for the sortable.\r\n     * @returns {NodeListOf<SVGElementTagNameMap[string]> | NodeListOf<HTMLElementTagNameMap[string]> | NodeListOf<Element>}\r\n     */\r\n    getItems() {\r\n        return this.element.querySelectorAll(this.items);\r\n    }\r\n\r\n    /**\r\n     * helper method that translates the target to the provided client position.\r\n     * @param target {{getBoundingClientRect, style} | Element}\r\n     * @param position {{left[Number], top[Number]}}\r\n     * @private\r\n     */\r\n    _refreshPositions(target, position) {\r\n        let current = target.getBoundingClientRect(),\r\n            deltaLeft = current.left - position.left,\r\n            deltaTop = current.top - position.top,\r\n            translation = getTranslation(target);\r\n\r\n        target.style.transform = `translate3d(${translation.x - deltaLeft}px, ${translation.y - deltaTop}px, 0)`;\r\n    }\r\n\r\n    /**\r\n     * Triggers the default sort-append event on the target.\r\n     * @param target {Element}\r\n     * @private\r\n     */\r\n    _triggerSortAppendEvent(target) {\r\n        let event = new CustomEvent('sort-append', {\r\n            bubbles: false,\r\n            detail: this\r\n        });\r\n\r\n        target.dispatchEvent(event);\r\n    }\r\n}\r\n","import Draggable from 'ui/Draggable';\r\nimport {CONTAINERS} from 'ui/Draggable';\r\nimport Sortable from 'ui/Sortable';\r\nimport Animation from 'core/Animation';\r\nimport {privateCache} from \"../../src/core/data\";\r\nimport {getTranslation} from \"core/position\";\r\n\r\n\r\nwindow.Animation = Animation;\r\nwindow.privateCache = privateCache;\r\n\r\nwindow.test = new Animation({left: 0}, {left: 200}, 200000);\r\n\r\n\r\nwindow.getTranslation = getTranslation;\r\n\r\n\r\nwindow.addEventListener('load', () => {\r\n    window.draggableBox1 = new Draggable(\"#test-draggable1\", {container: CONTAINERS.client, helper: Draggable.CLONE(0.5), revert: 1000});\r\n    window.draggableWindow1 = new Draggable(\"#test-window1\", {container: CONTAINERS.client, handle: '.drag-handle'});\r\n    window.draggableBox2 = new Draggable('#drop-test1-droppable', {droppables: '#drop-zone-test1'});\r\n\r\n    window.draggableScrollable = new Draggable(document.querySelector(\"#scroll-draggable-test\"), {scroll: 1, container: CONTAINERS.viewport});\r\n\r\n    window.sortableGrid = new Sortable(\"#sortable-grid\", {layout: 'xy', setPlaceholderSize: true});\r\n    window.sortableList1 = new Sortable('#drag-list-test', {droppables: '.drop-list', placeholder: true, setPlaceholderSize: true});\r\n    window.sortableList2 = new Sortable('#drag-list-test2', {droppables: '.drop-list', placeholder: true, setPlaceholderSize: true});\r\n\r\n    document.querySelector('#drop-zone-test1').addEventListener('drop', event => {\r\n        event.target.style.backgroundColor = '#00ff00';\r\n    });\r\n});\r\n\r\n\r\nwindow.addEventListener('mousemove', (event) => {\r\n    let output = document.getElementById('mouse-pos-client-output');\r\n    output.innerText = `(${event.clientX}, ${event.clientY})`;\r\n\r\n    output = document.getElementById('document-position-output');\r\n    output.innerText = `(${event.clientX + window.scrollX}, ${event.clientY + window.scrollY})`;\r\n});"],"sourceRoot":""}