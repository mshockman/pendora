{"version":3,"sources":["webpack://pendora/webpack/universalModuleDefinition","webpack://pendora/webpack/bootstrap","webpack://pendora/./src/core/data.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/interface/Observable.js","webpack://pendora/./src/core/utility.js","webpack://pendora/./src/menus/Menu.js","webpack://pendora/./src/menus/MenuBar.js","webpack://pendora/./src/menus/MenuItem.js","webpack://pendora/./src/menus/MenuNode.js","webpack://pendora/./src/menus/core.js","webpack://pendora/./tests/src/test_menu.js"],"names":["uuid","prefix","Math","random","replace","Data","expando","owner","cache","acceptData","nodeType","Object","defineProperty","value","configurable","key","prop","undefined","arguments","length","set","get","keys","isEmptyObject","privateCache","ExtendableError","message","name","constructor","Error","captureStackTrace","stack","IndexError","KeyError","NotImplemented","ValidationError","node","children","AssertionError","reg_whitespace","Observable","_events","events","listener","eventList","split","event","TypeError","indexOf","push","hasOwnProperty","i","splice","eventName","endsWith","substr","startsWith","args","BREAK","parts","l","slice","join","off","REG_WHITESPACE","clamp","minValue","maxValue","max","min","firstValue","item","all","iterable","any","proto","descriptor","placement","randomChoice","array","floor","arraysEqual","array1","array2","parseHTML","html","template","document","createElement","innerHTML","trim","content","fragment","createDocumentFragment","firstChild","appendChild","object","emptyElement","element","removeChild","addClasses","classes","classList","add","removeClasses","remove","setElementOffset","coords","getElementOffset","Array","isArray","left","top","offset","getBoundingClientRect","style","getComputedStyle","parseInt","box","window","pageXOffset","pageYOffset","getScroll","isWindow","scrollLeft","scrollTop","variable","setInterval","setScroll","scroll","scrollTo","selectElement","selector","context","querySelector","jquery","assert","condition","parseBooleanOrInt","radix","defaultValue","type","Number","isNaN","parseBooleanOrFloat","parseFloat","parseBoolean","parseIntValue","parseFloatValue","parseAny","parsers","parser","e","validateChoice","choices","findChild","fn","child","filterChildren","r","Menu","target","closeOnBlur","timeout","autoActivate","delay","multiple","toggleItem","toggleMenu","closeOnSelect","nodeName","position","deactivateOnItemHover","classNames","id","dataset","role","_timeoutTimer","_activateItemTimer","visible","initEvents","isMenuController","boundEvents","onClick","bind","onMouseOver","onMouseOut","onSelect","addEventListener","removeEventListener","isActive","parent","activate","setActiveItem","_captureDocumentClick","doc","onDocumentClick","contains","deactivate","trigger","clearTimeoutTimer","clearActivateItemTimer","clearTimeout","clearActiveItems","POSITIONERS","call","active","activeItems","_item","setTimeout","time","_activateItemTimerTarget","targetItem","getClosestMenuItem","getController","childItem","getTargetChild","relatedTarget","startTimeoutTimer","getClosestMenuNode","isMenuItem","detail","querySelectorAll","menuNode","getMenuNode","config","subItemConfig","subMenuConfig","root","FromHTML","MenuItem","MenuNode","MenuBar","options","text","action","href","on","submenu","show","hide","CustomEvent","bubbles","dispatchEvent","menu","_showDelayTimer","getDisabled","startActivateItemTimer","preventDefault","select","isMenu","attachMenuNode","menuNodeType","o","parentElement","append","isDisabled","toggle","assertMenuNode","obj","getClosestMenu","isMenuNode","targetElement","_parent","build_test_menu_1","container","fileItem","editItem","viewItem","navigateItem","codeItem","refactorItem","toolsItem","vcsItem","windowItem","helpItem","fileSubMenu","attachSubMenu","build_from_dom","widget","testMixin","superClass","console","log","TestClass","msg"],"mappings":"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","file":"testMenu.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pendora\"] = factory();\n\telse\n\t\troot[\"pendora\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tests/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./tests/src/test_menu.js\");\n","import {isEmptyObject} from \"./utility\";\r\n\r\n\r\nlet uuid = 1,\r\n    prefix = 'p-' + (''+Math.random()).replace(/\\D/g, '');\r\n\r\n\r\nexport class Data {\r\n    constructor() {\r\n        this.expando = `${prefix}-${uuid++}`;\r\n    }\r\n\r\n    static acceptData(owner) {\r\n        return owner.nodeType === 1 || owner.nodeType === 9 || !(+owner.nodeType);\r\n    }\r\n\r\n    cache(owner) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) {\r\n            cache = {};\r\n\r\n            if(Data.acceptData(owner)) {\r\n                if(owner.nodeType) {\r\n                    owner[this.expando] = cache;\r\n                } else {\r\n                    Object.defineProperty(owner, this.expando, {\r\n                        value: cache,\r\n                        configurable: true\r\n                    });\r\n                }\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    set(owner, key, value) {\r\n        let cache = this.cache(owner);\r\n\r\n        if(typeof key === 'object') {\r\n            for(let prop in key) {\r\n                cache[prop] = key[prop];\r\n            }\r\n        } else {\r\n            cache[key] = value;\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    get(owner, key) {\r\n        if(key === undefined) {\r\n            return this.cache(owner);\r\n        } else {\r\n            let cache = owner[this.expando];\r\n\r\n            if(cache) {\r\n                return cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    access(owner, key, value) {\r\n        if(arguments.length === 2) {\r\n            if(typeof key === 'object') {\r\n                return this.set(owner, key);\r\n            } else {\r\n                return this.get(owner, key);\r\n            }\r\n        } else if(arguments.length === 1) {\r\n            return this.cache(owner);\r\n        } else if(arguments.length === 3) {\r\n            return this.set(owner, key, value);\r\n        }\r\n    }\r\n\r\n    remove(owner, ...keys) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) return;\r\n\r\n        if(arguments.length === 1) {\r\n            if(owner.nodeType) {\r\n                owner[this.expando] = undefined;\r\n            } else {\r\n                delete owner[this.expando];\r\n            }\r\n        } else {\r\n            for(let key of keys) {\r\n                delete cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    hasData(owner) {\r\n        let cache = owner[this.expando];\r\n        return cache && !isEmptyObject(cache);\r\n    }\r\n}\r\n\r\n\r\nexport let privateCache = new Data();","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n","const reg_whitespace = /\\s+/;\r\n\r\n\r\n/**\r\n * Provides an interface for Observable objects.  This class should be extended.\r\n *\r\n * Observable objects provide a mechanism for event tracking.  Events can be listened to by registering an event listener\r\n * with the `on` method.  You can remove an event listener with it's opposite method `off`.  After some listeners have\r\n * been registered you can fire an event using the `trigger` method.\r\n *\r\n * SCOPED EVENTS\r\n *\r\n * Events can have sub scopes.  Scopes are events that have the dot operator (.) in their name.  If a scoped event is\r\n * fired all parent scopes are also fired for that event.  For example the scoped event `modal.open` will all listeners\r\n * registered to the events modal.open, modal, and *.  * is a special event that fires for any event.  It's the global\r\n * event listener.\r\n */\r\nexport default class Observable {\r\n    constructor() {\r\n        this._events = {};\r\n    }\r\n\r\n    /**\r\n     * Registers an event listener to one or more events.\r\n     *\r\n     * @param {String} events - A string of space separated event names to register to.\r\n     * @param {Function} listener - A function to register to the events.\r\n     */\r\n    on(events, listener) {\r\n        let eventList = events.split(reg_whitespace);\r\n\r\n        for(let event of eventList) {\r\n            if(!this._events[event]) {\r\n                this._events[event] = [];\r\n            }\r\n\r\n            if(typeof listener !== 'function') {\r\n                throw new TypeError('Callback was not a function.')\r\n            }\r\n\r\n            if(this._events[event].indexOf(listener) === -1) {\r\n                this._events[event].push(listener);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes an event listener.\r\n     *\r\n     * The `off` method removed event listeners that where registered with `on`.  Calling `off` with no arguments clears\r\n     * all event listeners for the object.  Specific event listeners can be removed by providing combinations of\r\n     * the function to remove, event names and event scopes.\r\n     *\r\n     * CLEARING AN EVENT NAME.\r\n     * The `off` method can be used to remove all listeners from a single event by providing the event name with no\r\n     * event listener.  In these cases the `off` method will remove every event listener from that event name.  The\r\n     * `off` method will not remove listeners from child events scopes in these cases.\r\n     *\r\n     * CLEARING CHILD EVENT OR REMOVING A LISTENER FROM SPECIFIC SCOPES\r\n     * The `off` method can be used to remove all listeners from every child event scope by providing the event name\r\n     * suffixed with \".*\" at the end of it.  In these cases the `off` method will match any child scope and clear it.\r\n     * Note that this will not clear the top most scope itself.  If you want to clear both children and the root scope\r\n     * you must pass the string formatted like \"${eventName} ${eventName}.*\".  For example that calling `off` with the\r\n     * arguments \"modal modal.*\" will clear all modal events and child sub events.\r\n     *\r\n     * The `off` method also allows to remove a specific listeners by passing the listener as `off` second argument.\r\n     * In these cases off will only remove the specified listener instead of clearing all events.\r\n     *\r\n     * REMOVE A LISTENER FROM ALL EVENTS\r\n     * Finally the `off` method can remove an specific listener from any event by passing the listener as the first\r\n     * argument with no second argument.  For example, off(listener).  In this case the `off` method will search for the\r\n     * listener in every registered event.\r\n     *\r\n     * OFF CAN BE USED TO REMOVE A LISTENER FROM MULTIPLE EVENTS BY PASSING THOSE EVENTS AS A SPACE SEPARATED STRING\r\n     * OFF EVENT NAME.\r\n     *\r\n     * @param events\r\n     * @param listener\r\n     */\r\n    off(events, listener) {\r\n        if(!arguments.length) {\r\n            // If no arguments are passed clear all events.\r\n            this._events = {};\r\n        } else if(arguments.length === 1 && typeof arguments[0] === 'function') {\r\n            // If only a function is passed remove that function from EVERY EVENT.\r\n            for(let key in this._events) {\r\n                if(this._events.hasOwnProperty(key) && this._events[key]) {\r\n                    let i = this._events[key].indexOf(arguments[0]);\r\n\r\n                    if(i !== -1) {\r\n                        this._events[key].splice(i, 1);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            // Either off(events, listener) or off(events) was called.\r\n            // If off(events, listener) was called remove that listener from every passed event.\r\n            // If off(events) was called clear every listener from every passed event.\r\n            // You can pass multiple events is a space separated list.\r\n            // You can select from scoped events by calling eventName.*\r\n            events = events.split(reg_whitespace);\r\n\r\n            for(let eventName of events) {\r\n                if(eventName.endsWith('.*')) {\r\n                    eventName = eventName.substr(0, eventName.length-1); // Remove the last character, so *, from the string.\r\n\r\n                    // Iterate over every event matching the once start start with the event name.\r\n                    for(let key of this._events) {\r\n                        if(this._events.hasOwnProperty(key) && this._events[key] && key.startsWith(eventName)) {\r\n                            if(!listener) {\r\n                                this._events[key] = [];\r\n                            } else {\r\n                                let i = this._events[key].indexOf(listener);\r\n                                if(i !== -1) this._events[key].splice(i, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                } else if(this._events[eventName]) {\r\n                    if(!listener) {\r\n                        this._events[eventName] = [];\r\n                    } else {\r\n                        let i = this._events[eventName].indexOf(listener);\r\n                        if(i !== -1) this._events[eventName].splice(i, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Triggers an event and the global event *.\r\n     *\r\n     * Event listeners of that event are called with the event name passed as the first argument and any additional\r\n     * arguments provided to trigger are also passed.\r\n     *\r\n     * IF ANY EVENT RETURNS THE `BREAK` FLAG IMMEDIATE PROPAGATION OF THE EVENT WILL BE STOPPED.\r\n     * @param event\r\n     * @param args\r\n     */\r\n    trigger(event, ...args) {\r\n        if(this._events['*']) {\r\n            for(let listener of this._events['*']) {\r\n                if(listener(event, ...args) === Observable.BREAK) return Observable.BREAK;\r\n            }\r\n        }\r\n\r\n        if(event === '*') return;\r\n\r\n        let parts = event.split('.');\r\n\r\n        for(let i = 0, l = parts.length; i < l; i++) {\r\n            let key = parts.slice(0, i+1).join('.');\r\n\r\n            if(this._events[key]) {\r\n                for(let listener of this._events[key]) {\r\n                    if(listener(event, ...args) === Observable.BREAK) return Observable.BREAK;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Tests to see if the event listener is registered to the event name.\r\n     *\r\n     * @param eventName\r\n     * @param listener\r\n     * @returns {boolean}\r\n     */\r\n    hasEvent(eventName, listener) {\r\n        if(this._events && this._events[eventName]) {\r\n            return this._events[eventName].indexOf(listener) !== -1;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * A shortcut for calling off(\"eventName eventName.*\");\r\n     * @param eventName\r\n     */\r\n    clearEvent(eventName) {\r\n        this.off(eventName);\r\n        this.off(`${eventName}.*`);\r\n    }\r\n}\r\n\r\n\r\nexport const BREAK = {};\r\nObservable.BREAK = BREAK;\r\n","import {AssertionError} from './errors';\r\nconst REG_WHITESPACE = /\\s+/;\r\n\r\n\r\n/**\r\n * Clamps a value between a minimum and maximum values.\r\n * @param value\r\n * @param minValue\r\n * @param maxValue\r\n * @returns {*}\r\n */\r\nexport function clamp(value, minValue=null, maxValue=null) {\r\n    if(minValue !== null) {\r\n        value = Math.max(value, minValue);\r\n    }\r\n\r\n    if(maxValue !== null) {\r\n        value = Math.min(value, maxValue);\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns the first none null or undefined value.\r\n * @param args\r\n */\r\nexport function firstValue(args) {\r\n    for(let item of args) {\r\n        if(item !== null && item !== undefined) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if all of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function all(iterable) {\r\n    for(let item of iterable) {\r\n        if(!item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if any of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function any(iterable) {\r\n    for(let item of iterable) {\r\n        if(item) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\nexport function proto(descriptor) {\r\n    descriptor.placement = \"prototype\";\r\n    return descriptor;\r\n}\r\n\r\n\r\n/**\r\n * Returns a random value from an array.\r\n * @param array\r\n * @returns {*}\r\n */\r\nexport function randomChoice(array) {\r\n    return array[Math.floor(Math.random()*array.length)];\r\n}\r\n\r\n\r\n/**\r\n * Checks to see if 2 arrays are \"equal\".\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arraysEqual(array1, array2) {\r\n    if(array1 === array2) return true; // The same object.\r\n    if(array1 == null || array2 == null) return false;\r\n    if(array1.length !== array2.length) return false;\r\n\r\n    for(let i = 0, l = array1.length; i < l; i++) {\r\n        if(array1[i] !== array2[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Parses an html string into a document fragment.\r\n *\r\n * @param html\r\n * @return {DocumentFragment}\r\n */\r\nexport function parseHTML(html) {\r\n    let template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    if(template.content) {\r\n        return template.content;\r\n    } else {\r\n        // Doesn't support template tag.\r\n        let fragment = document.createDocumentFragment();\r\n        while(template.firstChild) fragment.appendChild(template.firstChild);\r\n        return fragment;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Tests to see if the object is empty.\r\n *\r\n * @param object\r\n * @return {boolean}\r\n */\r\nexport function isEmptyObject(object) {\r\n    // noinspection LoopStatementThatDoesntLoopJS\r\n    for(let key in object) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Empties a dom element.\r\n *\r\n * @param element\r\n */\r\nexport function emptyElement(element) {\r\n    while(element.firstChild) element.removeChild(element.firstChild);\r\n}\r\n\r\n\r\n/**\r\n * Adds classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function addClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.add(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Removes classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function removeClasses(element, classes) {\r\n    if(typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.remove(...classes);\r\n}\r\n\r\n\r\n/**\r\n * Sets an elements position relative to the document.\r\n *\r\n * @param element\r\n * @param coords\r\n */\r\nexport function setElementOffset(element, coords) {\r\n    if(coords.nodeType) {\r\n        coords = getElementOffset(element);\r\n    } else if(Array.isArray(coords)) {\r\n        coords = {\r\n            left: coords.left,\r\n            top: coords.top\r\n        };\r\n    }\r\n\r\n    let offset = element.getBoundingClientRect();\r\n\r\n    let style = getComputedStyle(element),\r\n        left = parseInt(style.left, 10) || 0,\r\n        top = parseInt(style.top, 10) || 0;\r\n\r\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\r\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\r\n}\r\n\r\n\r\n/**\r\n * Returns the top and left position of an element relative to the document.\r\n *\r\n * @param element\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getElementOffset(element) {\r\n    let box = element.getBoundingClientRect();\r\n\r\n    return {\r\n        left: box.left + window.pageXOffset,\r\n        top: box.top + window.pageYOffset\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Normalizing accessing scroll position for an element.\r\n *\r\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\r\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\r\n * @param element\r\n * @returns {{left, top}}\r\n */\r\nexport function getScroll(element) {\r\n    if(isWindow(element)) {\r\n        return {\r\n            scrollLeft: element.pageXOffset,\r\n            scrollTop: element.pageYOffset\r\n        };\r\n    } else {\r\n        return {\r\n            scrollLeft: element.scrollLeft,\r\n            scrollTop: element.scrollTop\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Test to see if the variable is a window.\r\n * @param variable\r\n * @returns {boolean}\r\n */\r\nexport function isWindow(variable) {\r\n    return variable && typeof variable === 'object' && setInterval in variable;\r\n}\r\n\r\n\r\n/**\r\n * Normalizes setting a scroll position for an element.\r\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\r\n * This methods normalizes them.\r\n * @param element - The element to scroll\r\n * @param scroll - An object with a left or a top property or both.\r\n */\r\nexport function setScroll(element, scroll) {\r\n    if(element.scrollTo) {\r\n        element.scrollTo(scroll);\r\n    } else {\r\n        element.scrollLeft = scroll.left;\r\n        element.scrollTop = scroll.top;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Matches a single dom element based on the given selector.\r\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\r\n * If a css selector is passed it will query for the element.\r\n * If a jquery object is passed it will return the first matched element.\r\n * If an element is passed it will return that element.\r\n *\r\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\r\n * Otherwise the context will be the document.\r\n *\r\n * @param selector\r\n * @param context\r\n * @returns {Element|Document|DocumentFragment}\r\n */\r\nexport function selectElement(selector, context=null) {\r\n    if(!context) {\r\n        context = document;\r\n    } else {\r\n        context = selectElement(context);\r\n    }\r\n\r\n    if(typeof selector === 'string') {\r\n        return context.querySelector(selector);\r\n    } else if(selector.jquery) {\r\n        return selector[0];\r\n    } else if(selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\r\n        return selector;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if(!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a integer.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrInt(value, radix=10, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse the value into a boolean value or a float.  Returns the default value on failure if provided.\r\n * Otherwise throws a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|number|*}\r\n */\r\nexport function parseBooleanOrFloat(value, defaultValue=TypeError) {\r\n    let type = typeof value;\r\n\r\n    if(type === 'boolean' || type === 'number') {\r\n        return value;\r\n    }\r\n\r\n    if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    }\r\n\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean or int.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts for parse a boolean value from a string.  Returns the defaultValue on failure if provided.  Otherwise throws\r\n * a TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {boolean|*}\r\n */\r\nexport function parseBoolean(value, defaultValue=TypeError) {\r\n    if(typeof value === 'boolean') {\r\n        return value;\r\n    } else if(value === 'true') {\r\n        return true;\r\n    } else if(value === 'false') {\r\n        return false;\r\n    } else {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into boolean.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param radix\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseIntValue(value, radix=10, defaultValue=TypeError) {\r\n    value = parseInt(value, radix);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into integer.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Attempts to parse a string into an integer.  Returns the default value on failure if set.  Otherwise throws a\r\n * TypeError.\r\n * @param value\r\n * @param defaultValue\r\n * @returns {number}\r\n */\r\nexport function parseFloatValue(value, defaultValue=TypeError) {\r\n    value = parseFloat(value);\r\n\r\n    if(Number.isNaN(value)) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Could not parse value into float.\");\r\n        } else {\r\n            // noinspection JSValidateTypes\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Runs multiple parsers and returns the first one that doesn't throw a TypeError.\r\n * @param value\r\n * @param parsers\r\n * @returns {*}\r\n */\r\nexport function parseAny(value, ...parsers) {\r\n    for(let parser of parsers) {\r\n        try {\r\n            return parser(value);\r\n        } catch(e) {\r\n            if(!(e instanceof TypeError)) {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\n    throw new TypeError(\"Could not parse value.\");\r\n}\r\n\r\n\r\n/**\r\n * Validates that the value is one of the given choices.\r\n * @param value\r\n * @param choices\r\n * @param defaultValue\r\n * @returns {TypeErrorConstructor|*}\r\n */\r\nexport function validateChoice(value, choices, defaultValue=TypeError) {\r\n    if(choices.indexOf(value) === -1) {\r\n        if(defaultValue === TypeError) {\r\n            throw new TypeError(\"Invalid choice.\");\r\n        } else {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Returns first child element that matches the test function.\r\n * @param element - Parent element\r\n * @param fn - Test Function\r\n * @returns {Element}\r\n */\r\nexport function findChild(element, fn) {\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            return child;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a filtered list of element from the children that match the test function.\r\n * @param element - Parent element.\r\n * @param fn - Test function.\r\n * @returns {Array}\r\n */\r\nexport function filterChildren(element, fn) {\r\n    let r = [];\r\n\r\n    for(let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if(fn(child)) {\r\n            r.push(child);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n","import {getClosestMenuItem, getClosestMenuNode, getMenuNode, isMenuItem, getTargetChild} from './core';\r\nimport MenuItem from \"./MenuItem\";\r\nimport MenuNode from \"./MenuNode\";\r\nimport {parseBoolean, parseBooleanOrInt, validateChoice} from \"../core/utility\";\r\n\r\n\r\n/**\r\n * Represents a Menu component that enables you to display an hierarchically organized set of elements with commands.\r\n *\r\n * Remarks\r\n * ------------------------------\r\n *\r\n * The Menu component presents a list of items that either specify a command or contain a nested submenu.  Typically\r\n * clicking on an item will cause it to either open it's submenu or carry out some command.\r\n *\r\n * MenuItem is the most common type of item in a Menu.  A MenuItem can contain an attached submenu with additional child\r\n * items.  A MenuItem that has a submenu can not contain an action.\r\n *\r\n * Although MenuItems are the most common type of item in the Menu, any object can be a child as long as it implements\r\n * methods to activate, deactivate and tell it's parent when it does so.  For example you can add a static Menu as a\r\n * direct child to a Menu that implements a different set of rules for it's items such it added a checkable interface.\r\n *\r\n * Initializing from code\r\n * ------------------------------\r\n *\r\n * let menu = new Menu();\r\n *\r\n * menu.add(new MenuItem({text: \"Item #1\"});\r\n * menu.add(new MenuItem({text: \"Item #2\"});\r\n * menu.add(new MenuItem({text: \"Item #3\"});\r\n *\r\n * Initializing from html\r\n * ------------------------------\r\n *\r\n * <ul data-role=\"menu\" id=\"my-menu\">\r\n *      <li data-role=\"menuitem\">Item #1<a></li>\r\n *      <li data-role=\"menuitem\">Item #2<a></li>\r\n *      <li data-role=\"menuitem\">Item #3<a></li>\r\n * </ul>\r\n *\r\n * Menu.buildFromHTML('#my-menu');\r\n *\r\n * Properties\r\n * -------------------------------\r\n *\r\n * element              References the menus root dom element.\r\n *\r\n * timeout              Controls how long after the user moves off the menu that it will timeout.\r\n *\r\n * autoActivate         If a number greater then or equal to 0, this property controls how long the user must hover\r\n *                      over an item for the menu to activate.  If the value is false or a negative number the menu will\r\n *                      never auto activate. If true or 0 the menu will activate immediately.\r\n *\r\n * delay                Gets or sets the delay between the user hovering over the menu item and it activating.  This is\r\n *                      only used in the cases in which the container menu is already active.  Otherwise the\r\n *                      autoActivate property is used instead.  If the value is negative items will never activate on\r\n *                      hover.\r\n *\r\n * multiple             Controls if the menu allows multiple items to be active at the same time.\r\n *\r\n * position             Gets or sets a function that will be called whenever the menu is shown to position it.\r\n *\r\n * toggleItem           Gets or sets how items will behave when the user clicks them.  Can be on, off, both or none.\r\n *                      If on items will only toggle on when clicked and if off they will only toggle off.\r\n *                      If both they will toggle both off and on.\r\n *                      If none nothing will happen when the user clicks an item.\r\n *\r\n * toggleMenu           Gets or sets how menus will behave when the user clicks them.  Can be on, off, both or none.\r\n *                      If on items will only toggle on when clicked and if off they will only toggle off.\r\n *                      If both they will toggle both off and on.\r\n *                      If none nothing will happen when the user clicks an item.\r\n *\r\n * menuNodeType         A readonly property that is used to determine what kind of MenuNode the element is.\r\n *\r\n * isMenu               A readonly property that is used to test if an object is a Menu node.\r\n *\r\n * visible              Gets or sets the visibility of the menu.  This only updates the css classes.  It does not\r\n *                      trigger events. Use the show() and hide() methods if you want to show and hide the menu\r\n *                      normally, they will update the visible property.\r\n *\r\n * closeOnBlur          Gets or sets how the menu will behave when the user clicks outside it.  AKA it looses focus.\r\n *                      If true the menu will close and deactivate itself.\r\n *\r\n * closeOnSelect        Gets or sets the menu's behavior when an item is selected.  Can be either true, false, or\r\n *                      'child'.  If true the menu will close itself when an item-select event is encountered.\r\n *                      The special 'child' option is similiar to true but will only close if the item is an immediate\r\n *                      child item of the menu.\r\n *\r\n * deactivateOnItemHover\r\n *      If true item will automatically deactivate when the user mouses over another item even if that item is disabled.\r\n */\r\nexport default class Menu extends MenuNode {\r\n    static POSITIONERS = {};\r\n\r\n    constructor({target=null, closeOnBlur=false, timeout=false, autoActivate=0, delay=false, multiple=false,\r\n                    toggleItem='on', toggleMenu='off', closeOnSelect=false, nodeName='ul', position=null,\r\n                    deactivateOnItemHover=false, classNames, id}={}) {\r\n        let element;\r\n\r\n        if(!target) {\r\n            element = document.createElement(nodeName);\r\n        } else if(typeof target === 'string') {\r\n            element = document.querySelector(target);\r\n        } else {\r\n            element = target;\r\n        }\r\n\r\n        element.classList.add('c-menu');\r\n        element.dataset.role = 'menu';\r\n\r\n        super(element, 'menu', {classNames, id});\r\n\r\n        this._timeoutTimer = null;\r\n        this._activateItemTimer = null;\r\n\r\n        this.timeout = timeout;\r\n        this.closeOnBlur = closeOnBlur;\r\n        this.autoActivate = autoActivate;\r\n        this.delay = delay;\r\n        this.multiple = multiple;\r\n        this.toggleItem = toggleItem;\r\n        this.toggleMenu = toggleMenu;\r\n        this.closeOnSelect = closeOnSelect;\r\n        this.position = position;\r\n\r\n        this.deactivateOnItemHover = deactivateOnItemHover;\r\n\r\n        /**\r\n         * Gets or sets the visibility of the menu.  This only updates the css classes.  It does not trigger events.\r\n         * Use the show() and hide() methods if you want to show and hide the menu normally, they will update the\r\n         * visible property.\r\n         * @type {boolean}\r\n         */\r\n        this.visible = false;\r\n\r\n        this.initEvents();\r\n    }\r\n\r\n    initEvents() {\r\n        if(!this.isMenuController) {\r\n            this.isMenuController = true;\r\n            this.boundEvents = {};\r\n\r\n            this.boundEvents.onClick = this.onClick.bind(this);\r\n            this.boundEvents.onMouseOver = this.onMouseOver.bind(this);\r\n            this.boundEvents.onMouseOut = this.onMouseOut.bind(this);\r\n            this.boundEvents.onSelect = this.onSelect.bind(this);\r\n\r\n            this.element.addEventListener('click', this.boundEvents.onClick);\r\n            this.element.addEventListener('mouseover', this.boundEvents.onMouseOver);\r\n            this.element.addEventListener('mouseout', this.boundEvents.onMouseOut);\r\n            this.element.addEventListener('item-select', this.boundEvents.onSelect);\r\n        }\r\n    }\r\n\r\n    destroyEvents() {\r\n        if(this.isMenuController) {\r\n            this.isMenuController = false;\r\n\r\n            this.element.removeEventListener('click', this.boundEvents.onClick);\r\n            this.element.removeEventListener('mouseover', this.boundEvents.onMouseOver);\r\n            this.element.removeEventListener('mouseout', this.boundEvents.onMouseOut);\r\n            this.element.removeEventListener('item-select', this.boundEvents.onSelect);\r\n\r\n            this.boundEvents = null;\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // METHODS\r\n\r\n    /**\r\n     * Activates the menu.\r\n     */\r\n    activate() {\r\n        if(!this.isActive) {\r\n            this.isActive = true;\r\n\r\n            let parent = this.parent;\r\n\r\n            if(parent) {\r\n                if(!parent.isActive) {\r\n                    parent.activate();\r\n                }\r\n\r\n                if(parent.setActiveItem) {\r\n                    parent.setActiveItem(this, true);\r\n                }\r\n            }\r\n\r\n            if(this.closeOnBlur && !this._captureDocumentClick) {\r\n                let doc = document;\r\n                this._captureDocumentClick = {\r\n                    doc: doc,\r\n                    onDocumentClick: (event) => {\r\n                        if(!this.element.contains(event.target)) {\r\n                            this.deactivate();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                // noinspection JSUnresolvedFunction\r\n                doc.addEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n            }\r\n\r\n            this.trigger('activate', this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deactivates the menu.\r\n     */\r\n    deactivate() {\r\n        if(this.isActive) {\r\n            this.isActive = false;\r\n\r\n            if(this._captureDocumentClick) {\r\n                // noinspection JSUnresolvedFunction\r\n                this._captureDocumentClick.doc.removeEventListener('click', this._captureDocumentClick.onDocumentClick);\r\n                this._captureDocumentClick = null;\r\n            }\r\n\r\n            this.clearTimeoutTimer();\r\n            this.clearActivateItemTimer();\r\n\r\n            if(this._activateItemTimer) {\r\n                clearTimeout(this._activateItemTimer);\r\n                this._activateItemTimer = null;\r\n            }\r\n\r\n            this.clearActiveItems();\r\n\r\n            this.trigger('deactivate', this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Shows the menu.\r\n     */\r\n    show() {\r\n        if(!this.visible) {\r\n            this.visible = true;\r\n\r\n            if(this.position) {\r\n                let position = this.position;\r\n\r\n                if(typeof position === 'string') {\r\n                    position = Menu.POSITIONERS[position];\r\n                }\r\n\r\n                position.call(this, this);\r\n            }\r\n\r\n            this.trigger('show', this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Hides the menu.\r\n     */\r\n    hide() {\r\n        if(this.visible) {\r\n            this.visible = false;\r\n            this.trigger(\"hide\", this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds an item to the menu.\r\n     * @param item\r\n     * @returns {*}\r\n     */\r\n    add(item) {\r\n        this.element.appendChild(item.element);\r\n        return item;\r\n    }\r\n\r\n    setActiveItem(item, active) {\r\n        if(active) {\r\n            if(!item.isActive) {\r\n                item.activate();\r\n                return;\r\n            }\r\n\r\n            if(!this.multiple) {\r\n                let activeItems = this.activeItems;\r\n\r\n                for(let _item of activeItems) {\r\n                    if(_item !== item) {\r\n                        _item.deactivate();\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if(item.isActive) {\r\n                item.deactivate();\r\n            }\r\n        }\r\n    }\r\n\r\n    clearActiveItems() {\r\n        let activeItems = this.activeItems;\r\n\r\n        for(let _item of activeItems) {\r\n            _item.deactivate();\r\n        }\r\n    }\r\n\r\n    startTimeoutTimer(timeout=null) {\r\n        if(!this.isActive) return;\r\n\r\n        if(timeout === null) timeout = this.timeout;\r\n\r\n        this.clearTimeoutTimer();\r\n\r\n        this._timeoutTimer = setTimeout(() => {\r\n            this._timeoutTimer = null;\r\n            this.deactivate();\r\n        }, timeout);\r\n\r\n        return this._timeoutTimer;\r\n    }\r\n\r\n    clearTimeoutTimer() {\r\n        if(this._timeoutTimer) {\r\n            clearTimeout(this._timeoutTimer);\r\n            this._timeoutTimer = null;\r\n        }\r\n    }\r\n\r\n    startActivateItemTimer(item, time) {\r\n        this.clearActivateItemTimer();\r\n        this._activateItemTimerTarget = item;\r\n\r\n        this._activateItemTimer = setTimeout(() => {\r\n            this._activateItemTimer = null;\r\n            this._activateItemTimerTarget = null;\r\n            item.activate();\r\n        }, time);\r\n    }\r\n\r\n    clearActivateItemTimer(target) {\r\n        if(this._activateItemTimer && (!target || target === this._activateItemTimerTarget)) {\r\n            clearTimeout(this._activateItemTimer);\r\n            this._activateItemTimer = null;\r\n            this._activateItemTimerTarget = null;\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // EVENT HANDLER METHODS\r\n\r\n    onMouseOver(event) {\r\n        // Clear timeout timer.\r\n       this.clearTimeoutTimer();\r\n\r\n        // Pass event to target item.\r\n        let targetItem = getClosestMenuItem(event.target, this.element);\r\n\r\n        if(targetItem && targetItem.getController() === this) {\r\n            targetItem.onMouseOver(event);\r\n        }\r\n\r\n        // If the user mouses over an item and deactivateOnItemHover is true and multiple is false\r\n        // then deactivate any other active items.\r\n        if(this.deactivateOnItemHover && !this.multiple) {\r\n            let childItem = getTargetChild(this, event.target),\r\n                activeItems = this.activeItems;\r\n\r\n            if(childItem) {\r\n                for (let item of activeItems) {\r\n                    if (item !== childItem) {\r\n                        item.deactivate();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        // Start timer if menu is active, timeout is a valid time and it is a mouseleave event.\r\n        if(this.isActive && typeof this.timeout === 'number' && this.timeout >= 0 && !this.element.contains(event.relatedTarget)) {\r\n            this.startTimeoutTimer(this.timeout);\r\n        }\r\n\r\n        // Pass event to target item.\r\n        let targetItem = getClosestMenuItem(event.target, this.element);\r\n\r\n        if(targetItem && targetItem.getController() === this) {\r\n            targetItem.onMouseOut(event);\r\n        }\r\n    }\r\n\r\n    onClick(event) {\r\n        let target = getClosestMenuNode(event.target, this.element);\r\n\r\n        if(target === this) {\r\n            if(this.isActive && (this.toggleMenu === 'off' || this.toggleMenu === 'both')) {\r\n                this.deactivate();\r\n            } else if(!this.isActive && (this.toggleMenu === 'on' || this.toggleMenu === 'both')) {\r\n                this.activate();\r\n            }\r\n        } else if(target && isMenuItem(target) && target.getController() === this) {\r\n            target.onClick(event);\r\n        }\r\n    }\r\n\r\n    onSelect(event) {\r\n        if(this.closeOnSelect === true || (this.closeOnSelect === 'child' && event.detail.item.parent === this)) {\r\n            this.deactivate();\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // GETTER AND SETTER METHODS\r\n\r\n    /**\r\n     * Gets the menus active child items.\r\n     * @returns {Array}\r\n     */\r\n    get activeItems() {\r\n        let r = [];\r\n\r\n        for(let child of this.children) {\r\n            if(child.isActive) {\r\n                r.push(child);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Gets the menu's child items.\r\n     * @returns {Array}\r\n     */\r\n    get children() {\r\n        let r = [];\r\n\r\n        for(let element of this.element.querySelectorAll('[data-role=\"menuitem\"], [data-role=\"menu\"], [data-role=\"dropdown\"]')) {\r\n            let menuNode = getMenuNode(element);\r\n\r\n            if(menuNode && menuNode.parent === this) {\r\n                r.push(menuNode);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Returns true if the menu is visible.\r\n     * @returns {boolean}\r\n     */\r\n    get visible() {\r\n        return !this.element.classList.contains('hidden');\r\n    }\r\n\r\n    /**\r\n     * Sets the menu visible or hidden.\r\n     * @param value\r\n     */\r\n    set visible(value) {\r\n        if(value && !this.visible) {\r\n            this.element.classList.remove('hidden');\r\n            this.element.classList.add('visible');\r\n        } else if(!value && this.visible) {\r\n            this.element.classList.add('hidden');\r\n            this.element.classList.remove('visible');\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // STATIC METHODS\r\n\r\n    static FromHTML(selector, config={}) {\r\n        if(typeof selector === 'string') {\r\n            selector = document.querySelector(selector);\r\n        }\r\n\r\n        config = config || {};\r\n\r\n        let dataset = {};\r\n\r\n        if(selector.dataset.timeout) {\r\n            dataset.timeout = parseBooleanOrInt(selector.dataset.timeout);\r\n        }\r\n        if(selector.dataset.closeOnBlur) {\r\n            dataset.closeOnBlur = parseBoolean(selector.dataset.closeOnBlur);\r\n        }\r\n        if(selector.dataset.autoActivate) {\r\n            dataset.autoActivate = parseBooleanOrInt(selector.dataset.autoActivate);\r\n        }\r\n        if(selector.dataset.delay) {\r\n            dataset.delay = parseBooleanOrInt(selector.dataset.delay);\r\n        }\r\n        if(selector.dataset.multiple) {\r\n            dataset.multiple = parseBoolean(selector.dataset.multiple);\r\n        }\r\n        if(selector.dataset.toggleItem) {\r\n            dataset.toggleItem = validateChoice(selector.dataset.toggleItem, ['on', 'off', 'both']);\r\n        }\r\n        if(selector.dataset.toggleMenu) {\r\n            dataset.toggleMenu = validateChoice(selector.dataset.toggleMenu, ['on', 'off', 'both']);\r\n        }\r\n        if(selector.dataset.closeOnSelect) {\r\n            let value = validateChoice(selector.dataset.closeOnSelect, ['true', 'false', 'child']);\r\n\r\n            if(value === 'true' || value === 'false') {\r\n                value = value === 'true';\r\n            }\r\n\r\n            dataset.closeOnSelect = value;\r\n        }\r\n        if(selector.dataset.deactivateOnItemHover) {\r\n            dataset.deactivateOnItemHover = parseBoolean(selector.dataset.deactivateOnItemHover);\r\n        }\r\n\r\n        return new this({target: selector, ...dataset, ...config});\r\n    }\r\n\r\n    static widget({target, subItemConfig={}, subMenuConfig={}, config={}}={}) {\r\n        let root = this.FromHTML(target, config);\r\n\r\n        for(let element of root.element.querySelectorAll('[data-role=\"menu\"]')) {\r\n            Menu.FromHTML(element, subMenuConfig);\r\n        }\r\n\r\n        for(let element of root.element.querySelectorAll('[data-role=\"menuitem\"]')) {\r\n            MenuItem.FromHTML(element, subItemConfig);\r\n        }\r\n\r\n        return root;\r\n    }\r\n}\r\n","import Menu from './Menu';\r\n\r\n\r\nexport default class MenuBar extends Menu {\r\n    constructor({target=null, ...options}={}) {\r\n        super({\r\n            target,\r\n            closeOnBlur: true,\r\n            timeout: false,\r\n            autoActivate: false,\r\n            delay: false,\r\n            multiple: false,\r\n            toggleItem: 'both',\r\n            toggleMenu: 'none',\r\n            closeOnSelect: true,\r\n            ...options\r\n        });\r\n\r\n        this.element.classList.add('c-menubar');\r\n        this.element.classList.remove('c-menu');\r\n        this.visible = true;\r\n    }\r\n}\r\n","import MenuNode from './MenuNode';\r\nimport {getMenuNode, isMenu} from \"./core\";\r\n\r\n\r\n/**\r\n * Represents a selectable item inside a menu.\r\n */\r\nexport default class MenuItem extends MenuNode {\r\n    constructor(text, action, {target, nodeName='li', id, classNames}={}) {\r\n        let element;\r\n\r\n        if(!target) {\r\n            element = document.createElement(nodeName);\r\n            let item = document.createElement('a');\r\n\r\n            if(typeof action === 'string') {\r\n                item.href = action;\r\n            }\r\n\r\n            item.classList.add('c-menuitem__item');\r\n            item.innerHTML = text;\r\n\r\n            element.appendChild(item);\r\n        } else if(typeof target === 'string') {\r\n            element = document.querySelector(target);\r\n        } else {\r\n            element = target;\r\n        }\r\n\r\n        super(element, 'menuitem', {classNames, id});\r\n\r\n        this.isMenuItem = true;\r\n\r\n        this.element.classList.add('c-menuitem');\r\n        this.element.dataset.role = 'menuitem';\r\n\r\n        if(typeof action === 'function') {\r\n            this.on('select', action);\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // METHODS\r\n    //------------------------------------------------------------------------------------------------------------------\r\n\r\n    activate() {\r\n        if(!this.isActive) {\r\n            this.isActive = true;\r\n\r\n            let parent = this.parent,\r\n                submenu = this.submenu;\r\n\r\n            if(!parent.isActive) {\r\n                parent.activate();\r\n            }\r\n\r\n            parent.setActiveItem(this, true);\r\n\r\n            if(submenu) {\r\n                submenu.show();\r\n            }\r\n\r\n            this.trigger('activate', this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deactivates the item.\r\n     */\r\n    deactivate() {\r\n        if(this.isActive) {\r\n            this.isActive = false;\r\n\r\n            let submenu = this.submenu;\r\n\r\n            if(submenu) {\r\n                submenu.deactivate();\r\n                submenu.hide();\r\n            }\r\n\r\n            this.trigger('deactivate', this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Triggers a select action for the item.\r\n     */\r\n    select() {\r\n        this.trigger('select', this);\r\n\r\n        let event = new CustomEvent('item-select', {\r\n            detail: {\r\n                item: this\r\n            },\r\n            bubbles: true\r\n        });\r\n\r\n        this.element.dispatchEvent(event);\r\n    }\r\n\r\n    /**\r\n     * Attaches the submenu to the item.\r\n     * @param menu\r\n     * @returns {*}\r\n     */\r\n    attachSubMenu(menu) {\r\n        if(this.submenu) {\r\n            throw Error(\"Already has submenu.\");\r\n        }\r\n\r\n        this.element.appendChild(menu.element);\r\n        return menu;\r\n    }\r\n\r\n    /**\r\n     * Detaches the items current submenu if it has one and returns it.\r\n     * @returns {MenuNode}\r\n     */\r\n    detachSubMenu() {\r\n        let submenu = this.submenu;\r\n\r\n        if(submenu) {\r\n            if(this._showDelayTimer) {\r\n                clearTimeout(this._showDelayTimer);\r\n                this._showDelayTimer = null;\r\n            }\r\n\r\n            this.element.removeChild(submenu.element);\r\n        }\r\n\r\n        return submenu;\r\n    }\r\n\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // EVENT HANDLERS\r\n    //------------------------------------------------------------------------------------------------------------------\r\n\r\n    onMouseOver(event) {\r\n        if(this.getDisabled()) return;\r\n\r\n        if(!this.element.contains(event.relatedTarget)) {\r\n            // Mouse entered item.\r\n\r\n            let parent = this.parent;\r\n            parent.clearActivateItemTimer();\r\n\r\n            if(!this.isActive) {\r\n                if(!parent.isActive) {\r\n                    // Use autoActivate property.\r\n\r\n                    if(parent.autoActivate === true) {\r\n                        this.activate();\r\n                    } else if(typeof parent.autoActivate === 'number' && parent.autoActivate >= 0) {\r\n                        parent.startActivateItemTimer(this, parent.autoActivate);\r\n                    }\r\n                } else {\r\n                    // Use delay property because menu is already active.\r\n\r\n                    if(parent.delay === false) {\r\n                        this.activate();\r\n                    } else if(typeof parent.delay === 'number' && parent.delay >= 0) {\r\n                        parent.startActivateItemTimer(this, parent.delay);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        if(this.getDisabled()) return;\r\n\r\n        if(!this.element.contains(event.relatedTarget)) {\r\n            let parent = this.parent;\r\n\r\n            parent.clearActivateItemTimer(this);\r\n\r\n            // If the item doesn't have a submenu deactivate immediately when the user leaves it.\r\n            if(this.isActive && !this.submenu) {\r\n                this.deactivate();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when the user clicks the MenuItem.\r\n     * @param event\r\n     */\r\n    onClick(event) {\r\n        if(this.getDisabled()) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        let parent = this.parent,\r\n            submenu = this.submenu;\r\n\r\n        if(submenu) {\r\n            if(this.isActive && (parent.toggleItem === 'off' || parent.toggleItem === 'both')) {\r\n                this.deactivate();\r\n\r\n                // If we toggle off the last item then deactivate the parent menu.\r\n                if(parent.isActive && !parent.activeItems.length) {\r\n                    parent.deactivate();\r\n                }\r\n            } else if(!this.isActive && (parent.toggleItem === 'on' || parent.toggleItem === 'both')) {\r\n                this.activate();\r\n            }\r\n        } else {\r\n            if(!this.isActive && (parent.toggleItem === 'on' || parent.toggleItem === 'both')) {\r\n                this.activate();\r\n            }\r\n\r\n            this.select();\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // GETTERS AND SETTERS\r\n    //------------------------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Gets the items submenu.\r\n     * @returns {MenuNode}\r\n     */\r\n    get submenu() {\r\n        for(let element of this.element.children) {\r\n            let node = getMenuNode(element);\r\n\r\n            if(node && isMenu(node)) {\r\n                return node;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Implements the children interface for a MenuItem node. Will return either an empty array or an array with the\r\n     * child submenu inside it.  For MenuItem nodes this should either be 0 or 1 items but it has to be an array to\r\n     * keep with the specification.\r\n     * @returns {MenuNode[]|Array}\r\n     */\r\n    get children() {\r\n        let submenu = this.submenu;\r\n\r\n        if(submenu) {\r\n            return [submenu];\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    //------------------------------------------------------------------------------------------------------------------\r\n    // STATIC METHODS\r\n    //------------------------------------------------------------------------------------------------------------------\r\n\r\n    static FromHTML(selector, config={}) {\r\n        if(typeof selector === 'string') {\r\n            selector = document.querySelector(selector);\r\n        }\r\n\r\n        return new this(null, null, {target: selector, ...config});\r\n    }\r\n}\r\n","import {attachMenuNode, getMenuNode, isMenu, isMenuItem} from './core';\r\nimport Observable from 'core/interface/Observable';\r\nimport {addClasses} from 'core/utility';\r\n\r\n\r\n/**\r\n * The base class for all menu nodes.\r\n */\r\nexport default class MenuNode extends Observable {\r\n    constructor(element, nodeType, {classNames, id}={}) {\r\n        super();\r\n        this.element = element;\r\n        attachMenuNode(this.element, this);\r\n\r\n        /**\r\n         * Used to test if an object is a menu controller.\r\n         * @readonly\r\n         * @type {boolean}\r\n         */\r\n        this.isMenuController = false;\r\n        this.menuNodeType = nodeType;\r\n\r\n        if(classNames) {\r\n            addClasses(this.element, classNames);\r\n        }\r\n\r\n        if(id) {\r\n            this.element.id = id;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the root most MenuNode.\r\n     * @returns {MenuNode}\r\n     */\r\n    get root() {\r\n        let o = this,\r\n            r = this;\r\n\r\n        while(o) {\r\n            o = o.parent;\r\n\r\n            if(o) r = o;\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Returns the parent Menu or MenuItem.\r\n     * @returns {MenuNode|Menu|MenuItem}\r\n     */\r\n    get parent() {\r\n        let o = this.element.parentElement;\r\n\r\n        while(o) {\r\n            let node = getMenuNode(o);\r\n\r\n            if(node) {\r\n                return node;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the first MenuItem parent that the node has in the tree.\r\n     * @returns {MenuItem}\r\n     */\r\n    get parentItem() {\r\n        let o = this.parent;\r\n\r\n        while(o) {\r\n            if(isMenuItem(o)) {\r\n                return o;\r\n            }\r\n\r\n            o = o.parent;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the closest parent Menu that the node has.\r\n     * @returns {Menu}\r\n     */\r\n    get parentMenu() {\r\n        let o = this.parent;\r\n\r\n        while(o) {\r\n            if(isMenu(o)) {\r\n                return o;\r\n            }\r\n\r\n            o = o.parent;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * True if the node is active.\r\n     * @returns {boolean}\r\n     */\r\n    get isActive() {\r\n        return this.element.classList.contains('active');\r\n    }\r\n\r\n    set isActive(value) {\r\n        let isActive = this.isActive;\r\n\r\n        if(!isActive && value) {\r\n            this.element.classList.add('active');\r\n        } else if(isActive && !value) {\r\n            this.element.classList.remove('active');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * True if the node is disabled.\r\n     * @returns {boolean}\r\n     */\r\n    get isDisabled() {\r\n        return this.element.classList.contains('disabled');\r\n    }\r\n\r\n    set isDisabled(value) {\r\n        if(!!value !== this.isDisabled) {\r\n            this.element.classList.toggle('disabled');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true if the node or any of it's ancestor nodes in the tree are disabled.\r\n     * @returns {boolean}\r\n     */\r\n    getDisabled() {\r\n        let o = this.element;\r\n\r\n        while(o) {\r\n            if(o.classList.contains('disabled')) {\r\n                return true;\r\n            }\r\n\r\n            o = o.parentElement;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns the controller node that capture event listeners.\r\n     * @returns {MenuNode}\r\n     */\r\n    getController() {\r\n        let o = this;\r\n\r\n        while(o) {\r\n            if(o.isMenuController) {\r\n                return o;\r\n            }\r\n\r\n            o = o.parent;\r\n        }\r\n    }\r\n\r\n    appendTo(element) {\r\n        if(element.jquery) {\r\n            element.append(this.element);\r\n        } else if(typeof element === 'string') {\r\n            element = document.querySelector(element);\r\n            element.appendChild(this.element);\r\n        } else {\r\n            element.appendChild(this.element);\r\n        }\r\n    }\r\n}\r\n","import {privateCache} from 'core/data';\r\nimport {AssertionError} from 'core/errors';\r\nimport MenuNode from './MenuNode';\r\n\r\n\r\n/**\r\n * Retrieves an attached MenuNode object from the element.\r\n * @param element {Element}\r\n * @returns {MenuNode}\r\n */\r\nexport function getMenuNode(element) {\r\n    return privateCache.get(element, 'menu-node');\r\n}\r\n\r\n\r\n/**\r\n * Attaches a MenuNode element to a dom element.\r\n * @param element {Element}\r\n * @param node {MenuNode}\r\n */\r\nexport function attachMenuNode(element, node) {\r\n    privateCache.set(element, 'menu-node', node);\r\n}\r\n\r\n\r\nexport function assertMenuNode(obj) {\r\n    if(!obj) {\r\n        throw AssertionError(\"Assert: Must be MenuNode\");\r\n    }\r\n\r\n    if(!(obj instanceof MenuNode)) {\r\n        throw AssertionError(\"Assert: Must be MenuNode\");\r\n    }\r\n}\r\n\r\n\r\nexport function getClosestMenuNode(element, context) {\r\n    while(element) {\r\n        let node = getMenuNode(element);\r\n\r\n        if(node) {\r\n            return node;\r\n        }\r\n\r\n        if(element === context) {\r\n            break;\r\n        }\r\n\r\n        element = element.parentElement;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the closest Menu node.\r\n * @param element\r\n * @param context\r\n * @returns {Menu}\r\n */\r\nexport function getClosestMenu(element, context) {\r\n    while(element) {\r\n        let node = getMenuNode(element);\r\n\r\n        if(node && isMenu(node)) {\r\n            // noinspection JSValidateTypes\r\n            return node;\r\n        }\r\n\r\n        if(element === context) {\r\n            break;\r\n        }\r\n\r\n        element = element.parentElement;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the closest MenuItem\r\n * @param element\r\n * @param context\r\n * @returns {MenuItem}\r\n */\r\nexport function getClosestMenuItem(element, context) {\r\n    while(element) {\r\n        let node = getMenuNode(element);\r\n\r\n        if(node && isMenuItem(node)) {\r\n            // noinspection JSValidateTypes\r\n            return node;\r\n        }\r\n\r\n        if(element === context) {\r\n            break;\r\n        }\r\n\r\n        element = element.parentElement;\r\n    }\r\n}\r\n\r\n\r\nexport function isMenuItem(node) {\r\n    if(node && node.nodeType) node = getMenuNode(node);\r\n\r\n    if(node) {\r\n        if(node.menuNodeType === 'menuitem' || node.menuNodeType === 'dropdown') {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\nexport function isMenu(node) {\r\n    if(node && node.nodeType) node = getMenuNode(node);\r\n\r\n    if(node) {\r\n        if(node.menuNodeType === 'menu') {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\nexport function isMenuNode(node) {\r\n    if(node && node.nodeType) node = getMenuNode(node);\r\n    return node && node instanceof MenuNode;\r\n}\r\n\r\n\r\nexport function getTargetChild(parent, targetElement) {\r\n    let node = getClosestMenuNode(targetElement, parent.element);\r\n\r\n    while(node) {\r\n        if(node === parent) {\r\n            return;\r\n        }\r\n\r\n        let _parent = node.parent;\r\n\r\n        if(parent === _parent) {\r\n            return node;\r\n        }\r\n\r\n        node = _parent;\r\n    }\r\n}","import {privateCache} from 'core/data';\r\nimport {Menu, MenuBar, MenuItem} from 'menus';\r\nimport {getTargetChild, getClosestMenuNode} from 'menus/core';\r\n\r\n\r\nwindow.privateCache = privateCache;\r\n\r\n\r\nfunction build_test_menu_1() {\r\n    let menu = new MenuBar(),\r\n        container = document.querySelector('#test-menu-area');\r\n\r\n    container.appendChild(menu.element);\r\n\r\n    let fileItem = new MenuItem({text: \"File\"}),\r\n        editItem = new MenuItem({text: \"Edit\"}),\r\n        viewItem = new MenuItem({text: \"View\"}),\r\n        navigateItem = new MenuItem({text: \"Navigate\"}),\r\n        codeItem = new MenuItem({text: \"Code\"}),\r\n        refactorItem = new MenuItem({text: \"Refactor\"}),\r\n        toolsItem = new MenuItem({text: \"Tools\"}),\r\n        vcsItem = new MenuItem({text: \"VCS\"}),\r\n        windowItem = new MenuItem({text: \"Window\"}),\r\n        helpItem = new MenuItem({text: \"Help\"});\r\n\r\n    menu.add(fileItem);\r\n    menu.add(editItem);\r\n    menu.add(viewItem);\r\n    menu.add(navigateItem);\r\n    menu.add(codeItem);\r\n    menu.add(refactorItem);\r\n    menu.add(toolsItem);\r\n    menu.add(vcsItem);\r\n    menu.add(windowItem);\r\n    menu.add(helpItem);\r\n\r\n    let fileSubMenu = new Menu();\r\n    fileItem.attachSubMenu(fileSubMenu);\r\n\r\n    for(let i = 0; i < 10; i++) {\r\n        let item = new MenuItem({text: `Sub Item ${i+1}`});\r\n        fileSubMenu.add(item);\r\n    }\r\n}\r\n\r\n\r\nfunction build_from_dom() {\r\n    let root = MenuBar.widget({\r\n        target: '#test-menubar'\r\n    });\r\n\r\n    window.root = root;\r\n\r\n    return root;\r\n}\r\n\r\n\r\nbuild_from_dom();\r\n\r\n\r\nfunction testMixin(superClass) {\r\n    return class extends superClass {\r\n        test() {\r\n            console.log(\"Hello World\");\r\n        }\r\n    }\r\n}\r\n\r\n\r\nclass TestClass {\r\n    constructor(msg) {\r\n        console.log(msg);\r\n        this.msg = msg;\r\n    }\r\n\r\n    test2() {\r\n        console.log(\"Test class 2\");\r\n    }\r\n}\r\n\r\n\r\nwindow.testMixin = testMixin;\r\nwindow.TestClass = TestClass;\r\nwindow.getTargetChild = getTargetChild;\r\nwindow.getClosestMenuNode = getClosestMenuNode;"],"sourceRoot":""}