{"version":3,"sources":["webpack://pendora/webpack/universalModuleDefinition","webpack://pendora/webpack/bootstrap","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/fx/Animation.js","webpack://pendora/./src/core/fx/FX.js","webpack://pendora/./src/core/fx/easing.js","webpack://pendora/./src/core/fx/frame.js","webpack://pendora/./src/core/fx/types.js","webpack://pendora/./src/core/ui/Draggable.js","webpack://pendora/./src/core/ui/Resizeable.js","webpack://pendora/./src/core/ui/position.js","webpack://pendora/./src/core/utility/debounce.js","webpack://pendora/./src/core/utility/decorators.js","webpack://pendora/./src/core/utility/dom.js","webpack://pendora/./src/core/utility/index.js","webpack://pendora/./src/core/utility/iter.js","webpack://pendora/./src/core/utility/math.js","webpack://pendora/./src/core/utility/object.js","webpack://pendora/./src/core/utility/set.js","webpack://pendora/./src/core/vectors/RGBA.js","webpack://pendora/./src/core/vectors/Rect.js","webpack://pendora/./src/core/vectors/Vec2.js","webpack://pendora/./src/core/vectors/Vec3.js","webpack://pendora/./src/core/vectors/Vec4.js","webpack://pendora/./src/core/vectors/index.js","webpack://pendora/./tests/src/test_resizeable.js"],"names":["TOPICS","Symbol","STOP","Publisher","topic","callback","push","fn","on","off","args","apply","arguments","length","callbacks","i","cb","splice","slice","e","ExtendableError","message","name","constructor","Error","captureStackTrace","stack","IndexError","KeyError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","UnitError","assert","condition","Animation","duration","frames","applyFrame","defaultApplyFrame","bubbleFrameEvent","finishFrame","element","easing","onStart","onFrame","onPause","onCancel","onEnd","onComplete","FX","animation","fx","EASING","linear","position","autoPlay","init","call","destroy","play","animate","complete","config","defaults","_options","Object","assign","canceled","paused","pending","error","playing","regNumberWithUnit","regColor","regFunction","TYPE_FUNCTIONS","hex","RGBA","parseHexColorStringArg","rgb","parseRGBAColorStringArgs","rgba","DeadFXError","assertFXAlive","status","doPromiseAction","onAction","value","resolveOrReject","_prepareValue","trim","m","exec","NumberWithUnit","parseFloat","_getFrames","r","keyframeIndex","hasOwnProperty","frame","property","toStringTag","selectElement","undefined","key","pos","freeze","properties","sort","a","b","startPosition","startValue","endPosition","endValue","getFrameFX","options","p","delta","subtract","add","scalar","tick","performance","now","frameFN","timestamp","dispatchEvent","CustomEvent","bubbles","detail","window","requestAnimationFrame","_complete","cancelAnimationFrame","_triggerEndEvent","completeAnimation","_cancel","getFrame","onResolve","state","onReject","Promise","resolve","reject","onFinally","then","style","toString","unit","TypeError","reg_percentage_test","cursor","target","event","rect","Rect","x","clientX","left","y","clientY","top","buildTestIntersectionFunction","amount","targetRect","intersection","getArea","Draggable","container","axis","exclude","delay","offset","resistance","handle","helper","revert","revertDuration","scrollSpeed","selector","tolerance","setHelperSize","grid","document","querySelector","WeakMap","onMouseDown","addEventListener","pageXOffset","pageYOffset","currentPosition","cancelMouseTracking","cancelTimer","closest","contains","Array","isArray","preventDefault","distanceBrokenPromise","isDistanceBroken","onMouseMove","calcDistance","removeEventListener","timerPromise","timer","setTimeout","clearTimeout","onMouseUp","all","timerStatus","distanceStatus","startDragging","offsetX","offsetY","startingX","startingY","cache","get","mousePosition","isDragging","set","cancel","scroller","dropTargets","startingClientRect","translate","width","height","pointerEvents","parentElement","appendChild","classList","refreshDropTargets","mouseX","mouseY","currentDropTargets","getDropTargets","dropTarget","indexOf","dispatchDropEvent","_moveElementToPosition","_selectElementRect","ScrollHelper","buildScrollHelper","publishDragMoveEvent","remove","accepted","isDefaultPrevented","reverted","publishDragDropEvent","isAccepted","accept","removeChild","setElementClientPosition","_revert","mousePos","testFunction","type","test","droppable","droppables","querySelectorAll","item","starting","self","startingRect","moveTo","right","bottom","Math","floor","fit","dragInstance","originalTarget","_getScrollParent","o","scrollWidth","clientWidth","scrollHeight","clientHeight","_getScrollRect","nodeName","innerWidth","innerHeight","scrollXSpeed","scrollYSpeed","frameID","scrollLeft","scrollTop","scrollParentRect","clamp","scrollParent","speed","getScrollSpeed","scrollRect","ScrollArea","scroll","getScroll","clone","opacity","className","zIndex","nodeType","cloneNode","originalEvent","currentRect","dispatch","publish","eventPackage","draggable","customEvent","DIRECTIONS","Set","CONTAINERS","client","viewport","parent","bb","getBoundingClientRect","Resizeable","handles","minWidth","maxWidth","minHeight","maxHeight","keepAspectRatio","autoHide","split","isSuperset","direction","createElement","dataset","_onMouseDown","_startResizing","isResizing","resizeable","startPosX","scrollX","startPosY","scrollY","doc","startBox","clientRectToDocumentSpace","addClasses","boxSizing","getComputedStyle","deltaX","deltaY","Infinity","_container","snapToGrid","ceil","console","log","targetClientRect","regMatrix","getOffsetElement","getClientRect","getBoundingOffsetRect","offsetParent","offsetRect","getRootContainingClientRect","getBoundingDocumentRect","getTranslation","transform","Vec3","data","setTranslation","z","getCssPosition","Vec2","parseInt","setCssPosition","method","positionType","box","current","cssPosition","fromRect","documentRectToClientSpace","gridSize","roundingFunction","round","Number","isNaN","convertDomRectToObject","domRect","getPointOnElement","referenceElement","point","constrain","getSubBoundingBox","getDistanceBetweenRects","rect1","rect2","vec1","vec2","isXOverlapping","isYOverlapping","min","abs","x1","y1","x2","y2","sqrt","pow","getElementOffset","setElementOffset","coords","debounce","wait","timeout","later","proto","descriptor","placement","REG_WHITESPACE","parseHTML","html","template","innerHTML","content","fragment","createDocumentFragment","firstChild","createFragment","classes","removeClasses","assignAttributes","attributes","setAttribute","context","jquery","emptyElement","isWindow","setScroll","scrollTo","findChild","child","matches","l","filterChildren","variable","setInterval","items","keys","values","enumerate","chain","object","iterable","iterables","iter","firstValue","any","minValue","maxValue","max","modulo","mod","randomChoice","array","random","arraysEqual","array1","array2","isEmptyObject","getOwnProperty","obj","propName","defaultValue","getPropertyByPath","path","parts","part","rangeFindItem","predicate","startingIndex","endingIndex","subset","elem","has","union","setA","setB","_union","_intersection","symmetricDifference","_difference","difference","regPercentage","g","substring","substr","Vec4","regWhitespace","regPositionPart","positionShortHandValues","topleft","topright","bottomleft","bottomright","domElement","_new","anchor","getAnchor","closestX","closestY","distance","my","at","of","inside","collision","evaluatePositionString","reference","containsX","reflect","getCenterPoint","containsY","fitX","fitY","string","rx","ry","_evaluatePositionStringComponent","restore","documentElement","vec4","vertex","vec3","valueOrVec4","ResizeableTestPage","element1"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;;;;;AClFA,IAAIA,MAAM,GAAGC,MAAM,CAAC,QAAD,CAAnB;AAGO,SAASC,IAAT,GAAgB;AACnB,QAAMA,IAAN;AACH;;IAGoBC,S;;;AACjB,uBAAc;AAAA;;AACV,SAAKH,MAAL,IAAe,EAAf;AACH;;;;uBAEEI,K,EAAOC,Q,EAAU;AAChB,UAAG,CAAC,KAAKL,MAAL,EAAaI,KAAb,CAAJ,EAAyB,KAAKJ,MAAL,EAAaI,KAAb,IAAsB,EAAtB;AACzB,WAAKJ,MAAL,EAAaI,KAAb,EAAoBE,IAApB,CAAyBD,QAAzB;AACA,aAAO,IAAP;AACH;;;yBAEID,K,EAAOG,E,EAAI;AAAA;;AACZ,UAAIC,EAAE,GAAG,SAALA,EAAK,GAAa;AAClB,aAAI,CAACC,GAAL,CAASL,KAAT,EAAgBG,EAAhB;;AADkB,0CAATG,IAAS;AAATA,cAAS;AAAA;;AAElB,eAAOH,EAAE,CAACI,KAAH,CAAS,KAAT,EAAeD,IAAf,CAAP;AACH,OAHD;;AAKAF,QAAE,CAACD,EAAH,GAAQA,EAAR;AACA,WAAKC,EAAL,CAAQJ,KAAR,EAAeG,EAAf;AACA,aAAO,IAAP;AACH;;;wBAEGH,K,EAAOC,Q,EAAU;AACjB,UAAGO,SAAS,CAACC,MAAV,KAAqB,CAAxB,EAA2B;AACvB;AACA,aAAKb,MAAL,IAAe,EAAf;AACA,eAAO,IAAP;AACH,OAJD,MAIO,IAAGY,SAAS,CAACC,MAAV,KAAqB,CAAxB,EAA2B;AAC9B;AACA,aAAKb,MAAL,EAAaI,KAAb,IAAsB,EAAtB;AACA,eAAO,IAAP;AACH;;AAED,UAAG,CAAC,KAAKJ,MAAL,CAAD,IAAiB,CAAC,KAAKA,MAAL,EAAaI,KAAb,CAAlB,IAAyC,CAAC,KAAKJ,MAAL,EAAaI,KAAb,EAAoBS,MAAjE,EAAyE;AACrE;AACA,eAAO,IAAP;AACH;;AAED,UAAIC,SAAS,GAAG,KAAKd,MAAL,EAAaI,KAAb,CAAhB;;AAEA,WAAI,IAAIW,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGV,QAAQ,CAACQ,MAA5B,EAAoCE,CAAC,EAArC,EAAyC;AACrC,YAAIC,EAAE,GAAGF,SAAS,CAACC,CAAD,CAAlB;;AACA,YAAGC,EAAE,KAAKX,QAAP,IAAmBW,EAAE,CAACT,EAAH,KAAUF,QAAhC,EAA0C;AACtCS,mBAAS,CAACG,MAAV,CAAiBF,CAAjB,EAAoB,CAApB;AACA;AACH;AACJ;;AAED,UAAGD,SAAS,CAACD,MAAV,KAAqB,CAAxB,EAA2B;AACvB,eAAO,KAAKb,MAAL,EAAaI,KAAb,CAAP;AACH;;AAED,aAAO,IAAP;AACH;;;6BAEQA,K,EAAOC,Q,EAAU;AACtB,UAAGO,SAAS,CAACC,MAAV,KAAqB,CAAxB,EAA2B;AACvB,eAAO,CAAC,CAAC,KAAKb,MAAL,EAAaI,KAAb,CAAT;AACH,OAFD,MAEO;AACH,YAAIU,SAAS,GAAG,KAAKd,MAAL,EAAaI,KAAb,CAAhB;;AAEA,aAAI,IAAIW,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGD,SAAS,CAACD,MAA7B,EAAqCE,CAAC,EAAtC,EAA0C;AACtC,cAAIC,EAAE,GAAGF,SAAS,CAACC,CAAD,CAAlB;;AACA,cAAGC,EAAE,KAAKX,QAAP,IAAmBW,EAAE,CAACT,EAAH,KAAUF,QAAhC,EAA0C;AACtC,mBAAO,IAAP;AACH;AACJ;AACJ;;AAED,aAAO,KAAP;AACH;;;4BAEOD,K,EAAgB;AACpB,UAAG,KAAKJ,MAAL,EAAaI,KAAb,CAAH,EAAwB;AACpB,YAAIU,SAAS,GAAG,KAAKd,MAAL,EAAaI,KAAb,EAAoBc,KAApB,CAA0B,CAA1B,CAAhB;;AADoB,2CADVR,IACU;AADVA,cACU;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAGpB,+BAAcI,SAAd,8HAAyB;AAAA,gBAAjBE,EAAiB;;AACrB,gBAAI;AACAA,gBAAE,CAACL,KAAH,CAAS,IAAT,EAAeD,IAAf;AACH,aAFD,CAEE,OAAOS,CAAP,EAAU;AACR,kBAAGA,CAAC,KAAKjB,IAAT,EAAe;AACX,uBAAOiB,CAAP;AACH,eAFD,MAEO;AACH,sBAAMA,CAAN;AACH;AACJ;AACJ;AAbmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcvB;;AAED,aAAO,IAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjGE,IAAMC,eAAb;AAAA;AAAA;AAAA;;AACI,2BAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AACjB;AACA,yFAAMA,OAAN;AACA,UAAKC,IAAL,GAAY,MAAKC,WAAL,CAAiBD,IAA7B,CAHiB,CAKjB;;AACA,QAAG,OAAOE,KAAK,CAACC,iBAAb,KAAmC,UAAtC,EAAkD;AAC9C;AACAD,WAAK,CAACC,iBAAN,gCAA8B,MAAKF,WAAnC;AACH,KAHD,MAGO;AACH,YAAKG,KAAL,GAAc,IAAIF,KAAJ,CAAUH,OAAV,CAAD,CAAqBK,KAAlC;AACH;;AAXgB;AAYpB;;AAbL;AAAA,mBAAqCF,KAArC;AAiBO,IAAMG,UAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAAgCP,eAAhC;AAKO,IAAMQ,QAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAA8BR,eAA9B;AAKO,IAAMS,UAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAAgCT,eAAhC;AAKO,IAAMU,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAAoCV,eAApC;AAKO,IAAMW,eAAb;AAAA;AAAA;AAAA;;AACI,2BAAYV,OAAZ,EAAqBW,IAArB,EAA2B;AAAA;;AAAA;;AACvB,0FAAMX,OAAN;AACA,WAAKW,IAAL,GAAYA,IAAZ;AACA,WAAKC,QAAL,GAAgB,EAAhB;AAHuB;AAI1B;;AALL;AAAA,EAAqCb,eAArC;AASO,IAAMc,cAAb;AAAA;AAAA;AAAA;;AACI,0BAAYb,OAAZ,EAAqB;AAAA;;AAAA,uFACXA,OADW;AAEpB;;AAHL;AAAA,EAAoCD,eAApC;AAOO,IAAMe,SAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAA+Bf,eAA/B;AAKA;;;;;;;AAMO,SAASgB,MAAT,CAAgBC,SAAhB,EAA2BhB,OAA3B,EAAoC;AACvC,MAAI,CAACgB,SAAL,EAAgB;AACZ,UAAM,IAAIH,cAAJ,CAAmBb,OAAnB,CAAN;AACH;AACJ,C;;;;;;;;;;;;;;;;;;;;;;;;;ACrED;AACA;AACA;;IAGqBiB,S;;;AAUjB;;;;;;;;AAQA,2BAAmH;AAAA,6BAAtGC,QAAsG;AAAA,QAAtGA,QAAsG,8BAA7F,IAA6F;AAAA,QAAvFC,MAAuF,QAAvFA,MAAuF;AAAA,+BAA/EC,UAA+E;AAAA,QAA/EA,UAA+E,gCAAlEC,wDAAkE;AAAA,qCAA/CC,gBAA+C;AAAA,QAA/CA,gBAA+C,sCAA5B,KAA4B;AAAA,gCAArBC,WAAqB;AAAA,QAArBA,WAAqB,iCAAP,IAAO;;AAAA;;AAC/G,SAAKJ,MAAL,GAAcA,MAAd;AACA,SAAKC,UAAL,GAAkBA,UAAU,IAAIH,SAAS,CAACI,iBAA1C;AACA,SAAKC,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKL,QAAL,GAAgBA,QAAhB;AACH;AAED;;;;;;;;;;;;;;;;;;;;;;gCAkB6I;AAAA,UAAvIM,OAAuI,SAAvIA,OAAuI;AAAA,UAA9HL,MAA8H,SAA9HA,MAA8H;AAAA,UAAtHD,QAAsH,SAAtHA,QAAsH;AAAA,UAA5GE,UAA4G,SAA5GA,UAA4G;AAAA,UAAhGK,MAAgG,SAAhGA,MAAgG;AAAA,UAAxFC,OAAwF,SAAxFA,OAAwF;AAAA,UAA/EC,OAA+E,SAA/EA,OAA+E;AAAA,UAAtEC,OAAsE,SAAtEA,OAAsE;AAAA,UAA7DC,QAA6D,SAA7DA,QAA6D;AAAA,UAAnDC,KAAmD,SAAnDA,KAAmD;AAAA,UAA5CC,UAA4C,SAA5CA,UAA4C;AAAA,UAAhCT,gBAAgC,SAAhCA,gBAAgC;AAAA,UAAdC,WAAc,SAAdA,WAAc;AACzI,aAAO,IAAIS,2CAAJ,CAAOR,OAAP,EAAgBL,MAAhB,EAAwBD,QAAxB,EAAkC;AACrCE,kBAAU,EAAVA,UADqC;AAErCK,cAAM,EAANA,MAFqC;AAGrCQ,iBAAS,EAAE,IAH0B;AAIrCP,eAAO,EAAPA,OAJqC;AAKrCC,eAAO,EAAPA,OALqC;AAMrCC,eAAO,EAAPA,OANqC;AAOrCC,gBAAQ,EAARA,QAPqC;AAQrCC,aAAK,EAALA,KARqC;AASrCC,kBAAU,EAAVA,UATqC;AAUrCT,wBAAgB,EAAhBA,gBAVqC;AAWrCC,mBAAW,EAAXA;AAXqC,OAAlC,CAAP;AAaH;AAED;;;;;;;4BAIQW,E,EAAI,CAEX;AAED;;;;;;;;;;;;;;;;;;;4BAgBQV,O,EAAoL;AAAA;;AAAA,sFAAJ,EAAI;AAAA,iCAA1KN,QAA0K;AAAA,UAA1KA,QAA0K,+BAAjK,IAAiK;AAAA,+BAA3JO,MAA2J;AAAA,UAA3JA,MAA2J,6BAAlJU,8CAAM,CAACC,MAA2I;AAAA,gCAAnIV,OAAmI;AAAA,UAAnIA,OAAmI,8BAAzH,IAAyH;AAAA,gCAAnHC,OAAmH;AAAA,UAAnHA,OAAmH,8BAAzG,IAAyG;AAAA,gCAAnGC,OAAmG;AAAA,UAAnGA,OAAmG,8BAAzF,IAAyF;AAAA,iCAAnFC,QAAmF;AAAA,UAAnFA,QAAmF,+BAAxE,IAAwE;AAAA,8BAAlEC,KAAkE;AAAA,UAAlEA,MAAkE,4BAA1D,IAA0D;AAAA,mCAApDC,UAAoD;AAAA,UAApDA,UAAoD,iCAAvC,IAAuC;AAAA,iCAAjCM,QAAiC;AAAA,UAAjCA,QAAiC,+BAAxB,CAAwB;AAAA,iCAArBC,QAAqB;AAAA,UAArBA,QAAqB,+BAAZ,IAAY;;AACxL,UAAGpB,QAAQ,KAAK,IAAhB,EAAsB;AAClBA,gBAAQ,GAAG,KAAKA,QAAhB;AACH;;AAED,UAAIgB,EAAE,GAAG,KAAKK,IAAL,CAAU;AACff,eAAO,EAAEA,OADM;AAEfL,cAAM,EAAE,KAAKA,MAFE;AAGfD,gBAAQ,EAARA,QAHe;AAIfE,kBAAU,EAAE,KAAKA,UAJF;AAKfK,cAAM,EAANA,MALe;AAMfQ,iBAAS,EAAE,IANI;AAOfP,eAAO,EAAPA,OAPe;AAQfC,eAAO,EAAPA,OARe;AASfC,eAAO,EAAPA,OATe;AAUfC,gBAAQ,EAARA,QAVe;AAWfC,aAAK,EAAE,eAACI,EAAD,EAAQ;AACX,cAAGJ,MAAH,EAAUA,MAAK,CAACU,IAAN,CAAWN,EAAX,EAAeA,EAAf;;AACV,eAAI,CAACO,OAAL,CAAaP,EAAb;AACH,SAdc;AAefH,kBAAU,EAAVA,UAfe;AAgBfT,wBAAgB,EAAE,KAAKA,gBAhBR;AAiBfC,mBAAW,EAAE,KAAKA;AAjBH,OAAV,CAAT;;AAoBA,UAAGc,QAAH,EAAa;AACTH,UAAE,QAAF,CAAQG,QAAR;AACH;;AAED,UAAGC,QAAH,EAAa;AACTJ,UAAE,CAACQ,IAAH;AACH;;AACD,aAAOR,EAAP;AACH;;;yBAEIV,O,EAASa,Q,EAAU;AACpB,WAAKM,OAAL,CAAanB,OAAb,EAAsB;AAACc,gBAAQ,EAAE,KAAX;AAAkBD,gBAAQ,EAAEA;AAA5B,OAAtB;AACA,aAAOpB,SAAS,CAAC2B,QAAjB;AACH;AAED;;;;;;;;;;;;;;;;;;2BAeoC;AAAA;;AAAA,UAA/BpB,OAA+B,uEAArB,IAAqB;AAAA,UAAfqB,MAAe,uEAAN,IAAM;AAChC,UAAIC,QAAQ,GAAG;AACXtB,eAAO,EAAPA,OADW;AAEXqB,cAAM,EAANA;AAFW,OAAf;AAKA,aAAO,YAAqC;AAAA,YAApCrB,OAAoC,uEAA1BsB,QAA0B;AAAA,YAAhBD,MAAgB,uEAAT,IAAS;AACxCrB,eAAO,GAAGA,OAAO,KAAKsB,QAAZ,GAAuBtB,OAAO,CAACsB,QAA/B,GAA0CtB,OAApD;AAEA,YAAIuB,QAAQ,GAAG,EAAf;AACA,YAAID,QAAQ,CAACD,MAAb,EAAqBG,MAAM,CAACC,MAAP,CAAcF,QAAd,EAAwBD,QAAQ,CAACD,MAAjC;AACrB,YAAIA,MAAJ,EAAYG,MAAM,CAACC,MAAP,CAAcF,QAAd,EAAwBF,MAAxB;AAEZ,eAAO,MAAI,CAACF,OAAL,CAAanB,OAAb,EAAsBuB,QAAtB,CAAP;AACH,OARD;AASH;;;;;;gBA1JgB9B,S,uBACUI,wD;;gBADVJ,S,cAGCe,2CAAE,CAACY,Q;;gBAHJ3B,S,cAICe,2CAAE,CAACkB,Q;;gBAJJjC,S,YAKDe,2CAAE,CAACmB,M;;gBALFlC,S,aAMAe,2CAAE,CAACoB,O;;gBANHnC,S,WAOFe,2CAAE,CAACqB,K;;gBAPDpC,S,aAQAe,2CAAE,CAACsB,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbxB;AACA;AACA;AACA;AACA;AACA;AAGA,IAAMC,iBAAiB,GAAG,0BAA1B;AAAA,IACIC,QAAQ,GAAG,qDADf;AAAA,IAEIC,WAAW,GAAG,gCAFlB;AAKA,IAAMC,cAAc,GAAG;AACnBC,KAAG,EAAEC,6CAAI,CAACC,sBADS;AAEnBC,KAAG,EAAEF,6CAAI,CAACG,wBAFS;AAGnBC,MAAI,EAAEJ,6CAAI,CAACG;AAHQ,CAAvB;AAOO,IAAME,WAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAAiClE,uDAAjC;;AAGA,SAASmE,aAAT,CAAuBhC,EAAvB,EAA2B;AACvB,MAAIA,EAAE,CAACiC,MAAH,KAAcnC,EAAE,CAACY,QAAjB,IAA6BV,EAAE,CAACiC,MAAH,KAAcnC,EAAE,CAACqB,KAA9C,IAAuDnB,EAAE,CAACiC,MAAH,KAAcnC,EAAE,CAACY,QAA5E,EAAsF;AAClF,UAAM,IAAIqB,WAAJ,CAAgB,oBAAhB,CAAN;AACH;AACJ;;AAGD,SAASG,eAAT,CAAyBC,QAAzB,EAAmCC,KAAnC,EAA0CC,eAA1C,EAA2D;AACvD,MAAI,OAAOF,QAAP,KAAoB,UAAxB,EAAoC;AAChCC,SAAK,GAAGD,QAAQ,CAACC,KAAD,CAAhB;AACH;;AAEDC,iBAAe,CAACD,KAAD,CAAf;AACH;;AAGD,SAASE,aAAT,CAAuBF,KAAvB,EAA8B;AAC1B,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3BA,SAAK,GAAGA,KAAK,CAACG,IAAN,EAAR;AAEA,QAAIC,CAAC,GAAGnB,iBAAiB,CAACoB,IAAlB,CAAuBL,KAAvB,CAAR;;AAEA,QAAII,CAAJ,EAAO;AACH,aAAO,IAAIE,qDAAJ,CAAmBC,UAAU,CAACH,CAAC,CAAC,CAAD,CAAF,CAA7B,EAAqCA,CAAC,CAAC,CAAD,CAAtC,CAAP;AACH;;AAEDA,KAAC,GAAGlB,QAAQ,CAACmB,IAAT,CAAcL,KAAd,CAAJ;;AAEA,QAAII,CAAJ,EAAO;AACH,aAAOhB,cAAc,CAACC,GAAf,CAAmBe,CAAC,CAAC,CAAD,CAApB,CAAP;AACH;;AAEDA,KAAC,GAAGjB,WAAW,CAACkB,IAAZ,CAAiBL,KAAjB,CAAJ;;AAEA,QAAII,CAAJ,EAAO;AACH,aAAOhB,cAAc,CAACgB,CAAC,CAAC,CAAD,CAAF,CAAd,CAAqBA,CAAC,CAAC,CAAD,CAAtB,CAAP;AACH;AACJ;;AAED,SAAOJ,KAAP;AACH;;AAGD,SAASQ,UAAT,CAAoB5C,EAApB,EAAwBV,OAAxB,EAAiCL,MAAjC,EAAyC;AACrC,MAAI4D,CAAC,GAAG,EAAR;;AAEA,MAAI,OAAO5D,MAAP,KAAkB,UAAtB,EAAkC;AAC9BA,UAAM,GAAGA,MAAM,CAACqB,IAAP,CAAYN,EAAZ,EAAgBV,OAAhB,EAAyBU,EAAzB,CAAT;AACH;;AAED,OAAK,IAAI8C,aAAT,IAA0B7D,MAA1B,EAAkC;AAC9B,QAAI,CAACA,MAAM,CAAC8D,cAAP,CAAsBD,aAAtB,CAAL,EAA2C;AAE3C,QAAIE,KAAK,GAAG/D,MAAM,CAAC6D,aAAD,CAAlB;AACAD,KAAC,CAACC,aAAD,CAAD,GAAmB,EAAnB;;AAEA,SAAK,IAAIG,QAAT,IAAqBD,KAArB,EAA4B;AACxB,UAAI,CAACA,KAAK,CAACD,cAAN,CAAqBE,QAArB,CAAL,EAAqC;AACrCJ,OAAC,CAACC,aAAD,CAAD,CAAiBG,QAAjB,IAA6BX,aAAa,CAACU,KAAK,CAACC,QAAD,CAAN,CAA1C;AACH;AACJ;;AAED,SAAOJ,CAAP;AACH;AAGD;;;;;sBA2BKnG,MAAM,CAACwG,W;;IAxBSpD,E;;;AA0BjB,cAAYR,OAAZ,EAAqBL,MAArB,EAA6BD,QAA7B,EAAqQ;AAAA,mFAAJ,EAAI;AAAA,+BAA7NE,UAA6N;AAAA,QAA7NA,UAA6N,gCAAhNC,wDAAgN;AAAA,8BAA7LY,SAA6L;AAAA,QAA7LA,SAA6L,+BAAjL,IAAiL;AAAA,2BAA3KR,MAA2K;AAAA,QAA3KA,MAA2K,4BAAlKU,8CAAM,CAACC,MAA2J;AAAA,+BAAnJL,UAAmJ;AAAA,QAAnJA,UAAmJ,gCAAtI,IAAsI;AAAA,6BAAhIF,QAAgI;AAAA,QAAhIA,QAAgI,8BAArH,IAAqH;AAAA,4BAA/GF,OAA+G;AAAA,QAA/GA,OAA+G,6BAArG,IAAqG;AAAA,4BAA/FD,OAA+F;AAAA,QAA/FA,OAA+F,6BAArF,IAAqF;AAAA,0BAA/EI,KAA+E;AAAA,QAA/EA,KAA+E,2BAAvE,IAAuE;AAAA,qCAAjER,gBAAiE;AAAA,QAAjEA,gBAAiE,sCAA9C,KAA8C;AAAA,gCAAvCC,WAAuC;AAAA,QAAvCA,WAAuC,iCAAzB,IAAyB;AAAA,yBAAnBgB,IAAmB;AAAA,QAAnBA,IAAmB,0BAAZ,IAAY;;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA,+CAF9O,aAE8O;;AACjQ,yCAAe,EAAf;;AACA,0CAAgB,EAAhB;;AACA,0CAAgB8C,8DAAa,CAAC7D,OAAD,CAA7B;;AACA,gDAAsB8D,SAAtB;;AAEA,SAAKvD,UAAL,GAAkBA,UAAlB;AACA,SAAKF,QAAL,GAAgBA,QAAhB;AACA,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKI,KAAL,GAAaA,KAAb;AACA,SAAKR,gBAAL,GAAwBA,gBAAxB;;AAEA,4CAAkBW,SAAlB;;AACA,8CAAoBV,WAApB;;AACA,6CAAmBH,UAAnB;;AACA,yCAAeK,MAAf;;AACA,0CAAgB,IAAhB;;AACA,yCAAeO,EAAE,CAACoB,OAAlB;;AAEA,2CAAiBlC,QAAjB;;AACA,2CAAiB,CAAjB;;AAEA,QAAIqB,IAAJ,EAAU;AACNA,UAAI,CAACC,IAAL,CAAU,IAAV,EAAgB,IAAhB;AACH,KAzBgQ,CA2BjQ;;;AACArB,UAAM,GAAG2D,UAAU,CAAC,IAAD,wBAAO,IAAP,aAAsB3D,MAAtB,CAAnB;;AAEA,SAAK,IAAIoE,GAAT,IAAgBpE,MAAhB,EAAwB;AACpB,UAAIA,MAAM,CAAC8D,cAAP,CAAsBM,GAAtB,CAAJ,EAAgC;AAC5B,YAAIL,KAAK,GAAG/D,MAAM,CAACoE,GAAD,CAAlB;AAAA,YACIC,GAAG,GAAGX,UAAU,CAACU,GAAD,CAAV,GAAkB,GAD5B;;AAGA,YAAI,OAAOL,KAAP,KAAiB,UAArB,EAAiC;AAC7BA,eAAK,GAAGA,KAAK,CAAC1C,IAAN,CAAW,IAAX,wBAAiB,IAAjB,YAAR;AACH;;AAED0C,aAAK,GAAGlC,MAAM,CAACyC,MAAP,CAAczC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBiC,KAAlB,CAAd,CAAR;;AAEA,6CAAajG,IAAb,CAAkB+D,MAAM,CAACyC,MAAP,CAAc;AAC5BpD,kBAAQ,EAAEmD,GADkB;AAE5BE,oBAAU,EAAER;AAFgB,SAAd,CAAlB;AAIH;AACJ;;AAED,yCAAaS,IAAb,CAAkB,UAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,CAACvD,QAAF,GAAawD,CAAC,CAACL,GAAzB;AAAA,KAAlB;AACH;;;;;AAmDD;;;;+BAIWnD,Q,EAAU;AACjB;AACA;AACA,UAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;AAC9BA,gBAAQ,GAAGwC,UAAU,CAACxC,QAAD,CAAV,GAAuB,GAAlC;AACH,OALgB,CAOjB;AACA;AACA;AACA;;;AACA,gCAAI,IAAJ,YAAkB;AACdA,gBAAQ,yBAAG,IAAH,gBAAG,IAAH,EAAgBA,QAAhB,CAAR;AACH;;AAED,UAAI0C,CAAC,GAAG,EAAR;AAfiB;AAAA;AAAA;;AAAA;AAiBjB,mDAAkB,IAAlB,wIAAgC;AAAA,cAAvBG,KAAuB;;AAC5B,eAAK,IAAIK,GAAT,IAAgBL,KAAK,CAACQ,UAAtB,EAAkC;AAC9B,gBAAIR,KAAK,CAACQ,UAAN,CAAiBT,cAAjB,CAAgCM,GAAhC,CAAJ,EAA0C;AACtC,kBAAIjB,KAAK,GAAGY,KAAK,CAACQ,UAAN,CAAiBH,GAAjB,CAAZ;;AAEA,kBAAI,CAACR,CAAC,CAACQ,GAAD,CAAN,EAAa;AACTR,iBAAC,CAACQ,GAAD,CAAD,GAAS;AAACO,+BAAa,EAAE,IAAhB;AAAsBC,4BAAU,EAAE,IAAlC;AAAwCC,6BAAW,EAAE,IAArD;AAA2DC,0BAAQ,EAAE;AAArE,iBAAT;AACH;;AAED,kBAAIf,KAAK,CAAC7C,QAAN,IAAkBA,QAAtB,EAAgC;AAC5B0C,iBAAC,CAACQ,GAAD,CAAD,CAAOO,aAAP,GAAuBZ,KAAK,CAAC7C,QAA7B;AACA0C,iBAAC,CAACQ,GAAD,CAAD,CAAOQ,UAAP,GAAoBzB,KAApB;AACH,eAHD,MAGO,IAAIY,KAAK,CAAC7C,QAAN,GAAiBA,QAAjB,IAA6B0C,CAAC,CAACQ,GAAD,CAAD,CAAOS,WAAP,KAAuB,IAAxD,EAA8D;AACjEjB,iBAAC,CAACQ,GAAD,CAAD,CAAOS,WAAP,GAAqBd,KAAK,CAAC7C,QAA3B;AACA0C,iBAAC,CAACQ,GAAD,CAAD,CAAOU,QAAP,GAAkB3B,KAAlB;AACH;AACJ;AACJ;AACJ;AAnCgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAqCjB,aAAOS,CAAP;AACH;AAED;;;;;;;;;6BAMS1C,Q,EAAU;AACf,UAAI6C,KAAK,GAAG,KAAKgB,UAAL,CAAgB7D,QAAhB,CAAZ;AAAA,UACI0C,CAAC,GAAG,EADR;;AAGA,UAAI,OAAO1C,QAAP,KAAoB,QAAxB,EAAkC;AAC9BA,gBAAQ,GAAGwC,UAAU,CAACxC,QAAD,CAAV,GAAuB,GAAlC;AACH,OANc,CAQf;;;AACA,WAAK,IAAI8C,QAAT,IAAqBD,KAArB,EAA4B;AACxB,YAAIA,KAAK,CAACD,cAAN,CAAqBE,QAArB,CAAJ,EAAoC;AAChC,cAAIgB,OAAO,GAAGjB,KAAK,CAACC,QAAD,CAAnB;;AAEA,cAAI,CAACgB,OAAO,CAACH,WAAR,KAAwB,IAAxB,IAAgCG,OAAO,CAACH,WAAR,IAAuB3D,QAAxD,KAAqE8D,OAAO,CAACJ,UAAR,KAAuB,IAAhG,EAAsG;AAClGhB,aAAC,CAACI,QAAD,CAAD,GAAcgB,OAAO,CAACJ,UAAtB;AACH,WAFD,MAEO,IAAII,OAAO,CAACJ,UAAR,KAAuB,IAA3B,EAAiC;AACpC,gBAAI,QAAOI,OAAO,CAACJ,UAAf,MAA8B,QAAlC,EAA4C;AACxC,kBAAIK,CAAC,GAAG,CAAC/D,QAAQ,GAAG8D,OAAO,CAACL,aAApB,KAAsCK,OAAO,CAACH,WAAR,GAAsBG,OAAO,CAACL,aAApE,CAAR;AAAA,kBACIO,KAAK,GAAGF,OAAO,CAACF,QAAR,CAAiBK,QAAjB,CAA0BH,OAAO,CAACJ,UAAlC,CADZ;AAGAhB,eAAC,CAACI,QAAD,CAAD,GAAcgB,OAAO,CAACJ,UAAR,CAAmBQ,GAAnB,CAAuBF,KAAK,CAACG,MAAN,CAAaJ,CAAb,CAAvB,CAAd;AACH,aALD,MAKO,IAAI,OAAOD,OAAO,CAACJ,UAAf,KAA8B,QAAlC,EAA4C;AAC/C,kBAAI7E,QAAQ,GAAIiF,OAAO,CAACH,WAAR,GAAsBG,OAAO,CAACL,aAA9C;AAAA,kBACIM,EAAC,GAAG,CAAC/D,QAAQ,GAAG8D,OAAO,CAACL,aAApB,IAAqC5E,QAD7C;AAAA,kBAEImF,MAAK,GAAGF,OAAO,CAACF,QAAR,GAAmBE,OAAO,CAACJ,UAFvC;;AAIAhB,eAAC,CAACI,QAAD,CAAD,GAAcgB,OAAO,CAACJ,UAAR,GAAsBM,MAAK,GAAGD,EAA5C;AACH,aANM,MAMA;AACHrB,eAAC,CAACI,QAAD,CAAD,GAAcgB,OAAO,CAACJ,UAAtB;AACH;AACJ;AACJ;AACJ,OAhCc,CAkCf;;;AACA,gCAAI,IAAJ,iBAAuB;AACnBhB,SAAC,yBAAG,IAAH,qBAAG,IAAH,EAAqB,IAArB,EAA2BG,KAA3B,CAAD;AACH;;AAED,aAAOH,CAAP;AACH;;;2BAEM;AAAA;;AACHb,mBAAa,CAAC,IAAD,CAAb;;AAEA,UAAI,0CAAkB,IAAtB,EAA4B;AACxB,2CAAU,IAAV;AAEA,YAAIuC,IAAI,GAAGC,WAAW,CAACC,GAAZ,EAAX;;AAEA,YAAIC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAChB,cAAIC,SAAS,GAAGH,WAAW,CAACC,GAAZ,EAAhB;AAAA,cACIN,KAAK,GAAGQ,SAAS,GAAGJ,IADxB;AAAA,cAEIpE,QAAQ,GAAG,2BAAI,YAAJ,GAAkBgE,KAAK,GAAG,KAAI,CAACnF,QAF9C;;AAIAuF,cAAI,GAAGI,SAAP;;AACA,cAAI3B,KAAK,GAAG,KAAI,QAAJ,CAAU7C,QAAV,CAAZ;;AACA,qCAAI,WAAWL,EAAE,CAACsB,OAAd,CAAJ;;AAEA,cAAI,KAAI,CAAC3B,OAAT,EAAkB,KAAI,CAACA,OAAL,CAAaa,IAAb,CAAkB,KAAlB,EAAwB,KAAxB,EAA8B0C,KAA9B;;AAElB,qCAAI,WAAJ,CAAc4B,aAAd,CAA4B,IAAIC,WAAJ,CAAgB,iBAAhB,EAAmC;AAC3DC,mBAAO,EAAE,KAAI,CAAC1F,gBAD6C;AAE3D2F,kBAAM,EAAE;AAFmD,WAAnC,CAA5B;;AAKA,cAAI,2BAAI,YAAJ,GAAiB,CAArB,EAAwB;AACpB,uCAAI,YAAYC,MAAM,CAACC,qBAAP,CAA6BP,OAA7B,CAAZ,CAAJ;AACH,WAFD,MAEO;AACH,iBAAI,CAACQ,SAAL,CAAepF,EAAE,CAACY,QAAlB,EAA4BZ,EAAE,CAACY,QAA/B;;AACA,uCAAI,YAAY,IAAZ,CAAJ;AACH;AACJ,SAtBD;;AAwBA,YAAI,KAAKlB,OAAT,EAAkB;AACd,eAAKA,OAAL,CAAac,IAAb,CAAkB,IAAlB,EAAwB,IAAxB;AACH;;AAED,8CAAcsE,aAAd,CAA4B,IAAIC,WAAJ,CAAgB,iBAAhB,EAAmC;AAC3DC,iBAAO,EAAE,IADkD;AAE3DC,gBAAM,EAAE;AAFmD,SAAnC,CAA5B;;AAKA,8CAAgBC,MAAM,CAACC,qBAAP,CAA6BP,OAA7B,CAAhB;AACH;;AAED,aAAO,IAAP;AACH,K,CAED;;AACA;;;;;;;4BAIQ;AACJ,gCAAI,IAAJ,aAAmB;AACfM,cAAM,CAACG,oBAAP,uBAA4B,IAA5B;;AACA,8CAAgB,IAAhB;;AACA,6CAAerF,EAAE,CAACmB,MAAlB;;AAEA,8CAAc2D,aAAd,CAA4B,IAAIC,WAAJ,CAAgB,kBAAhB,EAAoC;AAC5DC,iBAAO,EAAE,IADmD;AAE5DC,gBAAM,EAAE;AAFoD,SAApC,CAA5B;AAIH;;AAED,aAAO,IAAP;AACH;;;8BAE+C;AAAA,UAAxCrE,QAAwC,uEAA7B,KAA6B;AAAA,UAAtBuB,MAAsB,uEAAbnC,EAAE,CAACkB,QAAU;;AAC5C,gCAAI,IAAJ,aAAmB;AACfgE,cAAM,CAACG,oBAAP,uBAA4B,IAA5B;;AACA,8CAAgB,IAAhB;;AAEA,YAAIzE,QAAJ,EAAc;AACV,uBAAU,CAAV;;AACA,eAAKwE,SAAL,CAAejD,MAAf,EAAuBA,MAAvB;AACH,SAHD,MAGO;AACH,+CAAeA,MAAf;;AACA,sDAAsBA,MAAtB;AACH;;AAED,YAAI,KAAKtC,QAAT,EAAmB,KAAKA,QAAL,CAAcW,IAAd,CAAmB,IAAnB,EAAyB,IAAzB;;AAEnB,8CAAcsE,aAAd,CAA4B,IAAIC,WAAJ,CAAgB,oBAAhB,EAAsC;AAC9DC,iBAAO,EAAE,IADqD;AAE9DC,gBAAM,EAAE;AAFsD,SAAtC,CAA5B;;AAKA,aAAKK,gBAAL;AACH;;AAED,aAAO,IAAP;AACH;AAED;;;;;;;;;;6BAOkC;AAAA,UAA3BC,iBAA2B,uEAAP,KAAO;AAC9B,aAAO,KAAKC,OAAL,CAAaD,iBAAb,EAAgCvF,EAAE,CAACkB,QAAnC,CAAP;AACH;AAED;;;;;;;+BAIW;AACP,aAAO,KAAKsE,OAAL,CAAa,IAAb,EAAmBxF,EAAE,CAACY,QAAtB,CAAP;AACH;;;yBAEIP,Q,EAAU;AACX6B,mBAAa,CAAC,IAAD,CAAb;;AAEA,UAAI,OAAO7B,QAAP,KAAoB,QAAxB,EAAkC;AAC9BA,gBAAQ,GAAGwC,UAAU,CAACxC,QAAD,CAAV,GAAuB,GAAlC;AACH;;AAED,6CAAiBA,QAAjB;;AACA,aAAO,KAAKjB,UAAL,CAAgB,KAAKiB,QAArB,CAAP;AACH;;;+BAEUA,Q,EAAU;AACjB,UAAI6C,KAAK,GAAG,KAAKuC,QAAL,CAAcpF,QAAd,CAAZ;;AACA,+CAAiBG,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,EAAkC0C,KAAlC;;AACA,aAAOA,KAAP;AACH;;;uCAEkB;AACf,UAAI,KAAKpD,KAAT,EAAgB,KAAKA,KAAL,CAAWU,IAAX,CAAgB,IAAhB,EAAsB,IAAtB;;AAEhB,4CAAcsE,aAAd,CAA4B,IAAIC,WAAJ,CAAgB,eAAhB,EAAiC;AACzDC,eAAO,EAAE,IADgD;AAEzDC,cAAM,EAAE;AAFiD,OAAjC,CAA5B;;AAHe;AAAA;AAAA;;AAAA;AAQf,oDAAwB,IAAxB,8IAAuC;AAAA,cAA7BS,SAA6B,gBAA7BA,SAA6B;AACnC,cAAIA,SAAJ,EAAeA,SAAS,uBAAC,IAAD,kBAAT;AAClB;AAVc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWf,4CAAgB,EAAhB;AACH;;;8BAESpD,K,EAA6B;AAAA,UAAtBH,MAAsB,uEAAbnC,EAAE,CAACY,QAAU;;AACnC,UAAI,KAAK+E,KAAL,KAAe,SAAnB,EAA8B;AAC1B;AACH;;AAED,2CAAexD,MAAf;;AACA,kDAAsBG,KAAtB;;AAEA,UAAI,KAAKvC,UAAT,EAAqB,KAAKA,UAAL,CAAgBS,IAAhB,CAAqB,IAArB,EAA2B,IAA3B;;AAErB,4CAAcsE,aAAd,CAA4B,IAAIC,WAAJ,CAAgB,oBAAhB,EAAsC;AAC9DC,eAAO,EAAE,IADqD;AAE9DC,cAAM,EAAE;AAFsD,OAAtC,CAA5B;;AAKA,WAAKK,gBAAL;AACH;;;yBAEII,U,EAAWE,S,EAAU;AAAA;;AACtB,UAAI,KAAKD,KAAL,KAAe,SAAnB,EAA8B;AAC1B,eAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC;AACA,sCAAI,WAAJ,CAAc9I,IAAd,CAAmB;AACfyI,qBAAS,EAAE,mBAACpD,KAAD,EAAW;AAClBF,6BAAe,CAACsD,UAAD,EAAYpD,KAAZ,EAAmBwD,OAAnB,CAAf;AACH,aAHc;AAKfF,oBAAQ,EAAE,kBAACtD,KAAD,EAAW;AACjBF,6BAAe,CAACwD,SAAD,EAAWtD,KAAX,EAAkByD,MAAlB,CAAf;AACH;AAPc,WAAnB;AASH,SAXM,CAAP;AAYH,OAbD,MAaO,IAAI,KAAKJ,KAAL,KAAe,WAAf,IAA8B,OAAOD,UAAP,KAAqB,UAAvD,EAAmE;AACtE,eAAO,IAAIG,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5B1D,yBAAe,CAACsD,UAAD,wBAAY,MAAZ,mBAAiCI,OAAjC,CAAf;AACH,SAFM,CAAP;AAGH,OAJM,MAIA,IAAI,KAAKH,KAAL,KAAe,UAAf,IAA6B,OAAOC,SAAP,KAAoB,UAArD,EAAiE;AACpE,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC3D,yBAAe,CAACwD,SAAD,wBAAW,MAAX,mBAAgCG,MAAhC,CAAf;AACH,SAFM,CAAP;AAGH;AACJ,K,CAED;;;;6BACQC,U,EAAW;AACfA,gBAAS,GAAG,mBAAC1D,KAAD,EAAW;AACnB,YAAI,OAAO0D,UAAP,KAAqB,UAAzB,EAAqC;AACjCA,oBAAS;AACZ;;AAED,eAAO1D,KAAP;AACH,OAND;;AAQA,aAAO,KAAK2D,IAAL,CAAUD,UAAV,EAAqBA,UAArB,CAAP;AACH,K,CAED;;;;2BACMJ,Q,EAAU;AACZ,aAAO,KAAKK,IAAL,CAAU3C,SAAV,EAAqBsC,QAArB,CAAP;AACH;;;wBAvVe;AACZ,mCAAO,IAAP;AACH,K,CAED;;;;wBACa;AACT,mCAAO,IAAP;AACH;;;wBAEY;AACT,mCAAO,IAAP;AACH;;;wBAEc;AACX,mCAAO,IAAP;AACH,K,CAED;;;;wBACe;AACX,mCAAO,IAAP;AACH,K,CAED;;;;wBACa;AACT,aAAO,qCAAa/H,KAAb,EAAP;AACH;;;wBAEa;AACV,mCAAO,IAAP;AACH,K,CAED;AACA;AACA;AACA;AACA;AACA;AACA;;;;wBAEY;AACR,UAAI,KAAKsE,MAAL,KAAgBnC,EAAE,CAACY,QAAnB,IAA+B,KAAKuB,MAAL,KAAgBnC,EAAE,CAACkB,QAAtD,EAAgE;AAC5D,eAAO,WAAP;AACH,OAFD,MAEO,IAAI,KAAKiB,MAAL,KAAgBnC,EAAE,CAACqB,KAAvB,EAA8B;AACjC,eAAO,UAAP;AACH,OAFM,MAEA;AACH,eAAO,SAAP;AACH;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBA5HgBrB,E,aACA,S;;gBADAA,E,cAEC,U;;gBAFDA,E,WAGF,O;;gBAHEA,E,YAID,Q;;gBAJCA,E,cAKC,U;;gBALDA,E,aAMA,S;;;;;;;;;;;;;;AClGrB;AAAA;AAAA;AAAA;;;;;AAKO,SAASI,MAAT,CAAgBgE,CAAhB,EAAmB;AACtB,SAAOA,CAAP;AACH,C,CAGD;;AACO,IAAMjE,MAAM,GAAG;AAClBC,QAAM,EAAEA;AADU,CAAf,C;;;;;;;;;;;;ACXP;AAAA;AAAO,SAASf,iBAAT,CAA2Ba,EAA3B,EAA+BgD,KAA/B,EAAsC;AACzC,OAAK,IAAIK,GAAT,IAAgBL,KAAhB,EAAuB;AACnB,QAAIA,KAAK,CAACD,cAAN,CAAqBM,GAArB,CAAJ,EAA+B;AAC3BrD,QAAE,CAACV,OAAH,CAAW0G,KAAX,CAAiB3C,GAAjB,IAAwBL,KAAK,CAACK,GAAD,CAAL,CAAW4C,QAAX,EAAxB;AACH;AACJ;AACJ,C;;;;;;;;;;;;;;;;;;;;ACNM,IAAMvD,cAAb;AAAA;AAAA;AACI,0BAAYN,KAAZ,EAAmB8D,IAAnB,EAAyB;AAAA;;AACrB,SAAK9D,KAAL,GAAaA,KAAb;AACA,SAAK8D,IAAL,GAAYA,IAAZ;AACH;;AAJL;AAAA;AAAA,wBAMQ9D,KANR,EAMe;AACP,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,YAAI,EAAEA,KAAK,YAAYM,cAAnB,CAAJ,EAAwC;AACpC,gBAAM,IAAIyD,SAAJ,CAAc,wCAAd,CAAN;AACH;;AAED,YAAI,KAAKD,IAAL,KAAc9D,KAAK,CAAC8D,IAAxB,EAA8B;AAC1B,gBAAM,IAAIjI,KAAJ,CAAU,kBAAV,CAAN;AACH;;AAEDmE,aAAK,GAAGA,KAAK,CAACA,KAAd;AACH;;AAGD,aAAO,IAAIM,cAAJ,CAAmB,KAAKN,KAAL,GAAaA,KAAhC,EAAuC,KAAK8D,IAA5C,CAAP;AACH;AArBL;AAAA;AAAA,6BAuBa9D,KAvBb,EAuBoB;AACZ,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,YAAI,EAAEA,KAAK,YAAYM,cAAnB,CAAJ,EAAwC;AACpC,gBAAM,IAAIyD,SAAJ,CAAc,wCAAd,CAAN;AACH;;AAED,YAAI,KAAKD,IAAL,KAAc9D,KAAK,CAAC8D,IAAxB,EAA8B;AAC1B,gBAAM,IAAIjI,KAAJ,CAAU,kBAAV,CAAN;AACH;;AAEDmE,aAAK,GAAGA,KAAK,CAACA,KAAd;AACH;;AAED,aAAO,IAAIM,cAAJ,CAAmB,KAAKN,KAAL,GAAaA,KAAhC,EAAuC,KAAK8D,IAA5C,CAAP;AACH;AArCL;AAAA;AAAA,2BAuCW9D,KAvCX,EAuCkB;AACV,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,YAAI,EAAEA,KAAK,YAAYM,cAAnB,CAAJ,EAAwC;AACpC,gBAAM,IAAIyD,SAAJ,CAAc,wCAAd,CAAN;AACH;;AAED,YAAI,KAAKD,IAAL,KAAc9D,KAAK,CAAC8D,IAAxB,EAA8B;AAC1B,gBAAM,IAAIjI,KAAJ,CAAU,kBAAV,CAAN;AACH;;AAEDmE,aAAK,GAAGA,KAAK,CAACA,KAAd;AACH;;AAED,aAAO,IAAIM,cAAJ,CAAmB,KAAKN,KAAL,GAAaA,KAAhC,EAAuC,KAAK8D,IAA5C,CAAP;AACH,KArDL,CAuDI;;AAvDJ;AAAA;AAAA,2BAwDW9D,KAxDX,EAwDkB;AACV,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,YAAI,EAAEA,KAAK,YAAYM,cAAnB,CAAJ,EAAwC;AACpC,gBAAM,IAAIyD,SAAJ,CAAc,wCAAd,CAAN;AACH;;AAED,YAAI,KAAKD,IAAL,KAAc9D,KAAK,CAAC8D,IAAxB,EAA8B;AAC1B,gBAAM,IAAIjI,KAAJ,CAAU,kBAAV,CAAN;AACH;;AAEDmE,aAAK,GAAGA,KAAK,CAACA,KAAd;AACH;;AAED,aAAO,IAAIM,cAAJ,CAAmB,KAAKN,KAAL,GAAaA,KAAhC,EAAuC,KAAK8D,IAA5C,CAAP;AACH;AAtEL;AAAA;AAAA,+BAwEe;AACP,uBAAU,KAAK9D,KAAf,SAAuB,KAAK8D,IAA5B;AACH;AA1EL;;AAAA;AAAA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AAGA,IAAME,mBAAmB,GAAG,kBAA5B;AAGA;;;;;;;;AAOO,SAASC,MAAT,CAAgBC,MAAhB,EAAwBC,KAAxB,EAA+B;AAClC,MAAIC,IAAI,GAAG,IAAIC,qDAAJ,CAASH,MAAT,CAAX;AAEA,SAAO;AACHI,KAAC,EAAEH,KAAK,CAACI,OAAN,GAAgBH,IAAI,CAACI,IADrB;AAEHC,KAAC,EAAEN,KAAK,CAACO,OAAN,GAAgBN,IAAI,CAACO;AAFrB,GAAP;AAIH;;AAGD,SAASC,6BAAT,CAAuCC,MAAvC,EAA+C;AAC3C,SAAO,UAAS3H,OAAT,EAAkBkH,IAAlB,EAAwB;AAC3BA,QAAI,GAAG,IAAIC,qDAAJ,CAASD,IAAT,CAAP;AAEA,QAAIU,UAAU,GAAG,IAAIT,qDAAJ,CAASnH,OAAT,CAAjB;AAAA,QACI6H,YAAY,GAAGD,UAAU,CAACC,YAAX,CAAwBX,IAAxB,CADnB;AAAA,QAEItC,CAAC,GAAGiD,YAAY,GAAGA,YAAY,CAACC,OAAb,KAAyBZ,IAAI,CAACY,OAAL,EAA5B,GAA6C,CAFjE;;AAIA,QAAGH,MAAM,KAAK,CAAd,EAAiB;AACb,aAAO/C,CAAC,GAAG,CAAX;AACH,KAFD,MAEO;AACH,aAAOA,CAAC,IAAI+C,MAAZ;AACH;AACJ,GAZD;AAaH;;IAGoBI,S;;;;;AAMjB,qBAAY/H,OAAZ,EAEqF;AAAA;;AAAA,mFAAJ,EAAI;AAAA,8BAF/DgI,SAE+D;AAAA,QAF/DA,SAE+D,+BAFrD,IAEqD;AAAA,yBAF/CC,IAE+C;AAAA,QAF/CA,IAE+C,0BAF1C,IAE0C;AAAA,4BAFpCC,OAEoC;AAAA,QAFpCA,OAEoC,6BAF5B,EAE4B;AAAA,0BAFxBC,KAEwB;AAAA,QAFxBA,KAEwB,2BAFlB,CAEkB;AAAA,2BAFfC,MAEe;AAAA,QAFfA,MAEe,4BAFRrB,MAEQ;AAAA,+BADjFsB,UACiF;AAAA,QADjFA,UACiF,gCADtE,CACsE;AAAA,2BADnEC,MACmE;AAAA,QADnEA,MACmE,4BAD5D,IAC4D;AAAA,2BADtDC,MACsD;AAAA,QADtDA,MACsD,4BAD/C,IAC+C;AAAA,2BADzCC,MACyC;AAAA,QADzCA,MACyC,4BADlC,KACkC;AAAA,mCAD3BC,cAC2B;AAAA,QAD3BA,cAC2B,oCADZ,CACY;AAAA,gCAAjFC,WAAiF;AAAA,QAAjFA,WAAiF,iCAArE,CAAqE;AAAA,6BAAlEC,QAAkE;AAAA,QAAlEA,QAAkE,8BAAzD,IAAyD;AAAA,8BAAnDC,SAAmD;AAAA,QAAnDA,SAAmD,+BAAzC,GAAyC;AAAA,kCAApCC,aAAoC;AAAA,QAApCA,aAAoC,mCAAtB,KAAsB;AAAA,yBAAfC,IAAe;AAAA,QAAfA,IAAe,0BAAV,IAAU;;AAAA;;AACjF;;AADiF;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAGjF,QAAG,OAAO9I,OAAP,KAAmB,QAAtB,EAAgC;AAC5B,qEAAgB+I,QAAQ,CAACC,aAAT,CAAuBhJ,OAAvB,CAAhB;AACH,KAFD,MAEO;AACH,qEAAgBA,OAAhB;AACH;;AAED,sEAAmB,EAAnB;;AACA,qEAAkB,IAAIiJ,OAAJ,EAAlB;;AAEA,UAAKjB,SAAL,GAAiBA,SAAjB;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKC,OAAL,GAAeA,OAAf;AACA,UAAKC,KAAL,GAAaA,KAAb;AACA,UAAKC,MAAL,GAAcA,MAAd;AACA,UAAKC,UAAL,GAAkBA,UAAlB;AACA,UAAKC,MAAL,GAAcA,MAAd;AACA,UAAKC,MAAL,GAAcA,MAAd;AACA,UAAKC,MAAL,GAAcA,MAAd;AACA,UAAKC,cAAL,GAAsBA,cAAtB;AACA,UAAKC,WAAL,GAAmBA,WAAnB;AACA,UAAKC,QAAL,GAAgBA,QAAhB;AACA,UAAKC,SAAL,GAAiBA,SAAjB;AACA,UAAKC,aAAL,GAAqBA,aAArB;AACA,UAAKC,IAAL,GAAYA,IAAZ;;AAEA,QAAG,OAAO,MAAKd,SAAZ,KAA0B,QAA7B,EAAuC;AACnC,YAAKA,SAAL,GAAiBe,QAAQ,CAACC,aAAT,CAAuB,MAAKhB,SAA5B,CAAjB;AACH;;AAED,4EAAyB,UAAAf,KAAK,EAAI;AAC9B,aAAO,MAAKiC,WAAL,CAAiBjC,KAAjB,CAAP;AACH,KAFD;;AAIA,UAAKjH,OAAL,CAAamJ,gBAAb,CAA8B,WAA9B;;AApCiF;AAqCpF;AAED;;;;;;;;;;;;;+CAMkBlC,K;;;;;;;;;AACV3C,6B,GAAgB;AAAC8C,mBAAC,EAAEH,KAAK,CAACI,OAAN,GAAgB3B,MAAM,CAAC0D,WAA3B;AAAwC7B,mBAAC,EAAEN,KAAK,CAACO,OAAN,GAAgB9B,MAAM,CAAC2D;AAAlE,iB,EAChBC,e,GAAkB;AAAClC,mBAAC,EAAE9C,aAAa,CAAC8C,CAAlB;AAAqBG,mBAAC,EAAEjD,aAAa,CAACiD;AAAtC,iB,EAClBP,M,yBAAS,I,aACTuC,mB,GAAsB,I,EACtBC,W,GAAc,I,EAKlB;AACA;;qBACG,KAAKb,Q;;;;;AACJ3B,sBAAM,GAAGC,KAAK,CAACD,MAAN,CAAayC,OAAb,CAAqB,KAAKd,QAA1B,CAAT;;sBAEG,CAAC3B,MAAD,IAAW,CAAC,sCAAc0C,QAAd,CAAuB1C,MAAvB,C;;;;;;;;qBAOhB,KAAKsB,M;;;;;AACAA,sB,GAASrB,KAAK,CAACD,MAAN,CAAayC,OAAb,CAAqB,KAAKnB,MAA1B,C;;sBAEV,CAACA,MAAD,IAAW,CAACtB,MAAM,CAAC0C,QAAP,CAAgBpB,MAAhB,C;;;;;;;;qBAMhB,KAAKJ,O;;;;;AACAA,uB,GAAUjB,KAAK,CAACD,MAAN,CAAayC,OAAb,CAAqB,KAAKvB,OAA1B,C;;sBAEXA,OAAO,IAAIlB,MAAM,CAAC0C,QAAP,CAAgBxB,OAAhB,C;;;;;;;;AAKlB;AACA,oBAAG,OAAO,KAAKE,MAAZ,KAAuB,UAA1B,EAAsC;AAClCA,wBAAM,GAAG,KAAKA,MAAL,CAAYpB,MAAZ,EAAoBC,KAApB,CAAT;AACH,iBAFD,MAEO,IAAG0C,KAAK,CAACC,OAAN,CAAc,KAAKxB,MAAnB,CAAH,EAA+B;AAClCA,wBAAM,GAAG;AACLhB,qBAAC,EAAE,KAAKgB,MAAL,CAAY,CAAZ,CADE;AAELb,qBAAC,EAAE,KAAKa,MAAL,CAAY,CAAZ;AAFE,mBAAT;AAIH,iBALM,MAKA,IAAG,QAAO,KAAKA,MAAZ,MAAuB,QAA1B,EAAoC;AACvCA,wBAAM,GAAG;AACLhB,qBAAC,EAAE,KAAKgB,MAAL,CAAYhB,CADV;AAELG,qBAAC,EAAE,KAAKa,MAAL,CAAYb;AAFV,mBAAT;AAIH,iBALM,MAKA;AACHa,wBAAM,GAAG;AAAChB,qBAAC,EAAE,CAAJ;AAAOG,qBAAC,EAAE;AAAV,mBAAT;AACH,iB,CAED;;;AACAN,qBAAK,CAAC4C,cAAN,G,CAEA;AACA;AAEA;AACA;;AACAC,qCAAqB,GAAG,IAAIzD,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC3C,sBAAIyD,gBAAgB,GAAG,MAAI,CAAC1B,UAAL,IAAmB,CAA1C;;AAEA,sBAAG0B,gBAAH,EAAqB;AACjBzD,2BAAO,CAAC,UAAD,CAAP;AACH;;AAED,sBAAI0D,WAAW,GAAG,qBAAA/C,KAAK,EAAI;AACvBqC,mCAAe,CAAClC,CAAhB,GAAoBH,KAAK,CAACI,OAAN,GAAgB3B,MAAM,CAAC0D,WAA3C;AACAE,mCAAe,CAAC/B,CAAhB,GAAoBN,KAAK,CAACO,OAAN,GAAgB9B,MAAM,CAAC2D,WAA3C;AACApC,yBAAK,CAAC4C,cAAN;;AAEA,wBAAG,CAACE,gBAAD,IAAqBE,6DAAY,CAACX,eAAe,CAAClC,CAAjB,EAAoBkC,eAAe,CAAC/B,CAApC,EAAuCjD,aAAa,CAAC8C,CAArD,EAAwD9C,aAAa,CAACiD,CAAtE,CAAZ,GAAuF,MAAI,CAACc,UAApH,EAAgI;AAC5H/B,6BAAO,CAAC,UAAD,CAAP;AACAyD,sCAAgB,GAAG,IAAnB;AACH;AACJ,mBATD,CAP2C,CAkB3C;AACA;;;AACAR,qCAAmB,GAAG,+BAAM;AACxB,wBAAGS,WAAH,EAAgB;AACZjB,8BAAQ,CAACmB,mBAAT,CAA6B,WAA7B,EAA0CF,WAA1C;;AAEA,0BAAG,CAACD,gBAAJ,EAAsB;AAClBzD,+BAAO,CAAC,UAAD,CAAP;AACH;;AAED0D,iCAAW,GAAG,IAAd;AACH;AACJ,mBAVD;;AAYAjB,0BAAQ,CAACI,gBAAT,CAA0B,WAA1B,EAAuCa,WAAvC;AACH,iBAjCuB,CAAxB,C,CAmCA;AACA;;AACAG,4BAAY,GAAG,IAAI9D,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAClC,sBAAI8D,KAAK,GAAG,IAAZ;;AAEA,sBAAG,MAAI,CAACjC,KAAL,IAAc,CAAjB,EAAoB;AAChBiC,yBAAK,GAAGC,UAAU,CAAC,YAAM;AACrB/D,6BAAO,CAAC,UAAD,CAAP;AACA8D,2BAAK,GAAG,IAAR;AACH,qBAHiB,EAGf,MAAI,CAACjC,KAHU,CAAlB;AAIH,mBALD,MAKO;AACH7B,2BAAO,CAAC,UAAD,CAAP;AACH,mBAViC,CAYlC;;;AACAkD,6BAAW,GAAG,uBAAM;AAChB,wBAAGY,KAAH,EAAU;AACNE,kCAAY,CAACF,KAAD,CAAZ;AACA9D,6BAAO,CAAC,UAAD,CAAP;AACH;AACJ,mBALD;AAMH,iBAnBc,CAAf,C,CAqBA;;AACIiE,yB,GAAY,SAAZA,SAAY,CAAAtD,KAAK,EAAI;AACrBA,uBAAK,CAAC4C,cAAN;AACAL,6BAAW;AACXD,qCAAmB;AACnBR,0BAAQ,CAACmB,mBAAT,CAA6B,SAA7B,EAAwCK,SAAxC;AACH,iB;;AAEDxB,wBAAQ,CAACI,gBAAT,CAA0B,SAA1B,EAAqCoB,SAArC,E,CAEA;;;uBAC0ClE,OAAO,CAACmE,GAAR,CAAY,CAACL,YAAD,EAAeL,qBAAf,CAAZ,C;;;;;AAArCW,2B;AAAaC,8B;AAElB;AACA,oBAAGnB,mBAAH,EAAwBA,mBAAmB,G,CAE3C;AACA;;AACA,oBAAGkB,WAAW,KAAK,UAAhB,IAA8BC,cAAc,KAAK,UAApD,EAAgE;AAC5D,uBAAKC,aAAL,CAAmB3D,MAAnB,EAA2B;AACvB4D,2BAAO,EAAExC,MAAM,CAAChB,CADO;AAEvByD,2BAAO,EAAEzC,MAAM,CAACb,CAFO;AAGvB;AACAuD,6BAAS,EAAExB,eAAe,CAAClC,CAJJ;AAKvB2D,6BAAS,EAAEzB,eAAe,CAAC/B;AALJ,mBAA3B;AAOH;;;;;;;;;;;;;;;;;;;;;gDAGevH,O,EAASgE,G;;;;;;;;AACrBgH,qB,GAAQ,wCAAgBC,GAAhB,CAAoBjL,OAApB,C,EACRkL,a,GAAgB;AAAC9D,mBAAC,EAAEpD,GAAG,CAAC8G,SAAR;AAAmBvD,mBAAC,EAAEvD,GAAG,CAAC+G;AAA1B,iB;;AAEpB,oBAAG,CAACC,KAAJ,EAAW;AACPA,uBAAK,GAAG;AAACG,8BAAU,EAAE,KAAb;AAAoBzK,sBAAE,EAAE,IAAxB;AAA8BwG,wBAAI,EAAE,IAApC;AAA0CqB,0BAAM,EAAE,IAAlD;AAAwDvI,2BAAO,EAAEA;AAAjE,mBAAR;;AACA,0DAAgBoL,GAAhB,CAAoBpL,OAApB,EAA6BgL,KAA7B;AACH;;qBAEEA,KAAK,CAACG,U;;;;;;;;AAITH,qBAAK,CAACG,UAAN,GAAmB,IAAnB;;qBAEGH,KAAK,CAACtK,E;;;;;;uBACCsK,KAAK,CAACtK,EAAN,CAAS2K,MAAT,E;;;AACNL,qBAAK,CAACtK,EAAN,GAAW,IAAX;;;AAGAsG,sB,GAAShH,O,EACTgI,S,GAAY,KAAKA,S,EACjBsD,Q,GAAW,I,EACXC,W,GAAc,E,EACdjH,a,GAAgB,IAAI6C,qDAAJ,CAASnH,OAAT,C,EAChBwL,kB,GAAqBlH,a;AAEzBA,6BAAa,GAAGA,aAAa,CAACmH,SAAd,CACZ/F,MAAM,CAAC0D,WADK,EAEZ1D,MAAM,CAAC2D,WAFK,CAAhB;;AAKA,oBAAG,CAAC2B,KAAK,CAAC9D,IAAV,EAAgB;AACZ8D,uBAAK,CAAC9D,IAAN,GAAa5C,aAAb;AACH;;AAED,oBAAG,OAAO0D,SAAP,KAAqB,QAAxB,EAAkC;AAC9BA,2BAAS,GAAGe,QAAQ,CAACC,aAAT,CAAuBhB,SAAvB,CAAZ;AACH;;AAED,oBAAG,KAAKO,MAAR,EAAgB;AACZ,sBAAG,OAAO,KAAKA,MAAZ,KAAuB,UAA1B,EAAsC;AAClCvB,0BAAM,GAAG,KAAKuB,MAAL,CAAYvI,OAAZ,CAAT;AACH,mBAFD,MAEO;AACHgH,0BAAM,GAAG,KAAKuB,MAAd;AACH;;AAED,sBAAG,KAAKM,aAAR,EAAuB;AACnB7B,0BAAM,CAACN,KAAP,CAAagF,KAAb,GAAqBpH,aAAa,CAACoH,KAAd,GAAsB,IAA3C;AACA1E,0BAAM,CAACN,KAAP,CAAaiF,MAAb,GAAsBrH,aAAa,CAACqH,MAAd,GAAuB,IAA7C;AACH;;AAED3E,wBAAM,CAACN,KAAP,CAAakF,aAAb,GAA6B,MAA7B;;AAEA,sBAAG,CAAC5E,MAAM,CAAC6E,aAAR,IAAyB7L,OAAO,CAAC6L,aAApC,EAAmD;AAC/C7L,2BAAO,CAAC6L,aAAR,CAAsBC,WAAtB,CAAkC9E,MAAlC;AACH;;AAEDA,wBAAM,CAAC+E,SAAP,CAAiBhH,GAAjB,CAAqB,gBAArB;AAEAiG,uBAAK,CAACzC,MAAN,GAAevB,MAAf;AACH;;AAEGgF,kC,GAAqB,SAArBA,kBAAqB,CAAC9E,IAAD,EAAU;AAC/B;AACA,sBAAI+E,MAAM,GAAGf,aAAa,CAAC9D,CAAd,GAAkB1B,MAAM,CAAC0D,WAAtC;AAAA,sBACI8C,MAAM,GAAGhB,aAAa,CAAC3D,CAAd,GAAkB7B,MAAM,CAAC2D,WADtC;AAAA,sBAEI8C,kBAFJ;AAAA,sBAGI1G,MAAM,GAAG;AAAC4B,2BAAO,EAAE4E,MAAV;AAAkBzE,2BAAO,EAAE0E;AAA3B,mBAHb;;AAKA,sBAAGhF,IAAI,KAAK,IAAZ,EAAkB;AACdiF,sCAAkB,GAAG,MAAI,CAACC,cAAL,CAAoBlF,IAApB,EAA0B;AAAC+E,4BAAM,EAANA,MAAD;AAASC,4BAAM,EAANA;AAAT,qBAA1B,CAArB;AACH,mBAFD,MAEO;AACHC,sCAAkB,GAAG,EAArB;AACH;;AAX8B;AAAA;AAAA;;AAAA;AAa/B,yCAAsBA,kBAAtB,8HAA0C;AAAA,0BAAlCE,UAAkC;;AACtC,0BAAGd,WAAW,CAACe,OAAZ,CAAoBD,UAApB,MAAoC,CAAC,CAAxC,EAA2C;AACvCE,yCAAiB,CAAC,MAAD,EAAO,YAAP,EAAqBvM,OAArB,EAA8BgH,MAA9B,EAAsC,IAAtC,EAA4CE,IAA5C,EAAkD,IAAlD,EAAwD,IAAxD,EAA8D,KAA9D,EAAqEzB,MAArE,EAA6E4G,UAA7E,CAAjB;AACH;AACJ;AAjB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAmB/B,0CAAsBd,WAAtB,mIAAmC;AAAA,0BAA3Bc,WAA2B;;AAC/B,0BAAGF,kBAAkB,CAACG,OAAnB,CAA2BD,WAA3B,MAA2C,CAAC,CAA/C,EAAkD;AAC9CE,yCAAiB,CAAC,MAAD,EAAO,YAAP,EAAqBvM,OAArB,EAA8BgH,MAA9B,EAAsC,IAAtC,EAA4CE,IAA5C,EAAkD,IAAlD,EAAwD,IAAxD,EAA8D,KAA9D,EAAqEzB,MAArE,EAA6E4G,WAA7E,CAAjB;AACH;AACJ,qBAvB8B,CAyB/B;;AAzB+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0B/Bd,6BAAW,GAAGY,kBAAd;AACH,iB;;AAEGnC,2B,GAAc,SAAdA,WAAc,CAAA/C,KAAK,EAAI;AACvBA,uBAAK,CAAC4C,cAAN;;AACA,sBAAI3C,IAAI,GAAGsF,sBAAsB,CAAC,MAAD,EAAOxF,MAAP,EAAeC,KAAK,CAACI,OAArB,EAA8BJ,KAAK,CAACO,OAApC,EAA6CxD,GAAG,CAAC4G,OAAjD,EAA0D5G,GAAG,CAAC6G,OAA9D,EAAuE4B,kBAAkB,CAACzE,SAAD,EAAY,MAAZ,EAAkBhB,MAAlB,EAA0BhH,OAA1B,CAAzF,CAAjC;;AAEAkL,+BAAa,CAAC9D,CAAd,GAAkBH,KAAK,CAACI,OAAN,GAAgB3B,MAAM,CAAC0D,WAAzC;AACA8B,+BAAa,CAAC3D,CAAd,GAAkBN,KAAK,CAACO,OAAN,GAAgB9B,MAAM,CAAC2D,WAAzC;;AAEA,sBAAG,MAAI,CAACX,WAAL,GAAmB,CAAtB,EAAyB;AACrB,wBAAG4C,QAAH,EAAa;AACTA,8BAAQ,CAACD,MAAT;AACAC,8BAAQ,GAAG,IAAX;AACH;;AAEDA,4BAAQ,GAAGoB,YAAY,CAACC,iBAAb,CAA+B3M,OAA/B,EAAwCgH,MAAxC,EAAgDE,IAAhD,EAAsDlD,GAAtD,EAA2D,MAA3D,EAAiEiD,KAAjE,EAAwE,MAAI,CAACyB,WAA7E,EAA0FV,SAA1F,CAAX;AACH;;AAEDgE,oCAAkB,CAAC9E,IAAD,CAAlB;AAEA0F,sCAAoB,CAAC,MAAD,EAAO5M,OAAP,EAAgBgH,MAAhB,EAAwBC,KAAxB,EAA+BC,IAA/B,CAApB;AACH,iB;;AAEGqD,yB;;;;;0CAAY,kBAAMtD,KAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACZA,iCAAK,CAAC4C,cAAN;AACAd,oCAAQ,CAACmB,mBAAT,CAA6B,WAA7B,EAA0CF,WAA1C;AACAjB,oCAAQ,CAACmB,mBAAT,CAA6B,SAA7B,EAAwCK,SAAxC;AACAS,iCAAK,CAACG,UAAN,GAAmB,KAAnB;AACAnL,mCAAO,CAAC+L,SAAR,CAAkBc,MAAlB,CAAyB,aAAzB;;AAEA,gCAAGvB,QAAH,EAAa;AACTA,sCAAQ,CAACD,MAAT;AACAC,sCAAQ,GAAG,IAAX;AACH;;AAEGwB,oCAZQ,GAYG,KAZH,EAaRC,mBAbQ,GAaa,KAbb,EAcRC,QAdQ,GAcG,KAdH,EAeR9F,IAfQ,GAeD,IAAIC,qDAAJ,CAASH,MAAT,CAfC;AAiBZiG,gDAAoB,CAAC,MAAD,EAAOjN,OAAP,EAAgBgH,MAAhB,EAAwBC,KAAxB,EAA+BC,IAA/B,EAAqC,KAArC,EAA4C;AAC5D6F,gDAD4D,gCACvC;AACjB,uCAAOA,mBAAP;AACH,+BAH2D;AAK5DG,wCAL4D,wBAK/C;AACT,uCAAOJ,QAAP;AACH,+BAP2D;AAS5DK,oCAT4D,oBASnD;AACLL,wCAAQ,GAAG,IAAX;AACH,+BAX2D;AAa5DjD,4CAb4D,4BAa3C;AACbkD,mDAAkB,GAAG,IAArB;AACH;AAf2D,6BAA5C,CAApB;;AAjBY,kCAmCT,MAAI,CAACvE,MAAL,IAAe,CAACsE,QAnCP;AAAA;AAAA;AAAA;;AAoCRd,8CAAkB,CAAChB,KAAK,CAAC9D,IAAP,CAAlB;AACAA,gCAAI,GAAG8D,KAAK,CAAC9D,IAAb;;AArCQ,gCAuCJ,MAAI,CAACuB,cAvCD;AAAA;AAAA;AAAA;;AAwCJ,gCAAGzB,MAAM,KAAKhH,OAAd,EAAuB;AACnBgH,oCAAM,CAAC6E,aAAP,CAAqBuB,WAArB,CAAiCpG,MAAjC;AACH,6BAFD,MAEO;AACChD,kCADD,GACOM,aAAa,CAACmH,SAAd,CACN,CAAC/F,MAAM,CAAC0D,WADF,EAEN,CAAC1D,MAAM,CAAC2D,WAFF,CADP;AAMHgE,wGAAwB,CAACrG,MAAD,EAAShD,IAAT,EAAc,aAAd,CAAxB;AACH;;AAjDG;AAAA;;AAAA;AAmDJgH,iCAAK,CAACtK,EAAN,GAAW4M,OAAO,CAACtG,MAAD,EAASgE,KAAK,CAAC9D,IAAf,EAAqB,MAAI,CAACuB,cAA1B,CAAlB;AAnDI;AAAA,mCAqDEuC,KAAK,CAACtK,EArDR;;AAAA;AAuDJ,gCAAGsG,MAAM,KAAKhH,OAAd,EAAuB;AACnBgH,oCAAM,CAAC6E,aAAP,CAAqBuB,WAArB,CAAiCpG,MAAjC;AACH;;AAzDG;AA4DRgG,oCAAQ,GAAG,IAAX;AA5DQ;AAAA;;AAAA;AA8DR,gCAAGhG,MAAM,KAAKhH,OAAd,EAAuB;AACnBgH,oCAAM,CAAC6E,aAAP,CAAqBuB,WAArB,CAAiCpG,MAAjC;AACAqG,wGAAwB,CAACrN,OAAD,EAAUkH,IAAV,EAAgB,aAAhB,CAAxB;AACH;;AAjEO;AAoEZ,wDAAI,aAAJ,WAAuBlH,OAAvB;;AAEAuM,6CAAiB,CAAC,MAAD,EAAO,UAAP,EAAmBvM,OAAnB,EAA4BgH,MAA5B,EAAoCC,KAApC,EAA2CC,IAA3C,EAAiD,IAAjD,EAAuD,IAAvD,EAA6D,IAA7D,EAAmE;AAAC4F,sCAAQ,EAARA,QAAD;AAAWE,sCAAQ,EAARA;AAAX,6BAAnE,EAAyFhN,OAAzF,CAAjB;;AAtEY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mB;;kCAAZuK,S;;;qBAyEJ;;;AACA,oBAAGW,aAAa,CAAC9D,CAAd,KAAoBtD,SAApB,IAAiCoH,aAAa,CAAC3D,CAAd,KAAoBzD,SAAxD,EAAmE;AAC3DoD,sBAD2D,GACpDsF,sBAAsB,CAAC,IAAD,EAAOxF,MAAP,EAAekE,aAAa,CAAC9D,CAAd,GAAkB1B,MAAM,CAAC0D,WAAxC,EAAqD8B,aAAa,CAAC3D,CAAd,GAAkB7B,MAAM,CAAC2D,WAA9E,EAA2FrF,GAAG,CAAC4G,OAA/F,EAAwG5G,GAAG,CAAC6G,OAA5G,EAAqH4B,kBAAkB,CAACzE,SAAD,EAAY,IAAZ,EAAkBhB,MAAlB,EAA0BhH,OAA1B,CAAvI,CAD8B;AAE/DgM,oCAAkB,CAAC9E,IAAD,CAAlB;AACH;;AAED6B,wBAAQ,CAACI,gBAAT,CAA0B,WAA1B,EAAuCa,WAAvC;AACAjB,wBAAQ,CAACI,gBAAT,CAA0B,SAA1B,EAAqCoB,SAArC;AACAvK,uBAAO,CAAC+L,SAAR,CAAkBhH,GAAlB,CAAsB,aAAtB;AAEAwH,iCAAiB,CAAC,IAAD,EAAO,YAAP,EAAqBvM,OAArB,EAA8BgH,MAA9B,EAAsC,IAAtC,EAA4CwE,kBAA5C,EAAgE,IAAhE,EAAsE,IAAtE,EAA4E,IAA5E,EAAkF,IAAlF,CAAjB;;;;;;;;;;;;;;;;;;mCAGWtE,I,EAAMqG,Q,EAAU;AAC3B,UAAIhK,CAAC,GAAG,EAAR;AAEA;;;;AAGA,UAAIiK,YAAY,GAAG,KAAK5E,SAAxB;AAAA,UACI6E,IAAI,WAAUD,YAAV,CADR;;AAGA,UAAGC,IAAI,KAAK,QAAZ,EAAsB;AAClB;AACA,YAAG3G,mBAAmB,CAAC4G,IAApB,CAAyBF,YAAzB,CAAH,EAA2C;AACvC;AACAA,sBAAY,GAAG9F,6BAA6B,CAACrE,UAAU,CAACmK,YAAD,CAAV,GAA2B,GAA5B,CAA5C;AACH;AACJ,OAND,MAMO,IAAGC,IAAI,KAAK,QAAZ,EAAsB;AACzBD,oBAAY,GAAG9F,6BAA6B,CAAC8F,YAAD,CAA5C;AACH;;AAjB0B;AAAA;AAAA;;AAAA;AAmB3B,oDAAqB,IAArB,iJAAuC;AAAA,cAA/BG,SAA+B;;AACnC,cAAGH,YAAY,CAACG,SAAD,EAAYzG,IAAZ,EAAkBqG,QAAlB,EAA4B,IAA5B,CAAf,EAAkD;AAC9ChK,aAAC,CAAC9F,IAAF,CAAOkQ,SAAP;AACH;AACJ;AAvB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAyB3B,aAAOpK,CAAP;AACH;;;4BAEOqK,U,EAAY;AAChB,UAAG,OAAOA,UAAP,KAAsB,QAAzB,EAAmC;AAC/BA,kBAAU,GAAG7E,QAAQ,CAAC8E,gBAAT,CAA0BD,UAA1B,CAAb;AACH,OAFD,MAEO,IAAG,OAAOA,UAAU,CAAC5P,MAAlB,KAA6B,QAAhC,EAA0C;AAC7C4P,kBAAU,GAAG,CAACA,UAAD,CAAb;AACH;;AAED,WAAI,IAAI1P,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG0P,UAAU,CAAC5P,MAA9B,EAAsCE,CAAC,EAAvC,EAA2C;AACvC,YAAI4P,IAAI,GAAGF,UAAU,CAAC1P,CAAD,CAArB;;AAEA,YAAG,yCAAiBoO,OAAjB,CAAyBwB,IAAzB,MAAmC,CAAC,CAAvC,EAA0C;AACtC,mDAAiBrQ,IAAjB,CAAsBqQ,IAAtB;AACH;AACJ;AACJ,K,CAED;;;;+BACWH,S,EAAW;AAClB,UAAG,OAAOA,SAAP,KAAqB,QAAxB,EAAkC;AAC9BA,iBAAS,GAAG5E,QAAQ,CAACC,aAAT,CAAuB2E,SAAvB,CAAZ;AACH;;AAED,UAAIzP,CAAC,GAAG,yCAAiBoO,OAAjB,CAAyBqB,SAAzB,CAAR;;AAEA,UAAGzP,CAAC,KAAK,CAAC,CAAV,EAAa;AACT,iDAAiBE,MAAjB,CAAwBF,CAAxB,EAA2B,CAA3B;AACH;AACJ,K,CAED;;;;iCACayP,S,EAAW;AACpB,UAAG,OAAOA,SAAP,KAAqB,QAAxB,EAAkC;AAC9BA,iBAAS,GAAG5E,QAAQ,CAACC,aAAT,CAAuB2E,SAAvB,CAAZ;AACH;;AAED,aAAO,yCAAiBrB,OAAjB,CAAyBqB,SAAzB,MAAwC,CAAC,CAAhD;AACH,K,CAED;;;;wBACiB;AACb,aAAO,yCAAiBtP,KAAjB,CAAuB,CAAvB,CAAP;AACH;;;wBAEa;AACV,mCAAO,IAAP;AACH;;;;EA5dkCf,kD;;;;;;;;;;;;AAgevC,SAASgQ,OAAT,CAAiBtG,MAAjB,EAAyBnG,QAAzB,EAAmC4H,cAAnC,EAAiE;AAAA,MAAdtI,OAAc,uEAAN,IAAM;AAC7D,MAAI4N,QAAQ,GAAG,IAAI5G,qDAAJ,CAASH,MAAT,CAAf;AAEA,MAAIvG,SAAS,GAAG,IAAIhB,qDAAJ,CAAc;AAC1BE,UAAM,EAAE;AACJ,YAAM;AACF2H,YAAI,EAAEyG,QAAQ,CAACzG,IAAT,GAAgB5B,MAAM,CAAC0D,WAD3B;AAEF3B,WAAG,EAAEsG,QAAQ,CAACtG,GAAT,GAAe/B,MAAM,CAAC2D;AAFzB,OADF;AAMJ,cAAQ;AACJ/B,YAAI,EAAEzG,QAAQ,CAACyG,IADX;AAEJG,WAAG,EAAE5G,QAAQ,CAAC4G;AAFV;AANJ,KADkB;AAa1B7H,cAb0B,sBAafc,EAbe,EAaXgD,KAbW,EAaJ;AAClB2J,gFAAwB,CAAC3M,EAAE,CAACV,OAAJ,EAAa;AACjCsH,YAAI,EAAE5D,KAAK,CAAC4D,IAAN,GAAa5B,MAAM,CAAC0D,WADO;AAEjC3B,WAAG,EAAE/D,KAAK,CAAC+D,GAAN,GAAY/B,MAAM,CAAC2D;AAFS,OAAb,EAGrB,aAHqB,CAAxB;AAKA,UAAGlJ,OAAH,EAAYA,OAAO,CAACO,EAAD,CAAP;AACf;AApByB,GAAd,CAAhB;AAuBA,SAAOD,SAAS,CAACU,OAAV,CAAkB6F,MAAlB,EAA0B;AAACtH,YAAQ,EAAE+I;AAAX,GAA1B,CAAP;AACH;AAGD;;;;;;;;;;;;;;;AAaA,SAAS+D,sBAAT,CAAgCwB,IAAhC,EAAsChO,OAAtC,EAA+CoH,CAA/C,EAAkDG,CAAlD,EAAqDqD,OAArD,EAA8DC,OAA9D,EAAuE7C,SAAvE,EAAkF;AAC9E,MAAId,IAAI,GAAG,IAAIC,qDAAJ,CAASnH,OAAT,CAAX;AAAA,MACIiO,YAAY,GAAG/G,IADnB;AAGAA,MAAI,GAAGA,IAAI,CAACgH,MAAL,CAAY;AAAC5G,QAAI,EAAEF,CAAP;AAAUK,OAAG,EAAEF;AAAf,GAAZ,CAAP;AAEAqD,SAAO,GAAGA,OAAO,IAAI,CAArB;AACAC,SAAO,GAAGA,OAAO,IAAI,CAArB;AAEA3D,MAAI,GAAGA,IAAI,CAACuE,SAAL,CAAe,CAACb,OAAhB,EAAyB,CAACC,OAA1B,CAAP;;AAEA,MAAGmD,IAAI,CAAC/F,IAAL,KAAc,GAAjB,EAAsB;AAClBf,QAAI,GAAG,IAAIC,qDAAJ,CACH8G,YAAY,CAAC3G,IADV,EAEHJ,IAAI,CAACO,GAFF,EAGHwG,YAAY,CAACE,KAHV,EAIHjH,IAAI,CAACkH,MAJF,CAAP;AAMH,GAPD,MAOO,IAAGJ,IAAI,CAAC/F,IAAL,KAAc,GAAjB,EAAsB;AACzBf,QAAI,GAAG,IAAIC,qDAAJ,CACHD,IAAI,CAACI,IADF,EAEH2G,YAAY,CAACxG,GAFV,EAGHP,IAAI,CAACiH,KAHF,EAIHF,YAAY,CAACG,MAJV,CAAP;AAMH;;AAED,MAAG,OAAOJ,IAAI,CAAClF,IAAZ,KAAqB,QAArB,IAAiCkF,IAAI,CAAClF,IAAzC,EAA+C;AAC3C,QAAIxB,IAAI,GAAG+G,IAAI,CAACC,KAAL,CAAWpH,IAAI,CAACI,IAAL,GAAY0G,IAAI,CAAClF,IAA5B,IAAoCkF,IAAI,CAAClF,IAApD;AAAA,QACIrB,GAAG,GAAG4G,IAAI,CAACC,KAAL,CAAWpH,IAAI,CAACO,GAAL,GAAWuG,IAAI,CAAClF,IAA3B,IAAmCkF,IAAI,CAAClF,IADlD;AAGA5B,QAAI,GAAG,IAAIC,qDAAJ,CAASG,IAAT,EAAeG,GAAf,EAAoBH,IAAI,GAAG2G,YAAY,CAACvC,KAAxC,EAA+CjE,GAAG,GAAGwG,YAAY,CAACtC,MAAlE,CAAP;AACH;;AAED,MAAG3D,SAAH,EAAc;AACVA,aAAS,GAAG,IAAIb,qDAAJ,CAASa,SAAT,CAAZ;AACAd,QAAI,GAAGA,IAAI,CAACqH,GAAL,CAASvG,SAAT,CAAP;AACH;;AAEDqF,4EAAwB,CAACrN,OAAD,EAAUkH,IAAV,EAAgB,aAAhB,CAAxB;AACA,SAAOA,IAAP;AACH,C,CAGD;;AACA;;;;;;;;;;;;AAUA,SAASuF,kBAAT,CAA4BzM,OAA5B,EAAqCwO,YAArC,EAAmDxH,MAAnD,EAA2DyH,cAA3D,EAA2E;AACvE,MAAGzO,OAAH,EAAY;AACR,QAAIyN,IAAI,WAAUzN,OAAV,CAAR;;AAEA,QAAGyN,IAAI,KAAK,UAAZ,EAAwB;AACpB,aAAO,IAAItG,qDAAJ,CAASnH,OAAO,CAACgB,IAAR,CAAawN,YAAb,EAA2BxH,MAA3B,EAAmCyH,cAAnC,EAAmDD,YAAnD,CAAT,CAAP;AACH,KAFD,MAEO,IAAGf,IAAI,KAAK,QAAZ,EAAsB;AACzB,aAAO,IAAItG,qDAAJ,CAAS4B,QAAQ,CAACC,aAAT,CAAuBhJ,OAAvB,CAAT,CAAP;AACH;;AAED,WAAO,IAAImH,qDAAJ,CAASnH,OAAT,CAAP;AACH;;AAED,SAAO,IAAP;AACH;AAGD;;;;;;;;;AAOA,SAAS0O,gBAAT,CAA0B1O,OAA1B,EAAmC;AAC/B,MAAI2O,CAAC,GAAG3O,OAAO,CAAC6L,aAAhB;;AAEA,SAAM8C,CAAN,EAAS;AACL,QAAIA,CAAC,CAACC,WAAF,GAAgBD,CAAC,CAACE,WAAlB,IAAiCF,CAAC,CAACG,YAAF,GAAiBH,CAAC,CAACI,YAAxD,EAAsE;AAClE,aAAOJ,CAAP;AACH;;AAEDA,KAAC,GAAGA,CAAC,CAAC9C,aAAN;AACH;;AAED,SAAO,IAAP;AACH;;AAGD,SAASmD,cAAT,CAAwBhP,OAAxB,EAAiC;AAC7B,MAAGA,OAAO,KAAK0F,MAAZ,IAAsB1F,OAAO,CAACiP,QAAR,KAAqB,MAA9C,EAAsD;AAClD,WAAO,IAAI9H,qDAAJ,CAAS,CAAT,EAAY,CAAZ,EAAezB,MAAM,CAACwJ,UAAtB,EAAkCxJ,MAAM,CAACyJ,WAAzC,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAIhI,qDAAJ,CAASnH,OAAT,CAAP;AACH;AACJ;AAGD;;;;;IAGM0M,Y;;;AACF,wBAAY1M,OAAZ,EAAmE;AAAA;;AAAA,QAA9CoP,YAA8C,uEAAjC,CAAiC;AAAA,QAA9BC,YAA8B,uEAAjB,CAAiB;AAAA,QAAdlP,OAAc,uEAAN,IAAM;;AAAA;;AAC/D,SAAKmP,OAAL,GAAe,IAAf;AACA,SAAKtP,OAAL,GAAeA,OAAf;AACA,SAAKoP,YAAL,GAAoBA,YAApB;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA,SAAKlP,OAAL,GAAeA,OAAf;AACA,SAAKkF,SAAL,GAAiBH,WAAW,CAACC,GAAZ,EAAjB;;AAEA,QAAIzB,KAAK,GAAG,SAARA,KAAQ,CAAA2B,SAAS,EAAI;AACrB,UAAIR,KAAK,GAAG,CAACQ,SAAS,GAAG,MAAI,CAACA,SAAlB,IAA+B,IAA3C;AAEA,YAAI,CAACA,SAAL,GAAiBA,SAAjB;AAEA,YAAI,CAACrF,OAAL,CAAauP,UAAb,IAA2B1K,KAAK,GAAG,MAAI,CAACuK,YAAxC;AACA,YAAI,CAACpP,OAAL,CAAawP,SAAb,IAA0B3K,KAAK,GAAG,MAAI,CAACwK,YAAvC;;AAEA,UAAG,MAAI,CAAClP,OAAR,EAAiB;AACb,cAAI,CAACA,OAAL,CAAa,MAAb;AACH;;AAED,YAAI,CAACmP,OAAL,GAAe5J,MAAM,CAACC,qBAAP,CAA6BjC,KAA7B,CAAf;AACH,KAbD;;AAeA,SAAK4L,OAAL,GAAe5J,MAAM,CAACC,qBAAP,CAA6BjC,KAA7B,CAAf;AACH;;;;6BAEQ;AACL,UAAG,KAAK4L,OAAR,EAAiB;AACb5J,cAAM,CAACG,oBAAP,CAA4B,KAAKyJ,OAAjC;AACA,aAAKA,OAAL,GAAe,IAAf;AACH;AACJ;;;mCAEqBpI,I,EAAMuI,gB,EAAkB;AAC1C,UAAIlM,CAAC,GAAG;AAAC6D,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAR;;AAEA,UAAGL,IAAI,CAACiH,KAAL,GAAasB,gBAAgB,CAACtB,KAAjC,EAAwC;AACpC5K,SAAC,CAAC6D,CAAF,GAAMsI,sDAAK,CAAC,CAACxI,IAAI,CAACiH,KAAL,GAAasB,gBAAgB,CAACtB,KAA/B,IAAwCjH,IAAI,CAACwE,KAA9C,EAAqD,CAAC,CAAtD,EAAyD,CAAzD,CAAX;AACH,OAFD,MAEO,IAAGxE,IAAI,CAACI,IAAL,GAAYmI,gBAAgB,CAACnI,IAAhC,EAAsC;AACzC/D,SAAC,CAAC6D,CAAF,GAAMsI,sDAAK,CAAC,CAACxI,IAAI,CAACI,IAAL,GAAYmI,gBAAgB,CAACnI,IAA9B,IAAsCJ,IAAI,CAACwE,KAA5C,EAAmD,CAAC,CAApD,EAAuD,CAAvD,CAAX;AACH;;AAED,UAAGxE,IAAI,CAACkH,MAAL,GAAcqB,gBAAgB,CAACrB,MAAlC,EAA0C;AACtC7K,SAAC,CAACgE,CAAF,GAAMmI,sDAAK,CAAC,CAACxI,IAAI,CAACkH,MAAL,GAAcqB,gBAAgB,CAACrB,MAAhC,IAA0ClH,IAAI,CAACwE,KAAhD,EAAuD,CAAC,CAAxD,EAA2D,CAA3D,CAAX;AACH,OAFD,MAEO,IAAGxE,IAAI,CAACO,GAAL,GAAWgI,gBAAgB,CAAChI,GAA/B,EAAoC;AACvClE,SAAC,CAACgE,CAAF,GAAMmI,sDAAK,CAAC,CAACxI,IAAI,CAACO,GAAL,GAAWgI,gBAAgB,CAAChI,GAA7B,IAAoCP,IAAI,CAACwE,KAA1C,EAAiD,CAAC,CAAlD,EAAqD,CAArD,CAAX;AACH;;AAED,aAAOnI,CAAP;AACH;;;sCAEwBvD,O,EAASgH,M,EAAQE,I,EAAMlD,G,EAAKwK,Y,EAAcvH,K,EAAOyB,W,EAAaV,S,EAAW;AAAA;;AAC9F,UAAI2H,YAAY,GAAGjB,gBAAgB,CAAC1O,OAAD,CAAnC;;AAEA,UAAG2P,YAAH,EAAiB;AACb,YAAIF,gBAAgB,GAAGT,cAAc,CAACW,YAAD,CAArC;AAAA,YACIC,KAAK,GAAGlD,YAAY,CAACmD,cAAb,CAA4B3I,IAA5B,EAAkCuI,gBAAlC,CADZ;;AAGA,YAAGG,KAAK,CAACxI,CAAN,IAAWwI,KAAK,CAACrI,CAApB,EAAuB;AACnB,iBAAO,IAAImF,YAAJ,CAAiBiD,YAAjB,EAA+BC,KAAK,CAACxI,CAAN,GAAUsB,WAAzC,EAAsDkH,KAAK,CAACrI,CAAN,GAAUmB,WAAhE,EAA6E,UAAC4C,QAAD,EAAc;AAC9F,gBAAIpE,IAAI,GAAGsF,sBAAsB,CAAC,MAAD,EAAOxF,MAAP,EAAeC,KAAK,CAACI,OAArB,EAA8BJ,KAAK,CAACO,OAApC,EAA6CxD,GAAG,CAAC4G,OAAjD,EAA0D5G,GAAG,CAAC6G,OAA9D,EAAuE4B,kBAAkB,CAACzE,SAAD,EAAYwG,YAAZ,EAA0BxH,MAA1B,EAAkChH,OAAlC,CAAzF,CAAjC;;AAEA,gBAAI8P,UAAU,GAAG,IAAI3I,qDAAJ,CAASmE,QAAQ,CAACtL,OAAlB,CAAjB;AAEAqN,sFAAwB,CAACrG,MAAD,EAASE,IAAT,EAAe,aAAf,CAAxB;;AAEA,gBAAG4I,UAAU,CAACpG,QAAX,CAAoBxC,IAApB,CAAH,EAA8B;AAC1BoE,sBAAQ,CAACD,MAAT;AACAC,sBAAQ,GAAG,IAAX;AACH;AACJ,WAXM,CAAP;AAYH;AACJ;AACJ;;;;;;AAIE,SAASyE,UAAT,CAAoBpH,QAApB,EAA8B;AACjC,SAAO,YAAW;AACd,QAAI3I,OAAO,GAAG2I,QAAd;;AAEA,QAAG,OAAO3I,OAAP,KAAmB,QAAtB,EAAgC;AAC5BA,aAAO,GAAG+I,QAAQ,CAACC,aAAT,CAAuBhJ,OAAvB,CAAV;AACH;;AAED,QAAIkH,IAAI,GAAG,IAAIC,qDAAJ,CAASnH,OAAT,CAAX;AAAA,QACIgQ,MAAM,GAAGC,0DAAS,CAACjQ,OAAD,CADtB;AAGAkH,QAAI,CAACI,IAAL,IAAa0I,MAAM,CAACT,UAApB;AACArI,QAAI,CAACO,GAAL,IAAYuI,MAAM,CAACR,SAAnB;AACAtI,QAAI,CAACiH,KAAL,GAAajH,IAAI,CAACI,IAAL,GAAYtH,OAAO,CAAC4O,WAAjC;AACA1H,QAAI,CAACkH,MAAL,GAAclH,IAAI,CAACO,GAAL,GAAWzH,OAAO,CAAC8O,YAAjC;AAEA,WAAO5H,IAAP;AACH,GAhBD;AAiBH;AAGM,SAASgJ,KAAT,GAA0D;AAAA,MAA3CC,OAA2C,uEAAnC,IAAmC;AAAA,MAA7BC,SAA6B,uEAAnB,IAAmB;AAAA,MAAbC,MAAa,uEAAN,IAAM;;AAC7D,MAAG,QAAOF,OAAP,MAAmB,QAAnB,IAA+BA,OAAO,CAACG,QAA1C,EAAoD;AAChD,WAAOH,OAAO,CAACI,SAAR,CAAkB,IAAlB,CAAP;AACH;;AAED,SAAO,UAASvQ,OAAT,EAAkB;AACrB,QAAIuD,CAAC,GAAGvD,OAAO,CAACuQ,SAAR,CAAkB,IAAlB,CAAR;;AAEA,QAAGJ,OAAO,KAAK,IAAf,EAAqB;AACjB5M,OAAC,CAACmD,KAAF,CAAQyJ,OAAR,GAAkBA,OAAlB;AACH;;AAED,QAAGC,SAAH,EAAc;AACV7M,OAAC,CAAC6M,SAAF,GAAcA,SAAd;AACH;;AAED7M,KAAC,CAACmD,KAAF,CAAQ7F,QAAR,GAAmB,UAAnB;AACA,QAAGwP,MAAM,KAAK,IAAd,EAAoB9M,CAAC,CAACmD,KAAF,CAAQ2J,MAAR,GAAiBA,MAAjB;AAEpB,WAAO9M,CAAP;AACH,GAfD;AAgBH;;AAGD,SAASqJ,oBAAT,CAA8BoB,IAA9B,EAAoChO,OAApC,EAA6CuI,MAA7C,EAAqDtB,KAArD,EAA4DC,IAA5D,EAA+F;AAAA,MAA7B1B,OAA6B,uEAArB,KAAqB;AAAA,MAAdb,OAAc,uEAAN,IAAM;AAC3F,SAAO4H,iBAAiB,CAACyB,IAAD,EAAO,WAAP,EAAoBhO,OAApB,EAA6BuI,MAA7B,EAAqCtB,KAArC,EAA4CC,IAA5C,EAAkD1B,OAAlD,EAA2D,IAA3D,EAAiE,IAAjE,EAAuEb,OAAvE,CAAxB;AACH;;AAGD,SAASsI,oBAAT,CAA8Be,IAA9B,EAAoChO,OAApC,EAA6CuI,MAA7C,EAAqDtB,KAArD,EAA4DC,IAA5D,EAA8F;AAAA,MAA5B1B,OAA4B,uEAApB,IAAoB;AAAA,MAAdb,OAAc,uEAAN,IAAM;AAC1F,SAAO4H,iBAAiB,CAACyB,IAAD,EAAO,WAAP,EAAoBhO,OAApB,EAA6BuI,MAA7B,EAAqCtB,KAArC,EAA4CC,IAA5C,EAAkD1B,OAAlD,EAA2D,IAA3D,EAAiE,IAAjE,EAAuEb,OAAvE,CAAxB;AACH;;AAGD,SAAS4H,iBAAT,CAA2ByB,IAA3B,EAAiCvP,IAAjC,EAAuCuB,OAAvC,EAAgDuI,MAAhD,EAAwDiI,aAAxD,EAAuEC,WAAvE,EAA2J;AAAA,MAAvEjL,OAAuE,uEAA/D,KAA+D;AAAA,MAAxDkL,QAAwD,uEAA/C,IAA+C;AAAA,MAAzCC,OAAyC,uEAAjC,KAAiC;AAAA,MAA1BlL,MAA0B,uEAAnB,IAAmB;AAAA,MAAbuB,MAAa,0EAAN,IAAM;AACvJ,MAAI4J,YAAY,GAAG;AACfnS,QAAI,EAAJA,IADe;AAEfoS,aAAS,EAAE7C,IAFI;AAGfhH,UAAM,EAAEuB,MAHO;AAIfvI,WAAO,EAAPA,OAJe;AAKf8N,QAAI,EAAE9N,OALS;AAKA;AACfuI,UAAM,EAAEA,MANO;AAOfiI,iBAAa,EAAE,IAPA;AAQftJ,QAAI,EAAEuJ;AARS,GAAnB;;AAWA,MAAGD,aAAH,EAAkB;AACdI,gBAAY,CAACJ,aAAb,GAA6BA,aAA7B;AACAI,gBAAY,CAACvJ,OAAb,GAAuBmJ,aAAa,CAACnJ,OAArC;AACAuJ,gBAAY,CAACpJ,OAAb,GAAuBgJ,aAAa,CAAChJ,OAArC;AACH;;AAED,MAAG,CAACR,MAAJ,EAAY;AACRA,UAAM,GAAGhH,OAAT;AACH;;AAED,MAAGyF,MAAH,EAAW;AACPjE,UAAM,CAACC,MAAP,CAAcmP,YAAd,EAA4BnL,MAA5B;AACH;;AAED,MAAGkL,OAAH,EAAY;AACR3C,QAAI,CAAC2C,OAAL,CAAalS,IAAb,EAAmBmS,YAAnB;AACH;;AAED,MAAGF,QAAH,EAAa;AACT,QAAII,WAAW,GAAG,IAAIvL,WAAJ,CAAgB9G,IAAhB,EAAsB;AACpC+G,aAAO,EAAPA,OADoC;AAEpCC,YAAM,EAAEmL;AAF4B,KAAtB,CAAlB;AAKA5J,UAAM,CAAC1B,aAAP,CAAqBwL,WAArB;AACH;AACJ,C;;;;;;;;;;;;;;;;;;;;;;;;;AC70BD;AACA;AACA;AACA;AAGA,IAAMC,UAAU,GAAG,IAAIC,GAAJ,CAAQ,CACvB,UADuB,EAEvB,KAFuB,EAGvB,WAHuB,EAIvB,OAJuB,EAKvB,cALuB,EAMvB,QANuB,EAOvB,aAPuB,EAQvB,MARuB,CAAR,CAAnB;AAYO,IAAMC,UAAU,GAAG;AACtB;;;;AAIAC,QAAM,EAAE,kBAAW;AACf,WAAO;AACH5J,UAAI,EAAE,CADH;AAEHG,SAAG,EAAE,CAFF;AAGH0G,WAAK,EAAEzI,MAAM,CAACwJ,UAHX;AAIHd,YAAM,EAAE1I,MAAM,CAACyJ,WAJZ;AAKHxD,YAAM,EAAEjG,MAAM,CAACyJ,WALZ;AAMHzD,WAAK,EAAEhG,MAAM,CAACwJ;AANX,KAAP;AAQH,GAdqB;;AAgBtB;;;;;AAKAiC,UAAQ,EAAE,kBAASnR,OAAT,EAAkB;AACxB,QAAIoR,MAAM,GAAG1C,gBAAgB,CAAC1O,OAAD,CAA7B;AAAA,QACIqR,EAAE,GAAGD,MAAM,CAACE,qBAAP,EADT;;AAGA,WAAO;AACHhK,UAAI,EAAE+J,EAAE,CAAC/J,IAAH,GAAU8J,MAAM,CAAC7B,UADpB;AAEH9H,SAAG,EAAE4J,EAAE,CAAC5J,GAAH,GAAS2J,MAAM,CAAC5B,SAFlB;AAGH9D,WAAK,EAAE0F,MAAM,CAACxC,WAHX;AAIHjD,YAAM,EAAEyF,MAAM,CAACtC,YAJZ;AAKHX,WAAK,EAAGkD,EAAE,CAAC/J,IAAH,GAAU8J,MAAM,CAAC7B,UAAlB,GAAgC6B,MAAM,CAACxC,WAL3C;AAMHR,YAAM,EAAGiD,EAAE,CAAC5J,GAAH,GAAS2J,MAAM,CAAC5B,SAAjB,GAA8B4B,MAAM,CAACtC;AAN1C,KAAP;AAQH;AAjCqB,CAAnB;AAqCP;;;;IAGqByC,U;;;AACjB,sBAAYvR,OAAZ,EAC0E;AAAA;;AAAA,mFAAJ,EAAI;AAAA,4BADpDwR,OACoD;AAAA,QADpDA,OACoD,6BAD5C,cAC4C;AAAA,2BAD5BjJ,MAC4B;AAAA,QAD5BA,MAC4B,4BADrB,IACqB;AAAA,6BADfkJ,QACe;AAAA,QADfA,QACe,8BADN,IACM;AAAA,6BADAC,QACA;AAAA,QADAA,QACA,8BADS,IACT;AAAA,8BADeC,SACf;AAAA,QADeA,SACf,+BADyB,IACzB;AAAA,8BAD+BC,SAC/B;AAAA,QAD+BA,SAC/B,+BADyC,IACzC;AAAA,oCAAtEC,eAAsE;AAAA,QAAtEA,eAAsE,qCAAtD,KAAsD;AAAA,6BAA/CC,QAA+C;AAAA,QAA/CA,QAA+C,8BAAtC,KAAsC;AAAA,8BAA/B9J,SAA+B;AAAA,QAA/BA,SAA+B,+BAArB,IAAqB;AAAA,yBAAfc,IAAe;AAAA,QAAfA,IAAe,0BAAV,IAAU;;AAAA;;AACtE,QAAG,OAAO9I,OAAP,KAAmB,QAAtB,EAAgC;AAC5B,WAAKA,OAAL,GAAe+I,QAAQ,CAACC,aAAT,CAAuBhJ,OAAvB,CAAf;AACH,KAFD,MAEO;AACH,WAAKA,OAAL,GAAeA,OAAf;AACH;;AAED,SAAKwR,OAAL,GAAe,EAAf;AACA,SAAKxR,OAAL,CAAa+L,SAAb,CAAuBhH,GAAvB,CAA2B,eAA3B;;AAEA,QAAGyM,OAAO,KAAK,KAAf,EAAsB;AAClBA,aAAO,GAAG,IAAIR,GAAJ,CAAQD,UAAR,CAAV;AACH,KAFD,MAEO;AACHS,aAAO,GAAG,IAAIR,GAAJ,CAAQQ,OAAO,CAACO,KAAR,CAAc,KAAd,CAAR,CAAV;AACH;;AAED,QAAG,CAACC,mEAAU,CAACjB,UAAD,EAAaS,OAAb,CAAd,EAAqC;AACjC,YAAM,IAAI3K,SAAJ,CAAc,oBAAd,CAAN;AACH;;AAlBqE;AAAA;AAAA;;AAAA;AAoBtE,2BAAqB2K,OAArB,8HAA8B;AAAA,YAAtBS,SAAsB;AAC1B,YAAI3J,MAAM,GAAGS,QAAQ,CAACmJ,aAAT,CAAuB,KAAvB,CAAb;AACA5J,cAAM,CAACyD,SAAP,CAAiBhH,GAAjB,CAAqB,sBAArB;AACAuD,cAAM,CAACyD,SAAP,CAAiBhH,GAAjB,yBAAsCkN,SAAtC;AACA3J,cAAM,CAAC6J,OAAP,CAAeF,SAAf,GAA2BA,SAA3B;AACA,aAAKT,OAAL,CAAaS,SAAb,IAA0B3J,MAA1B;AACA,aAAKtI,OAAL,CAAa8L,WAAb,CAAyBxD,MAAzB;AACH;AA3BqE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6BtE,SAAK8J,YAAL,GAAoB,UAACnL,KAAD,EAAW;AAC3B,WAAI,CAACoL,cAAL,CAAoBpL,KAApB;AACH,KAFD;;AAIA,SAAKjH,OAAL,CAAamJ,gBAAb,CAA8B,WAA9B,EAA2C,KAAKiJ,YAAhD;;AAEA,QAAG,OAAOtJ,IAAP,KAAgB,QAAnB,EAA6B;AACzB,WAAKA,IAAL,GAAY;AACR1B,SAAC,EAAE0B,IADK;AAERvB,SAAC,EAAEuB;AAFK,OAAZ;AAIH,KALD,MAKO,IAAGa,KAAK,CAACC,OAAN,CAAcd,IAAd,CAAH,EAAwB;AAC3B,WAAKA,IAAL,GAAY;AACR1B,SAAC,EAAE0B,IAAI,CAAC,CAAD,CADC;AAERvB,SAAC,EAAEuB,IAAI,CAAC,CAAD;AAFC,OAAZ;AAIH,KALM,MAKA;AACH,WAAKA,IAAL,GAAYA,IAAZ;AACH;;AAED,SAAKP,MAAL,GAAcA,MAAd;AACA,SAAKkJ,QAAL,GAAgBA,QAAhB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,eAAL,GAAuBA,eAAvB;AACA,SAAKS,UAAL,GAAkB,KAAlB;AACA,SAAKtK,SAAL,GAAiBA,SAAjB;AACH;;;;mCAEcf,K,EAAO;AAAA;;AAClB,UAAG,KAAKqL,UAAR,EAAoB;AACpB,UAAIhK,MAAM,GAAGrB,KAAK,CAACD,MAAN,CAAayC,OAAb,CAAqB,uBAArB,CAAb;AACA,UAAG,CAACnB,MAAD,IAAW,CAAC,KAAKtI,OAAL,CAAa0J,QAAb,CAAsBpB,MAAtB,CAAf,EAA8C;AAC9C,UAAIiK,UAAU,GAAGjK,MAAM,CAACmB,OAAP,CAAe,gBAAf,CAAjB;AACA,UAAG,CAAC8I,UAAD,IAAeA,UAAU,KAAK,KAAKvS,OAAtC,EAA+C;AAE/CiH,WAAK,CAAC4C,cAAN;AAEA,UAAIoI,SAAS,GAAG3J,MAAM,CAAC6J,OAAP,CAAeF,SAA/B;AAAA,UACIO,SAAS,GAAGvL,KAAK,CAACI,OAAN,GAAgB3B,MAAM,CAAC+M,OADvC;AAAA,UAEIC,SAAS,GAAGzL,KAAK,CAACO,OAAN,GAAgB9B,MAAM,CAACiN,OAFvC;AAAA,UAGIC,GAAG,GAAG7J,QAHV;AAAA,UAIIyC,kBAAkB,GAAG,KAAKxL,OAAL,CAAasR,qBAAb,EAJzB;AAAA,UAKIuB,QAAQ,GAAGC,kFAAyB,CAACtH,kBAAD,CALxC;AAAA,UAMIxE,MAAM,GAAG,KAAKhH,OANlB;AAAA,UAOIkH,IAAI,GAAG;AAACI,YAAI,EAAEuL,QAAQ,CAACvL,IAAhB;AAAsBG,WAAG,EAAEoL,QAAQ,CAACpL,GAApC;AAAyCiE,aAAK,EAAEmH,QAAQ,CAACnH,KAAzD;AAAgEC,cAAM,EAAEkH,QAAQ,CAAClH;AAAjF,OAPX;;AASA,UAAG,KAAKpD,MAAR,EAAgB;AACZ,YAAG,OAAO,KAAKA,MAAZ,KAAuB,UAA1B,EAAsC;AAClCvB,gBAAM,GAAG,KAAKuB,MAAL,CAAYvH,IAAZ,CAAiB,IAAjB,EAAuB,KAAKhB,OAA5B,CAAT;AACH,SAFD,MAEO;AACHgH,gBAAM,GAAG+B,QAAQ,CAACmJ,aAAT,CAAuB,KAAvB,CAAT;AACAa,yEAAU,CAAC/L,MAAD,EAAS,KAAKuB,MAAd,CAAV;AACH;;AAEDvB,cAAM,CAAC+E,SAAP,CAAiBhH,GAAjB,CAAqB,sBAArB;AACAiC,cAAM,CAACN,KAAP,CAAagF,KAAb,GAAqBmH,QAAQ,CAACnH,KAAT,GAAiB,IAAtC;AACA1E,cAAM,CAACN,KAAP,CAAaiF,MAAb,GAAsBkH,QAAQ,CAAClH,MAAT,GAAkB,IAAxC;AACA3E,cAAM,CAACN,KAAP,CAAasM,SAAb,GAAyBC,gBAAgB,CAAC,KAAKjT,OAAN,CAAhB,CAA+BgT,SAAxD;AACA,aAAKhT,OAAL,CAAa6L,aAAb,CAA2BC,WAA3B,CAAuC9E,MAAvC;AACAqG,yFAAwB,CAACrG,MAAD,EAASwE,kBAAT,EAA6B,aAA7B,CAAxB;AACA6B,yFAAwB,CAACrG,MAAD,EAAS,KAAKhH,OAAL,CAAasR,qBAAb,EAAT,EAA+C,aAA/C,CAAxB;AACH;;AAED,UAAItH,WAAW,GAAG,SAAdA,WAAc,CAAA/C,KAAK,EAAI;AACvB,YAAIiM,MAAM,GAAGjM,KAAK,CAACI,OAAN,IAAiBmL,SAAS,GAAG9M,MAAM,CAAC+M,OAApC,CAAb;AAAA,YACIU,MAAM,GAAGlM,KAAK,CAACO,OAAN,IAAiBkL,SAAS,GAAGhN,MAAM,CAACiN,OAApC,CADb;AAAA,YAEIrL,IAAI,GAAGuL,QAAQ,CAACvL,IAFpB;AAAA,YAGIG,GAAG,GAAGoL,QAAQ,CAACpL,GAHnB;AAAA,YAII0G,KAAK,GAAG0E,QAAQ,CAAC1E,KAAT,GAAiBzI,MAAM,CAAC+M,OAJpC;AAAA,YAKIrE,MAAM,GAAGyE,QAAQ,CAACzE,MAAT,GAAkB1I,MAAM,CAACiN,OALtC;AAAA,YAMIlB,QAAQ,GAAG,MAAI,CAACA,QAAL,KAAkB,IAAlB,IAA0B,MAAI,CAACA,QAAL,KAAkB3N,SAA5C,GAAwD,MAAI,CAAC2N,QAA7D,GAAwE,CANvF;AAAA,YAOIC,QAAQ,GAAG,MAAI,CAACA,QAAL,KAAkB,IAAlB,IAA0B,MAAI,CAACA,QAAL,KAAkB5N,SAA5C,GAAwD,MAAI,CAAC4N,QAA7D,GAAwE0B,QAPvF;AAAA,YAQIzB,SAAS,GAAG,MAAI,CAACA,SAAL,KAAmB,IAAnB,IAA2B,MAAI,CAACC,SAAL,KAAmB9N,SAA9C,GAA0D,MAAI,CAAC6N,SAA/D,GAA2E,CAR3F;AAAA,YASIC,SAAS,GAAG,MAAI,CAACA,SAAL,KAAmB,IAAnB,IAA2B,MAAI,CAACA,SAAL,KAAmB9N,SAA9C,GAA0D,MAAI,CAAC8N,SAA/D,GAA2EwB,QAT3F;;AAWA,YAAGnB,SAAS,KAAK,OAAd,IAAyBA,SAAS,KAAK,cAAvC,IAAyDA,SAAS,KAAK,WAA1E,EAAuF;AACnF9D,eAAK,IAAI+E,MAAT;AACA/E,eAAK,GAAGuB,2DAAK,CAACvB,KAAD,EAAQ7G,IAAI,GAAGmK,QAAf,EAAyBnK,IAAI,GAAGoK,QAAhC,CAAb;AACH,SAHD,MAGO,IAAGO,SAAS,KAAK,MAAd,IAAwBA,SAAS,KAAK,UAAtC,IAAoDA,SAAS,KAAK,aAArE,EAAoF;AACvF3K,cAAI,IAAI4L,MAAR;AACA5L,cAAI,GAAGoI,2DAAK,CAACpI,IAAD,EAAO6G,KAAK,GAAGuD,QAAf,EAAyBvD,KAAK,GAAGsD,QAAjC,CAAZ;AACH;;AAED,YAAGQ,SAAS,KAAK,QAAd,IAA0BA,SAAS,KAAK,cAAxC,IAA0DA,SAAS,KAAK,aAA3E,EAA0F;AACtF7D,gBAAM,GAAGsB,2DAAK,CAACtB,MAAM,GAAG+E,MAAV,EAAkB1L,GAAG,GAAGkK,SAAxB,EAAmClK,GAAG,GAAGmK,SAAzC,CAAd;AACH,SAFD,MAEO,IAAGK,SAAS,KAAK,KAAd,IAAuBA,SAAS,KAAK,UAArC,IAAmDA,SAAS,KAAK,WAApE,EAAiF;AACpFxK,aAAG,GAAGiI,2DAAK,CAACjI,GAAG,GAAG0L,MAAP,EAAe/E,MAAM,GAAGwD,SAAxB,EAAmCxD,MAAM,GAAGuD,SAA5C,CAAX;AACH;;AAED,YAAI3J,SAAJ;;AAEA,YAAG,MAAI,CAACA,SAAR,EAAmB;AACfA,mBAAS,GAAG,MAAI,CAACA,SAAL,CAAehH,IAAf,CAAoB,MAApB,EAA0B,MAAI,CAAChB,OAA/B,EAAwCiH,KAAxC,CAAZ;;AAEA,cAAGe,SAAH,EAAc;AACV;AACA;AACA,gBAAIqL,UAAU,GAAG;AACb/L,kBAAI,EAAEU,SAAS,CAACV,IADH;AAEbG,iBAAG,EAAEO,SAAS,CAACP,GAFF;AAGb2G,oBAAM,EAAEpG,SAAS,CAACoG,MAHL;AAIbD,mBAAK,EAAEnG,SAAS,CAACmG;AAJJ,aAAjB;;AAOA,gBAAG,MAAI,CAACrF,IAAR,EAAc;AACV,kBAAI,MAAI,CAACA,IAAL,CAAU1B,CAAd,EAAiB;AACbiM,0BAAU,CAAC/L,IAAX,GAAkBgM,mEAAU,CAACtL,SAAS,CAACV,IAAX,EAAiB,MAAI,CAACwB,IAAL,CAAU1B,CAA3B,EAA8BiH,IAAI,CAACkF,IAAnC,CAA5B;AACAF,0BAAU,CAAClF,KAAX,GAAmBmF,mEAAU,CAACtL,SAAS,CAACmG,KAAX,EAAkB,MAAI,CAACrF,IAAL,CAAU1B,CAA5B,EAA+BiH,IAAI,CAACC,KAApC,CAA7B;AACH;;AAED,kBAAI,MAAI,CAACxF,IAAL,CAAUvB,CAAd,EAAiB;AACb8L,0BAAU,CAAC5L,GAAX,GAAiB6L,mEAAU,CAACtL,SAAS,CAACP,GAAX,EAAgB,MAAI,CAACqB,IAAL,CAAUvB,CAA1B,EAA6B8G,IAAI,CAACkF,IAAlC,CAA3B;AACAF,0BAAU,CAACjF,MAAX,GAAoBkF,mEAAU,CAACtL,SAAS,CAACoG,MAAX,EAAmB,MAAI,CAACtF,IAAL,CAAUvB,CAA7B,EAAgC8G,IAAI,CAACC,KAArC,CAA9B;AACH;AACJ;;AAEDtG,qBAAS,GAAGqL,UAAZ;AACH;AACJ;;AAED,YAAG,MAAI,CAACvK,IAAR,EAAc;AACVxB,cAAI,GAAGgM,mEAAU,CAAChM,IAAD,EAAO,MAAI,CAACwB,IAAL,CAAU1B,CAAjB,CAAjB;AACAK,aAAG,GAAG6L,mEAAU,CAAC7L,GAAD,EAAM,MAAI,CAACqB,IAAL,CAAUvB,CAAhB,CAAhB;AACA4G,eAAK,GAAGmF,mEAAU,CAACnF,KAAD,EAAQ,MAAI,CAACrF,IAAL,CAAU1B,CAAlB,CAAlB;AACAgH,gBAAM,GAAGkF,mEAAU,CAAClF,MAAD,EAAS,MAAI,CAACtF,IAAL,CAAUvB,CAAnB,CAAnB;AACH;;AAEDiM,eAAO,CAACC,GAAR,CAAYnM,IAAZ,EAAkB6G,KAAlB,EAAyBC,MAAzB,EAAiC3G,GAAjC;AACA+L,eAAO,CAACC,GAAR,CAAYzL,SAAZ;;AAEA,YAAGA,SAAH,EAAc;AACVV,cAAI,GAAGoI,2DAAK,CAACpI,IAAD,EAAOU,SAAS,CAACV,IAAjB,EAAuBU,SAAS,CAACmG,KAAjC,CAAZ;AACAA,eAAK,GAAGuB,2DAAK,CAACvB,KAAD,EAAQnG,SAAS,CAACV,IAAlB,EAAwBU,SAAS,CAACmG,KAAlC,CAAb;AACAC,gBAAM,GAAGsB,2DAAK,CAACtB,MAAD,EAASpG,SAAS,CAACP,GAAnB,EAAwBO,SAAS,CAACoG,MAAlC,CAAd;AACA3G,aAAG,GAAGiI,2DAAK,CAACjI,GAAD,EAAMO,SAAS,CAACP,GAAhB,EAAqBO,SAAS,CAACoG,MAA/B,CAAX;AACH;;AAED,YAAG,MAAI,CAACyD,eAAR,EAAyB;AACrB,cAAGI,SAAS,KAAK,UAAd,IAA4BA,SAAS,KAAK,WAA7C,EAA0D;AACtDxK,eAAG,GAAG2G,MAAM,GAAI,CAACD,KAAK,GAAG7G,IAAT,IAAiB,MAAI,CAACuK,eAAtC;AACH,WAFD,MAEO,IAAGI,SAAS,KAAK,aAAd,IAA+BA,SAAS,KAAK,cAA7C,IAA+DA,SAAS,KAAK,MAA7E,IAAuFA,SAAS,KAAK,OAAxG,EAAiH;AACpH7D,kBAAM,GAAG3G,GAAG,GAAI,CAAC0G,KAAK,GAAG7G,IAAT,IAAiB,MAAI,CAACuK,eAAtC;AACH,WAFM,MAEA,IAAGI,SAAS,KAAK,QAAd,IAA0BA,SAAS,KAAK,KAA3C,EAAkD;AACrD9D,iBAAK,GAAG7G,IAAI,GAAI,CAAC8G,MAAM,GAAG3G,GAAV,IAAiB,MAAI,CAACoK,eAAtC;AACH;AACJ;;AAEDxE,yFAAwB,CAACrG,MAAD,EAAS;AAACM,cAAI,EAAJA,IAAD;AAAOG,aAAG,EAAHA;AAAP,SAAT,EAAsB,aAAtB,CAAxB;AACAT,cAAM,CAACN,KAAP,CAAagF,KAAb,aAAwByC,KAAK,GAAG7G,IAAhC;AACAN,cAAM,CAACN,KAAP,CAAaiF,MAAb,aAAyByC,MAAM,GAAG3G,GAAlC;AAEAP,YAAI,CAACI,IAAL,GAAYA,IAAI,GAAG5B,MAAM,CAAC+M,OAA1B;AACAvL,YAAI,CAACO,GAAL,GAAWA,GAAG,GAAG/B,MAAM,CAACiN,OAAxB;AACAzL,YAAI,CAACwE,KAAL,GAAayC,KAAK,GAAG7G,IAArB;AACAJ,YAAI,CAACyE,MAAL,GAAcyC,MAAM,GAAG3G,GAAvB;AACAP,YAAI,CAACiH,KAAL,GAAaA,KAAK,GAAGzI,MAAM,CAAC+M,OAA5B;AACAvL,YAAI,CAACkH,MAAL,GAAcA,MAAM,GAAG1I,MAAM,CAACiN,OAA9B;;AAEA,cAAI,CAAC3S,OAAL,CAAasF,aAAb,CAA2B,IAAIC,WAAJ,CAAgB,UAAhB,EAA4B;AACnDC,iBAAO,EAAE,IAD0C;AAEnDC,gBAAM,EAAE;AACJ8M,sBAAU,EAAE,MADR;AAEJvL,kBAAM,EAAEA,MAFJ;AAGJwJ,yBAAa,EAAEvJ,KAHX;AAIJI,mBAAO,EAAEJ,KAAK,CAACI,OAJX;AAKJG,mBAAO,EAAEP,KAAK,CAACO,OALX;AAMJxH,mBAAO,EAAE,MAAI,CAACA,OANV;AAQJ0T,4BAAgB,EAAE;AACdpM,kBAAI,EAAEA,IADQ;AAEdG,iBAAG,EAAEA,GAFS;AAGd0G,mBAAK,EAAEA,KAHO;AAIdC,oBAAM,EAAEA,MAJM;AAKd1C,mBAAK,EAAEyC,KAAK,GAAG7G,IALD;AAMdqE,oBAAM,EAAEyC,MAAM,GAAG3G,GANH;AAOdL,eAAC,EAAEE,IAPW;AAQdC,eAAC,EAAEE;AARW;AARd;AAF2C,SAA5B,CAA3B;AAsBH,OArHD;;AAuHA,UAAI8C,SAAS,GAAG,SAAZA,SAAY,CAAAtD,KAAK,EAAI;AACrB2L,WAAG,CAAC1I,mBAAJ,CAAwB,WAAxB,EAAqCF,WAArC;AACA4I,WAAG,CAAC1I,mBAAJ,CAAwB,SAAxB,EAAmCK,SAAnC;;AAEA,YAAG,MAAI,CAACvK,OAAL,KAAiBgH,MAApB,EAA4B;AACxBA,gBAAM,CAAC6E,aAAP,CAAqBuB,WAArB,CAAiCpG,MAAjC;AAEAqG,2FAAwB,CAAC,MAAI,CAACrN,OAAN,EAAe;AACnCsH,gBAAI,EAAEJ,IAAI,CAACI,IAAL,GAAY5B,MAAM,CAAC+M,OADU;AAEnChL,eAAG,EAAEP,IAAI,CAACO,GAAL,GAAW/B,MAAM,CAACiN;AAFY,WAAf,EAGrB,aAHqB,CAAxB;AAKA,gBAAI,CAAC3S,OAAL,CAAa0G,KAAb,CAAmBgF,KAAnB,aAA8BxE,IAAI,CAACwE,KAAnC;AACA,gBAAI,CAAC1L,OAAL,CAAa0G,KAAb,CAAmBiF,MAAnB,aAA+BzE,IAAI,CAACyE,MAApC;AACH;;AAED,cAAI,CAAC3L,OAAL,CAAa+L,SAAb,CAAuBc,MAAvB,CAA8B,aAA9B;;AACA,cAAI,CAACyF,UAAL,GAAkB,KAAlB;;AAEA,cAAI,CAACtS,OAAL,CAAasF,aAAb,CAA2B,IAAIC,WAAJ,CAAgB,YAAhB,EAA8B;AACrDC,iBAAO,EAAE,IAD4C;AAErDC,gBAAM,EAAE;AACJ8M,sBAAU,EAAE,MADR;AAEJvS,mBAAO,EAAE,MAAI,CAACA,OAFV;AAGJwQ,yBAAa,EAAEvJ,KAHX;AAIJI,mBAAO,EAAEJ,KAAK,CAACI,OAJX;AAKJG,mBAAO,EAAEP,KAAK,CAACO;AALX;AAF6C,SAA9B,CAA3B;AAUH,OA7BD;;AA+BA,WAAK8K,UAAL,GAAkB,IAAlB;AACA,WAAKtS,OAAL,CAAa+L,SAAb,CAAuBhH,GAAvB,CAA2B,aAA3B;AACA6N,SAAG,CAACzJ,gBAAJ,CAAqB,WAArB,EAAkCa,WAAlC;AACA4I,SAAG,CAACzJ,gBAAJ,CAAqB,SAArB,EAAgCoB,SAAhC;AAEA,WAAKvK,OAAL,CAAasF,aAAb,CAA2B,IAAIC,WAAJ,CAAgB,cAAhB,EAAgC;AACvDC,eAAO,EAAE,IAD8C;AAEvDC,cAAM,EAAE;AACJ8M,oBAAU,EAAE,IADR;AAEJvL,gBAAM,EAAEA,MAFJ;AAGJwJ,uBAAa,EAAEvJ,KAHX;AAIJI,iBAAO,EAAEJ,KAAK,CAACI,OAJX;AAKJG,iBAAO,EAAEP,KAAK,CAACO,OALX;AAMJxH,iBAAO,EAAE,KAAKA;AANV;AAF+C,OAAhC,CAA3B;AAWH;;;;;;;;;;;;;;;;;;AChUL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA,IAAM2T,SAAS,GAAG,wBAAlB;AAGA;;;;;;;AAMO,SAASC,gBAAT,CAA0B5T,OAA1B,EAAmC;AACtC,MAAI2O,CAAC,GAAG3O,OAAO,CAAC6L,aAAhB;;AAEA,SAAM8C,CAAN,EAAS;AACL,QAAI9N,QAAQ,GAAGoS,gBAAgB,CAACtE,CAAD,CAAhB,CAAoB9N,QAAnC;AACA,QAAGA,QAAQ,KAAK,QAAhB,EAA0B,OAAO8N,CAAP;AAC1BA,KAAC,GAAGA,CAAC,CAAC9C,aAAN;AACH;AACJ;AAGD;;;;;;AAKO,SAASgI,aAAT,GAAyB;AAC5B,SAAO1M,6CAAI,CAAC0M,aAAL,EAAP;AACH;AAGD;;;;;;;;AAOO,SAASC,qBAAT,CAA+B9T,OAA/B,EAA2D;AAAA,MAAnB+T,YAAmB,uEAAN,IAAM;AAC9D,MAAIC,UAAJ,EAAgB9M,IAAhB;AAEA,MAAG,CAAC6M,YAAJ,EAAkBA,YAAY,GAAGH,gBAAgB,CAAC5T,OAAD,CAA/B,CAH4C,CAK9D;;AACA,MAAG,CAAC+T,YAAJ,EAAkB;AACdC,cAAU,GAAG7M,6CAAI,CAAC8M,2BAAL,EAAb;AACH,GAFD,MAEO;AACHD,cAAU,GAAG7M,6CAAI,CAACmK,qBAAL,CAA2ByC,YAA3B,CAAb;AACH;;AAED7M,MAAI,GAAGlH,OAAO,CAACsR,qBAAR,EAAP;AAEA,SAAO,IAAInK,6CAAJ,CACHD,IAAI,CAACI,IAAL,GAAY0M,UAAU,CAAC1M,IADpB,EAEHJ,IAAI,CAACO,GAAL,GAAWuM,UAAU,CAACvM,GAFnB,EAGHuM,UAAU,CAAC7F,KAAX,GAAmBjH,IAAI,CAACiH,KAHrB,EAIH6F,UAAU,CAAC5F,MAAX,GAAoBlH,IAAI,CAACkH,MAJtB,CAAP;AAMH;AAGD;;;;;;AAKO,SAAS8F,uBAAT,CAAiClU,OAAjC,EAA0C;AAC7C,MAAIkH,IAAI,GAAGlH,OAAO,CAACsR,qBAAR,EAAX;AAEA,SAAO,IAAInK,6CAAJ,CACHD,IAAI,CAACI,IAAL,GAAY5B,MAAM,CAAC0D,WADhB,EAEHlC,IAAI,CAACO,GAAL,GAAW/B,MAAM,CAAC2D,WAFf,EAGHnC,IAAI,CAACiH,KAAL,GAAazI,MAAM,CAAC0D,WAHjB,EAIHlC,IAAI,CAACkH,MAAL,GAAc1I,MAAM,CAAC2D,WAJlB,CAAP;AAMH;AAGD;;;;;;;AAMO,SAAS8K,cAAT,CAAwBnU,OAAxB,EAAiC;AACpC,MAAIoU,SAAS,GAAGnB,gBAAgB,CAACjT,OAAD,CAAhB,CAA0BoU,SAA1C;AAAA,MACIlR,CAAC,GAAGyQ,SAAS,CAACxQ,IAAV,CAAeiR,SAAf,CADR;;AAGA,MAAG,CAAClR,CAAJ,EAAO;AACH,WAAO,IAAImR,6CAAJ,CACH,CADG,EAEH,CAFG,EAGH,CAHG,CAAP;AAKH;;AAED,MAAIC,IAAI,GAAGpR,CAAC,CAAC,CAAD,CAAD,CAAK6O,KAAL,CAAW,SAAX,CAAX;;AAEA,MAAG7O,CAAC,CAAC,CAAD,CAAJ,EAAS;AACL,WAAO,IAAImR,6CAAJ,CACHhR,UAAU,CAACiR,IAAI,CAAC,EAAD,CAAL,CADP,EAEHjR,UAAU,CAACiR,IAAI,CAAC,EAAD,CAAL,CAFP,EAGHjR,UAAU,CAACiR,IAAI,CAAC,EAAD,CAAL,CAHP,CAAP;AAKH,GAND,MAMO;AACH,WAAO,IAAID,6CAAJ,CACHhR,UAAU,CAACiR,IAAI,CAAC,CAAD,CAAL,CADP,EAEHjR,UAAU,CAACiR,IAAI,CAAC,CAAD,CAAL,CAFP,EAGH,CAHG,CAAP;AAKH;AACJ;AAGD;;;;;;;;;AAQO,SAASC,cAAT,CAAwBvU,OAAxB,QAAiD;AAAA,MAAfoH,CAAe,QAAfA,CAAe;AAAA,MAAZG,CAAY,QAAZA,CAAY;AAAA,oBAATiN,CAAS;AAAA,MAATA,CAAS,uBAAP,IAAO;;AACpD,MAAGA,CAAC,KAAK,IAAT,EAAe;AACXxU,WAAO,CAAC0G,KAAR,CAAc0N,SAAd,yBAAyChN,CAAzC,iBAAiDG,CAAjD,iBAAyDiN,CAAzD;AACH,GAFD,MAEO;AACHxU,WAAO,CAAC0G,KAAR,CAAc0N,SAAd,uBAAuChN,CAAvC,iBAA+CG,CAA/C;AACH;AACJ;AAGD;;;;;;;AAMO,SAASkN,cAAT,CAAwBzU,OAAxB,EAAiC;AACpC,MAAI0G,KAAK,GAAGuM,gBAAgB,CAACjT,OAAD,CAA5B;AAEA,SAAO,IAAI0U,6CAAJ,CACHC,QAAQ,CAACjO,KAAK,CAACY,IAAP,EAAa,EAAb,CADL,EAEHqN,QAAQ,CAACjO,KAAK,CAACe,GAAP,EAAY,EAAZ,CAFL,CAAP;AAIH;AAGD;;;;;;;;;AAQO,SAASmN,cAAT,CAAwB5U,OAAxB,SAAwD;AAAA,yBAAtBsH,IAAsB;AAAA,MAAtBA,IAAsB,2BAAjB,IAAiB;AAAA,wBAAXG,GAAW;AAAA,MAAXA,GAAW,0BAAP,IAAO;AAC3D,MAAIf,KAAK,GAAGuM,gBAAgB,CAACjT,OAAD,CAA5B;;AAEA,MAAG0G,KAAK,CAAC7F,QAAN,KAAmB,QAAtB,EAAgC;AAC5B6F,SAAK,CAAC7F,QAAN,GAAiB,UAAjB;AACH;;AAED,MAAGyG,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAKxD,SAA7B,EAAwC;AACpC9D,WAAO,CAAC0G,KAAR,CAAcY,IAAd,aAAwBA,IAAxB;AACH;;AAED,MAAGG,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK3D,SAA3B,EAAsC;AAClC9D,WAAO,CAAC0G,KAAR,CAAce,GAAd,aAAuBA,GAAvB;AACH;AACJ;AAGD;;;;;;;;;;;;AAWO,SAAS4F,wBAAT,CAAkCrN,OAAlC,EAA2Ca,QAA3C,EAAwE;AAAA,MAAnBgU,MAAmB,uEAAZ,UAAY;AAC3EhU,UAAQ,GAAG,IAAIsG,6CAAJ,CAAStG,QAAT,CAAX;;AAEA,MAAGgU,MAAM,KAAK,UAAX,IAAyBA,MAAM,KAAK,WAApC,IAAmDA,MAAM,KAAK,aAA9D,IAA+EA,MAAM,KAAK,cAA7F,EAA6G;AACzG,QAAInO,KAAK,GAAGuM,gBAAgB,CAACjT,OAAD,CAA5B;AAEA,QAAI8U,YAAY,GAAGpO,KAAK,CAAC7F,QAAzB;AAAA,QAAmCkU,GAAnC;AAAA,QAAwC7B,MAAxC;AAAA,QAAgDC,MAAhD;AAAA,QAAwD6B,OAAxD,CAHyG,CAKzG;;AACA,QAAGF,YAAY,KAAK,QAApB,EAA8B;AAC1B9U,aAAO,CAAC0G,KAAR,CAAc7F,QAAd,GAAyB,UAAzB;AACAiU,kBAAY,GAAG,UAAf;AACH;;AAED,QAAGA,YAAY,KAAK,UAApB,EAAgC;AAC5BpO,WAAK,GAAGuM,gBAAgB,CAACjT,OAAD,CAAxB;AAEAgV,aAAO,GAAG;AACN1N,YAAI,EAAEqN,QAAQ,CAACjO,KAAK,CAACY,IAAP,EAAa,EAAb,CAAR,IAA4B,CAD5B;AAEN6G,aAAK,EAAEwG,QAAQ,CAACjO,KAAK,CAACyH,KAAP,EAAc,EAAd,CAAR,IAA6B,CAF9B;AAGN1G,WAAG,EAAEkN,QAAQ,CAACjO,KAAK,CAACe,GAAP,EAAY,EAAZ,CAAR,IAA2B,CAH1B;AAIN2G,cAAM,EAAEuG,QAAQ,CAACjO,KAAK,CAAC0H,MAAP,EAAe,EAAf,CAAR,IAA8B;AAJhC,OAAV;AAMH,KATD,MASO;AACH2G,SAAG,GAAG5N,6CAAI,CAACmK,qBAAL,CAA2BtR,OAA3B,CAAN;AACAgV,aAAO,GAAGlB,qBAAqB,CAAC9T,OAAD,CAA/B;AACH;;AAED,QAAG6U,MAAM,KAAK,UAAd,EAA0B;AACtB3B,YAAM,GAAGrS,QAAQ,CAACyG,IAAT,GAAgByN,GAAG,CAACzN,IAA7B;AACA6L,YAAM,GAAGtS,QAAQ,CAAC4G,GAAT,GAAesN,GAAG,CAACtN,GAA5B;AAEAzH,aAAO,CAAC0G,KAAR,CAAcY,IAAd,GAAsB0N,OAAO,CAAC1N,IAAR,GAAe4L,MAAhB,GAA0B,IAA/C;AACAlT,aAAO,CAAC0G,KAAR,CAAce,GAAd,GAAqBuN,OAAO,CAACvN,GAAR,GAAc0L,MAAf,GAAyB,IAA7C;AACAnT,aAAO,CAAC0G,KAAR,CAAcyH,KAAd,GAAsB,EAAtB;AACAnO,aAAO,CAAC0G,KAAR,CAAc0H,MAAd,GAAuB,EAAvB;AACH,KARD,MAQO,IAAGyG,MAAM,KAAK,WAAd,EAA2B;AAC9B3B,YAAM,GAAGrS,QAAQ,CAACsN,KAAT,GAAiB4G,GAAG,CAAC5G,KAA9B;AACAgF,YAAM,GAAGtS,QAAQ,CAAC4G,GAAT,GAAesN,GAAG,CAACtN,GAA5B;AAEAzH,aAAO,CAAC0G,KAAR,CAAcyH,KAAd,GAAuB6G,OAAO,CAAC7G,KAAR,GAAgB+E,MAAjB,GAA2B,IAAjD;AACAlT,aAAO,CAAC0G,KAAR,CAAce,GAAd,GAAqBuN,OAAO,CAACvN,GAAR,GAAc0L,MAAf,GAAyB,IAA7C;AACAnT,aAAO,CAAC0G,KAAR,CAAcY,IAAd,GAAqB,EAArB;AACAtH,aAAO,CAAC0G,KAAR,CAAc0H,MAAd,GAAuB,EAAvB;AACH,KARM,MAQA,IAAGyG,MAAM,KAAK,aAAd,EAA6B;AAChC3B,YAAM,GAAGrS,QAAQ,CAACyG,IAAT,GAAgByN,GAAG,CAACzN,IAA7B;AACA6L,YAAM,GAAGtS,QAAQ,CAACuN,MAAT,GAAkB2G,GAAG,CAAC3G,MAA/B;AAEAoF,aAAO,CAACC,GAAR,CAAY;AACRtF,aAAK,EAAG6G,OAAO,CAAC1N,IAAR,GAAe4L,MAAhB,GAA0B,IADzB;AAER9E,cAAM,EAAG4G,OAAO,CAAC5G,MAAR,GAAiB+E,MAAlB,GAA4B;AAF5B,OAAZ;AAKAnT,aAAO,CAAC0G,KAAR,CAAcY,IAAd,GAAsB0N,OAAO,CAAC1N,IAAR,GAAe4L,MAAhB,GAA0B,IAA/C;AACAlT,aAAO,CAAC0G,KAAR,CAAc0H,MAAd,GAAwB4G,OAAO,CAAC5G,MAAR,GAAiB+E,MAAlB,GAA4B,IAAnD;AACAnT,aAAO,CAAC0G,KAAR,CAAcyH,KAAd,GAAsB,EAAtB;AACAnO,aAAO,CAAC0G,KAAR,CAAce,GAAd,GAAoB,EAApB;AACH,KAbM,MAaA;AAAE;AACLyL,YAAM,GAAGrS,QAAQ,CAACsN,KAAT,GAAiB4G,GAAG,CAAC5G,KAA9B;AACAgF,YAAM,GAAGtS,QAAQ,CAACuN,MAAT,GAAkB2G,GAAG,CAAC3G,MAA/B;AAEApO,aAAO,CAAC0G,KAAR,CAAcyH,KAAd,GAAuB6G,OAAO,CAAC7G,KAAR,GAAgB+E,MAAjB,GAA2B,IAAjD;AACAlT,aAAO,CAAC0G,KAAR,CAAc0H,MAAd,GAAwB4G,OAAO,CAAC5G,MAAR,GAAiB+E,MAAlB,GAA4B,IAAnD;AACAnT,aAAO,CAAC0G,KAAR,CAAcY,IAAd,GAAqB,EAArB;AACAtH,aAAO,CAAC0G,KAAR,CAAce,GAAd,GAAoB,EAApB;AACH;AACJ,GA/DD,MA+DO,IAAGoN,MAAM,KAAK,WAAd,EAA2B;AAC9B,QAAIE,IAAG,GAAG5N,6CAAI,CAACmK,qBAAL,CAA2BtR,OAA3B,CAAV;AAAA,QACIkT,OAAM,GAAGrS,QAAQ,CAACyG,IAAT,GAAgByN,IAAG,CAACzN,IADjC;AAAA,QAEI6L,OAAM,GAAGtS,QAAQ,CAAC4G,GAAT,GAAesN,IAAG,CAACtN,GAFhC;AAAA,QAGIwN,WAAW,GAAGd,cAAc,CAACnU,OAAD,CAHhC;;AAKAuU,kBAAc,CAACvU,OAAD,EAAU;AACpBoH,OAAC,EAAE6N,WAAW,CAAC7N,CAAZ,GAAgB8L,OADC;AAEpB3L,OAAC,EAAE0N,WAAW,CAAC1N,CAAZ,GAAgB4L;AAFC,KAAV,CAAd;AAIH,GAVM,MAUA,IAAG0B,MAAM,KAAK,aAAd,EAA6B;AAChC,QAAIE,KAAG,GAAG5N,6CAAI,CAACmK,qBAAL,CAA2BtR,OAA3B,CAAV;AAAA,QACIkT,QAAM,GAAGrS,QAAQ,CAACyG,IAAT,GAAgByN,KAAG,CAACzN,IADjC;AAAA,QAEI6L,QAAM,GAAGtS,QAAQ,CAAC4G,GAAT,GAAesN,KAAG,CAACtN,GAFhC;AAAA,QAGIwN,YAAW,GAAGd,cAAc,CAACnU,OAAD,CAHhC;;AAKAuU,kBAAc,CAACvU,OAAD,EAAU;AACpBoH,OAAC,EAAE6N,YAAW,CAAC7N,CAAZ,GAAgB8L,QADC;AAEpB3L,OAAC,EAAE0N,YAAW,CAAC1N,CAAZ,GAAgB4L,QAFC;AAGpBqB,OAAC,EAAES,YAAW,CAACT;AAHK,KAAV,CAAd;AAKH;AACJ;AAGD;;;;;AAIO,SAAS1B,yBAAT,CAAmC5L,IAAnC,EAAyC;AAC5C,MAAI3D,CAAC,GAAG4D,6CAAI,CAAC+N,QAAL,CAAchO,IAAd,CAAR;AAEA3D,GAAC,CAAC+D,IAAF,IAAU5B,MAAM,CAAC0D,WAAjB;AACA7F,GAAC,CAAC4K,KAAF,IAAWzI,MAAM,CAAC0D,WAAlB;AACA,MAAG,OAAO7F,CAAC,CAACkE,GAAT,KAAiB,QAApB,EAA8BlE,CAAC,CAACkE,GAAF,IAAS/B,MAAM,CAAC2D,WAAhB;AAC9B,MAAG,OAAO9F,CAAC,CAAC6K,MAAT,KAAoB,QAAvB,EAAiC7K,CAAC,CAAC6K,MAAF,IAAY1I,MAAM,CAAC2D,WAAnB;AAEjC,SAAO9F,CAAP;AACH;AAGD;;;;;AAIO,SAAS4R,yBAAT,CAAmCjO,IAAnC,EAAyC;AAC5C,MAAI3D,CAAC,GAAG4D,6CAAI,CAAC+N,QAAL,CAAchO,IAAd,CAAR;AAEA3D,GAAC,CAAC+D,IAAF,IAAU5B,MAAM,CAAC0D,WAAjB;AACA7F,GAAC,CAAC4K,KAAF,IAAWzI,MAAM,CAAC0D,WAAlB;AACA,MAAG,OAAO7F,CAAC,CAACkE,GAAT,KAAiB,QAApB,EAA8BlE,CAAC,CAACkE,GAAF,IAAS/B,MAAM,CAAC2D,WAAhB;AAC9B,MAAG,OAAO9F,CAAC,CAAC6K,MAAT,KAAoB,QAAvB,EAAiC7K,CAAC,CAAC6K,MAAF,IAAY1I,MAAM,CAAC2D,WAAnB;AAEjC,SAAO9F,CAAP;AACH;AAGD;;;;;;;;AAOO,SAAS+P,UAAT,CAAoBxQ,KAApB,EAA2BsS,QAA3B,EAAkE;AAAA,MAA7BC,gBAA6B,uEAAZhH,IAAI,CAACiH,KAAO;;AACrE,MAAGF,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAKtR,SAAlC,IAA+C,CAACyR,MAAM,CAACC,KAAP,CAAaJ,QAAb,CAAnD,EAA2E;AACvE,WAAOC,gBAAgB,CAACvS,KAAK,GAAGsS,QAAT,CAAhB,GAAqCA,QAA5C;AACH;;AAED,SAAOtS,KAAP;AACH;AAGD;;;;;;;;AAOO,SAAS2S,sBAAT,CAAgCC,OAAhC,EAAyC;AAC5C,SAAOvO,6CAAI,CAAC+N,QAAL,CAAcQ,OAAd,CAAP;AACH;AAGD;;;;;;;;;;AASO,SAASC,iBAAT,CAA2BC,gBAA3B,EAA6CC,KAA7C,EAAiF;AAAA,MAA7BzN,MAA6B,uEAAtB,IAAsB;AAAA,MAAhB0N,SAAgB,uEAAN,IAAM;AACpF,MAAI5O,IAAI,GAAG0O,gBAAX;;AAEA,MAAG1O,IAAI,CAACoK,qBAAR,EAA+B;AAC3BpK,QAAI,GAAGA,IAAI,CAACoK,qBAAL,EAAP;AACH;;AAED,MAAGwE,SAAH,EAAc;AACV,QAAI,OAAOA,SAAP,KAAqB,QAAzB,EAAmC;AAC/BA,eAAS,GAAG/M,QAAQ,CAACC,aAAT,CAAuB8M,SAAvB,CAAZ;AACH;;AAED,QAAIA,SAAS,CAACxE,qBAAd,EAAqC;AACjCwE,eAAS,GAAG3O,6CAAI,CAAC+N,QAAL,CAAcY,SAAS,CAACxE,qBAAV,EAAd,CAAZ;AACH;AACJ,GAfmF,CAiBpF;;;AACA,MAAG3H,KAAK,CAACC,OAAN,CAAciM,KAAd,CAAH,EAAyB;AACrBA,SAAK,GAAG;AACJzO,OAAC,EAAEyO,KAAK,CAAC,CAAD,CADJ;AAEJtO,OAAC,EAAEsO,KAAK,CAAC,CAAD;AAFJ,KAAR;AAIH,GALD,MAKO,IAAG,OAAOA,KAAP,KAAiB,QAApB,EAA8B;AACjC,QAAGA,KAAK,KAAK,UAAb,EAAyB;AACrBA,WAAK,GAAG;AAACzO,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAR;AACH,KAFD,MAEO,IAAGsO,KAAK,KAAK,KAAb,EAAoB;AACvBA,WAAK,GAAG;AAACzO,SAAC,EAAE,KAAJ;AAAWG,SAAC,EAAE;AAAd,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,WAAb,EAA0B;AAC7BA,WAAK,GAAG;AAACzO,SAAC,EAAE,MAAJ;AAAYG,SAAC,EAAE;AAAf,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,OAAb,EAAsB;AACzBA,WAAK,GAAG;AAACzO,SAAC,EAAE,MAAJ;AAAYG,SAAC,EAAE;AAAf,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,cAAb,EAA6B;AAChCA,WAAK,GAAG;AAACzO,SAAC,EAAE,MAAJ;AAAYG,SAAC,EAAE;AAAf,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,QAAb,EAAuB;AAC1BA,WAAK,GAAG;AAACzO,SAAC,EAAE,KAAJ;AAAWG,SAAC,EAAE;AAAd,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,aAAb,EAA4B;AAC/BA,WAAK,GAAG;AAACzO,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,MAAb,EAAqB;AACxBA,WAAK,GAAG;AAACzO,SAAC,EAAE,CAAJ;AAAOG,SAAC,EAAE;AAAV,OAAR;AACH,KAFM,MAEA,IAAGsO,KAAK,KAAK,QAAb,EAAuB;AAC1BA,WAAK,GAAG;AAACzO,SAAC,EAAE,KAAJ;AAAWG,SAAC,EAAE;AAAd,OAAR;AACH,KAFM,MAEA;AACH,YAAM,IAAI5I,KAAJ,gCAAkCkX,KAAlC,EAAN;AACH;AACJ;;AAED,MAAG,OAAOA,KAAK,CAACzO,CAAb,KAAmB,QAAtB,EAAgC;AAC5ByO,SAAK,CAACzO,CAAN,GAAU,CAACF,IAAI,CAACiH,KAAL,GAAajH,IAAI,CAACI,IAAnB,KAA4BjE,UAAU,CAACwS,KAAK,CAACzO,CAAP,CAAV,GAAsB,GAAlD,CAAV;AACH;;AAED,MAAG,OAAOyO,KAAK,CAACtO,CAAb,KAAmB,QAAtB,EAAgC;AAC5BsO,SAAK,CAACtO,CAAN,GAAU,CAACL,IAAI,CAACkH,MAAL,GAAclH,IAAI,CAACO,GAApB,KAA4BpE,UAAU,CAACwS,KAAK,CAACtO,CAAP,CAAV,GAAsB,GAAlD,CAAV;AACH;;AAED,MAAGuO,SAAH,EAAc;AACV,QAAG,OAAOA,SAAS,CAACxO,IAAjB,KAA0B,QAA7B,EAAuC;AACnCwO,eAAS,CAACxO,IAAV,GAAiB,CAACJ,IAAI,CAACiH,KAAL,GAAajH,IAAI,CAACI,IAAnB,KAA4BjE,UAAU,CAACyS,SAAS,CAACxO,IAAX,CAAV,GAA6B,GAAzD,CAAjB;AACH;;AAED,QAAG,OAAOwO,SAAS,CAAC3H,KAAjB,KAA2B,QAA9B,EAAwC;AACpC2H,eAAS,CAAC3H,KAAV,GAAkB,CAACjH,IAAI,CAACiH,KAAL,GAAajH,IAAI,CAACI,IAAnB,KAA4BjE,UAAU,CAACyS,SAAS,CAAC3H,KAAX,CAAV,GAA8B,GAA1D,CAAlB;AACH;;AAED,QAAG,OAAO2H,SAAS,CAACrO,GAAjB,KAAyB,QAA5B,EAAsC;AAClCqO,eAAS,CAACrO,GAAV,GAAgB,CAACP,IAAI,CAACkH,MAAL,GAAclH,IAAI,CAACO,GAApB,KAA4BpE,UAAU,CAACyS,SAAS,CAACrO,GAAX,CAAV,GAA4B,GAAxD,CAAhB;AACH;;AAED,QAAG,OAAOqO,SAAS,CAAC1H,MAAjB,KAA4B,QAA/B,EAAyC;AACrC0H,eAAS,CAAC1H,MAAV,GAAmB,CAAClH,IAAI,CAACkH,MAAL,GAAclH,IAAI,CAACO,GAApB,KAA4BpE,UAAU,CAACyS,SAAS,CAAC1H,MAAX,CAAV,GAA+B,GAA3D,CAAnB;AACH;;AAEDyH,SAAK,CAACzO,CAAN,GAAUsI,sDAAK,CAACmG,KAAK,CAACzO,CAAP,EAAU0O,SAAS,CAACxO,IAApB,EAA0BwO,SAAS,CAAC3H,KAApC,CAAf;AACA0H,SAAK,CAACtO,CAAN,GAAUmI,sDAAK,CAACmG,KAAK,CAACtO,CAAP,EAAUuO,SAAS,CAACrO,GAApB,EAAyBqO,SAAS,CAAC1H,MAAnC,CAAf;AACH;;AAED,MAAGhG,MAAH,EAAW;AACP,QAAGuB,KAAK,CAACC,OAAN,CAAcxB,MAAd,CAAH,EAA0B;AACtBA,YAAM,GAAG;AACLhB,SAAC,EAAEgB,MAAM,CAAC,CAAD,CADJ;AAELb,SAAC,EAAEa,MAAM,CAAC,CAAD;AAFJ,OAAT;AAIH;;AAED,QAAGA,MAAM,CAAChB,CAAP,KAAa,IAAhB,EAAsB;AAClByO,WAAK,CAACzO,CAAN,IAAWgB,MAAM,CAAChB,CAAlB;AACH;;AAED,QAAGgB,MAAM,CAACb,CAAP,KAAa,IAAhB,EAAsB;AAClBsO,WAAK,CAACtO,CAAN,IAAWa,MAAM,CAACb,CAAlB;AACH;AACJ;;AAED,SAAO,IAAImN,6CAAJ,CAASxN,IAAI,CAACI,IAAL,GAAYuO,KAAK,CAACzO,CAA3B,EAA8BF,IAAI,CAACO,GAAL,GAAWoO,KAAK,CAACtO,CAA/C,CAAP;AACH;AAGD;;;;;;;;;AAQO,SAASwO,iBAAT,CAA2B/V,OAA3B,EAAoCa,QAApC,EAA8C;AACjD,MAAIqG,IAAJ,CADiD,CAGjD;AACA;;AACA,MAAGlH,OAAO,CAACsR,qBAAX,EAAkC;AAC9BpK,QAAI,GAAGlH,OAAO,CAACsR,qBAAR,EAAP;AACH,GAFD,MAEO,IAAG,OAAOtR,OAAP,KAAmB,QAAtB,EAAgC;AACnCkH,QAAI,GAAG6B,QAAQ,CAACC,aAAT,CAAuBhJ,OAAvB,EAAgCsR,qBAAhC,EAAP;AACH,GAFM,MAEA;AACHpK,QAAI,GAAGlH,OAAP;AACH;;AAED,MAAI0L,KAAK,GAAGxE,IAAI,CAACiH,KAAL,GAAajH,IAAI,CAACI,IAA9B;AAAA,MACIqE,MAAM,GAAGzE,IAAI,CAACkH,MAAL,GAAclH,IAAI,CAACO,GADhC,CAbiD,CAgBjD;AACA;AACA;AACA;;AACA,MAAG,OAAO5G,QAAP,KAAoB,QAAvB,EAAiC;AAC7B,QAAGA,QAAQ,KAAK,YAAhB,EAA8B;AAC1BA,cAAQ,GAAG;AAACyG,YAAI,EAAE,CAAP;AAAU6G,aAAK,EAAE,MAAjB;AAAyB1G,WAAG,EAAE,CAA9B;AAAiC2G,cAAM,EAAE;AAAzC,OAAX;AACH,KAFD,MAEO,IAAGvN,QAAQ,KAAK,cAAhB,EAAgC;AACnCA,cAAQ,GAAG;AAACyG,YAAI,EAAE,MAAP;AAAe6G,aAAK,EAAE,MAAtB;AAA8B1G,WAAG,EAAE,CAAnC;AAAsC2G,cAAM,EAAE;AAA9C,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,eAAhB,EAAiC;AACpCA,cAAQ,GAAG;AAACyG,YAAI,EAAE,CAAP;AAAU6G,aAAK,EAAE,MAAjB;AAAyB1G,WAAG,EAAE,MAA9B;AAAsC2G,cAAM,EAAE;AAA9C,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,aAAhB,EAA+B;AAClCA,cAAQ,GAAG;AAACyG,YAAI,EAAE,CAAP;AAAUG,WAAG,EAAE,CAAf;AAAkB0G,aAAK,EAAE,CAAzB;AAA4BC,cAAM,EAAE;AAApC,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,UAAhB,EAA4B;AAC/BA,cAAQ,GAAG;AAACyG,YAAI,EAAE,CAAP;AAAUG,WAAG,EAAE,CAAf;AAAkB0G,aAAK,EAAE,CAAzB;AAA4BC,cAAM,EAAE;AAApC,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,KAAhB,EAAuB;AAC1BA,cAAQ,GAAG;AAAC4G,WAAG,EAAE,CAAN;AAASH,YAAI,EAAE,KAAf;AAAsB6G,aAAK,EAAE,KAA7B;AAAoCC,cAAM,EAAE;AAA5C,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,WAAhB,EAA6B;AAChCA,cAAQ,GAAG;AAAC4G,WAAG,EAAE,CAAN;AAASH,YAAI,EAAE,MAAf;AAAuB6G,aAAK,EAAE,MAA9B;AAAsCC,cAAM,EAAE;AAA9C,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,MAAhB,EAAwB;AAC3BA,cAAQ,GAAG;AAACyG,YAAI,EAAE,CAAP;AAAUG,WAAG,EAAE,KAAf;AAAsB2G,cAAM,EAAE,KAA9B;AAAqCD,aAAK,EAAE;AAA5C,OAAX;AACH,KAFM,MAEA,IAAGtN,QAAQ,KAAK,QAAhB,EAA0B;AAC7BA,cAAQ,GAAG;AAACyG,YAAI,EAAE,KAAP;AAAc6G,aAAK,EAAE,KAArB;AAA4B1G,WAAG,EAAE,KAAjC;AAAwC2G,cAAM,EAAE;AAAhD,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,aAAhB,EAA+B;AAClCA,cAAQ,GAAG;AAACyG,YAAI,EAAE,CAAP;AAAU6G,aAAK,EAAE,CAAjB;AAAoB1G,WAAG,EAAE,MAAzB;AAAiC2G,cAAM,EAAE;AAAzC,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,QAAhB,EAA0B;AAC7BA,cAAQ,GAAG;AAACyG,YAAI,EAAE,KAAP;AAAc6G,aAAK,EAAE,KAArB;AAA4B1G,WAAG,EAAE,MAAjC;AAAyC2G,cAAM,EAAE;AAAjD,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,cAAhB,EAAgC;AACnCA,cAAQ,GAAG;AAACyG,YAAI,EAAE,MAAP;AAAe6G,aAAK,EAAE,MAAtB;AAA8B1G,WAAG,EAAE,MAAnC;AAA2C2G,cAAM,EAAE;AAAnD,OAAX;AACH,KAFM,MAEA,IAAGvN,QAAQ,KAAK,OAAhB,EAAyB;AAC5BA,cAAQ,GAAG;AAACyG,YAAI,EAAE,MAAP;AAAe6G,aAAK,EAAE,MAAtB;AAA8B1G,WAAG,EAAE,KAAnC;AAA0C2G,cAAM,EAAE;AAAlD,OAAX;AACH;AACJ;;AAEDvN,UAAQ,CAACyG,IAAT,GAAgBzG,QAAQ,CAACyG,IAAT,IAAiB,CAAjC;AACAzG,UAAQ,CAACsN,KAAT,GAAiBtN,QAAQ,CAACsN,KAAT,IAAkB,CAAnC;AACAtN,UAAQ,CAAC4G,GAAT,GAAe5G,QAAQ,CAAC4G,GAAT,IAAgB,CAA/B;AACA5G,UAAQ,CAACuN,MAAT,GAAkBvN,QAAQ,CAACuN,MAAT,IAAmB,CAArC,CArDiD,CAuDjD;AACA;;AACA,MAAG,OAAOvN,QAAQ,CAACyG,IAAhB,KAAyB,QAA5B,EAAsC;AAClCzG,YAAQ,CAACyG,IAAT,GAAiBjE,UAAU,CAACxC,QAAQ,CAACyG,IAAV,CAAV,GAA4B,GAA7B,GAAoCoE,KAApD;AACH;;AAED,MAAG,OAAO7K,QAAQ,CAACsN,KAAhB,KAA0B,QAA7B,EAAuC;AACnCtN,YAAQ,CAACsN,KAAT,GAAkB9K,UAAU,CAACxC,QAAQ,CAACsN,KAAV,CAAV,GAA6B,GAA9B,GAAqCzC,KAAtD;AACH;;AAED,MAAG,OAAO7K,QAAQ,CAACuN,MAAhB,KAA2B,QAA9B,EAAwC;AACpCvN,YAAQ,CAACuN,MAAT,GAAmB/K,UAAU,CAACxC,QAAQ,CAACuN,MAAV,CAAV,GAA8B,GAA/B,GAAsCzC,MAAxD;AACH;;AAED,MAAG,OAAO9K,QAAQ,CAAC4G,GAAhB,KAAwB,QAA3B,EAAqC;AACjC5G,YAAQ,CAAC4G,GAAT,GAAgBpE,UAAU,CAACxC,QAAQ,CAAC4G,GAAV,CAAV,GAA2B,GAA5B,GAAmCkE,MAAlD;AACH,GAvEgD,CAyEjD;;;AACA,SAAO,IAAIxE,6CAAJ,CACHD,IAAI,CAACI,IAAL,GAAYzG,QAAQ,CAACyG,IADlB,EAEHJ,IAAI,CAACO,GAAL,GAAW5G,QAAQ,CAAC4G,GAFjB,EAGHP,IAAI,CAACI,IAAL,GAAYzG,QAAQ,CAACsN,KAHlB,EAIHjH,IAAI,CAACO,GAAL,GAAW5G,QAAQ,CAACuN,MAJjB,CAAP;AAMH;AAGD;;;;;;;;;AAQO,SAAS4H,uBAAT,CAAiCC,KAAjC,EAAwCC,KAAxC,EAA+C;AAClD,MAAIC,IAAI,GAAGhP,6CAAI,CAAC+N,QAAL,CAAce,KAAd,CAAX;AAAA,MACIG,IAAI,GAAGjP,6CAAI,CAAC+N,QAAL,CAAcgB,KAAd,CADX;AAGA,MAAIG,cAAc,GAAGF,IAAI,CAACE,cAAL,CAAoBD,IAApB,CAArB;AAAA,MACIE,cAAc,GAAGH,IAAI,CAACG,cAAL,CAAoBF,IAApB,CADrB;;AAGA,MAAGC,cAAc,IAAIC,cAArB,EAAqC;AACjC;AACA,WAAO,CAAP;AACH,GAHD,MAGO,IAAGD,cAAH,EAAmB;AACtB,WAAOhI,IAAI,CAACkI,GAAL,CACHlI,IAAI,CAACmI,GAAL,CAASL,IAAI,CAAC/H,MAAL,GAAcgI,IAAI,CAAC3O,GAA5B,CADG,EAEH4G,IAAI,CAACmI,GAAL,CAASL,IAAI,CAAC1O,GAAL,GAAW2O,IAAI,CAAChI,MAAzB,CAFG,CAAP;AAIH,GALM,MAKA,IAAGkI,cAAH,EAAmB;AACtB,WAAOjI,IAAI,CAACkI,GAAL,CACHlI,IAAI,CAACmI,GAAL,CAASL,IAAI,CAAChI,KAAL,GAAaiI,IAAI,CAAC9O,IAA3B,CADG,EAEH+G,IAAI,CAACmI,GAAL,CAASL,IAAI,CAAC7O,IAAL,GAAY8O,IAAI,CAACjI,KAA1B,CAFG,CAAP;AAIH,GALM,MAKA;AACH,QAAIsI,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB;;AAEA,QAAGT,IAAI,CAAChI,KAAL,IAAciI,IAAI,CAAC9O,IAAtB,EAA4B;AACxBmP,QAAE,GAAGN,IAAI,CAAChI,KAAV;AACAwI,QAAE,GAAGP,IAAI,CAAC9O,IAAV;AACH,KAHD,MAGO;AACHmP,QAAE,GAAGN,IAAI,CAAC7O,IAAV;AACAqP,QAAE,GAAGP,IAAI,CAACjI,KAAV;AACH;;AAED,QAAGgI,IAAI,CAAC/H,MAAL,IAAegI,IAAI,CAAC3O,GAAvB,EAA4B;AACxBiP,QAAE,GAAGP,IAAI,CAAC/H,MAAV;AACAwI,QAAE,GAAGR,IAAI,CAAC3O,GAAV;AACH,KAHD,MAGO;AACHiP,QAAE,GAAGP,IAAI,CAAC1O,GAAV;AACAmP,QAAE,GAAGR,IAAI,CAAChI,MAAV;AACH,KAjBE,CAmBH;;;AACA,WAAOC,IAAI,CAACiH,KAAL,CAAWjH,IAAI,CAACwI,IAAL,CAAUxI,IAAI,CAACyI,GAAL,CAASH,EAAE,GAAGF,EAAd,EAAkB,CAAlB,IAAuBpI,IAAI,CAACyI,GAAL,CAASF,EAAE,GAAGF,EAAd,EAAkB,CAAlB,CAAjC,CAAX,CAAP;AACH;AACJ;AAGD;;;;;;;AAMO,SAASK,gBAAT,CAA0B/W,OAA1B,EAAmC;AACtC,MAAI+U,GAAG,GAAG/U,OAAO,CAACsR,qBAAR,EAAV;AAEA,SAAO;AACHhK,QAAI,EAAEyN,GAAG,CAACzN,IAAJ,GAAW5B,MAAM,CAAC0D,WADrB;AAEH3B,OAAG,EAAEsN,GAAG,CAACtN,GAAJ,GAAU/B,MAAM,CAAC2D;AAFnB,GAAP;AAIH;AAGD;;;;;;;AAMO,SAAS2N,gBAAT,CAA0BhX,OAA1B,EAAmCiX,MAAnC,EAA2C;AAC9C,MAAIA,MAAM,CAAC3G,QAAX,EAAqB;AACjB2G,UAAM,GAAGF,gBAAgB,CAAC/W,OAAD,CAAzB;AACH,GAFD,MAEO,IAAI2J,KAAK,CAACC,OAAN,CAAcqN,MAAd,CAAJ,EAA2B;AAC9BA,UAAM,GAAG;AACL3P,UAAI,EAAE2P,MAAM,CAAC3P,IADR;AAELG,SAAG,EAAEwP,MAAM,CAACxP;AAFP,KAAT;AAIH;;AAED,MAAIW,MAAM,GAAGpI,OAAO,CAACsR,qBAAR,EAAb;AAEA,MAAI5K,KAAK,GAAGuM,gBAAgB,CAACjT,OAAD,CAA5B;AAAA,MACIsH,IAAI,GAAGqN,QAAQ,CAACjO,KAAK,CAACY,IAAP,EAAa,EAAb,CAAR,IAA4B,CADvC;AAAA,MAEIG,GAAG,GAAGkN,QAAQ,CAACjO,KAAK,CAACe,GAAP,EAAY,EAAZ,CAAR,IAA2B,CAFrC;AAIAzH,SAAO,CAAC0G,KAAR,CAAcY,IAAd,GAAsBA,IAAI,IAAI2P,MAAM,CAAC3P,IAAP,GAAcc,MAAM,CAACd,IAAzB,CAAL,GAAuC,IAA5D;AACAtH,SAAO,CAAC0G,KAAR,CAAce,GAAd,GAAqBA,GAAG,IAAIwP,MAAM,CAACxP,GAAP,GAAaW,MAAM,CAACX,GAAxB,CAAJ,GAAoC,IAAxD;AACH;;;;;;;;;;;;;ACnnBD;AAAA;AAAA;;;;;;;AAOO,SAASyP,QAAT,CAAkBxZ,EAAlB,EAAsByZ,IAAtB,EAA4B;AAC/B,MAAIC,OAAJ;AAEA,SAAO,YAAW;AAAA;;AACd,QAAIvZ,IAAI,GAAGE,SAAX;;AAEA,QAAIsZ,KAAK,GAAG,SAARA,KAAQ,GAAM;AACdD,aAAO,GAAG,IAAV;AACA1Z,QAAE,CAACI,KAAH,CAAS,KAAT,EAAeD,IAAf;AACH,KAHD;;AAKA,QAAGuZ,OAAH,EAAY;AACR9M,kBAAY,CAAC8M,OAAD,CAAZ;AACH;;AAEDA,WAAO,GAAG/M,UAAU,CAACgN,KAAD,EAAQF,IAAR,CAApB;AACH,GAbD;AAcH,C;;;;;;;;;;;;ACxBD;AAAA;AAAO,SAASG,KAAT,CAAeC,UAAf,EAA2B;AAC9BA,YAAU,CAACC,SAAX,GAAuB,WAAvB;AACA,SAAOD,UAAP;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHD,IAAME,cAAc,GAAG,KAAvB;AAGA;;;;;;;;AAOO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AAC5B,MAAIC,QAAQ,GAAG7O,QAAQ,CAACmJ,aAAT,CAAuB,UAAvB,CAAf;AACA0F,UAAQ,CAACC,SAAT,GAAqBF,IAAI,CAAC1U,IAAL,EAArB;;AAEA,MAAI2U,QAAQ,CAACE,OAAb,EAAsB;AAClB,WAAOF,QAAQ,CAACE,OAAhB;AACH,GAFD,MAEO;AACH;AACA,QAAIC,QAAQ,GAAGhP,QAAQ,CAACiP,sBAAT,EAAf;;AACA,WAAOJ,QAAQ,CAACK,UAAhB;AAA4BF,cAAQ,CAACjM,WAAT,CAAqB8L,QAAQ,CAACK,UAA9B;AAA5B;;AACA,WAAOF,QAAP;AACH;AACJ;AAEM,SAASG,cAAT,CAAwBP,IAAxB,EAA8B;AACjC;AACA,SAAOD,SAAS,CAACC,IAAD,CAAhB;AACH;AAED;;;;;;;AAMO,SAAS5E,UAAT,CAAoB/S,OAApB,EAA6BmY,OAA7B,EAAsC;AAAA;;AACzC,MAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC7BA,WAAO,GAAGA,OAAO,CAACpG,KAAR,CAAc0F,cAAd,CAAV;AACH;;AAED,wBAAAzX,OAAO,CAAC+L,SAAR,EAAkBhH,GAAlB,8CAAyBoT,OAAzB;AACH;AAED;;;;;;;AAMO,SAASC,aAAT,CAAuBpY,OAAvB,EAAgCmY,OAAhC,EAAyC;AAAA;;AAC5C,MAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC7BA,WAAO,GAAGA,OAAO,CAACpG,KAAR,CAAc0F,cAAd,CAAV;AACH;;AAED,yBAAAzX,OAAO,CAAC+L,SAAR,EAAkBc,MAAlB,+CAA4BsL,OAA5B;AACH;AAED;;;;;;AAKO,SAASE,gBAAT,CAA0BrY,OAA1B,EAAmCsY,UAAnC,EAA+C;AAClD,OAAK,IAAIvU,GAAT,IAAgBuU,UAAhB,EAA4B;AACxB,QAAIA,UAAU,CAAC7U,cAAX,CAA0BM,GAA1B,CAAJ,EAAoC;AAChC/D,aAAO,CAACuY,YAAR,CAAqBxU,GAArB,EAA0BuU,UAAU,CAACvU,GAAD,CAApC;AACH;AACJ;AACJ;AAED;;;;;;;;;;;;;;;AAcO,SAASF,aAAT,CAAuB8E,QAAvB,EAAiD;AAAA,MAAhB6P,OAAgB,uEAAN,IAAM;;AACpD,MAAI,CAACA,OAAL,EAAc;AACVA,WAAO,GAAGzP,QAAV;AACH,GAFD,MAEO;AACHyP,WAAO,GAAG3U,aAAa,CAAC2U,OAAD,CAAvB;AACH;;AAED,MAAI,OAAO7P,QAAP,KAAoB,QAAxB,EAAkC;AAC9B,WAAO6P,OAAO,CAACxP,aAAR,CAAsBL,QAAtB,CAAP;AACH,GAFD,MAEO,IAAIA,QAAQ,CAAC8P,MAAb,EAAqB;AACxB,WAAO9P,QAAQ,CAAC,CAAD,CAAf;AACH,GAFM,MAEA,IAAIA,QAAQ,CAAC2H,QAAT,KAAsB,CAAtB,IAA2B3H,QAAQ,CAAC2H,QAAT,KAAsB,CAAjD,IAAsD3H,QAAQ,CAAC2H,QAAT,KAAsB,EAAhF,EAAoF;AACvF,WAAO3H,QAAP;AACH;AACJ;AAED;;;;;;AAKO,SAAS+P,YAAT,CAAsB1Y,OAAtB,EAA+B;AAClC,SAAOA,OAAO,CAACiY,UAAf;AAA2BjY,WAAO,CAACoN,WAAR,CAAoBpN,OAAO,CAACiY,UAA5B;AAA3B;AACH;AAED;;;;;;;;;AAQO,SAAShI,SAAT,CAAmBjQ,OAAnB,EAA4B;AAC/B,MAAI2Y,QAAQ,CAAC3Y,OAAD,CAAZ,EAAuB;AACnB,WAAO;AACHuP,gBAAU,EAAEvP,OAAO,CAACoJ,WADjB;AAEHoG,eAAS,EAAExP,OAAO,CAACqJ;AAFhB,KAAP;AAIH,GALD,MAKO;AACH,WAAO;AACHkG,gBAAU,EAAEvP,OAAO,CAACuP,UADjB;AAEHC,eAAS,EAAExP,OAAO,CAACwP;AAFhB,KAAP;AAIH;AACJ;AAED;;;;;;;;AAOO,SAASoJ,SAAT,CAAmB5Y,OAAnB,EAA4BgQ,MAA5B,EAAoC;AACvC,MAAIhQ,OAAO,CAAC6Y,QAAZ,EAAsB;AAClB7Y,WAAO,CAAC6Y,QAAR,CAAiB7I,MAAjB;AACH,GAFD,MAEO;AACHhQ,WAAO,CAACuP,UAAR,GAAqBS,MAAM,CAAC1I,IAA5B;AACAtH,WAAO,CAACwP,SAAR,GAAoBQ,MAAM,CAACvI,GAA3B;AACH;AACJ;AAED;;;;;;;AAMO,SAASqR,SAAT,CAAmB9Y,OAAnB,EAA4BtC,EAA5B,EAAgC;AACnC,MAAI,OAAOA,EAAP,KAAc,QAAlB,EAA4B;AACxB,QAAIiL,QAAQ,GAAGjL,EAAf;;AACAA,MAAE,GAAG,YAACqb,KAAD;AAAA,aAAWA,KAAK,CAACC,OAAN,CAAcrQ,QAAd,CAAX;AAAA,KAAL;AACH;;AAED,OAAK,IAAIzK,CAAC,GAAG,CAAR,EAAW+a,CAAC,GAAGjZ,OAAO,CAACZ,QAAR,CAAiBpB,MAArC,EAA6CE,CAAC,GAAG+a,CAAjD,EAAoD/a,CAAC,EAArD,EAAyD;AACrD,QAAI6a,KAAK,GAAG/Y,OAAO,CAACZ,QAAR,CAAiBlB,CAAjB,CAAZ;;AAEA,QAAIR,EAAE,CAACqb,KAAD,CAAN,EAAe;AACX,aAAOA,KAAP;AACH;AACJ;;AAED,SAAO,IAAP;AACH;AAED;;;;;;;AAMO,SAASG,cAAT,CAAwBlZ,OAAxB,EAAiCtC,EAAjC,EAAqC;AACxC,MAAI6F,CAAC,GAAG,EAAR;;AAEA,OAAK,IAAIrF,CAAC,GAAG,CAAR,EAAW+a,CAAC,GAAGjZ,OAAO,CAACZ,QAAR,CAAiBpB,MAArC,EAA6CE,CAAC,GAAG+a,CAAjD,EAAoD/a,CAAC,EAArD,EAAyD;AACrD,QAAI6a,KAAK,GAAG/Y,OAAO,CAACZ,QAAR,CAAiBlB,CAAjB,CAAZ;;AAEA,QAAIR,EAAE,CAACqb,KAAD,CAAN,EAAe;AACXxV,OAAC,CAAC9F,IAAF,CAAOsb,KAAP;AACH;AACJ;;AAED,SAAOxV,CAAP;AACH;AAGD;;;;;;AAKO,SAASoV,QAAT,CAAkBQ,QAAlB,EAA4B;AAC/B,SAAOA,QAAQ,IAAI,QAAOA,QAAP,MAAoB,QAAhC,IAA4CC,WAAW,IAAID,QAAlE;AACH,C;;;;;;;;;;;;ACtMD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;wBCFiBE,K;;;wBASAC,I;;;wBASAC,M;;;wBASAC,S;;;wBASAC,K;;AApCV,SAAUJ,KAAV,CAAgBK,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDACYA,MADZ;;AAAA;AAAA;AAAA;AAAA;AAAA;;AACK3V,aADL;;AAAA,eAEI2V,MAAM,CAACjW,cAAP,CAAsBM,GAAtB,CAFJ;AAAA;AAAA;AAAA;;AAAA;AAGK,iBAAM,CAACA,GAAD,EAAM2V,MAAM,CAAC3V,GAAD,CAAZ,CAAN;;AAHL;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,SAAUuV,IAAV,CAAeI,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDACYA,MADZ;;AAAA;AAAA;AAAA;AAAA;AAAA;;AACK3V,aADL;;AAAA,eAEI2V,MAAM,CAACjW,cAAP,CAAsBM,GAAtB,CAFJ;AAAA;AAAA;AAAA;;AAAA;AAGK,iBAAMA,GAAN;;AAHL;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,SAAUwV,MAAV,CAAiBG,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDACYA,MADZ;;AAAA;AAAA;AAAA;AAAA;AAAA;;AACK3V,aADL;;AAAA,eAEI2V,MAAM,CAACjW,cAAP,CAAsBM,GAAtB,CAFJ;AAAA;AAAA;AAAA;;AAAA;AAGK,iBAAM2V,MAAM,CAAC3V,GAAD,CAAZ;;AAHL;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,SAAUyV,SAAV,CAAoBG,QAApB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACCzb,WADD,GACK,CADL;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGcyb,QAHd;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAGK7W,eAHL;AAAA;AAIC,iBAAM,CAAC5E,CAAD,EAAI4E,KAAJ,CAAN;;AAJD;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,SAAU2W,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAmBG,SAAnB;AAAmBA,qBAAnB;AAAA;;AAAA,+BACaA,SADb;;AAAA;AAAA;AAAA;AAAA;AAAA;;AACKC,cADL;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEkBA,IAFlB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAES/W,eAFT;AAAA;AAGK,iBAAMA,KAAN;;AAHL;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASP;;;;;AAIO,SAASgX,UAAT,CAAoBjc,IAApB,EAA0B;AAAA;AAAA;AAAA;;AAAA;AAC7B,0BAAgBA,IAAhB,mIAAsB;AAAA,UAAdiQ,IAAc;;AAClB,UAAGA,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAKhK,SAA7B,EAAwC;AACpC,eAAOgK,IAAP;AACH;AACJ;AAL4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMhC;AAGD;;;;;AAIO,SAAStD,GAAT,CAAamP,QAAb,EAAuB;AAAA;AAAA;AAAA;;AAAA;AAC1B,0BAAgBA,QAAhB,mIAA0B;AAAA,UAAlB7L,IAAkB;;AACtB,UAAG,CAACA,IAAJ,EAAU;AACN,eAAO,KAAP;AACH;AACJ;AALyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAO1B,SAAO,IAAP;AACH;AAGD;;;;;AAIO,SAASiM,GAAT,CAAaJ,QAAb,EAAuB;AAAA;AAAA;AAAA;;AAAA;AAC1B,0BAAgBA,QAAhB,mIAA0B;AAAA,UAAlB7L,IAAkB;AACtB,UAAGA,IAAH,EAAS,OAAO,IAAP;AACZ;AAHyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK1B,SAAO,KAAP;AACH,C;;;;;;;;;;;;ACtFD;AAAA;AAAA;AAAA;AAAA;;;;;;;AAOO,SAAS4B,KAAT,CAAe5M,KAAf,EAAwD;AAAA,MAAlCkX,QAAkC,uEAAvB,IAAuB;AAAA,MAAjBC,QAAiB,uEAAN,IAAM;;AAC3D,MAAID,QAAQ,KAAK,IAAjB,EAAuB;AACnBlX,SAAK,GAAGuL,IAAI,CAAC6L,GAAL,CAASpX,KAAT,EAAgBkX,QAAhB,CAAR;AACH;;AAED,MAAIC,QAAQ,KAAK,IAAjB,EAAuB;AACnBnX,SAAK,GAAGuL,IAAI,CAACkI,GAAL,CAASzT,KAAT,EAAgBmX,QAAhB,CAAR;AACH;;AAED,SAAOnX,KAAP;AACH;AAEM,SAASqX,MAAT,CAAgBrX,KAAhB,EAAuBsX,GAAvB,EAA4B;AAC/B,SAAO,CAAEtX,KAAK,GAAGsX,GAAT,GAAgBA,GAAjB,IAAwBA,GAA/B;AACH;AAGM,SAASnQ,YAAT,CAAsBwM,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsC;AACzC,SAAOvI,IAAI,CAACwI,IAAL,CACHxI,IAAI,CAACyI,GAAL,CAASH,EAAE,GAAGF,EAAd,EAAkB,CAAlB,IAAuBpI,IAAI,CAACyI,GAAL,CAASF,EAAE,GAAGA,EAAd,EAAkB,CAAlB,CADpB,CAAP;AAGH,C;;;;;;;;;;;;AC5BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAKO,SAASyD,YAAT,CAAsBC,KAAtB,EAA6B;AAChC,SAAOA,KAAK,CAACjM,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACkM,MAAL,KAAgBD,KAAK,CAACtc,MAAjC,CAAD,CAAZ;AACH;AAED;;;;;;AAKO,SAASwc,WAAT,CAAqBC,MAArB,EAA6BC,MAA7B,EAAqC;AACxC,MAAID,MAAM,KAAKC,MAAf,EAAuB,OAAO,IAAP,CADiB,CACJ;;AACpC,MAAID,MAAM,IAAI,IAAV,IAAkBC,MAAM,IAAI,IAAhC,EAAsC,OAAO,KAAP;AACtC,MAAID,MAAM,CAACzc,MAAP,KAAkB0c,MAAM,CAAC1c,MAA7B,EAAqC,OAAO,KAAP;;AAErC,OAAK,IAAIE,CAAC,GAAG,CAAR,EAAW+a,CAAC,GAAGwB,MAAM,CAACzc,MAA3B,EAAmCE,CAAC,GAAG+a,CAAvC,EAA0C/a,CAAC,EAA3C,EAA+C;AAC3C,QAAIuc,MAAM,CAACvc,CAAD,CAAN,KAAcwc,MAAM,CAACxc,CAAD,CAAxB,EAA6B,OAAO,KAAP;AAChC;;AAED,SAAO,IAAP;AACH;AAED;;;;;;;AAMO,SAASyc,aAAT,CAAuBjB,MAAvB,EAA+B;AAClC;AACA,OAAK,IAAI3V,GAAT,IAAgB2V,MAAhB,EAAwB;AACpB,WAAO,KAAP;AACH;;AAED,SAAO,IAAP;AACH;AAED;;;;;;;;AAOO,SAASkB,cAAT,CAAwBC,GAAxB,EAA6BC,QAA7B,EAAiE;AAAA,MAA1BC,YAA0B,uEAAXjX,SAAW;;AACpE,MAAI+W,GAAG,CAACpX,cAAJ,CAAmBqX,QAAnB,CAAJ,EAAkC;AAC9B,WAAOD,GAAG,CAACC,QAAD,CAAV;AACH,GAFD,MAEO;AACH,WAAOC,YAAP;AACH;AACJ;AAED;;;;;;;;AAOO,SAASC,iBAAT,CAA2BH,GAA3B,EAAgCI,IAAhC,EAAsC;AACzC,MAAIC,KAAK,GAAGD,IAAI,CAAClJ,KAAL,CAAW,GAAX,CAAZ;AAAA,MACIxO,CAAC,GAAGsX,GADR;AADyC;AAAA;AAAA;;AAAA;AAIzC,yBAAiBK,KAAjB,8HAAwB;AAAA,UAAfC,IAAe;AACpB5X,OAAC,GAAGA,CAAC,CAAC4X,IAAD,CAAL;AACH;AANwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQzC,SAAO5X,CAAP;AACH;AAGD;;;;;;;;;;;;;;;AAcO,SAAS6X,aAAT,CAAuBd,KAAvB,EAA8Be,SAA9B,EAA4E;AAAA,MAAnCC,aAAmC,uEAArB,CAAqB;AAAA,MAAlBC,WAAkB,uEAAN,IAAM;AAC/E,MAAIrd,CAAJ;;AAEA,MAAGqd,WAAW,KAAK,IAAnB,EAAyB;AACrBA,eAAW,GAAGjB,KAAK,CAACtc,MAAN,GAAa,CAA3B;AACH;;AAEDE,GAAC,GAAGod,aAAJ;;AAEA,SAAM,IAAN,EAAY;AACR,QAAIxN,IAAI,GAAGwM,KAAK,CAACpc,CAAD,CAAhB;;AAEA,QAAGmd,SAAS,CAACvN,IAAD,CAAZ,EAAoB;AAChB,aAAOA,IAAP;AACH;;AAED,QAAGwN,aAAa,GAAGC,WAAnB,EAAgC;AAC5B,UAAGrd,CAAC,IAAIqd,WAAR,EAAqB;AACrBrd,OAAC;AACJ,KAHD,MAGO;AACH,UAAGA,CAAC,IAAIqd,WAAR,EAAqB;AACrBrd,OAAC;AACJ;AACJ;AACJ,C;;;;;;;;;;;;ACjHD;AAAA;AAAO,SAAS8T,UAAT,CAAoB5G,GAApB,EAAyBoQ,MAAzB,EAAiC;AAAA;AAAA;AAAA;;AAAA;AACpC,yBAAiBA,MAAjB,8HAAyB;AAAA,UAAhBC,IAAgB;;AACrB,UAAI,CAACrQ,GAAG,CAACsQ,GAAJ,CAAQD,IAAR,CAAL,EAAoB;AAChB,eAAO,KAAP;AACH;AACJ;AALmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMpC,SAAO,IAAP;AACH;;AAGD,SAASE,KAAT,CAAeC,IAAf,EAAqBC,IAArB,EAA2B;AACvB,MAAIC,MAAM,GAAG,IAAI9K,GAAJ,CAAQ4K,IAAR,CAAb;;AADuB;AAAA;AAAA;;AAAA;AAEvB,0BAAiBC,IAAjB,mIAAuB;AAAA,UAAdJ,IAAc;;AACnBK,YAAM,CAAC/W,GAAP,CAAW0W,IAAX;AACH;AAJsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKvB,SAAOK,MAAP;AACH;;AAGD,SAASjU,YAAT,CAAsB+T,IAAtB,EAA4BC,IAA5B,EAAkC;AAC9B,MAAIE,aAAa,GAAG,IAAI/K,GAAJ,EAApB;;AAD8B;AAAA;AAAA;;AAAA;AAE9B,0BAAiB6K,IAAjB,mIAAuB;AAAA,UAAdJ,IAAc;;AACnB,UAAIG,IAAI,CAACF,GAAL,CAASD,IAAT,CAAJ,EAAoB;AAChBM,qBAAa,CAAChX,GAAd,CAAkB0W,IAAlB;AACH;AACJ;AAN6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAO9B,SAAOM,aAAP;AACH;;AAGD,SAASC,mBAAT,CAA6BJ,IAA7B,EAAmCC,IAAnC,EAAyC;AACrC,MAAII,WAAW,GAAG,IAAIjL,GAAJ,CAAQ4K,IAAR,CAAlB;;AADqC;AAAA;AAAA;;AAAA;AAErC,0BAAiBC,IAAjB,mIAAuB;AAAA,UAAdJ,IAAc;;AACnB,UAAIQ,WAAW,CAACP,GAAZ,CAAgBD,IAAhB,CAAJ,EAA2B;AACvBQ,mBAAW,UAAX,CAAmBR,IAAnB;AACH,OAFD,MAEO;AACHQ,mBAAW,CAAClX,GAAZ,CAAgB0W,IAAhB;AACH;AACJ;AARoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASrC,SAAOQ,WAAP;AACH;;AAGD,SAASC,UAAT,CAAoBN,IAApB,EAA0BC,IAA1B,EAAgC;AAC5B,MAAII,WAAW,GAAG,IAAIjL,GAAJ,CAAQ4K,IAAR,CAAlB;;AAD4B;AAAA;AAAA;;AAAA;AAE5B,0BAAiBC,IAAjB,mIAAuB;AAAA,UAAdJ,IAAc;;AACnBQ,iBAAW,UAAX,CAAmBR,IAAnB;AACH;AAJ2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK5B,SAAOQ,WAAP;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDD;AAEA,IAAME,aAAa,GAAG,gBAAtB;;IAGqB/Z,I;;;;;AACjB,gBAAYmB,CAAZ,EAAe6Y,CAAf,EAAkB/X,CAAlB,EAAqBD,CAArB,EAAwB;AAAA;;AAAA;;AACpB,QAAG,QAAOb,CAAP,MAAa,QAAhB,EAA0B;AACtB,gFAAMA,CAAN;AACH,KAFD,MAEO;AACH,gFAAMA,CAAN,EAAS6Y,CAAT,EAAY/X,CAAZ,EAAeD,CAAf;AACH;;AALmB;AAMvB;;;;+BAEU;AACP,4BAAe,KAAKb,CAApB,eAA0B,KAAK6Y,CAA/B,eAAqC,KAAK/X,CAA1C,eAAgD,KAAKD,CAArD;AACH;;;6CAE+BtB,K,EAAO;AACnCA,WAAK,GAAGA,KAAK,CAACG,IAAN,GAAa8O,KAAb,CAAmB,KAAnB,CAAR;AAEA,UAAIxO,CAAC,GAAGT,KAAK,CAAC,CAAD,CAAb;AAAA,UACIsZ,CAAC,GAAGtZ,KAAK,CAAC,CAAD,CADb;AAAA,UAEIuB,CAAC,GAAGvB,KAAK,CAAC,CAAD,CAFb;AAAA,UAGIsB,CAAC,GAAGtB,KAAK,CAAC,CAAD,CAHb;;AAKA,UAAGS,CAAH,EAAM;AACF,YAAG4Y,aAAa,CAACzO,IAAd,CAAmBnK,CAAnB,CAAH,EAA0B;AACtBA,WAAC,GAAIF,UAAU,CAACE,CAAD,CAAV,GAAgB,GAAjB,GAAwB,GAA5B;AACH,SAFD,MAEO;AACHA,WAAC,GAAGoR,QAAQ,CAACpR,CAAD,EAAI,EAAJ,CAAZ;AACH;AACJ;;AAED,UAAG6Y,CAAH,EAAM;AACF,YAAGD,aAAa,CAACzO,IAAd,CAAmB0O,CAAnB,CAAH,EAA0B;AACtBA,WAAC,GAAI/Y,UAAU,CAAC+Y,CAAD,CAAV,GAAgB,GAAjB,GAAwB,GAA5B;AACH,SAFD,MAEO;AACHA,WAAC,GAAGzH,QAAQ,CAACyH,CAAD,EAAI,EAAJ,CAAZ;AACH;AACJ;;AAED,UAAG/X,CAAH,EAAM;AACF,YAAG8X,aAAa,CAACzO,IAAd,CAAmBrJ,CAAnB,CAAH,EAA0B;AACtBA,WAAC,GAAIhB,UAAU,CAACgB,CAAD,CAAV,GAAgB,GAAjB,GAAwB,GAA5B;AACH,SAFD,MAEO;AACHA,WAAC,GAAGsQ,QAAQ,CAACtQ,CAAD,EAAI,EAAJ,CAAZ;AACH;AACJ;;AAED,UAAGD,CAAH,EAAM;AACF,YAAG+X,aAAa,CAACzO,IAAd,CAAmBtJ,CAAnB,CAAH,EAA0B;AACtBA,WAAC,GAAIf,UAAU,CAACe,CAAD,CAAV,GAAgB,GAArB;AACH,SAFD,MAEO;AACHA,WAAC,GAAGf,UAAU,CAACe,CAAD,CAAd;AACH;AACJ;;AAEDA,OAAC,GAAGA,CAAC,IAAI,GAAT;AAEA,aAAO,IAAIhC,IAAJ,CAASmB,CAAT,EAAY6Y,CAAZ,EAAe/X,CAAf,EAAkBD,CAAlB,CAAP;AACH;;;2CAE6BtB,K,EAAO;AACjCA,WAAK,GAAGA,KAAK,CAACG,IAAN,GAAaoZ,SAAb,CAAuB,CAAvB,CAAR;AAEA,UAAI9Y,CAAJ;AAAA,UAAO6Y,CAAP;AAAA,UAAU/X,CAAV;AAAA,UAAaD,CAAC,GAAG,GAAjB;;AAEA,UAAGtB,KAAK,CAAC9E,MAAN,KAAiB,CAApB,EAAuB;AACnBuF,SAAC,GAAGT,KAAK,CAAC,CAAD,CAAT;AACAsZ,SAAC,GAAGtZ,KAAK,CAAC,CAAD,CAAT;AACAuB,SAAC,GAAGvB,KAAK,CAAC,CAAD,CAAT;AAEAS,SAAC,GAAGoR,QAAQ,CAACpR,CAAC,GAACA,CAAH,EAAM,EAAN,CAAZ;AACA6Y,SAAC,GAAGzH,QAAQ,CAACyH,CAAC,GAACA,CAAH,EAAM,EAAN,CAAZ;AACA/X,SAAC,GAAGsQ,QAAQ,CAACtQ,CAAC,GAACA,CAAH,EAAM,EAAN,CAAZ;AACH,OARD,MAQO,IAAGvB,KAAK,CAAC9E,MAAN,KAAiB,CAApB,EAAuB;AAC1BuF,SAAC,GAAGT,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AACAF,SAAC,GAAGtZ,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AACAjY,SAAC,GAAGvB,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AAEA/Y,SAAC,GAAGoR,QAAQ,CAACpR,CAAD,EAAI,EAAJ,CAAZ;AACA6Y,SAAC,GAAGzH,QAAQ,CAACyH,CAAD,EAAI,EAAJ,CAAZ;AACA/X,SAAC,GAAGsQ,QAAQ,CAACtQ,CAAD,EAAI,EAAJ,CAAZ;AACH,OARM,MAQA,IAAGvB,KAAK,CAAC9E,MAAN,KAAiB,CAApB,EAAuB;AAC1BuF,SAAC,GAAGT,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AACAF,SAAC,GAAGtZ,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AACAjY,SAAC,GAAGvB,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AACAlY,SAAC,GAAGtB,KAAK,CAACwZ,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAJ;AAEA/Y,SAAC,GAAGoR,QAAQ,CAACpR,CAAD,EAAI,EAAJ,CAAZ;AACA6Y,SAAC,GAAGzH,QAAQ,CAACyH,CAAD,EAAI,EAAJ,CAAZ;AACA/X,SAAC,GAAGsQ,QAAQ,CAACtQ,CAAD,EAAI,EAAJ,CAAZ;AACAD,SAAC,GAAGuQ,QAAQ,CAACvQ,CAAD,EAAI,EAAJ,CAAR,GAAkB,GAAtB;AACH;;AAED,aAAO,IAAIhC,IAAJ,CAASmB,CAAT,EAAY6Y,CAAZ,EAAe/X,CAAf,EAAkBD,CAAlB,CAAP;AACH;;;;EA5F6BmY,6C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLlC;AACA;AACA;AACA;AACA;AAGA,IAAMC,aAAa,GAAG,KAAtB;AAAA,IACIC,eAAe,GAAG,wCADtB,C,CACgE;;AAGhE,IAAMC,uBAAuB,GAAG;AAC5BjV,KAAG,EAAE,YADuB;AAE5B0G,OAAK,EAAE,cAFqB;AAG5BC,QAAM,EAAE,eAHoB;AAI5B9G,MAAI,EAAE,aAJsB;AAK5BqV,SAAO,EAAE,UALmB;AAM5BC,UAAQ,EAAE,WANkB;AAO5BC,YAAU,EAAE,aAPgB;AAQ5BC,aAAW,EAAE;AARe,CAAhC;;IAYqB3V,I;;;;;AACjB,gBAAYG,IAAZ,EAAkBG,GAAlB,EAAuB0G,KAAvB,EAA8BC,MAA9B,EAAuD;AAAA;;AAAA,QAAjB2O,UAAiB,uEAAN,IAAM;;AAAA;;AACnD,QAAG,OAAOzV,IAAP,KAAgB,UAAnB,EAA+B;AAC3BA,UAAI,GAAGA,IAAI,EAAX;AACH;;AAED,QAAG,QAAOA,IAAP,MAAgB,QAAnB,EAA6B;AACzB,UAAGA,IAAI,CAACgK,qBAAR,EAA+B;AAC3ByL,kBAAU,GAAGzV,IAAb;AACA,YAAI+J,EAAE,GAAG0L,UAAU,CAACzL,qBAAX,EAAT;AACAhK,YAAI,GAAG+J,EAAE,CAAC/J,IAAV;AACAG,WAAG,GAAG4J,EAAE,CAAC5J,GAAT;AACA0G,aAAK,GAAGkD,EAAE,CAAClD,KAAX;AACAC,cAAM,GAAGiD,EAAE,CAACjD,MAAZ;AACH,OAPD,MAOO;AACH3G,WAAG,GAAGH,IAAI,CAACG,GAAX;AACA0G,aAAK,GAAG7G,IAAI,CAAC6G,KAAb;AACAC,cAAM,GAAG9G,IAAI,CAAC8G,MAAd;AACA9G,YAAI,GAAGA,IAAI,CAACA,IAAZ;AACH;AACJ;;AAED,8EAAMA,IAAN,EAAYG,GAAZ,EAAiB0G,KAAjB,EAAwBC,MAAxB,GArBmD,CAuBnD;;AACA,UAAK2O,UAAL,GAAkBA,UAAlB;;AAEA,QAAGhf,SAAS,CAACC,MAAV,KAAqB,CAArB,IAA0BsJ,IAAI,YAAYH,IAA7C,EAAmD;AAC/C3F,YAAM,CAACC,MAAP,gCAAoB6F,IAApB;AACH;;AA5BkD;AA6BtD;;;;yBAEItH,O,EAAS;AACV,aAAO,KAAKgd,IAAL,CAAU,KAAK1V,IAAf,EAAqB,KAAKG,GAA1B,EAA+B,KAAK0G,KAApC,EAA2C,KAAKC,MAAhD,EAAwDpO,OAAxD,CAAP;AACH;;;yBAEIsH,I,EAAMG,G,EAAK0G,K,EAAOC,M,EAA8B;AAAA,UAAtB2O,UAAsB,uEAAXjZ,SAAW;AACjD,UAAIP,CAAC,GAAG,IAAI,KAAK7E,WAAT,CAAqB,IAArB,CAAR;AACA6E,OAAC,CAAC+D,IAAF,GAASA,IAAT;AACA/D,OAAC,CAACkE,GAAF,GAAQA,GAAR;AACAlE,OAAC,CAAC4K,KAAF,GAAUA,KAAV;AACA5K,OAAC,CAAC6K,MAAF,GAAWA,MAAX;AACA,UAAG2O,UAAU,KAAKjZ,SAAlB,EAA6BP,CAAC,CAACwZ,UAAF,GAAeA,UAAf;AAC7B,aAAOxZ,CAAP;AACH;;;8BAES;AACN,aAAO,IAAImR,6CAAJ,CAAS,KAAK,CAAL,CAAT,EAAkB,KAAK,CAAL,CAAlB,CAAP;AACH,K,CAED;;;;8BACU;AACN,aAAO,KAAKhJ,KAAL,GAAa,KAAKC,MAAzB;AACH;;;8BAESvE,C,EAAGG,C,EAAG;AACZ,UAAGoC,KAAK,CAACC,OAAN,CAAcxC,CAAd,CAAH,EAAqB;AAAA,iBACRA,CADQ;;AAAA;;AAChBA,SADgB;AACbG,SADa;AAEpB,OAFD,MAEO,IAAG,QAAOH,CAAP,MAAa,QAAhB,EAA0B;AAC7BG,SAAC,GAAGH,CAAC,CAACG,CAAN;AACAH,SAAC,GAAGA,CAAC,CAACA,CAAN;AACH;;AAED,aAAO,KAAK4V,IAAL,CACH,KAAK,CAAL,IAAU5V,CADP,EAEH,KAAK,CAAL,IAAUG,CAFP,EAGH,KAAK,CAAL,IAAUH,CAHP,EAIH,KAAK,CAAL,IAAUG,CAJP,CAAP;AAMH;;;qCAEsC;AAAA,UAA3BD,IAA2B,QAA3BA,IAA2B;AAAA,UAArBG,GAAqB,QAArBA,GAAqB;AAAA,UAAhB0G,KAAgB,QAAhBA,KAAgB;AAAA,UAATC,MAAS,QAATA,MAAS;AACnC,aAAO,KAAK4O,IAAL,CACH,KAAK1V,IAAL,GAAYA,IADT,EAEH,KAAKG,GAAL,GAAWA,GAFR,EAGH,KAAK0G,KAAL,GAAaA,KAHV,EAIH,KAAKC,MAAL,GAAcA,MAJX,CAAP;AAMH,K,CAED;;;;sCACuC;AAAA,UAA3B9G,IAA2B,SAA3BA,IAA2B;AAAA,UAArBG,GAAqB,SAArBA,GAAqB;AAAA,UAAhB0G,KAAgB,SAAhBA,KAAgB;AAAA,UAATC,MAAS,SAATA,MAAS;AACnC,aAAO,KAAK4O,IAAL,CACH,KAAK1V,IAAL,GAAYA,IADT,EAEH,KAAKG,GAAL,GAAWA,GAFR,EAGH,KAAK0G,KAAL,GAAaA,KAHV,EAIH,KAAKC,MAAL,GAAcA,MAJX,CAAP;AAMH;;;kCAEmB;AAAA,UAAZ9G,IAAY,SAAZA,IAAY;AAAA,UAANG,GAAM,SAANA,GAAM;AAChB,UAAIyL,MAAM,GAAG5L,IAAI,GAAG,KAAKA,IAAzB;AAAA,UACI6L,MAAM,GAAG1L,GAAG,GAAG,KAAKA,GADxB;AAGA,aAAO,KAAKuV,IAAL,CACH,KAAK1V,IAAL,GAAY4L,MADT,EAEH,KAAKzL,GAAL,GAAW0L,MAFR,EAGH,KAAKhF,KAAL,GAAa+E,MAHV,EAIH,KAAK9E,MAAL,GAAc+E,MAJX,CAAP;AAMH;;;wCAEwC;AAAA,UAA3B7L,IAA2B,SAA3BA,IAA2B;AAAA,UAArBG,GAAqB,SAArBA,GAAqB;AAAA,UAAhB0G,KAAgB,SAAhBA,KAAgB;AAAA,UAATC,MAAS,SAATA,MAAS;AACrC9G,UAAI,GAAG+G,IAAI,CAAC6L,GAAL,CAAS,KAAK5S,IAAd,EAAoBA,IAApB,CAAP;AACA6G,WAAK,GAAGE,IAAI,CAACkI,GAAL,CAAS,KAAKpI,KAAd,EAAqBA,KAArB,CAAR;AACAC,YAAM,GAAGC,IAAI,CAACkI,GAAL,CAAS,KAAKnI,MAAd,EAAsBA,MAAtB,CAAT;AACA3G,SAAG,GAAG4G,IAAI,CAAC6L,GAAL,CAAS,KAAKzS,GAAd,EAAmBA,GAAnB,CAAN;;AAEA,UAAGH,IAAI,GAAG6G,KAAP,IAAgB1G,GAAG,GAAG2G,MAAzB,EAAiC;AAC7B,eAAO,IAAP;AACH;;AAED,aAAO,KAAK4O,IAAL,CAAU1V,IAAV,EAAgBG,GAAhB,EAAqB0G,KAArB,EAA4BC,MAA5B,CAAP;AACH;AAED;;;;;;;;;;;iCAQkC;AAAA,UAA3B9G,IAA2B,SAA3BA,IAA2B;AAAA,UAArBG,GAAqB,SAArBA,GAAqB;AAAA,UAAhB0G,KAAgB,SAAhBA,KAAgB;AAAA,UAATC,MAAS,SAATA,MAAS;AAC9B9G,UAAI,GAAG+G,IAAI,CAACkI,GAAL,CAASjP,IAAT,EAAe,KAAKA,IAApB,CAAP;AACA6G,WAAK,GAAGE,IAAI,CAAC6L,GAAL,CAAS/L,KAAT,EAAgB,KAAKA,KAArB,CAAR;AACAC,YAAM,GAAGC,IAAI,CAAC6L,GAAL,CAAS9L,MAAT,EAAiB,KAAKA,MAAtB,CAAT;AACA3G,SAAG,GAAG4G,IAAI,CAACkI,GAAL,CAAS9O,GAAT,EAAc,KAAKA,GAAnB,CAAN;;AAEA,UAAGH,IAAI,GAAG6G,KAAP,IAAgB1G,GAAG,GAAG2G,MAAzB,EAAiC;AAC7B,eAAO,IAAP;AACH;;AAED,aAAO,KAAK4O,IAAL,CAAU1V,IAAV,EAAgBG,GAAhB,EAAqB0G,KAArB,EAA4BC,MAA5B,CAAP;AACH;;;6BAEQlH,I,EAAM;AACX,aAAO,KAAKI,IAAL,IAAaJ,IAAI,CAACI,IAAlB,IAA0B,KAAK6G,KAAL,IAAcjH,IAAI,CAACiH,KAA7C,IAAsD,KAAK1G,GAAL,IAAYP,IAAI,CAACO,GAAvE,IAA8E,KAAK2G,MAAL,IAAelH,IAAI,CAACkH,MAAzG;AACH;;;8BAESlH,I,EAAM;AACZ,aAAO,KAAKI,IAAL,IAAaJ,IAAI,CAACI,IAAlB,IAA0B,KAAK6G,KAAL,IAAcjH,IAAI,CAACiH,KAApD;AACH;;;8BAESjH,I,EAAM;AACZ,aAAO,KAAKO,GAAL,IAAYP,IAAI,CAACO,GAAjB,IAAwB,KAAK2G,MAAL,IAAelH,IAAI,CAACkH,MAAnD;AACH;;;mCAEclH,I,EAAM;AACjB,aAAQA,IAAI,CAACI,IAAL,IAAa,KAAK6G,KAAlB,IAA2BjH,IAAI,CAACiH,KAAL,IAAc,KAAK7G,IAAtD;AACH;;;mCAEcJ,I,EAAM;AACjB,aAAQA,IAAI,CAACO,GAAL,IAAY,KAAK2G,MAAjB,IAA2BlH,IAAI,CAACkH,MAAL,IAAe,KAAK3G,GAAvD;AACH;;;4BAEOP,I,EAAM;AACVA,UAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAP;AAEA,aAAOA,IAAI,CAACO,GAAL,GAAW,KAAK2G,MAAvB;AACH;;;4BAEOlH,I,EAAM;AACVA,UAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAP;AAEA,aAAOA,IAAI,CAACkH,MAAL,GAAc,KAAK3G,GAA1B;AACH;;;6BAEQP,I,EAAM;AACXA,UAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAP;AAEA,aAAOA,IAAI,CAACI,IAAL,GAAY,KAAK6G,KAAxB;AACH;;;8BAESjH,I,EAAM;AACZA,UAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAP;AAEA,aAAOA,IAAI,CAACiH,KAAL,GAAa,KAAK7G,IAAzB;AACH;;;kCAEaJ,I,EAAM;AAChBA,UAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAP;AACA,aAAO,KAAKmP,cAAL,CAAoBnP,IAApB,KAA6B,KAAKoP,cAAL,CAAoBpP,IAApB,CAApC;AACH;AAED;;;;;;;;;;;;;wBAUIc,S,EAAwB;AAAA,UAAbiV,MAAa,uEAAN,IAAM;AACxBA,YAAM,GAAGA,MAAM,GAAG,KAAKC,SAAL,CAAeD,MAAf,CAAH,GAA4B,IAAIvI,6CAAJ,CAAS,CAAT,EAAY,CAAZ,CAA3C;AACA1M,eAAS,GAAG,IAAIb,IAAJ,CAASa,SAAT,CAAZ;AACA,UAAI+F,QAAQ,GAAG/F,SAAf;AAEAA,eAAS,GAAGA,SAAS,CAACjD,GAAV,CAAc,IAAIoC,IAAJ,CACtB8V,MAAM,CAAC3V,IADe,EAEtB2V,MAAM,CAACxV,GAFe,EAGtB,CAAC,KAAKiE,KAAN,GAAcuR,MAAM,CAAC3V,IAHC,EAItB,CAAC,KAAKqE,MAAN,GAAesR,MAAM,CAACxV,GAJA,CAAd,CAAZ;AAOAO,eAAS,GAAG,IAAIb,IAAJ,CACRuI,sDAAK,CAAC1H,SAAS,CAACV,IAAX,EAAiByG,QAAQ,CAACzG,IAA1B,EAAgCyG,QAAQ,CAACI,KAAzC,CADG,EAERuB,sDAAK,CAAC1H,SAAS,CAACP,GAAX,EAAgBsG,QAAQ,CAACtG,GAAzB,EAA8BsG,QAAQ,CAACK,MAAvC,CAFG,EAGRsB,sDAAK,CAAC1H,SAAS,CAACmG,KAAX,EAAkBJ,QAAQ,CAACzG,IAA3B,EAAiCyG,QAAQ,CAACI,KAA1C,CAHG,EAIRuB,sDAAK,CAAC1H,SAAS,CAACoG,MAAX,EAAmBL,QAAQ,CAACtG,GAA5B,EAAiCsG,QAAQ,CAACK,MAA1C,CAJG,CAAZ;AAOA,UAAI9G,IAAI,GAAGoI,sDAAK,CAAC,KAAKpI,IAAN,EAAYU,SAAS,CAACV,IAAtB,EAA4BU,SAAS,CAACmG,KAAtC,CAAL,GAAoD8O,MAAM,CAAC3V,IAAtE;AAAA,UACIG,GAAG,GAAGiI,sDAAK,CAAC,KAAKjI,GAAN,EAAWO,SAAS,CAACP,GAArB,EAA0BO,SAAS,CAACoG,MAApC,CAAL,GAAmD6O,MAAM,CAACxV,GADpE;AAAA,UAEIiE,KAAK,GAAG,KAAKA,KAFjB;AAAA,UAGIC,MAAM,GAAG,KAAKA,MAHlB;AAKA,aAAO,KAAKqR,IAAL,CACH1V,IADG,EAEHG,GAFG,EAGHH,IAAI,GAAGoE,KAHJ,EAIHjE,GAAG,GAAGkE,MAJH,CAAP;AAMH;;;yBAEI3D,S,EAAwB;AAAA,UAAbiV,MAAa,uEAAN,IAAM;AACzB,UAAIjZ,GAAG,GAAG,KAAKuK,GAAL,CAASvG,SAAT,EAAoBiV,MAApB,CAAV;AACA,aAAO,KAAKD,IAAL,CAAUhZ,GAAG,CAACsD,IAAd,EAAoB,KAAKG,GAAzB,EAA8BzD,GAAG,CAACmK,KAAlC,EAAyC,KAAKC,MAA9C,CAAP;AACH;;;yBAEIpG,S,EAAwB;AAAA,UAAbiV,MAAa,uEAAN,IAAM;AACzB,UAAIjZ,GAAG,GAAG,KAAKuK,GAAL,CAASvG,SAAT,EAAoBiV,MAApB,CAAV;AACA,aAAO,KAAKD,IAAL,CAAU,KAAK1V,IAAf,EAAqBtD,GAAG,CAACyD,GAAzB,EAA8B,KAAK0G,KAAnC,EAA0CnK,GAAG,CAACoK,MAA9C,CAAP;AACH;AAED;;;;;;;;;;0BAOMlH,I,EAAmB;AAAA,UAAb+V,MAAa,uEAAN,IAAM;AACrBA,YAAM,GAAGA,MAAM,GAAG,KAAKC,SAAL,CAAeD,MAAf,CAAH,GAA4B,IAAIvI,6CAAJ,CAAS,CAAT,EAAY,CAAZ,CAA3C;AACAxN,UAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAP;AAEA,UAAIwE,KAAK,GAAG,KAAKA,KAAjB;AAAA,UACIC,MAAM,GAAG,KAAKA,MADlB;AAAA,UAEIrE,IAAI,GAAGoI,sDAAK,CAAC,KAAKpI,IAAL,GAAY2V,MAAM,CAAC3V,IAApB,EAA0BJ,IAAI,CAACI,IAA/B,EAAqCJ,IAAI,CAACiH,KAA1C,CAAL,GAAwD8O,MAAM,CAAC3V,IAF1E;AAAA,UAGIG,GAAG,GAAGiI,sDAAK,CAAC,KAAKjI,GAAL,GAAWwV,MAAM,CAACxV,GAAnB,EAAwBP,IAAI,CAACO,GAA7B,EAAkCP,IAAI,CAACkH,MAAvC,CAAL,GAAsD6O,MAAM,CAACxV,GAHvE;AAKA,aAAO,KAAKuV,IAAL,CACH1V,IADG,EAEHG,GAFG,EAGHH,IAAI,GAAGoE,KAHJ,EAIHjE,GAAG,GAAGkE,MAJH,CAAP;AAMH;;;2BAEMzE,I,EAAmB;AAAA,UAAb+V,MAAa,uEAAN,IAAM;AACtB,UAAIjZ,GAAG,GAAG,KAAK0L,KAAL,CAAWxI,IAAX,EAAiB+V,MAAjB,CAAV;AACA,aAAO,KAAKD,IAAL,CAAUhZ,GAAG,CAACsD,IAAd,EAAoB,KAAKG,GAAzB,EAA8BzD,GAAG,CAACmK,KAAlC,EAAyC,KAAKC,MAA9C,CAAP;AACH;;;2BAEMlH,I,EAAmB;AAAA,UAAb+V,MAAa,uEAAN,IAAM;AACtB,UAAIjZ,GAAG,GAAG,KAAK0L,KAAL,CAAWxI,IAAX,EAAiB+V,MAAjB,CAAV;AACA,aAAO,KAAKD,IAAL,CAAU,KAAK1V,IAAf,EAAqBtD,GAAG,CAACyD,GAAzB,EAA8B,KAAK0G,KAAnC,EAA0CnK,GAAG,CAACoK,MAA9C,CAAP;AACH,K,CAED;;AACA;;;;;;;;uCAKmBlH,I,EAAM;AACrBA,UAAI,GAAGC,IAAI,CAAC+N,QAAL,CAAchO,IAAd,CAAP;AAEA,UAAImP,cAAc,GAAG,KAAKA,cAAL,CAAoBnP,IAApB,CAArB;AAAA,UACIoP,cAAc,GAAG,KAAKA,cAAL,CAAoBpP,IAApB,CADrB;;AAGA,UAAGmP,cAAc,IAAIC,cAArB,EAAqC;AACjC;AACA,eAAO,CAAP;AACH,OAHD,MAGO,IAAGD,cAAH,EAAmB;AACtB,eAAOhI,IAAI,CAACkI,GAAL,CACHlI,IAAI,CAACmI,GAAL,CAAS,KAAKpI,MAAL,GAAclH,IAAI,CAACO,GAA5B,CADG,EAEH4G,IAAI,CAACmI,GAAL,CAAS,KAAK/O,GAAL,GAAWP,IAAI,CAACkH,MAAzB,CAFG,CAAP;AAIH,OALM,MAKA,IAAGkI,cAAH,EAAmB;AACtB,eAAOjI,IAAI,CAACkI,GAAL,CACHlI,IAAI,CAACmI,GAAL,CAAS,KAAKrI,KAAL,GAAajH,IAAI,CAACI,IAA3B,CADG,EAEH+G,IAAI,CAACmI,GAAL,CAAS,KAAKlP,IAAL,GAAYJ,IAAI,CAACiH,KAA1B,CAFG,CAAP;AAIH,OALM,MAKA;AACH,YAAIsI,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB;;AAEA,YAAG,KAAKzI,KAAL,IAAcjH,IAAI,CAACI,IAAtB,EAA4B;AACxBmP,YAAE,GAAG,KAAKtI,KAAV;AACAwI,YAAE,GAAGzP,IAAI,CAACI,IAAV;AACH,SAHD,MAGO;AACHmP,YAAE,GAAG,KAAKnP,IAAV;AACAqP,YAAE,GAAGzP,IAAI,CAACiH,KAAV;AACH;;AAED,YAAG,KAAKC,MAAL,IAAelH,IAAI,CAACO,GAAvB,EAA4B;AACxBiP,YAAE,GAAG,KAAKtI,MAAV;AACAwI,YAAE,GAAG1P,IAAI,CAACO,GAAV;AACH,SAHD,MAGO;AACHiP,YAAE,GAAG,KAAKjP,GAAV;AACAmP,YAAE,GAAG1P,IAAI,CAACkH,MAAV;AACH,SAjBE,CAmBH;;;AACA,eAAOC,IAAI,CAACiH,KAAL,CAAWjH,IAAI,CAACwI,IAAL,CAAUxI,IAAI,CAACyI,GAAL,CAASH,EAAE,GAAGF,EAAd,EAAkB,CAAlB,IAAuBpI,IAAI,CAACyI,GAAL,CAASF,EAAE,GAAGF,EAAd,EAAkB,CAAlB,CAAjC,CAAX,CAAP;AACH;AACJ,K,CAED;;;;yCACqBb,K,EAAO;AACxBA,WAAK,GAAG,IAAI1O,IAAJ,CAAS0O,KAAK,CAACvO,IAAf,EAAqBuO,KAAK,CAACpO,GAA3B,EAAgCoO,KAAK,CAACvO,IAAtC,EAA4CuO,KAAK,CAACpO,GAAlD,CAAR;AAEA,UAAI0V,QAAQ,GAAG9O,IAAI,CAACmI,GAAL,CAAS,KAAKlP,IAAL,GAAYuO,KAAK,CAACvO,IAA3B,IAAmC+G,IAAI,CAACmI,GAAL,CAAS,KAAKrI,KAAL,GAAa0H,KAAK,CAACvO,IAA5B,CAAnC,GAAuE,KAAKA,IAA5E,GAAmF,KAAK6G,KAAvG;AAAA,UACIiP,QAAQ,GAAG/O,IAAI,CAACmI,GAAL,CAAS,KAAK/O,GAAL,GAAWoO,KAAK,CAACpO,GAA1B,IAAiC4G,IAAI,CAACmI,GAAL,CAAS,KAAKpI,MAAL,GAAcyH,KAAK,CAACpO,GAA7B,CAAjC,GAAqE,KAAKA,GAA1E,GAAgF,KAAK2G,MADpG;AAAA,UAEIiP,QAAQ,GAAGpT,6DAAY,CAACkT,QAAD,EAAWC,QAAX,EAAqBvH,KAAK,CAACvO,IAA3B,EAAiCuO,KAAK,CAACpO,GAAvC,CAF3B;AAIA,aAAO,KAAKiC,QAAL,CAAcmM,KAAd,IAAuB,CAACwH,QAAxB,GAAmCA,QAA1C;AACH,K,CAED;;;;qCACiB;AACb,aAAO,IAAI3I,6CAAJ,CACH,KAAKpN,IAAL,GAAa,KAAKoE,KAAL,GAAa,CADvB,EAEH,KAAKjE,GAAL,GAAY,KAAKkE,MAAL,GAAc,CAFvB,CAAP;AAIH;;;8BAE8B;AAAA,UAAvBkK,KAAuB,uEAAjB,IAAiB;AAAA,UAAX5N,IAAW,uEAAN,IAAM;AAC3B;AACA4N,WAAK,GAAGA,KAAK,GAAG,IAAInB,6CAAJ,CAASmB,KAAT,CAAH,GAAqB,IAAInB,6CAAJ,CAAS,CAAT,EAAY,CAAZ,CAAlC;AAEA,UAAItN,CAAC,GAAG,KAAKE,IAAL,GAAa,KAAKoE,KAAL,GAAa,CAA1B,GAA+BmK,KAAK,CAACzO,CAA7C;AAAA,UACIG,CAAC,GAAG,KAAKE,GAAL,GAAY,KAAKkE,MAAL,GAAc,CAA1B,GAA+BkK,KAAK,CAACtO,CAD7C;;AAGA,UAAGU,IAAI,KAAK,GAAT,IAAgBA,IAAI,KAAK,IAA5B,EAAkC;AAC9Bb,SAAC,IAAI,CAAC,CAAN;AACH;;AAED,UAAGa,IAAI,KAAK,GAAT,IAAgBA,IAAI,KAAK,IAA5B,EAAkC;AAC9BV,SAAC,IAAI,CAAC,CAAN;AACH;;AAEDH,OAAC,GAAGA,CAAC,GAAI,KAAKsE,KAAL,GAAa,CAAlB,GAAuBmK,KAAK,CAACzO,CAAjC;AACAG,OAAC,GAAGA,CAAC,GAAI,KAAKoE,MAAL,GAAc,CAAnB,GAAwBkK,KAAK,CAACtO,CAAlC;AAEA,aAAO,KAAKyV,IAAL,CAAU5V,CAAV,EAAaG,CAAb,EAAgBH,CAAC,GAAG,KAAKsE,KAAzB,EAAgCnE,CAAC,GAAG,KAAKoE,MAAzC,CAAP;AACH;;;oCAEgE;AAAA,UAAvD2R,EAAuD,SAAvDA,EAAuD;AAAA,UAAnDC,EAAmD,SAAnDA,EAAmD;AAAA,UAA/CC,EAA+C,SAA/CA,EAA+C;AAAA,+BAA3CpV,MAA2C;AAAA,UAA3CA,MAA2C,6BAApC,IAAoC;AAAA,+BAA9BqV,MAA8B;AAAA,UAA9BA,MAA8B,6BAAvB,IAAuB;AAAA,kCAAjBC,SAAiB;AAAA,UAAjBA,SAAiB,gCAAP,IAAO;;AAC7D;AACA,UAAGF,EAAE,CAAClM,qBAAN,EAA6B;AACzBkM,UAAE,GAAG,IAAIrW,IAAJ,CAASqW,EAAT,CAAL;AACH,OAJ4D,CAM7D;;;AACA,UAAGC,MAAM,IAAIA,MAAM,CAACnM,qBAApB,EAA2C;AACvCmM,cAAM,GAAG,IAAItW,IAAJ,CAASsW,MAAT,CAAT;AACH,OAT4D,CAW7D;AACA;AACA;;;AACA,UAAGC,SAAS,IAAI,OAAOA,SAAP,KAAqB,QAArC,EAA+C;AAC3C,YAAIxC,KAAK,GAAGwC,SAAS,CAACza,IAAV,GAAiB8O,KAAjB,CAAuByK,aAAvB,CAAZ;AACAkB,iBAAS,GAAG;AACRtW,WAAC,EAAE8T,KAAK,CAAC,CAAD,CADA;AAER3T,WAAC,EAAE2T,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD;AAFZ,SAAZ;AAIH;;AAED,UAAI+B,MAAM,GAAG,KAAKU,sBAAL,CAA4BL,EAA5B,CAAb;AAAA,UACIM,SAAS,GAAGJ,EAAE,CAACG,sBAAH,CAA0BJ,EAA1B,CADhB;AAAA,UAEIrK,MAAM,GAAG0K,SAAS,CAACxW,CAAV,GAAc6V,MAAM,CAAC7V,CAFlC;AAAA,UAGI+L,MAAM,GAAGyK,SAAS,CAACrW,CAAV,GAAc0V,MAAM,CAAC1V,CAHlC;AAKA,UAAIL,IAAI,GAAG,KAAKuE,SAAL,CAAeyH,MAAf,EAAuBC,MAAvB,CAAX;;AAEA,UAAG/K,MAAH,EAAW;AACPlB,YAAI,GAAG,KAAKuE,SAAL,CAAerD,MAAf,CAAP;AACH,OA/B4D,CAiC7D;AACA;;;AACA,UAAG,CAACsV,SAAD,IAAc,CAACD,MAAf,IAAyBA,MAAM,CAAC/T,QAAP,CAAgBxC,IAAhB,CAA5B,EAAmD;AAC/C,eAAOA,IAAP;AACH;;AAED,UAAG,CAACuW,MAAM,CAACI,SAAP,CAAiB3W,IAAjB,CAAD,KAA4BwW,SAAS,CAACtW,CAAV,KAAgB,MAAhB,IAA0BsW,SAAS,CAACtW,CAAV,KAAgB,SAAtE,CAAH,EAAqF;AACjFF,YAAI,GAAGA,IAAI,CAAC4W,OAAL,CAAaN,EAAE,CAACO,cAAH,EAAb,EAAkC,GAAlC,CAAP;AACH;;AAED,UAAG,CAACN,MAAM,CAACO,SAAP,CAAiB9W,IAAjB,CAAD,KAA4BwW,SAAS,CAACnW,CAAV,KAAgB,MAAhB,IAA0BmW,SAAS,CAACnW,CAAV,KAAgB,SAAtE,CAAH,EAAqF;AACjFL,YAAI,GAAGA,IAAI,CAAC4W,OAAL,CAAaN,EAAE,CAACO,cAAH,EAAb,EAAkC,GAAlC,CAAP;AACH;;AAED,UAAGL,SAAS,CAACtW,CAAV,KAAgB,KAAhB,IAAyBsW,SAAS,CAACtW,CAAV,KAAgB,SAA5C,EAAuD;AACnDF,YAAI,GAAGA,IAAI,CAAC+W,IAAL,CAAUR,MAAV,CAAP;AACH;;AAED,UAAGC,SAAS,CAACnW,CAAV,KAAgB,KAAhB,IAAyBmW,SAAS,CAACnW,CAAV,KAAgB,SAA5C,EAAuD;AACnDL,YAAI,GAAGA,IAAI,CAACgX,IAAL,CAAUT,MAAV,CAAP;AACH;;AAED,aAAOvW,IAAP;AACH;;;2CAEsBiX,M,EAAQ;AAC3B,UAAGzB,uBAAuB,CAACyB,MAAD,CAA1B,EAAoC;AAChCA,cAAM,GAAGzB,uBAAuB,CAACyB,MAAD,CAAhC;AACH;;AAED,UAAIna,GAAG,GAAGma,MAAM,CAAClb,IAAP,GAAc8O,KAAd,CAAoByK,aAApB,CAAV;AAAA,UACIpV,CAAC,GAAGpD,GAAG,CAAC,CAAD,CADX;AAAA,UAEIuD,CAAC,GAAGvD,GAAG,CAAC,CAAD,CAFX;AAAA,UAGIoa,EAAE,GAAG,IAHT;AAAA,UAIIC,EAAE,GAAG,IAJT;;AAMA,UAAGjX,CAAH,EAAM;AACFgX,UAAE,GAAG,KAAKE,gCAAL,CAAsClX,CAAtC,EAAyC,GAAzC,CAAL;AACH;;AAED,UAAGG,CAAH,EAAM;AACF8W,UAAE,GAAG,KAAKC,gCAAL,CAAsC/W,CAAtC,EAAyC,GAAzC,CAAL;AACH;;AAED,aAAO,IAAImN,6CAAJ,CAAS0J,EAAT,EAAaC,EAAb,CAAP;AACH;AAED;;;;;;;;;;;;;8BAUUpB,M,EAAQ;AACd,UAAGP,uBAAuB,CAACO,MAAD,CAA1B,EAAoC;AAChCA,cAAM,GAAGP,uBAAuB,CAACO,MAAD,CAAhC;AACH;;AAED,UAAI7V,CAAJ;AAAA,UAAOG,CAAP;AAAA,UAAUqD,OAAO,GAAG,CAApB;AAAA,UAAuBC,OAAO,GAAG,CAAjC;;AAEA,UAAG,OAAOoS,MAAP,KAAkB,QAArB,EAA+B;AAAA,iCAClBA,MAAM,CAACha,IAAP,GAAc8O,KAAd,CAAoByK,aAApB,CADkB;;AAAA;;AAC1BpV,SAD0B;AACvBG,SADuB;AAE9B,OAFD,MAEO,IAAGoC,KAAK,CAACC,OAAN,CAAcqT,MAAd,CAAH,EAA0B;AAAA,sBACEA,MADF;;AAAA;;AAC5B7V,SAD4B;AACzBG,SADyB;AAAA;AACtBqD,eADsB,0BACd,CADc;AAAA;AACXC,eADW,2BACH,CADG;AAEhC,OAFM,MAEA;AACHzD,SAAC,GAAG6V,MAAM,CAAC3V,IAAX;AACAC,SAAC,GAAG0V,MAAM,CAACxV,GAAX;AACAmD,eAAO,GAAGqS,MAAM,CAACrS,OAAP,IAAkB,CAA5B;AACAC,eAAO,GAAGoS,MAAM,CAACpS,OAAP,IAAkB,CAA5B;AACH;;AAED,UAAG,OAAOzD,CAAP,KAAa,QAAhB,EAA0B;AACtBA,SAAC,GAAG,KAAKkX,gCAAL,CAAsClX,CAAtC,EAAyC,GAAzC,IAAgD,KAAKE,IAAzD;AACH;;AAED,UAAG,OAAOC,CAAP,KAAa,QAAhB,EAA0B;AACtBA,SAAC,GAAG,KAAK+W,gCAAL,CAAsC/W,CAAtC,EAAyC,GAAzC,IAAgD,KAAKE,GAAzD;AACH;;AAED,aAAO,IAAIiN,6CAAJ,CAAStN,CAAC,GAAGwD,OAAb,EAAsBrD,CAAC,GAAGsD,OAA1B,CAAP;AACH,K,CAED;;AACA;;;;;;;;6BAKSoS,M,EAAQ;AACb,UAAIpH,KAAK,GAAG,KAAKqH,SAAL,CAAeD,MAAf,CAAZ;AACA,aAAO,IAAIvI,6CAAJ,CAASmB,KAAK,CAACvO,IAAN,GAAa,KAAKA,IAA3B,EAAiCuO,KAAK,CAACpO,GAAN,GAAY,KAAKA,GAAlD,CAAP;AACH;AAED;;;;;;;;;;qDAOiC3E,K,EAAOmP,S,EAAW;AAC/C,UAAIiJ,KAAK,GAAGuB,eAAe,CAACtZ,IAAhB,CAAqBL,KAArB,CAAZ;AAAA,UACIS,CAAC,GAAG,CADR;;AAGA,UAAG2X,KAAK,CAAC,CAAD,CAAR,EAAa;AACT,YAAItW,CAAC,GAAGsW,KAAK,CAAC,CAAD,CAAb;;AAEA,YAAGjJ,SAAS,KAAK,GAAjB,EAAsB;AAClB,cAAGrN,CAAC,KAAK,MAAT,EAAiB;AACbrB,aAAC,GAAG,KAAK+D,IAAT;AACH,WAFD,MAEO,IAAG1C,CAAC,KAAK,QAAN,IAAkBA,CAAC,KAAK,QAA3B,EAAqC;AACxCrB,aAAC,GAAG,KAAK+D,IAAL,GAAa,KAAKoE,KAAL,GAAa,CAA9B;AACH,WAFM,MAEA,IAAG9G,CAAC,KAAK,OAAT,EAAkB;AACrBrB,aAAC,GAAG,KAAK+D,IAAL,GAAY,KAAKoE,KAArB;AACH,WAFM,MAEA;AACH,kBAAM,IAAI1M,kDAAJ,2BAAkC4F,CAAlC,EAAN;AACH;AACJ,SAVD,MAUO;AACH,cAAGA,CAAC,KAAK,KAAT,EAAgB;AACZrB,aAAC,GAAG,KAAKkE,GAAT;AACH,WAFD,MAEO,IAAG7C,CAAC,KAAK,QAAN,IAAkBA,CAAC,KAAK,QAA3B,EAAqC;AACxCrB,aAAC,GAAG,KAAKkE,GAAL,GAAY,KAAKkE,MAAL,GAAc,CAA9B;AACH,WAFM,MAEA,IAAG/G,CAAC,KAAK,QAAT,EAAmB;AACtBrB,aAAC,GAAG,KAAKkE,GAAL,GAAW,KAAKkE,MAApB;AACH,WAFM,MAEA;AACH,kBAAM,IAAI3M,kDAAJ,2BAAkC4F,CAAlC,EAAN;AACH;AACJ;AACJ,OAxBD,MAwBO,IAAGqN,SAAS,KAAK,GAAjB,EAAsB;AACzB1O,SAAC,GAAG,KAAK+D,IAAT;AACH,OAFM,MAEA;AACH/D,SAAC,GAAG,KAAKkE,GAAT;AACH;;AAED,UAAGyT,KAAK,CAAC,CAAD,CAAR,EAAa;AACT,YAAIpY,MAAK,GAAGO,UAAU,CAAC6X,KAAK,CAAC,CAAD,CAAN,CAAtB;AAAA,YACIzN,IAAI,GAAGyN,KAAK,CAAC,CAAD,CAAL,IAAY,IADvB;;AAGA,YAAGzN,IAAI,KAAK,IAAZ,EAAkB;AACdlK,WAAC,IAAIT,MAAL;AACH,SAFD,MAEO,IAAG2K,IAAI,KAAK,GAAZ,EAAiB;AACpB,cAAGwE,SAAS,KAAK,GAAjB,EAAsB;AAClB1O,aAAC,IAAKT,MAAK,GAAG,GAAT,GAAgB,KAAK4I,KAA1B;AACH,WAFD,MAEO;AACHnI,aAAC,IAAKT,MAAK,GAAG,GAAT,GAAgB,KAAK6I,MAA1B;AACH;AACJ,SANM,MAMA;AACH,gBAAM,IAAIrM,iDAAJ,CAAc,uCAAd,CAAN;AACH;AACJ;;AAED,aAAOiE,CAAP;AACH;;;wBAwDU;AACP,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAcQT,K,EAAO;AACZ,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAdS;AACN,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAcOA,K,EAAO;AACX,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAdW;AACR,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAcSA,K,EAAO;AACb,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAdY;AACT,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAcUA,K,EAAO;AACd,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAEW;AACR,aAAO,KAAKqL,KAAL,GAAa,KAAK7G,IAAzB;AACH,K;sBAMSxE,K,EAAO;AACb,WAAKqL,KAAL,GAAa,KAAK7G,IAAL,GAAYxE,KAAzB;AACH;;;wBANY;AACT,aAAO,KAAKsL,MAAL,GAAc,KAAK3G,GAA1B;AACH,K;sBAMU3E,K,EAAO;AACd,WAAKsL,MAAL,GAAc,KAAK3G,GAAL,GAAW3E,KAAzB;AACH;;;wBAEO;AACJ,aAAO,KAAKwE,IAAZ;AACH,K;sBAMKxE,K,EAAO;AACT,WAAKwE,IAAL,GAAYxE,KAAZ;AACH;;;wBANO;AACJ,aAAO,KAAK2E,GAAZ;AACH,K;sBAMK3E,K,EAAO;AACT,WAAK2E,GAAL,GAAW3E,KAAX;AACH;;;oCApH2C;AAAA,UAA3BwE,IAA2B,SAA3BA,IAA2B;AAAA,UAArBG,GAAqB,SAArBA,GAAqB;AAAA,UAAhB0G,KAAgB,SAAhBA,KAAgB;AAAA,UAATC,MAAS,SAATA,MAAS;AACxC,aAAO,IAAIjH,IAAJ,CAASG,IAAT,EAAeG,GAAf,EAAoB0G,KAApB,EAA2BC,MAA3B,CAAP;AACH;;;0CAE4BpO,O,EAAS;AAClC,aAAO,IAAImH,IAAJ,CAASnH,OAAT,CAAP;AACH;AAED;;;;;;;;;+CAMkCA,O,EAAuB;AAAA,UAAdue,OAAc,uEAAN,IAAM;AACrD,UAAIpY,KAAK,GAAG,EAAZ;AAAA,UACImT,IAAI,GAAG,EADX;;AAGA,WAAI,IAAIpb,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8B,OAAO,CAAC0G,KAAR,CAAc1I,MAAjC,EAAyCE,CAAC,EAA1C,EAA8C;AAC1Cob,YAAI,CAAC7b,IAAL,CAAUuC,OAAO,CAAC0G,KAAR,CAAcxI,CAAd,CAAV;AACH;;AAED,gCAAeob,IAAf,6BAAqB;AAAjB,YAAIvV,GAAG,aAAP;AACAoC,aAAK,CAACpC,GAAD,CAAL,GAAa/D,OAAO,CAAC0G,KAAR,CAAc3C,GAAd,CAAb;AACA/D,eAAO,CAAC0G,KAAR,CAAc3C,GAAd,IAAqB,EAArB;AACH;;AAED,UAAIR,CAAC,GAAG4D,IAAI,CAACmK,qBAAL,CAA2BtR,OAA3B,CAAR;;AAEA,UAAGue,OAAH,EAAY;AACR/c,cAAM,CAACC,MAAP,CAAczB,OAAO,CAAC0G,KAAtB,EAA6BP,KAA7B;AACH;;AAED,aAAO5C,CAAP;AACH;;;oCAEsB;AACnB,aAAO,IAAI4D,IAAJ,CACH,CADG,EAEH,CAFG,EAGHzB,MAAM,CAACwJ,UAHJ,EAIHxJ,MAAM,CAACyJ,WAJJ,CAAP;AAMH;;;kDAEoC;AACjC,aAAO,IAAIhI,IAAJ,CACH,CAACzB,MAAM,CAAC+M,OADL,EAEH,CAAC/M,MAAM,CAACiN,OAFL,EAGH5J,QAAQ,CAACyV,eAAT,CAAyB3P,WAAzB,GAAuCnJ,MAAM,CAAC+M,OAH3C,EAIH1J,QAAQ,CAACyV,eAAT,CAAyBzP,YAAzB,GAAwCrJ,MAAM,CAACiN,OAJ5C,CAAP;AAMH;;;;EA3lB6B4J,6C;;;;;;;;;;;;;;;;;;;;;;;;;ACvBlC;AAGA;;;;IAGqB7H,I;;;AACjB,kBAAsB;AAAA,QAAVtN,CAAU,uEAAR,CAAQ;AAAA,QAALG,CAAK,uEAAH,CAAG;;AAAA;;AAClB,QAAGH,CAAC,YAAYsN,IAAhB,EAAsB;AAClB,WAAK,CAAL,IAAUtN,CAAC,CAACA,CAAZ;AACA,WAAK,CAAL,IAAUA,CAAC,CAACG,CAAZ;AACH,KAHD,MAGO,IAAGoC,KAAK,CAACC,OAAN,CAAcxC,CAAd,CAAH,EAAqB;AACxB,WAAK,CAAL,IAAUA,CAAC,CAAC,CAAD,CAAX;AACA,WAAK,CAAL,IAAUA,CAAC,CAAC,CAAD,CAAX;AACH,KAHM,MAGA,IAAG,QAAOA,CAAP,MAAa,QAAhB,EAA0B;AAC7B,UAAGA,CAAC,CAACE,IAAF,KAAWxD,SAAd,EAAyB;AACrB,aAAK,CAAL,IAAUsD,CAAC,CAACE,IAAZ;AACA,aAAK,CAAL,IAAUF,CAAC,CAACK,GAAZ;AACH,OAHD,MAGO;AACH,aAAK,CAAL,IAAUL,CAAC,CAACA,CAAZ;AACA,aAAK,CAAL,IAAUA,CAAC,CAACG,CAAZ;AACH;AACJ,KARM,MAQA;AACH,WAAK,CAAL,IAAUH,CAAV;AACA,WAAK,CAAL,IAAUG,CAAV;AACH;AACJ;;;;wBAEG6O,I,EAAM;AACN,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,eAAO,IAAI1B,IAAJ,CACH,KAAK,CAAL,IAAU0B,IADP,EAEH,KAAK,CAAL,IAAUA,IAFP,CAAP;AAIH,OALD,MAKO;AACH,eAAO,IAAI1B,IAAJ,CACH,KAAK,CAAL,IAAU0B,IAAI,CAAC,CAAD,CADX,EAEH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAFX,CAAP;AAIH;AACJ;;;6BAEQA,I,EAAM;AACX,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,eAAO,IAAI1B,IAAJ,CACH,KAAK,CAAL,IAAU0B,IADP,EAEH,KAAK,CAAL,IAAUA,IAFP,CAAP;AAIH,OALD,MAKO;AACH,eAAO,IAAI1B,IAAJ,CACH,KAAK,CAAL,IAAU0B,IAAI,CAAC,CAAD,CADX,EAEH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAFX,CAAP;AAIH;AACJ,K,CAED;;;;2BACOtT,K,EAAO;AACV,aAAO,IAAI4R,IAAJ,CAAS,KAAK,CAAL,IAAU5R,KAAnB,EAA0B,KAAK,CAAL,IAAUA,KAApC,CAAP;AACH,K,CAED;;;;wBACIsT,I,EAAM;AACN,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,eAAO,IAAI1B,IAAJ,CACH,KAAK,CAAL,IAAU0B,IADP,EAEH,KAAK,CAAL,IAAUA,IAFP,CAAP;AAIH,OALD,MAKO;AACH,eAAO,IAAI1B,IAAJ,CACH,KAAK,CAAL,IAAU0B,IAAI,CAAC,CAAD,CADX,EAEH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAFX,CAAP;AAIH;AACJ,K,CAED;;;;2BACOA,I,EAAM;AACT,aAAO,SAASA,IAAT,IAAkB,KAAK,CAAL,MAAYA,IAAI,CAAC,CAAD,CAAhB,IAAuB,KAAK,CAAL,MAAYA,IAAI,CAAC,CAAD,CAAhE;AACH;;;wBAEGtT,K,EAAO;AACP,UAAG,QAAOA,KAAP,MAAiB,QAApB,EAA8B;AAC1B,aAAK,CAAL,IAAUA,KAAV;AACA,aAAK,CAAL,IAAUA,KAAV;AACH,OAHD,MAGO;AACH,aAAK,CAAL,IAAUA,KAAK,CAAC,CAAD,CAAf;AACA,aAAK,CAAL,IAAUA,KAAK,CAAC,CAAD,CAAf;AACH;AACJ,K,CAED;;;;4BACQ;AACJ,aAAO4R,IAAI,CAAC,KAAK,CAAL,CAAD,EAAU,KAAK,CAAL,CAAV,CAAX;AACH;;;AA0DD;kCACc;AACV,iCAAoB,KAAKtN,CAAzB,iBAAiC,KAAKG,CAAtC;AACH,K,CAED;;;;oCACgB;AACZ,mCAAsB,KAAKH,CAA3B,iBAAmC,KAAKG,CAAxC;AACH;;;0BAEKkX,I,EAAM;AACR,aAAO,IAAI/J,IAAJ,CACHhF,sDAAK,CAAC,KAAKpI,IAAN,EAAYmX,IAAI,CAACnX,IAAjB,EAAuBmX,IAAI,CAACtQ,KAA5B,CADF,EAEHuB,sDAAK,CAAC,KAAKjI,GAAN,EAAWgX,IAAI,CAAChX,GAAhB,EAAqBgX,IAAI,CAACrQ,MAA1B,CAFF,CAAP;AAIH;;;wBAvEO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAsBKtL,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAtBO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAsBKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAtBU;AACP,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAsBQA,K,EAAO;AACZ,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAtBW;AACR,aAAO,KAAK,CAAL,CAAP;AACH;;;wBAES;AACN,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAkBOA,K,EAAO;AACX,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAlBY;AACT,aAAO,KAAK,CAAL,CAAP;AACH;;;wBAkBW;AACR,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAESA,K,EAAO;AACb,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAEY;AACT,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAEUA,K,EAAO;AACd,WAAK,CAAL,IAAUA,KAAV;AACH;;;+BAmBiB4b,M,EAAQ;AACtB,UAAG/U,KAAK,CAACC,OAAN,CAAc8U,MAAd,CAAH,EAA0B;AACtB,eAAO,IAAIhK,IAAJ,CAASgK,MAAM,CAAC,CAAD,CAAf,EAAoBA,MAAM,CAAC,CAAD,CAA1B,CAAP;AACH,OAFD,MAEO,IAAGA,MAAM,CAACjb,cAAP,CAAsB,MAAtB,CAAH,EAAkC;AACrC,eAAO,IAAIiR,IAAJ,CAASgK,MAAM,CAACpX,IAAhB,EAAsBoX,MAAM,CAACjX,GAA7B,CAAP;AACH,OAFM,MAEA;AACH,eAAO,IAAIiN,IAAJ,CAASgK,MAAM,CAACtX,CAAhB,EAAmBsX,MAAM,CAACnX,CAA1B,CAAP;AACH;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/KL;;;IAGqB8M,I;;;AACjB,kBAA2B;AAAA,QAAfjN,CAAe,uEAAb,CAAa;AAAA,QAAVG,CAAU,uEAAR,CAAQ;AAAA,QAALiN,CAAK,uEAAH,CAAG;;AAAA;;AACvB,SAAK,CAAL,IAAUpN,CAAV;AACA,SAAK,CAAL,IAAUG,CAAV;AACA,SAAK,CAAL,IAAUiN,CAAV;AACH;;;;wBAkDG1R,K,EAAO;AACP,UAAG,QAAOA,KAAP,MAAiB,QAApB,EAA8B;AAC1B,aAAK,CAAL,IAAUA,KAAV;AACA,aAAK,CAAL,IAAUA,KAAV;AACA,aAAK,CAAL,IAAUA,KAAV;AACH,OAJD,MAIO;AACH,aAAK,CAAL,IAAUA,KAAK,CAAC,CAAD,CAAf;AACA,aAAK,CAAL,IAAUA,KAAK,CAAC,CAAD,CAAf;AACA,aAAK,CAAL,IAAUA,KAAK,CAAC,CAAD,CAAf;AACH;AACJ;;;wBAEG6b,I,EAAM;AACN,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,eAAO,IAAItK,IAAJ,CACH,KAAK,CAAL,IAAUsK,IADP,EAEH,KAAK,CAAL,IAAUA,IAFP,EAGH,KAAK,CAAL,IAAUA,IAHP,CAAP;AAKH,OAND,MAMO;AACH,eAAO,IAAItK,IAAJ,CACH,KAAK,CAAL,IAAUsK,IAAI,CAAC,CAAD,CADX,EAEH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAFX,EAGH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAHX,CAAP;AAKH;AACJ;;;6BAEQA,I,EAAM;AACX,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,eAAO,IAAItK,IAAJ,CACH,KAAK,CAAL,IAAUsK,IADP,EAEH,KAAK,CAAL,IAAUA,IAFP,EAGH,KAAK,CAAL,IAAUA,IAHP,CAAP;AAKH,OAND,MAMO;AACH,eAAO,IAAItK,IAAJ,CACH,KAAK,CAAL,IAAUsK,IAAI,CAAC,CAAD,CADX,EAEH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAFX,EAGH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAHX,CAAP;AAKH;AACJ,K,CAED;;;;2BACO7b,K,EAAO;AACV,aAAO,IAAIuR,IAAJ,CACH,KAAK,CAAL,IAAUvR,KADP,EAEH,KAAK,CAAL,IAAUA,KAFP,EAGH,KAAK,CAAL,IAAUA,KAHP,CAAP;AAKH,K,CAED;;;;2BACO6b,I,EAAM;AACT,aAAOA,IAAI,KAAK,IAAT,IAAkBA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAAZ,IAAuBA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAAnC,IAA8CA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAAnF;AACH,K,CAED;;;;wBACIA,I,EAAM;AACN,UAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,eAAO,IAAItK,IAAJ,CACH,KAAK,CAAL,IAAUsK,IADP,EAEH,KAAK,CAAL,IAAUA,IAFP,EAGH,KAAK,CAAL,IAAUA,IAHP,CAAP;AAKH,OAND,MAMO;AACH,eAAO,IAAItK,IAAJ,CACH,KAAK,CAAL,IAAUsK,IAAI,CAAC,CAAD,CADX,EAEH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAFX,EAGH,KAAK,CAAL,IAAUA,IAAI,CAAC,CAAD,CAHX,CAAP;AAKH;AACJ,K,CAED;;;;4BACQ;AACJ,aAAO,IAAItK,IAAJ,CAAS,KAAK,CAAL,CAAT,EAAkB,KAAK,CAAL,CAAlB,EAA2B,KAAK,CAAL,CAA3B,CAAP;AACH,K,CAED;;;;4BACQ;AACJ,UAAI9Q,CAAC,GAAG8K,IAAI,CAACiH,KAAL,CAAW,KAAK/R,CAAhB,EAAmBoD,QAAnB,CAA4B,EAA5B,CAAR;AAAA,UACIyV,CAAC,GAAG/N,IAAI,CAACiH,KAAL,CAAW,KAAK8G,CAAhB,EAAmBzV,QAAnB,CAA4B,EAA5B,CADR;AAAA,UAEItC,CAAC,GAAGgK,IAAI,CAACiH,KAAL,CAAW,KAAKjR,CAAhB,EAAmBsC,QAAnB,CAA4B,EAA5B,CAFR;;AAIA,UAAGpD,CAAC,CAACvF,MAAF,KAAa,CAAhB,EAAmB;AACfuF,SAAC,GAAG,MAAMA,CAAV;AACH;;AAED,UAAG6Y,CAAC,CAACpe,MAAF,KAAa,CAAhB,EAAmB;AACfoe,SAAC,GAAG,MAAMA,CAAV;AACH;;AAED,UAAG/X,CAAC,CAACrG,MAAF,KAAa,CAAhB,EAAmB;AACfqG,SAAC,GAAG,MAAMA,CAAV;AACH;;AAED,wBAAWd,CAAX,SAAe6Y,CAAf,SAAmB/X,CAAnB;AACH,K,CAED;;;;4BACQ;AACJ,2BAAcgK,IAAI,CAACiH,KAAL,CAAW,KAAK/R,CAAhB,CAAd,eAAqC8K,IAAI,CAACiH,KAAL,CAAW,KAAK8G,CAAhB,CAArC,eAA4D/N,IAAI,CAACiH,KAAL,CAAW,KAAKjR,CAAhB,CAA5D;AACH,K,CAED;;;;oCACgB;AACZ,mCAAsB,KAAK+C,CAA3B,iBAAmC,KAAKG,CAAxC,iBAAgD,KAAKiN,CAArD;AACH,K,CAED;;;;wBA/JQ;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAUK1R,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAVO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAUKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAVO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAUKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAEO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAUKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAVO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAUKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAVO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAUKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;4BAkHcX,G,EAAK;AAChB,UAAIe,CAAC,GAAG,qBAAqBC,IAArB,CAA0BhB,GAA1B,CAAR;;AAEA,UAAGe,CAAH,EAAM;AACFf,WAAG,GAAGe,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,IAAUA,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAAV,GAAoBA,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAApB,GAA8BA,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAA9B,GAAwCA,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAAxC,GAAkDA,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,CAAxD;AACH,OAFD,MAEO;AACHA,SAAC,GAAG,qBAAqBC,IAArB,CAA0BhB,GAA1B,CAAJ;;AAEA,YAAGe,CAAH,EAAM;AACFf,aAAG,GAAGe,CAAC,CAAC,CAAD,CAAP;AACH,SAFD,MAEO;AACH,gBAAM,IAAIvE,KAAJ,iCAAmCwD,GAAnC,EAAN;AACH;AACJ;;AAEDA,SAAG,GAAGwS,QAAQ,CAACxS,GAAD,EAAM,EAAN,CAAd,CAfgB,CAiBhB;;AACA,aAAO,IAAIkS,IAAJ,CACHlS,GAAG,GAAG,YAAY,EADf,EAEHA,GAAG,GAAG,YAAY,CAFf,EAGHA,GAAG,GAAG,QAHH,CAAP;AAKH,K,CAED;;;;4BACeW,K,EAAO;AAClB,UAAII,CAAC,GAAG,mCAAmCC,IAAnC,CAAwCL,KAAxC,CAAR;;AAEA,UAAG,CAACI,CAAJ,EAAO;AACH,cAAM,IAAIvE,KAAJ,qCAAuCmE,KAAvC,EAAN;AACH;;AAED,aAAO,IAAIuR,IAAJ,CACHM,QAAQ,CAACzR,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CADL,EAEHyR,QAAQ,CAACzR,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAFL,EAGHyR,QAAQ,CAACzR,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAHL,CAAP;AAKH;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClNL;;;;IAIqBqZ,I;;;AACjB;;;;;;;;;AASA,gBAAYjV,IAAZ,EAAkBG,GAAlB,EAAuB0G,KAAvB,EAA8BC,MAA9B,EAAsC;AAAA;;AAClC,SAAK,CAAL,IAAU9G,IAAV;AACA,SAAK,CAAL,IAAUG,GAAV;AACA,SAAK,CAAL,IAAU0G,KAAV;AACA,SAAK,CAAL,IAAUC,MAAV;AACH;;;;wBAkCGwQ,W,EAAa;AACb,UAAG,QAAOA,WAAP,MAAuB,QAA1B,EAAoC;AAChC,aAAK,CAAL,IAAUA,WAAV;AACA,aAAK,CAAL,IAAUA,WAAV;AACA,aAAK,CAAL,IAAUA,WAAV;AACA,aAAK,CAAL,IAAUA,WAAV;AACH,OALD,MAKO;AACH,aAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAArB;AACA,aAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAArB;AACA,aAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAArB;AACA,aAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAArB;AACH;AACJ;;;wBAEGA,W,EAAa;AACb,UAAG,OAAOA,WAAP,KAAuB,QAA1B,EAAoC;AAChC,eAAO,KAAK5B,IAAL,CACH,KAAK,CAAL,IAAU4B,WADP,EAEH,KAAK,CAAL,IAAUA,WAFP,EAGH,KAAK,CAAL,IAAUA,WAHP,EAIH,KAAK,CAAL,IAAUA,WAJP,CAAP;AAMH,OAPD,MAOO;AACH,eAAO,KAAK5B,IAAL,CACH,KAAK,CAAL,IAAU4B,WAAW,CAAC,CAAD,CADlB,EAEH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAFlB,EAGH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAHlB,EAIH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAJlB,CAAP;AAMH;AACJ;;;6BAEQA,W,EAAa;AAClB,UAAG,OAAOA,WAAP,KAAuB,QAA1B,EAAoC;AAChC,eAAO,KAAK5B,IAAL,CACH,KAAK,CAAL,IAAU4B,WADP,EAEH,KAAK,CAAL,IAAUA,WAFP,EAGH,KAAK,CAAL,IAAUA,WAHP,EAIH,KAAK,CAAL,IAAUA,WAJP,CAAP;AAMH,OAPD,MAOO;AACH,eAAO,KAAK5B,IAAL,CACH,KAAK,CAAL,IAAU4B,WAAW,CAAC,CAAD,CADlB,EAEH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAFlB,EAGH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAHlB,EAIH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAJlB,CAAP;AAMH;AACJ,K,CAED;;;;2BACO9b,K,EAAO;AACV,aAAO,KAAKka,IAAL,CACH,KAAK,CAAL,IAAUla,KADP,EAEH,KAAK,CAAL,IAAUA,KAFP,EAGH,KAAK,CAAL,IAAUA,KAHP,EAIH,KAAK,CAAL,IAAUA,KAJP,CAAP;AAMH,K,CAED;;;;2BACO2b,I,EAAM;AACT,aAAOA,IAAI,KAAK,IAAT,IAAkBA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAAZ,IAAuBA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAAnC,IAA8CA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAA1D,IAAqEA,IAAI,CAAC,CAAD,CAAJ,KAAY,KAAK,CAAL,CAA1G;AACH,K,CAED;;;;wBACIG,W,EAAa;AACb,UAAG,OAAOA,WAAP,KAAuB,QAA1B,EAAoC;AAChC,eAAO,KAAK5B,IAAL,CACH,KAAK,CAAL,IAAU4B,WADP,EAEH,KAAK,CAAL,IAAUA,WAFP,EAGH,KAAK,CAAL,IAAUA,WAHP,EAIH,KAAK,CAAL,IAAUA,WAJP,CAAP;AAMH,OAPD,MAOO;AACH,eAAO,KAAK5B,IAAL,CACH,KAAK,CAAL,IAAU4B,WAAW,CAAC,CAAD,CADlB,EAEH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAFlB,EAGH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAHlB,EAIH,KAAK,CAAL,IAAUA,WAAW,CAAC,CAAD,CAJlB,CAAP;AAMH;AACJ,K,CAED;;;;6BACS;AACL,4BAAevQ,IAAI,CAACiH,KAAL,CAAW,KAAK/R,CAAhB,CAAf,eAAsC8K,IAAI,CAACiH,KAAL,CAAW,KAAK8G,CAAhB,CAAtC,eAA6D/N,IAAI,CAACiH,KAAL,CAAW,KAAKjR,CAAhB,CAA7D,eAAoF,KAAKD,CAAzF;AACH,K,CAED;;;;4BACQ;AACJ,aAAO,IAAI,KAAK1F,WAAT,CAAqB,KAAK,CAAL,CAArB,EAA8B,KAAK,CAAL,CAA9B,EAAuC,KAAK,CAAL,CAAvC,EAAgD,KAAK,CAAL,CAAhD,CAAP;AACH;;;yBAEI4I,I,EAAMG,G,EAAK0G,K,EAAOC,M,EAAQ;AAC3B,aAAO,IAAI,KAAK1P,WAAT,CAAqB4I,IAArB,EAA2BG,GAA3B,EAAgC0G,KAAhC,EAAuCC,MAAvC,CAAP;AACH,K,CAED;;;;wBAlIQ;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAEKtL,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAEO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAEKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAEO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAEKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;wBAEO;AACJ,aAAO,KAAK,CAAL,CAAP;AACH,K;sBAEKA,K,EAAO;AACT,WAAK,CAAL,IAAUA,KAAV;AACH;;;yCAqGmC;AAAA,UAAbS,CAAa,QAAbA,CAAa;AAAA,UAAV6Y,CAAU,QAAVA,CAAU;AAAA,UAAP/X,CAAO,QAAPA,CAAO;AAAA,UAAJD,CAAI,QAAJA,CAAI;AAChC,aAAO,IAAImY,IAAJ,CAAShZ,CAAT,EAAY6Y,CAAZ,EAAe/X,CAAf,EAAkBD,CAAlB,CAAP;AACH,K,CAED;;;;6BACgBtB,K,EAAO;AACnB,UAAII,CAAC,GAAG,mDAAmDC,IAAnD,CAAwDL,KAAxD,CAAR;;AAEA,UAAG,CAACI,CAAJ,EAAO;AACH,cAAM,IAAIvE,KAAJ,sCAAwCmE,KAAxC,EAAN;AACH;;AAED,aAAO,IAAIyZ,IAAJ,CACH5H,QAAQ,CAACzR,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CADL,EAEHyR,QAAQ,CAACzR,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAFL,EAGHyR,QAAQ,CAACzR,CAAC,CAAC,CAAD,CAAF,EAAO,EAAP,CAHL,EAIHG,UAAU,CAACH,CAAC,CAAC,CAAD,CAAF,CAJP,CAAP;AAMH;;;;;;;;;;;;;;;;;;AC1KL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AAGAwC,MAAM,CAACoN,yBAAP,GAAmCA,0EAAnC;AACApN,MAAM,CAACyP,yBAAP,GAAmCA,0EAAnC;;IAGqB0J,kB;;;AACjB,gCAAc;AAAA;AAEb;;;;2BAEM;AACH,UAAIC,QAAQ,GAAG/V,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,CAAf;AAEA,WAAK6H,SAAL,GAAiB,IAAI9I,yDAAJ,CAAc+W,QAAd,EAAwB;AAAC5W,eAAO,EAAE,uBAAV;AAAmCF,iBAAS,EAAEiJ,6DAAU,CAACC;AAAzD,OAAxB,CAAjB;AACA,WAAKqB,UAAL,GAAkB,IAAIhB,0DAAJ,CAAeuN,QAAf,EAAyB;AAACtN,eAAO,EAAE,KAAV;AAAiBjJ,cAAM,EAAE,aAAzB;AAAwCP,iBAAS,EAAEiJ,6DAAU,CAACC,MAA9D;AAAsEW,uBAAe,EAAE;AAAvF,OAAzB,CAAlB;AACA,WAAKiN,QAAL,GAAgBA,QAAhB;AACH","file":"test_resizeable.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pendora\"] = factory();\n\telse\n\t\troot[\"pendora\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tests/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","let TOPICS = Symbol('topics');\r\n\r\n\r\nexport function STOP() {\r\n    throw STOP;\r\n}\r\n\r\n\r\nexport default class Publisher {\r\n    constructor() {\r\n        this[TOPICS] = {};\r\n    }\r\n\r\n    on(topic, callback) {\r\n        if(!this[TOPICS][topic]) this[TOPICS][topic] = [];\r\n        this[TOPICS][topic].push(callback);\r\n        return this;\r\n    }\r\n\r\n    once(topic, fn) {\r\n        let on = (...args) => {\r\n            this.off(topic, fn);\r\n            return fn.apply(this, args);\r\n        };\r\n\r\n        on.fn = fn;\r\n        this.on(topic, fn);\r\n        return this;\r\n    }\r\n\r\n    off(topic, callback) {\r\n        if(arguments.length === 0) {\r\n            // CLear all topics.\r\n            this[TOPICS] = {};\r\n            return this;\r\n        } else if(arguments.length === 1) {\r\n            // Clear single topic.\r\n            this[TOPICS][topic] = [];\r\n            return this;\r\n        }\r\n\r\n        if(!this[TOPICS] || !this[TOPICS][topic] || !this[TOPICS][topic].length) {\r\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\r\n            return this;\r\n        }\r\n\r\n        let callbacks = this[TOPICS][topic];\r\n\r\n        for(let i = 0; i < callback.length; i++) {\r\n            let cb = callbacks[i];\r\n            if(cb === callback || cb.fn === callback) {\r\n                callbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(callbacks.length === 0) {\r\n            delete this[TOPICS][topic];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    hasEvent(topic, callback) {\r\n        if(arguments.length === 1) {\r\n            return !!this[TOPICS][topic];\r\n        } else {\r\n            let callbacks = this[TOPICS][topic];\r\n\r\n            for(let i = 0; i < callbacks.length; i++) {\r\n                let cb = callbacks[i];\r\n                if(cb === callback || cb.fn === callback) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    publish(topic, ...args) {\r\n        if(this[TOPICS][topic]) {\r\n            let callbacks = this[TOPICS][topic].slice(0);\r\n\r\n            for(let cb of callbacks) {\r\n                try {\r\n                    cb.apply(this, args);\r\n                } catch (e) {\r\n                    if(e === STOP) {\r\n                        return e;\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n\r\n\r\nexport class UnitError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if (!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n","import {EASING} from \"./easing\";\r\nimport FX from \"./FX\";\r\nimport {defaultApplyFrame} from \"./frame\";\r\n\r\n\r\nexport default class Animation {\r\n    static defaultApplyFrame = defaultApplyFrame;\r\n\r\n    static complete = FX.complete;\r\n    static canceled = FX.canceled;\r\n    static paused = FX.paused;\r\n    static pending = FX.pending;\r\n    static error = FX.error;\r\n    static playing = FX.playing;\r\n\r\n    /**\r\n     *\r\n     * @param duration\r\n     * @param frames {{}|function(Element element, Animation animation):{}}\r\n     * @param applyFrame - The function that takes a frame and applies it to the element.\r\n     * @param bubbleFrameEvent\r\n     * @param finishFrame\r\n     */\r\n    constructor({duration=null, frames, applyFrame = defaultApplyFrame, bubbleFrameEvent = false, finishFrame = null}) {\r\n        this.frames = frames;\r\n        this.applyFrame = applyFrame || Animation.defaultApplyFrame;\r\n        this.bubbleFrameEvent = bubbleFrameEvent;\r\n        this.finishFrame = finishFrame;\r\n        this.duration = duration;\r\n    }\r\n\r\n    /**\r\n     * Creates an fx object.\r\n     *\r\n     * @param element\r\n     * @param frames\r\n     * @param duration\r\n     * @param applyFrame\r\n     * @param easing\r\n     * @param onStart\r\n     * @param onFrame\r\n     * @param onPause\r\n     * @param onCancel\r\n     * @param onEnd\r\n     * @param onComplete\r\n     * @param bubbleFrameEvent\r\n     * @param finishFrame\r\n     * @returns {FX}\r\n     */\r\n    init({element, frames, duration, applyFrame, easing, onStart, onFrame, onPause, onCancel, onEnd, onComplete, bubbleFrameEvent, finishFrame}) {\r\n        return new FX(element, frames, duration, {\r\n            applyFrame,\r\n            easing,\r\n            animation: this,\r\n            onStart,\r\n            onFrame,\r\n            onPause,\r\n            onCancel,\r\n            onEnd,\r\n            onComplete,\r\n            bubbleFrameEvent,\r\n            finishFrame,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Ran after the fx completes.\r\n     * @param fx\r\n     */\r\n    destroy(fx) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Animates the given element.  Returns the FX object that can be used to control the animation.\r\n     *\r\n     * @param element {HTMLElement|Element} The element to animate.\r\n     * @param duration {Number} The duration of the animation in milliseconds.\r\n     * @param easing {function(Number)} An easing function that controls the rate of change for the animation.  If null linear animation is used.\r\n     * @param onStart {function(FX)} A callback function that is called right before the animation starts playing.\r\n     * @param onFrame {function(FX, frame)} A callback that is called per frame.\r\n     * @param onPause {function(FX)} A callback that is called when the FX pauses.\r\n     * @param onCancel {function(FX)} A callback that is called when the FX cancels.\r\n     * @param onEnd {function(FX)} A callback that is called when the animation ends.  Whether by completing, pausing, or canceling.  See Fx.status to determine what happened.\r\n     * @param onComplete {function(FX)} A callback that is called when the animation complete successfully.\r\n     * @param position\r\n     * @param autoPlay\r\n     * @returns {FX}\r\n     */\r\n    animate(element, {duration=null, easing = EASING.linear, onStart = null, onFrame = null, onPause = null, onCancel = null, onEnd = null, onComplete = null, position=0, autoPlay=true} = {}) {\r\n        if(duration === null) {\r\n            duration = this.duration;\r\n        }\r\n\r\n        let fx = this.init({\r\n            element: element,\r\n            frames: this.frames,\r\n            duration,\r\n            applyFrame: this.applyFrame,\r\n            easing,\r\n            animation: this,\r\n            onStart,\r\n            onFrame,\r\n            onPause,\r\n            onCancel,\r\n            onEnd: (fx) => {\r\n                if(onEnd) onEnd.call(fx, fx);\r\n                this.destroy(fx);\r\n            },\r\n            onComplete,\r\n            bubbleFrameEvent: this.bubbleFrameEvent,\r\n            finishFrame: this.finishFrame\r\n        });\r\n\r\n        if(position) {\r\n            fx.goto(position);\r\n        }\r\n\r\n        if(autoPlay) {\r\n            fx.play();\r\n        }\r\n        return fx;\r\n    }\r\n\r\n    goto(element, position) {\r\n        this.animate(element, {autoPlay: false, position: position});\r\n        return Animation.complete;\r\n    }\r\n\r\n    /**\r\n     * Creates a function that calls the animate method with the bound parameters.\r\n     * Parameters can be overridden in the created function when called.\r\n     * Method has the same signature as the animate method.\r\n     *\r\n     * Usage:\r\n     * let animation = new Animation(...),\r\n     *     fx = animation.bind(null, 2000);\r\n     *\r\n     * fx(element) // Animation the element over 2000 milliseconds.\r\n     *\r\n     * @param element\r\n     * @param config\r\n     * @returns {function(HTMLElement element, Number duration, Object config): FX}\r\n     */\r\n    bind(element = null, config = null) {\r\n        let defaults = {\r\n            element,\r\n            config\r\n        };\r\n\r\n        return (element = defaults, config=null) => {\r\n            element = element === defaults ? element.defaults : element;\r\n\r\n            let _options = {};\r\n            if (defaults.config) Object.assign(_options, defaults.config);\r\n            if (config) Object.assign(_options, config);\r\n\r\n            return this.animate(element, _options);\r\n        };\r\n    }\r\n}\r\n","import {ExtendableError} from \"../errors\";\r\nimport {selectElement} from \"../utility\";\r\nimport {RGBA} from \"../vectors\";\r\nimport {NumberWithUnit} from \"./types\";\r\nimport {EASING} from \"./easing\";\r\nimport {defaultApplyFrame} from \"./frame\";\r\n\r\n\r\nconst regNumberWithUnit = /^(\\d+\\.?\\d*)([a-z]+|%)$/i,\r\n    regColor = /^(?:#([a-f0-9]{3})|#([a-f0-9]{6})|#([a-f0-9]{8}))$/i,\r\n    regFunction = /^([a-z_][a-z_0-9]*)\\((.+?)\\)$/i;\r\n\r\n\r\nconst TYPE_FUNCTIONS = {\r\n    hex: RGBA.parseHexColorStringArg,\r\n    rgb: RGBA.parseRGBAColorStringArgs,\r\n    rgba: RGBA.parseRGBAColorStringArgs\r\n};\r\n\r\n\r\nexport class DeadFXError extends ExtendableError {}\r\n\r\n\r\nfunction assertFXAlive(fx) {\r\n    if (fx.status === FX.complete || fx.status === FX.error || fx.status === FX.complete) {\r\n        throw new DeadFXError(\"FX object is dead.\");\r\n    }\r\n}\r\n\r\n\r\nfunction doPromiseAction(onAction, value, resolveOrReject) {\r\n    if (typeof onAction === 'function') {\r\n        value = onAction(value);\r\n    }\r\n\r\n    resolveOrReject(value);\r\n}\r\n\r\n\r\nfunction _prepareValue(value) {\r\n    if (typeof value === 'string') {\r\n        value = value.trim();\r\n\r\n        let m = regNumberWithUnit.exec(value);\r\n\r\n        if (m) {\r\n            return new NumberWithUnit(parseFloat(m[1]), m[2]);\r\n        }\r\n\r\n        m = regColor.exec(value);\r\n\r\n        if (m) {\r\n            return TYPE_FUNCTIONS.hex(m[0]);\r\n        }\r\n\r\n        m = regFunction.exec(value);\r\n\r\n        if (m) {\r\n            return TYPE_FUNCTIONS[m[1]](m[2]);\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nfunction _getFrames(fx, element, frames) {\r\n    let r = {};\r\n\r\n    if (typeof frames === 'function') {\r\n        frames = frames.call(fx, element, fx);\r\n    }\r\n\r\n    for (let keyframeIndex in frames) {\r\n        if (!frames.hasOwnProperty(keyframeIndex)) continue;\r\n\r\n        let frame = frames[keyframeIndex];\r\n        r[keyframeIndex] = {};\r\n\r\n        for (let property in frame) {\r\n            if (!frame.hasOwnProperty(property)) continue;\r\n            r[keyframeIndex][property] = _prepareValue(frame[property]);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * @implements Promise\r\n */\r\nexport default class FX {\r\n    static pending = \"Pending\";\r\n    static complete = \"Complete\";\r\n    static error = \"Error\";\r\n    static paused = \"Paused\";\r\n    static canceled = \"Canceled\";\r\n    static playing = \"Playing\";\r\n\r\n    #element;\r\n    #chained;\r\n    #frames;\r\n    #internalValue;\r\n\r\n    #animation;\r\n\r\n    #frameId;\r\n    #status;\r\n    #position;\r\n\r\n    #finishFrame;\r\n    #applyFrame;\r\n    #easing;\r\n    #duration;\r\n\r\n    [Symbol.toStringTag] = \"[Object FX]\";\r\n\r\n    constructor(element, frames, duration, {applyFrame = defaultApplyFrame, animation = null, easing = EASING.linear, onComplete = null, onCancel = null, onFrame = null, onStart = null, onEnd = null, bubbleFrameEvent = false, finishFrame = null, init = null} = {}) {\r\n        this.#frames = [];\r\n        this.#chained = [];\r\n        this.#element = selectElement(element);\r\n        this.#internalValue = undefined;\r\n\r\n        this.onComplete = onComplete;\r\n        this.onCancel = onCancel;\r\n        this.onFrame = onFrame;\r\n        this.onStart = onStart;\r\n        this.onEnd = onEnd;\r\n        this.bubbleFrameEvent = bubbleFrameEvent;\r\n\r\n        this.#animation = animation;\r\n        this.#finishFrame = finishFrame;\r\n        this.#applyFrame = applyFrame;\r\n        this.#easing = easing;\r\n        this.#frameId = null;\r\n        this.#status = FX.pending;\r\n\r\n        this.#duration = duration;\r\n        this.#position = 0;\r\n\r\n        if (init) {\r\n            init.call(this, this);\r\n        }\r\n\r\n        // Prepare frames\r\n        frames = _getFrames(this, this.#element, frames);\r\n\r\n        for (let key in frames) {\r\n            if (frames.hasOwnProperty(key)) {\r\n                let frame = frames[key],\r\n                    pos = parseFloat(key) / 100;\r\n\r\n                if (typeof frame === 'function') {\r\n                    frame = frame.call(this, this.#element);\r\n                }\r\n\r\n                frame = Object.freeze(Object.assign({}, frame));\r\n\r\n                this.#frames.push(Object.freeze({\r\n                    position: pos,\r\n                    properties: frame\r\n                }));\r\n            }\r\n        }\r\n\r\n        this.#frames.sort((a, b) => a.position - b.pos);\r\n    }\r\n\r\n    get animation() {\r\n        return this.#animation;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get easing() {\r\n        return this.#easing;\r\n    }\r\n\r\n    get status() {\r\n        return this.#status;\r\n    }\r\n\r\n    get position() {\r\n        return this.#position;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get duration() {\r\n        return this.#duration;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get frames() {\r\n        return this.#frames.slice();\r\n    }\r\n\r\n    get element() {\r\n        return this.#element;\r\n    }\r\n\r\n    // set position(value) {\r\n    //     if (typeof value === 'string') {\r\n    //         value = (parseFloat(value) / 100) * this.#duration;\r\n    //     }\r\n    //\r\n    //     this.#position = Math.max(0.0, Math.min(this.#duration, value));\r\n    // }\r\n\r\n    get state() {\r\n        if (this.status === FX.complete || this.status === FX.canceled) {\r\n            return \"Fulfilled\";\r\n        } else if (this.status === FX.error) {\r\n            return \"Rejected\";\r\n        } else {\r\n            return \"Pending\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the frame options at the given position.\r\n     * @param position\r\n     */\r\n    getFrameFX(position) {\r\n        // position can either be a percentage string (aka 50%) or the time in milliseconds into the animation\r\n        // which will be converted into a percentage.\r\n        if (typeof position === 'string') {\r\n            position = parseFloat(position) / 100;\r\n        }\r\n\r\n        // At this point position should be a value between 0.0 and 1.0.\r\n        // Easing functions specify that rate of change in the properties.\r\n        // It takes the position and maps it to another value between 0.0f and 1.0f.\r\n        // By default linear easing is used.\r\n        if (this.#easing) {\r\n            position = this.#easing(position);\r\n        }\r\n\r\n        let r = {};\r\n\r\n        for (let frame of this.#frames) {\r\n            for (let key in frame.properties) {\r\n                if (frame.properties.hasOwnProperty(key)) {\r\n                    let value = frame.properties[key];\r\n\r\n                    if (!r[key]) {\r\n                        r[key] = {startPosition: null, startValue: null, endPosition: null, endValue: null};\r\n                    }\r\n\r\n                    if (frame.position <= position) {\r\n                        r[key].startPosition = frame.position;\r\n                        r[key].startValue = value;\r\n                    } else if (frame.position > position && r[key].endPosition === null) {\r\n                        r[key].endPosition = frame.position;\r\n                        r[key].endValue = value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Returns the final frame at the given position.  All options at this point should be parsed and there final values\r\n     * should be available.\r\n     *\r\n     * @param position\r\n     */\r\n    getFrame(position) {\r\n        let frame = this.getFrameFX(position),\r\n            r = {};\r\n\r\n        if (typeof position === 'string') {\r\n            position = parseFloat(position) / 100;\r\n        }\r\n\r\n        // Takes the frame config options and calculates the final values.\r\n        for (let property in frame) {\r\n            if (frame.hasOwnProperty(property)) {\r\n                let options = frame[property];\r\n\r\n                if ((options.endPosition === null || options.endPosition <= position) && options.startValue !== null) {\r\n                    r[property] = options.startValue;\r\n                } else if (options.startValue !== null) {\r\n                    if (typeof options.startValue === 'object') {\r\n                        let p = (position - options.startPosition) / (options.endPosition - options.startPosition),\r\n                            delta = options.endValue.subtract(options.startValue);\r\n\r\n                        r[property] = options.startValue.add(delta.scalar(p));\r\n                    } else if (typeof options.startValue === 'number') {\r\n                        let duration = (options.endPosition - options.startPosition),\r\n                            p = (position - options.startPosition) / duration,\r\n                            delta = options.endValue - options.startValue;\r\n\r\n                        r[property] = options.startValue + (delta * p);\r\n                    } else {\r\n                        r[property] = options.startValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // User provided hook that can perform the final touch ups on the frame.\r\n        if (this.#finishFrame) {\r\n            r = this.#finishFrame(this, frame);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    play() {\r\n        assertFXAlive(this);\r\n\r\n        if (this.#frameId === null) {\r\n            this.goto(this.#position);\r\n\r\n            let tick = performance.now();\r\n\r\n            let frameFN = () => {\r\n                let timestamp = performance.now(),\r\n                    delta = timestamp - tick,\r\n                    position = this.#position + (delta / this.duration);\r\n\r\n                tick = timestamp;\r\n                let frame = this.goto(position);\r\n                this.#status = FX.playing;\r\n\r\n                if (this.onFrame) this.onFrame.call(this, this, frame);\r\n\r\n                this.#element.dispatchEvent(new CustomEvent('animation.frame', {\r\n                    bubbles: this.bubbleFrameEvent,\r\n                    detail: this\r\n                }));\r\n\r\n                if (this.#position < 1) {\r\n                    this.#frameId = window.requestAnimationFrame(frameFN);\r\n                } else {\r\n                    this._complete(FX.complete, FX.complete);\r\n                    this.#frameId = null;\r\n                }\r\n            };\r\n\r\n            if (this.onStart) {\r\n                this.onStart.call(this, this);\r\n            }\r\n\r\n            this.#element.dispatchEvent(new CustomEvent('animation.start', {\r\n                bubbles: true,\r\n                detail: this\r\n            }));\r\n\r\n            this.#frameId = window.requestAnimationFrame(frameFN);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Pauses the animation.  Does not resolve it.\r\n     * @returns {FX}\r\n     */\r\n    pause() {\r\n        if (this.#frameId) {\r\n            window.cancelAnimationFrame(this.#frameId);\r\n            this.#frameId = null;\r\n            this.#status = FX.paused;\r\n\r\n            this.#element.dispatchEvent(new CustomEvent('animation.paused', {\r\n                bubbles: true,\r\n                detail: this\r\n            }));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    _cancel(complete = false, status = FX.canceled) {\r\n        if (this.#frameId) {\r\n            window.cancelAnimationFrame(this.#frameId);\r\n            this.#frameId = null;\r\n\r\n            if (complete) {\r\n                this.goto(1);\r\n                this._complete(status, status);\r\n            } else {\r\n                this.#status = status;\r\n                this.#internalValue = status;\r\n            }\r\n\r\n            if (this.onCancel) this.onCancel.call(this, this);\r\n\r\n            this.#element.dispatchEvent(new CustomEvent('animation.canceled', {\r\n                bubbles: true,\r\n                detail: this\r\n            }));\r\n\r\n            this._triggerEndEvent();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Cancel the animation with the canceled state.   optionally sets the animation to it's final frame if\r\n     * completeAnimation is true.\r\n     *\r\n     * @param completeAnimation\r\n     * @returns {FX}\r\n     */\r\n    cancel(completeAnimation = false) {\r\n        return this._cancel(completeAnimation, FX.canceled);\r\n    }\r\n\r\n    /**\r\n     * Completes the animation immediately and sets is status to complete.\r\n     * @returns {FX}\r\n     */\r\n    complete() {\r\n        return this._cancel(true, FX.complete);\r\n    }\r\n\r\n    goto(position) {\r\n        assertFXAlive(this);\r\n\r\n        if (typeof position === 'string') {\r\n            position = parseFloat(position) / 100;\r\n        }\r\n\r\n        this.#position = position;\r\n        return this.applyFrame(this.position);\r\n    }\r\n\r\n    applyFrame(position) {\r\n        let frame = this.getFrame(position);\r\n        this.#applyFrame.call(this, this, frame);\r\n        return frame;\r\n    }\r\n\r\n    _triggerEndEvent() {\r\n        if (this.onEnd) this.onEnd.call(this, this);\r\n\r\n        this.#element.dispatchEvent(new CustomEvent('animation.end', {\r\n            bubbles: true,\r\n            detail: this\r\n        }));\r\n\r\n        for (let {onResolve} of this.#chained) {\r\n            if (onResolve) onResolve(this.#internalValue);\r\n        }\r\n        this.#chained = [];\r\n    }\r\n\r\n    _complete(value, status = FX.complete) {\r\n        if (this.state !== \"Pending\") {\r\n            return;\r\n        }\r\n\r\n        this.#status = status;\r\n        this.#internalValue = value;\r\n\r\n        if (this.onComplete) this.onComplete.call(this, this);\r\n\r\n        this.#element.dispatchEvent(new CustomEvent('animation.complete', {\r\n            bubbles: true,\r\n            detail: this\r\n        }));\r\n\r\n        this._triggerEndEvent();\r\n    }\r\n\r\n    then(onResolve, onReject) {\r\n        if (this.state === \"Pending\") {\r\n            return new Promise((resolve, reject) => {\r\n                // noinspection JSUnusedGlobalSymbols\r\n                this.#chained.push({\r\n                    onResolve: (value) => {\r\n                        doPromiseAction(onResolve, value, resolve);\r\n                    },\r\n\r\n                    onReject: (value) => {\r\n                        doPromiseAction(onReject, value, reject);\r\n                    }\r\n                });\r\n            });\r\n        } else if (this.state === 'Fulfilled' && typeof onResolve === 'function') {\r\n            return new Promise((resolve) => {\r\n                doPromiseAction(onResolve, this.#internalValue, resolve);\r\n            });\r\n        } else if (this.state === 'Rejected' && typeof onReject === 'function') {\r\n            return new Promise((resolve, reject) => {\r\n                doPromiseAction(onReject, this.#internalValue, reject);\r\n            });\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    finally(onFinally) {\r\n        onFinally = (value) => {\r\n            if (typeof onFinally === 'function') {\r\n                onFinally();\r\n            }\r\n\r\n            return value;\r\n        };\r\n\r\n        return this.then(onFinally, onFinally);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    catch(onReject) {\r\n        return this.then(undefined, onReject);\r\n    }\r\n}\r\n","/**\r\n *\r\n * @param p\r\n * @returns {*}\r\n */\r\nexport function linear(p) {\r\n    return p;\r\n}\r\n\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport const EASING = {\r\n    linear: linear\r\n};\r\n","export function defaultApplyFrame(fx, frame) {\r\n    for (let key in frame) {\r\n        if (frame.hasOwnProperty(key)) {\r\n            fx.element.style[key] = frame[key].toString();\r\n        }\r\n    }\r\n}\r\n","export class NumberWithUnit {\r\n    constructor(value, unit) {\r\n        this.value = value;\r\n        this.unit = unit;\r\n    }\r\n\r\n    add(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n\r\n        return new NumberWithUnit(this.value + value, this.unit);\r\n    }\r\n\r\n    subtract(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n        return new NumberWithUnit(this.value - value, this.unit);\r\n    }\r\n\r\n    scalar(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n        return new NumberWithUnit(this.value * value, this.unit);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    divide(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n        return new NumberWithUnit(this.value / value, this.unit);\r\n    }\r\n\r\n    toString() {\r\n        return `${this.value}${this.unit}`;\r\n    }\r\n}\r\n","import Publisher from \"../Publisher\";\r\nimport {calcDistance, clamp} from \"../utility\";\r\nimport Rect from \"../vectors/Rect\";\r\nimport {getScroll} from \"../utility\";\r\nimport {setElementClientPosition} from \"./position\";\r\nimport Animation from \"../fx/Animation\";\r\n\r\n\r\nconst reg_percentage_test = /\\s*\\d+\\.?\\d*%\\s*/;\r\n\r\n\r\n/**\r\n * Returns the offset position of the mouse relative to the target.\r\n *\r\n * @param target\r\n * @param event\r\n * @returns {{x: number, y: number}}\r\n */\r\nexport function cursor(target, event) {\r\n    let rect = new Rect(target);\r\n\r\n    return {\r\n        x: event.clientX - rect.left,\r\n        y: event.clientY - rect.top\r\n    };\r\n}\r\n\r\n\r\nfunction buildTestIntersectionFunction(amount) {\r\n    return function(element, rect) {\r\n        rect = new Rect(rect);\r\n\r\n        let targetRect = new Rect(element),\r\n            intersection = targetRect.intersection(rect),\r\n            p = intersection ? intersection.getArea() / rect.getArea() : 0;\r\n\r\n        if(amount === 0) {\r\n            return p > 0;\r\n        } else {\r\n            return p >= amount;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default class Draggable extends Publisher {\r\n    #element;\r\n    #droppables;\r\n    #boundOnMouseDown;\r\n    #itemCache;\r\n\r\n    constructor(element, {container=null, axis='xy', exclude='', delay=0, offset=cursor,\r\n        resistance=0, handle=null, helper=null, revert=false, revertDuration=0,\r\n        scrollSpeed=0, selector=null, tolerance=0.5, setHelperSize=false, grid=null}={}) {\r\n        super();\r\n\r\n        if(typeof element === 'string') {\r\n            this.#element = document.querySelector(element);\r\n        } else {\r\n            this.#element = element;\r\n        }\r\n\r\n        this.#droppables = [];\r\n        this.#itemCache = new WeakMap();\r\n\r\n        this.container = container;\r\n        this.axis = axis;\r\n        this.exclude = exclude;\r\n        this.delay = delay;\r\n        this.offset = offset;\r\n        this.resistance = resistance;\r\n        this.handle = handle;\r\n        this.helper = helper;\r\n        this.revert = revert;\r\n        this.revertDuration = revertDuration;\r\n        this.scrollSpeed = scrollSpeed;\r\n        this.selector = selector;\r\n        this.tolerance = tolerance;\r\n        this.setHelperSize = setHelperSize;\r\n        this.grid = grid;\r\n\r\n        if(typeof this.container === 'string') {\r\n            this.container = document.querySelector(this.container);\r\n        }\r\n\r\n        this.#boundOnMouseDown = event => {\r\n            return this.onMouseDown(event);\r\n        };\r\n\r\n        this.element.addEventListener('mousedown', this.#boundOnMouseDown);\r\n    }\r\n\r\n    /**\r\n     * Starts dragging if the correct elements have been targeted and delay and resistance have been meet.\r\n     *\r\n     * @param event\r\n     * @returns {Promise<void>}\r\n     */\r\n    async onMouseDown(event) {\r\n        let startPosition = {x: event.clientX + window.pageXOffset, y: event.clientY + window.pageYOffset},\r\n            currentPosition = {x: startPosition.x, y: startPosition.y},\r\n            target = this.#element,\r\n            cancelMouseTracking = null,\r\n            cancelTimer = null,\r\n            distanceBrokenPromise,\r\n            timerPromise,\r\n            offset;\r\n\r\n        // Only start dragging if a draggable child of the element is targeted.\r\n        // If selector is null then the entire element is draggable and should be the target.\r\n        if(this.selector) {\r\n            target = event.target.closest(this.selector);\r\n\r\n            if(!target || !this.#element.contains(target)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Only start dragging if the handle was targeted.\r\n        // If handle is null then the entire target is the handle.\r\n        if(this.handle) {\r\n            let handle = event.target.closest(this.handle);\r\n\r\n            if(!handle || !target.contains(handle)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // If any excluded elements are targeted ignore the event.\r\n        if(this.exclude) {\r\n            let exclude = event.target.closest(this.exclude);\r\n\r\n            if(exclude && target.contains(exclude)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Find the offset of the event.\r\n        if(typeof this.offset === 'function') {\r\n            offset = this.offset(target, event);\r\n        } else if(Array.isArray(this.offset)) {\r\n            offset = {\r\n                x: this.offset[0],\r\n                y: this.offset[1]\r\n            };\r\n        } else if(typeof this.offset === 'object') {\r\n            offset = {\r\n                x: this.offset.x,\r\n                y: this.offset.y\r\n            };\r\n        } else {\r\n            offset = {x: 0, y: 0};\r\n        }\r\n\r\n        // Prevent default browser actions.\r\n        event.preventDefault();\r\n\r\n        // At this point we can be sure that a draggable item was\r\n        // targeted by it's handle and no excluded items where clicked.\r\n\r\n        // Creates a promise that both tracks the current mouse coords and resolve\r\n        // when the user passes the given resistance.\r\n        distanceBrokenPromise = new Promise(resolve => {\r\n            let isDistanceBroken = this.resistance <= 0;\r\n\r\n            if(isDistanceBroken) {\r\n                resolve('complete');\r\n            }\r\n\r\n            let onMouseMove = event => {\r\n                currentPosition.x = event.clientX + window.pageXOffset;\r\n                currentPosition.y = event.clientY + window.pageYOffset;\r\n                event.preventDefault();\r\n\r\n                if(!isDistanceBroken && calcDistance(currentPosition.x, currentPosition.y, startPosition.x, startPosition.y) > this.resistance) {\r\n                    resolve('complete');\r\n                    isDistanceBroken = true;\r\n                }\r\n            };\r\n\r\n            // Cancel mouse tracking and resolve the promise to canceled if hasn't already been resolve.\r\n            // This function must be called or their will be a memory leak before onMouseDown completes.\r\n            cancelMouseTracking = () => {\r\n                if(onMouseMove) {\r\n                    document.removeEventListener('mousemove', onMouseMove);\r\n\r\n                    if(!isDistanceBroken) {\r\n                        resolve('canceled');\r\n                    }\r\n\r\n                    onMouseMove = null;\r\n                }\r\n            };\r\n\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        });\r\n\r\n        // Creates a promise that resolve when after the delay time passes or the user cancels the drag by\r\n        // releasing the mouse button.\r\n        timerPromise = new Promise(resolve => {\r\n            let timer = null;\r\n\r\n            if(this.delay >= 0) {\r\n                timer = setTimeout(() => {\r\n                    resolve(\"complete\");\r\n                    timer = null;\r\n                }, this.delay);\r\n            } else {\r\n                resolve('complete');\r\n            }\r\n\r\n            // cancel the timer and resolve it to canceled if it is still active.\r\n            cancelTimer = () => {\r\n                if(timer) {\r\n                    clearTimeout(timer);\r\n                    resolve('canceled');\r\n                }\r\n            };\r\n        });\r\n\r\n        // cancel the timer and mouse tracking if they are still active.\r\n        let onMouseUp = event => {\r\n            event.preventDefault();\r\n            cancelTimer();\r\n            cancelMouseTracking();\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n        };\r\n\r\n        document.addEventListener('mouseup', onMouseUp);\r\n\r\n        // Wait until the delay time and distance have passed or failed.\r\n        let [timerStatus, distanceStatus] = await Promise.all([timerPromise, distanceBrokenPromise]);\r\n\r\n        // Ensure that mouse tracking has been canceled.\r\n        if(cancelMouseTracking) cancelMouseTracking();\r\n\r\n        // At this point both the timer and distance status should have passed or failed.\r\n        // If either failed do nothing.\r\n        if(timerStatus === 'complete' && distanceStatus === 'complete') {\r\n            this.startDragging(target, {\r\n                offsetX: offset.x,\r\n                offsetY: offset.y,\r\n                // Make relative to client.\r\n                startingX: currentPosition.x,\r\n                startingY: currentPosition.y\r\n            });\r\n        }\r\n    }\r\n\r\n    async startDragging(element, pos) {\r\n        let cache = this.#itemCache.get(element),\r\n            mousePosition = {x: pos.startingX, y: pos.startingY};\r\n\r\n        if(!cache) {\r\n            cache = {isDragging: false, fx: null, rect: null, helper: null, element: element};\r\n            this.#itemCache.set(element, cache);\r\n        }\r\n\r\n        if(cache.isDragging) {\r\n            return;\r\n        }\r\n\r\n        cache.isDragging = true;\r\n\r\n        if(cache.fx) {\r\n            await cache.fx.cancel();\r\n            cache.fx = null;\r\n        }\r\n\r\n        let target = element,\r\n            container = this.container,\r\n            scroller = null,\r\n            dropTargets = [],\r\n            startPosition = new Rect(element),\r\n            startingClientRect = startPosition;\r\n\r\n        startPosition = startPosition.translate(\r\n            window.pageXOffset,\r\n            window.pageYOffset\r\n        );\r\n\r\n        if(!cache.rect) {\r\n            cache.rect = startPosition;\r\n        }\r\n\r\n        if(typeof container === 'string') {\r\n            container = document.querySelector(container);\r\n        }\r\n\r\n        if(this.helper) {\r\n            if(typeof this.helper === 'function') {\r\n                target = this.helper(element);\r\n            } else {\r\n                target = this.helper;\r\n            }\r\n\r\n            if(this.setHelperSize) {\r\n                target.style.width = startPosition.width + \"px\";\r\n                target.style.height = startPosition.height + \"px\";\r\n            }\r\n\r\n            target.style.pointerEvents = 'none';\r\n\r\n            if(!target.parentElement && element.parentElement) {\r\n                element.parentElement.appendChild(target);\r\n            }\r\n\r\n            target.classList.add('ui-drag-helper');\r\n\r\n            cache.helper = target;\r\n        }\r\n\r\n        let refreshDropTargets = (rect) => {\r\n            // drag-enter\r\n            let mouseX = mousePosition.x - window.pageXOffset,\r\n                mouseY = mousePosition.y - window.pageYOffset,\r\n                currentDropTargets,\r\n                detail = {clientX: mouseX, clientY: mouseY};\r\n\r\n            if(rect !== null) {\r\n                currentDropTargets = this.getDropTargets(rect, {mouseX, mouseY});\r\n            } else {\r\n                currentDropTargets = [];\r\n            }\r\n\r\n            for(let dropTarget of currentDropTargets) {\r\n                if(dropTargets.indexOf(dropTarget) === -1) {\r\n                    dispatchDropEvent(this, 'drag.enter', element, target, null, rect, true, true, false, detail, dropTarget);\r\n                }\r\n            }\r\n\r\n            for(let dropTarget of dropTargets) {\r\n                if(currentDropTargets.indexOf(dropTarget) === -1) {\r\n                    dispatchDropEvent(this, 'drag.leave', element, target, null, rect, true, true, false, detail, dropTarget);\r\n                }\r\n            }\r\n\r\n            // drag-leave\r\n            dropTargets = currentDropTargets;\r\n        };\r\n\r\n        let onMouseMove = event => {\r\n            event.preventDefault();\r\n            let rect = _moveElementToPosition(this, target, event.clientX, event.clientY, pos.offsetX, pos.offsetY, _selectElementRect(container, this, target, element));\r\n\r\n            mousePosition.x = event.clientX + window.pageXOffset;\r\n            mousePosition.y = event.clientY + window.pageYOffset;\r\n\r\n            if(this.scrollSpeed > 0) {\r\n                if(scroller) {\r\n                    scroller.cancel();\r\n                    scroller = null;\r\n                }\r\n\r\n                scroller = ScrollHelper.buildScrollHelper(element, target, rect, pos, this, event, this.scrollSpeed, container);\r\n            }\r\n\r\n            refreshDropTargets(rect);\r\n\r\n            publishDragMoveEvent(this, element, target, event, rect);\r\n        };\r\n\r\n        let onMouseUp = async event => {\r\n            event.preventDefault();\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n            cache.isDragging = false;\r\n            element.classList.remove('ui-dragging');\r\n\r\n            if(scroller) {\r\n                scroller.cancel();\r\n                scroller = null;\r\n            }\r\n\r\n            let accepted = false,\r\n                isDefaultPrevented = false,\r\n                reverted = false,\r\n                rect = new Rect(target);\r\n\r\n            publishDragDropEvent(this, element, target, event, rect, false, {\r\n                isDefaultPrevented() {\r\n                    return isDefaultPrevented;\r\n                },\r\n\r\n                isAccepted() {\r\n                    return accepted;\r\n                },\r\n\r\n                accept() {\r\n                    accepted = true;\r\n                },\r\n\r\n                preventDefault() {\r\n                    isDefaultPrevented = true;\r\n                }\r\n            });\r\n\r\n            if(this.revert && !accepted) {\r\n                refreshDropTargets(cache.rect);\r\n                rect = cache.rect;\r\n\r\n                if(!this.revertDuration) {\r\n                    if(target !== element) {\r\n                        target.parentElement.removeChild(target);\r\n                    } else {\r\n                        let pos = startPosition.translate(\r\n                            -window.pageXOffset,\r\n                            -window.pageYOffset\r\n                        );\r\n\r\n                        setElementClientPosition(target, pos, 'translate3d');\r\n                    }\r\n                } else {\r\n                    cache.fx = _revert(target, cache.rect, this.revertDuration);\r\n\r\n                    await cache.fx;\r\n\r\n                    if(target !== element) {\r\n                        target.parentElement.removeChild(target);\r\n                    }\r\n                }\r\n\r\n                reverted = true;\r\n            } else {\r\n                if(target !== element) {\r\n                    target.parentElement.removeChild(target);\r\n                    setElementClientPosition(element, rect, 'translate3d');\r\n                }\r\n            }\r\n\r\n            this.#itemCache.delete(element);\r\n\r\n            dispatchDropEvent(this, 'drag.end', element, target, event, rect, true, true, true, {accepted, reverted}, element);\r\n        };\r\n\r\n        // Set target to starting position.\r\n        if(mousePosition.x !== undefined && mousePosition.y !== undefined) {\r\n            let rect = _moveElementToPosition(this, target, mousePosition.x - window.pageXOffset, mousePosition.y - window.pageYOffset, pos.offsetX, pos.offsetY, _selectElementRect(container, this, target, element));\r\n            refreshDropTargets(rect);\r\n        }\r\n\r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n        element.classList.add('ui-dragging');\r\n\r\n        dispatchDropEvent(this, 'drag.start', element, target, null, startingClientRect, true, true, true, null);\r\n    }\r\n\r\n    getDropTargets(rect, mousePos) {\r\n        let r = [];\r\n\r\n        /**\r\n         * @type {number|String|Function|string}\r\n         */\r\n        let testFunction = this.tolerance,\r\n            type = typeof testFunction;\r\n\r\n        if(type === 'string') {\r\n            // noinspection JSCheckFunctionSignatures\r\n            if(reg_percentage_test.test(testFunction)) {\r\n                // noinspection JSCheckFunctionSignatures\r\n                testFunction = buildTestIntersectionFunction(parseFloat(testFunction) / 100);\r\n            }\r\n        } else if(type === 'number') {\r\n            testFunction = buildTestIntersectionFunction(testFunction);\r\n        }\r\n\r\n        for(let droppable of this.#droppables) {\r\n            if(testFunction(droppable, rect, mousePos, this)) {\r\n                r.push(droppable);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    connect(droppables) {\r\n        if(typeof droppables === 'string') {\r\n            droppables = document.querySelectorAll(droppables);\r\n        } else if(typeof droppables.length !== 'number') {\r\n            droppables = [droppables];\r\n        }\r\n\r\n        for(let i = 0; i < droppables.length; i++) {\r\n            let item = droppables[i];\r\n\r\n            if(this.#droppables.indexOf(item) === -1) {\r\n                this.#droppables.push(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    disconnect(droppable) {\r\n        if(typeof droppable === 'string') {\r\n            droppable = document.querySelector(droppable);\r\n        }\r\n\r\n        let i = this.#droppables.indexOf(droppable);\r\n\r\n        if(i !== -1) {\r\n            this.#droppables.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    hasDroppable(droppable) {\r\n        if(typeof droppable === 'string') {\r\n            droppable = document.querySelector(droppable);\r\n        }\r\n\r\n        return this.#droppables.indexOf(droppable) !== -1;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get droppables() {\r\n        return this.#droppables.slice(0);\r\n    }\r\n\r\n    get element() {\r\n        return this.#element;\r\n    }\r\n}\r\n\r\n\r\nfunction _revert(target, position, revertDuration, onFrame=null) {\r\n    let starting = new Rect(target);\r\n\r\n    let animation = new Animation({\r\n        frames: {\r\n            '0%': {\r\n                left: starting.left + window.pageXOffset,\r\n                top: starting.top + window.pageYOffset\r\n            },\r\n\r\n            '100%': {\r\n                left: position.left,\r\n                top: position.top\r\n            }\r\n        },\r\n\r\n        applyFrame(fx, frame) {\r\n            setElementClientPosition(fx.element, {\r\n                left: frame.left - window.pageXOffset,\r\n                top: frame.top - window.pageYOffset\r\n            }, 'translate3d');\r\n\r\n            if(onFrame) onFrame(fx);\r\n        }\r\n    });\r\n\r\n    return animation.animate(target, {duration: revertDuration});\r\n}\r\n\r\n\r\n/**\r\n * Takes a client (x, y) position and some offset coords and move the element to the given position.\r\n *\r\n * @param self\r\n * @param element\r\n * @param x\r\n * @param y\r\n * @param offsetX\r\n * @param offsetY\r\n * @param container\r\n * @private\r\n * @returns {*|Rect}\r\n */\r\nfunction _moveElementToPosition(self, element, x, y, offsetX, offsetY, container) {\r\n    let rect = new Rect(element),\r\n        startingRect = rect;\r\n\r\n    rect = rect.moveTo({left: x, top: y});\r\n\r\n    offsetX = offsetX || 0;\r\n    offsetY = offsetY || 0;\r\n\r\n    rect = rect.translate(-offsetX, -offsetY);\r\n\r\n    if(self.axis === 'y') {\r\n        rect = new Rect(\r\n            startingRect.left,\r\n            rect.top,\r\n            startingRect.right,\r\n            rect.bottom\r\n        );\r\n    } else if(self.axis === 'x') {\r\n        rect = new Rect(\r\n            rect.left,\r\n            startingRect.top,\r\n            rect.right,\r\n            startingRect.bottom\r\n        );\r\n    }\r\n\r\n    if(typeof self.grid === 'number' && self.grid) {\r\n        let left = Math.floor(rect.left / self.grid) * self.grid,\r\n            top = Math.floor(rect.top / self.grid) * self.grid;\r\n\r\n        rect = new Rect(left, top, left + startingRect.width, top + startingRect.height);\r\n    }\r\n\r\n    if(container) {\r\n        container = new Rect(container);\r\n        rect = rect.fit(container);\r\n    }\r\n\r\n    setElementClientPosition(element, rect, 'translate3d');\r\n    return rect;\r\n}\r\n\r\n\r\n// noinspection JSCommentMatchesSignature\r\n/**\r\n * For module use only.  Selects the element either by css selector, if it's a string, or resolve a function.\r\n * If the element is already element is is returned direction.  Returns null if not element is provided.\r\n *\r\n * @param element\r\n * @param dragInstance\r\n * @param target\r\n * @returns {null|*}\r\n * @private\r\n */\r\nfunction _selectElementRect(element, dragInstance, target, originalTarget) {\r\n    if(element) {\r\n        let type = typeof element;\r\n\r\n        if(type === 'function') {\r\n            return new Rect(element.call(dragInstance, target, originalTarget, dragInstance));\r\n        } else if(type === 'string') {\r\n            return new Rect(document.querySelector(element));\r\n        }\r\n\r\n        return new Rect(element);\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\n/**\r\n * Returns the first scrollable parent.\r\n *\r\n * @param element\r\n * @returns {HTMLElement|null}\r\n * @private\r\n */\r\nfunction _getScrollParent(element) {\r\n    let o = element.parentElement;\r\n\r\n    while(o) {\r\n        if (o.scrollWidth > o.clientWidth || o.scrollHeight > o.clientHeight) {\r\n            return o;\r\n        }\r\n\r\n        o = o.parentElement;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\nfunction _getScrollRect(element) {\r\n    if(element === window || element.nodeName === \"HTML\") {\r\n        return new Rect(0, 0, window.innerWidth, window.innerHeight);\r\n    } else {\r\n        return new Rect(element);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Helper class that is used to control scrolling when the element is dragged outside of bounds.\r\n */\r\nclass ScrollHelper {\r\n    constructor(element, scrollXSpeed=0, scrollYSpeed=0, onFrame=null) {\r\n        this.frameID = null;\r\n        this.element = element;\r\n        this.scrollXSpeed = scrollXSpeed;\r\n        this.scrollYSpeed = scrollYSpeed;\r\n        this.onFrame = onFrame;\r\n        this.timestamp = performance.now();\r\n\r\n        let frame = timestamp => {\r\n            let delta = (timestamp - this.timestamp) / 1000;\r\n\r\n            this.timestamp = timestamp;\r\n\r\n            this.element.scrollLeft += delta * this.scrollXSpeed;\r\n            this.element.scrollTop += delta * this.scrollYSpeed;\r\n\r\n            if(this.onFrame) {\r\n                this.onFrame(this);\r\n            }\r\n\r\n            this.frameID = window.requestAnimationFrame(frame);\r\n        };\r\n\r\n        this.frameID = window.requestAnimationFrame(frame);\r\n    }\r\n\r\n    cancel() {\r\n        if(this.frameID) {\r\n            window.cancelAnimationFrame(this.frameID);\r\n            this.frameID = null;\r\n        }\r\n    }\r\n\r\n    static getScrollSpeed(rect, scrollParentRect) {\r\n        let r = {x: 0, y: 0};\r\n\r\n        if(rect.right > scrollParentRect.right) {\r\n            r.x = clamp((rect.right - scrollParentRect.right) / rect.width, -1, 1);\r\n        } else if(rect.left < scrollParentRect.left) {\r\n            r.x = clamp((rect.left - scrollParentRect.left) / rect.width, -1, 1);\r\n        }\r\n\r\n        if(rect.bottom > scrollParentRect.bottom) {\r\n            r.y = clamp((rect.bottom - scrollParentRect.bottom) / rect.width, -1, 1);\r\n        } else if(rect.top < scrollParentRect.top) {\r\n            r.y = clamp((rect.top - scrollParentRect.top) / rect.width, -1, 1);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static buildScrollHelper(element, target, rect, pos, dragInstance, event, scrollSpeed, container) {\r\n        let scrollParent = _getScrollParent(element);\r\n\r\n        if(scrollParent) {\r\n            let scrollParentRect = _getScrollRect(scrollParent),\r\n                speed = ScrollHelper.getScrollSpeed(rect, scrollParentRect);\r\n\r\n            if(speed.x || speed.y) {\r\n                return new ScrollHelper(scrollParent, speed.x * scrollSpeed, speed.y * scrollSpeed, (scroller) => {\r\n                    let rect = _moveElementToPosition(this, target, event.clientX, event.clientY, pos.offsetX, pos.offsetY, _selectElementRect(container, dragInstance, target, element));\r\n\r\n                    let scrollRect = new Rect(scroller.element);\r\n\r\n                    setElementClientPosition(target, rect, 'translate3d');\r\n\r\n                    if(scrollRect.contains(rect)) {\r\n                        scroller.cancel();\r\n                        scroller = null;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function ScrollArea(selector) {\r\n    return function() {\r\n        let element = selector;\r\n\r\n        if(typeof element === 'string') {\r\n            element = document.querySelector(element);\r\n        }\r\n\r\n        let rect = new Rect(element),\r\n            scroll = getScroll(element);\r\n\r\n        rect.left -= scroll.scrollLeft;\r\n        rect.top -= scroll.scrollTop;\r\n        rect.right = rect.left + element.scrollWidth;\r\n        rect.bottom = rect.top + element.scrollHeight;\r\n\r\n        return rect;\r\n    }\r\n}\r\n\r\n\r\nexport function clone(opacity=null, className=null, zIndex=null) {\r\n    if(typeof opacity === 'object' && opacity.nodeType) {\r\n        return opacity.cloneNode(true);\r\n    }\r\n\r\n    return function(element) {\r\n        let r = element.cloneNode(true);\r\n\r\n        if(opacity !== null) {\r\n            r.style.opacity = opacity;\r\n        }\r\n\r\n        if(className) {\r\n            r.className = className;\r\n        }\r\n\r\n        r.style.position = \"absolute\";\r\n        if(zIndex !== null) r.style.zIndex = zIndex;\r\n\r\n        return r;\r\n    }\r\n}\r\n\r\n\r\nfunction publishDragMoveEvent(self, element, helper, event, rect, bubbles=false, options=null) {\r\n    return dispatchDropEvent(self, 'drag.move', element, helper, event, rect, bubbles, true, true, options);\r\n}\r\n\r\n\r\nfunction publishDragDropEvent(self, element, helper, event, rect, bubbles=true, options=null) {\r\n    return dispatchDropEvent(self, 'drag.drop', element, helper, event, rect, bubbles, true, true, options);\r\n}\r\n\r\n\r\nfunction dispatchDropEvent(self, name, element, helper, originalEvent, currentRect, bubbles=false, dispatch=true, publish=false, detail=null, target=null) {\r\n    let eventPackage = {\r\n        name,\r\n        draggable: self,\r\n        target: helper,\r\n        element,\r\n        item: element, // alias for element\r\n        helper: helper,\r\n        originalEvent: null,\r\n        rect: currentRect\r\n    };\r\n\r\n    if(originalEvent) {\r\n        eventPackage.originalEvent = originalEvent;\r\n        eventPackage.clientX = originalEvent.clientX;\r\n        eventPackage.clientY = originalEvent.clientY;\r\n    }\r\n\r\n    if(!target) {\r\n        target = element;\r\n    }\r\n\r\n    if(detail) {\r\n        Object.assign(eventPackage, detail);\r\n    }\r\n\r\n    if(publish) {\r\n        self.publish(name, eventPackage);\r\n    }\r\n\r\n    if(dispatch) {\r\n        let customEvent = new CustomEvent(name, {\r\n            bubbles,\r\n            detail: eventPackage\r\n        });\r\n\r\n        target.dispatchEvent(customEvent);\r\n    }\r\n}\r\n","import {isSuperset} from 'core/utility/set';\r\nimport {clientRectToDocumentSpace, setElementClientPosition, snapToGrid} from 'core/ui/position';\r\nimport {clamp} from \"../utility/math\";\r\nimport {addClasses} from \"../utility/dom\";\r\n\r\n\r\nconst DIRECTIONS = new Set([\r\n    'top-left',\r\n    'top',\r\n    'top-right',\r\n    'right',\r\n    'bottom-right',\r\n    'bottom',\r\n    'bottom-left',\r\n    'left'\r\n]);\r\n\r\n\r\nexport const CONTAINERS = {\r\n    /**\r\n     * Constrains to client area.\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    client: function() {\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            right: window.innerWidth,\r\n            bottom: window.innerHeight,\r\n            height: window.innerHeight,\r\n            width: window.innerWidth\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Constrains to viewport.\r\n     * @param element\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    viewport: function(element) {\r\n        let parent = _getScrollParent(element),\r\n            bb = parent.getBoundingClientRect();\r\n\r\n        return {\r\n            left: bb.left - parent.scrollLeft,\r\n            top: bb.top - parent.scrollTop,\r\n            width: parent.scrollWidth,\r\n            height: parent.scrollHeight,\r\n            right: (bb.left - parent.scrollLeft) + parent.scrollWidth,\r\n            bottom: (bb.top - parent.scrollTop) + parent.scrollHeight\r\n        };\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Behavior class that makes an element resizeable.\r\n */\r\nexport default class Resizeable {\r\n    constructor(element, {handles=\"bottom-right\", helper=null, minWidth=null, maxWidth=null, minHeight=null, maxHeight=null,\r\n        keepAspectRatio=false, autoHide=false, container=null, grid=null}={}) {\r\n        if(typeof element === 'string') {\r\n            this.element = document.querySelector(element);\r\n        } else {\r\n            this.element = element;\r\n        }\r\n\r\n        this.handles = {};\r\n        this.element.classList.add('ui-resizeable');\r\n\r\n        if(handles === 'all') {\r\n            handles = new Set(DIRECTIONS);\r\n        } else {\r\n            handles = new Set(handles.split(/\\s+/));\r\n        }\r\n\r\n        if(!isSuperset(DIRECTIONS, handles)) {\r\n            throw new TypeError(\"Invalid direction.\");\r\n        }\r\n\r\n        for(let direction of handles) {\r\n            let handle = document.createElement('div');\r\n            handle.classList.add('ui-resizeable-handle');\r\n            handle.classList.add(`ui-resizeable-${direction}`);\r\n            handle.dataset.direction = direction;\r\n            this.handles[direction] = handle;\r\n            this.element.appendChild(handle);\r\n        }\r\n\r\n        this._onMouseDown = (event) => {\r\n            this._startResizing(event);\r\n        };\r\n\r\n        this.element.addEventListener('mousedown', this._onMouseDown);\r\n\r\n        if(typeof grid === 'number') {\r\n            this.grid = {\r\n                x: grid,\r\n                y: grid\r\n            };\r\n        } else if(Array.isArray(grid)) {\r\n            this.grid = {\r\n                x: grid[0],\r\n                y: grid[1]\r\n            };\r\n        } else {\r\n            this.grid = grid;\r\n        }\r\n\r\n        this.helper = helper;\r\n        this.minWidth = minWidth;\r\n        this.maxWidth = maxWidth;\r\n        this.minHeight = minHeight;\r\n        this.maxHeight = maxHeight;\r\n        this.keepAspectRatio = keepAspectRatio;\r\n        this.isResizing = false;\r\n        this.container = container;\r\n    }\r\n\r\n    _startResizing(event) {\r\n        if(this.isResizing) return;\r\n        let handle = event.target.closest('.ui-resizeable-handle');\r\n        if(!handle || !this.element.contains(handle)) return;\r\n        let resizeable = handle.closest('.ui-resizeable');\r\n        if(!resizeable || resizeable !== this.element) return;\r\n\r\n        event.preventDefault();\r\n\r\n        let direction = handle.dataset.direction,\r\n            startPosX = event.clientX + window.scrollX,\r\n            startPosY = event.clientY + window.scrollY,\r\n            doc = document,\r\n            startingClientRect = this.element.getBoundingClientRect(),\r\n            startBox = clientRectToDocumentSpace(startingClientRect),\r\n            target = this.element,\r\n            rect = {left: startBox.left, top: startBox.top, width: startBox.width, height: startBox.height};\r\n\r\n        if(this.helper) {\r\n            if(typeof this.helper === 'function') {\r\n                target = this.helper.call(this, this.element);\r\n            } else {\r\n                target = document.createElement('div');\r\n                addClasses(target, this.helper);\r\n            }\r\n\r\n            target.classList.add('ui-resizeable-helper');\r\n            target.style.width = startBox.width + 'px';\r\n            target.style.height = startBox.height + 'px';\r\n            target.style.boxSizing = getComputedStyle(this.element).boxSizing;\r\n            this.element.parentElement.appendChild(target);\r\n            setElementClientPosition(target, startingClientRect, 'translate3d');\r\n            setElementClientPosition(target, this.element.getBoundingClientRect(), 'translate3d');\r\n        }\r\n\r\n        let onMouseMove = event => {\r\n            let deltaX = event.clientX - (startPosX - window.scrollX),\r\n                deltaY = event.clientY - (startPosY - window.scrollY),\r\n                left = startBox.left,\r\n                top = startBox.top,\r\n                right = startBox.right - window.scrollX,\r\n                bottom = startBox.bottom - window.scrollY,\r\n                minWidth = this.minWidth !== null && this.minWidth !== undefined ? this.minWidth : 0,\r\n                maxWidth = this.maxWidth !== null && this.maxWidth !== undefined ? this.maxWidth : Infinity,\r\n                minHeight = this.minHeight !== null && this.maxHeight !== undefined ? this.minHeight : 0,\r\n                maxHeight = this.maxHeight !== null && this.maxHeight !== undefined ? this.maxHeight : Infinity;\r\n\r\n            if(direction === 'right' || direction === 'bottom-right' || direction === 'top-right') {\r\n                right += deltaX;\r\n                right = clamp(right, left + minWidth, left + maxWidth);\r\n            } else if(direction === 'left' || direction === 'top-left' || direction === 'bottom-left') {\r\n                left += deltaX;\r\n                left = clamp(left, right - maxWidth, right - minWidth);\r\n            }\r\n\r\n            if(direction === 'bottom' || direction === 'bottom-right' || direction === 'bottom-left') {\r\n                bottom = clamp(bottom + deltaY, top + minHeight, top + maxHeight);\r\n            } else if(direction === 'top' || direction === 'top-left' || direction === 'top-right') {\r\n                top = clamp(top + deltaY, bottom - maxHeight, bottom - minHeight);\r\n            }\r\n\r\n            let container;\r\n\r\n            if(this.container) {\r\n                container = this.container.call(this, this.element, event);\r\n\r\n                if(container) {\r\n                    // I need to make my own object because the objects returned by Element.getBoundClientRect are readonly\r\n                    // and Object.assign({}, rect) doesn't map over the properties.\r\n                    let _container = {\r\n                        left: container.left,\r\n                        top: container.top,\r\n                        bottom: container.bottom,\r\n                        right: container.right\r\n                    };\r\n\r\n                    if(this.grid) {\r\n                        if (this.grid.x) {\r\n                            _container.left = snapToGrid(container.left, this.grid.x, Math.ceil);\r\n                            _container.right = snapToGrid(container.right, this.grid.x, Math.floor);\r\n                        }\r\n\r\n                        if (this.grid.y) {\r\n                            _container.top = snapToGrid(container.top, this.grid.y, Math.ceil);\r\n                            _container.bottom = snapToGrid(container.bottom, this.grid.y, Math.floor);\r\n                        }\r\n                    }\r\n\r\n                    container = _container;\r\n                }\r\n            }\r\n\r\n            if(this.grid) {\r\n                left = snapToGrid(left, this.grid.x);\r\n                top = snapToGrid(top, this.grid.y);\r\n                right = snapToGrid(right, this.grid.x);\r\n                bottom = snapToGrid(bottom, this.grid.y);\r\n            }\r\n\r\n            console.log(left, right, bottom, top);\r\n            console.log(container);\r\n\r\n            if(container) {\r\n                left = clamp(left, container.left, container.right);\r\n                right = clamp(right, container.left, container.right);\r\n                bottom = clamp(bottom, container.top, container.bottom);\r\n                top = clamp(top, container.top, container.bottom);\r\n            }\r\n\r\n            if(this.keepAspectRatio) {\r\n                if(direction === 'top-left' || direction === 'top-right') {\r\n                    top = bottom - ((right - left) * this.keepAspectRatio);\r\n                } else if(direction === 'bottom-left' || direction === 'bottom-right' || direction === 'left' || direction === 'right') {\r\n                    bottom = top + ((right - left) * this.keepAspectRatio);\r\n                } else if(direction === 'bottom' || direction === 'top') {\r\n                    right = left + ((bottom - top) / this.keepAspectRatio);\r\n                }\r\n            }\r\n\r\n            setElementClientPosition(target, {left, top}, 'translate3d');\r\n            target.style.width = `${right - left}px`;\r\n            target.style.height = `${bottom - top}px`;\r\n\r\n            rect.left = left + window.scrollX;\r\n            rect.top = top + window.scrollY;\r\n            rect.width = right - left;\r\n            rect.height = bottom - top;\r\n            rect.right = right + window.scrollX;\r\n            rect.bottom = bottom + window.scrollY;\r\n\r\n            this.element.dispatchEvent(new CustomEvent('resizing', {\r\n                bubbles: true,\r\n                detail: {\r\n                    resizeable: this,\r\n                    target: target,\r\n                    originalEvent: event,\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY,\r\n                    element: this.element,\r\n\r\n                    targetClientRect: {\r\n                        left: left,\r\n                        top: top,\r\n                        right: right,\r\n                        bottom: bottom,\r\n                        width: right - left,\r\n                        height: bottom - top,\r\n                        x: left,\r\n                        y: top\r\n                    }\r\n                }\r\n            }));\r\n        };\r\n\r\n        let onMouseUp = event => {\r\n            doc.removeEventListener('mousemove', onMouseMove);\r\n            doc.removeEventListener('mouseup', onMouseUp);\r\n\r\n            if(this.element !== target) {\r\n                target.parentElement.removeChild(target);\r\n\r\n                setElementClientPosition(this.element, {\r\n                    left: rect.left - window.scrollX,\r\n                    top: rect.top - window.scrollY\r\n                }, 'translate3d');\r\n\r\n                this.element.style.width = `${rect.width}px`;\r\n                this.element.style.height = `${rect.height}px`;\r\n            }\r\n\r\n            this.element.classList.remove('ui-resizing');\r\n            this.isResizing = false;\r\n\r\n            this.element.dispatchEvent(new CustomEvent('resize-end', {\r\n                bubbles: true,\r\n                detail: {\r\n                    resizeable: this,\r\n                    element: this.element,\r\n                    originalEvent: event,\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY\r\n                }\r\n            }));\r\n        };\r\n\r\n        this.isResizing = true;\r\n        this.element.classList.add('ui-resizing');\r\n        doc.addEventListener('mousemove', onMouseMove);\r\n        doc.addEventListener('mouseup', onMouseUp);\r\n\r\n        this.element.dispatchEvent(new CustomEvent('resize-start', {\r\n            bubbles: true,\r\n            detail: {\r\n                resizeable: this,\r\n                target: target,\r\n                originalEvent: event,\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                element: this.element\r\n            }\r\n        }));\r\n    }\r\n}\r\n","import {Rect, Vec2, Vec3} from \"../vectors\";\r\nimport {clamp} from \"../utility\";\r\n\r\n\r\nconst regMatrix = /matrix(3d)?\\(([^)]+)\\)/;\r\n\r\n\r\n/**\r\n * Returns the elements offset parent.\r\n *\r\n * @param element\r\n * @returns {HTMLElement}\r\n */\r\nexport function getOffsetElement(element) {\r\n    let o = element.parentElement;\r\n\r\n    while(o) {\r\n        let position = getComputedStyle(o).position;\r\n        if(position !== 'static') return o;\r\n        o = o.parentElement;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the rectangle of the client area.\r\n *\r\n * @returns {Rect}\r\n */\r\nexport function getClientRect() {\r\n    return Rect.getClientRect();\r\n}\r\n\r\n\r\n/**\r\n * Returns a bounding rect who's positions are relative to the provided offsetParent.\r\n * If offsetParent is null then the targets natural offsetParent is used as returned by the getOffsetElement function.\r\n * @param element\r\n * @param offsetParent\r\n * @returns {{top: number, left: number, bottom: number, width: number, right: number, height: number}}\r\n */\r\nexport function getBoundingOffsetRect(element, offsetParent=null) {\r\n    let offsetRect, rect;\r\n\r\n    if(!offsetParent) offsetParent = getOffsetElement(element);\r\n\r\n    // no offset parent.  Position relative to the client.\r\n    if(!offsetParent) {\r\n        offsetRect = Rect.getRootContainingClientRect();\r\n    } else {\r\n        offsetRect = Rect.getBoundingClientRect(offsetParent);\r\n    }\r\n\r\n    rect = element.getBoundingClientRect();\r\n\r\n    return new Rect(\r\n        rect.left - offsetRect.left,\r\n        rect.top - offsetRect.top,\r\n        offsetRect.right - rect.right,\r\n        offsetRect.bottom - rect.bottom\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns a bounding rect who's positions are relative to the document.\r\n * @param element\r\n * @returns {{top: number, left: number, bottom: number, width: number, x: number, y: number, right: number, height: number}}\r\n */\r\nexport function getBoundingDocumentRect(element) {\r\n    let rect = element.getBoundingClientRect();\r\n\r\n    return new Rect(\r\n        rect.left + window.pageXOffset,\r\n        rect.top + window.pageYOffset,\r\n        rect.right + window.pageXOffset,\r\n        rect.bottom + window.pageYOffset\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns the css translation from the transformation matrix applied to the element.\r\n *\r\n * @param element\r\n * @returns {Vec3}\r\n */\r\nexport function getTranslation(element) {\r\n    let transform = getComputedStyle(element).transform,\r\n        m = regMatrix.exec(transform);\r\n\r\n    if(!m) {\r\n        return new Vec3(\r\n            0,\r\n            0,\r\n            0\r\n        );\r\n    }\r\n\r\n    let data = m[2].split(/\\s*,\\s*/);\r\n\r\n    if(m[1]) {\r\n        return new Vec3(\r\n            parseFloat(data[12]),\r\n            parseFloat(data[13]),\r\n            parseFloat(data[14])\r\n        );\r\n    } else {\r\n        return new Vec3(\r\n            parseFloat(data[4]),\r\n            parseFloat(data[5]),\r\n            0\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets the element's transformation matrix to 2d translate with the specified left and top properties.\r\n *\r\n * @param element\r\n * @param x\r\n * @param y\r\n * @param z\r\n */\r\nexport function setTranslation(element, {x, y, z=null}) {\r\n    if(z !== null) {\r\n        element.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;\r\n    } else {\r\n        element.style.transform = `translate(${x}px, ${y}px)`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Gets the elements left and top style properties as numbers.\r\n *\r\n * @param element\r\n * @returns {Vec2}\r\n */\r\nexport function getCssPosition(element) {\r\n    let style = getComputedStyle(element);\r\n\r\n    return new Vec2(\r\n        parseInt(style.left, 10),\r\n        parseInt(style.top, 10)\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Sets the left and top style properties of an element.  If the element is positioned statically it will be changed to\r\n * relative.\r\n *\r\n * @param element\r\n * @param left\r\n * @param top\r\n */\r\nexport function setCssPosition(element, {left=null, top=null}) {\r\n    let style = getComputedStyle(element);\r\n\r\n    if(style.position === 'static') {\r\n        style.position = 'relative';\r\n    }\r\n\r\n    if(left !== null && left !== undefined) {\r\n        element.style.left = `${left}px`;\r\n    }\r\n\r\n    if(top !== null && top !== undefined) {\r\n        element.style.top = `${top}px`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets the elements position relative to the client window.  The `method` parameter controls how the elements position\r\n * is modified.  The options are 'top-left', 'top-right', 'bottom-left', 'bottom-right', 'translate', and 'translate3d'.\r\n *\r\n * top-left, top-right, bottom-left and bottom-right set the css left, top, right, and bottom properties of the element.\r\n * translate and translate3d position the element by setting the transform property.\r\n *\r\n * @param element {HTMLElement}\r\n * @param position {{x, y}|{left, top, right, bottom}|Array|Vec2}\r\n * @param method {'top-left'|'top-right'|'bottom-left'|'bottom-right'|'translate'|'translate3d'}\r\n */\r\nexport function setElementClientPosition(element, position, method='top-left') {\r\n    position = new Rect(position);\r\n\r\n    if(method === 'top-left' || method === 'top-right' || method === 'bottom-left' || method === 'bottom-right') {\r\n        let style = getComputedStyle(element);\r\n\r\n        let positionType = style.position, box, deltaX, deltaY, current;\r\n\r\n        // position can't be static for this operation.  Switch to relative.\r\n        if(positionType === 'static') {\r\n            element.style.position = 'relative';\r\n            positionType = \"relative\";\r\n        }\r\n\r\n        if(positionType === \"relative\") {\r\n            style = getComputedStyle(element);\r\n\r\n            current = {\r\n                left: parseInt(style.left, 10) || 0,\r\n                right: parseInt(style.right, 10) || 0,\r\n                top: parseInt(style.top, 10) || 0,\r\n                bottom: parseInt(style.bottom, 10) || 0\r\n            }\r\n        } else {\r\n            box = Rect.getBoundingClientRect(element);\r\n            current = getBoundingOffsetRect(element);\r\n        }\r\n\r\n        if(method === 'top-left') {\r\n            deltaX = position.left - box.left;\r\n            deltaY = position.top - box.top;\r\n\r\n            element.style.left = (current.left + deltaX) + 'px';\r\n            element.style.top = (current.top + deltaY) + 'px';\r\n            element.style.right = '';\r\n            element.style.bottom = '';\r\n        } else if(method === 'top-right') {\r\n            deltaX = position.right - box.right;\r\n            deltaY = position.top - box.top;\r\n\r\n            element.style.right = (current.right - deltaX) + 'px';\r\n            element.style.top = (current.top + deltaY) + 'px';\r\n            element.style.left = '';\r\n            element.style.bottom = '';\r\n        } else if(method === 'bottom-left') {\r\n            deltaX = position.left - box.left;\r\n            deltaY = position.bottom - box.bottom;\r\n\r\n            console.log({\r\n                right: (current.left + deltaX) + 'px',\r\n                bottom: (current.bottom - deltaY) + 'px'\r\n            });\r\n\r\n            element.style.left = (current.left + deltaX) + 'px';\r\n            element.style.bottom = (current.bottom - deltaY) + 'px';\r\n            element.style.right = '';\r\n            element.style.top = '';\r\n        } else { // bottom-right\r\n            deltaX = position.right - box.right;\r\n            deltaY = position.bottom - box.bottom;\r\n\r\n            element.style.right = (current.right - deltaX) + 'px';\r\n            element.style.bottom = (current.bottom - deltaY) + 'px';\r\n            element.style.left = '';\r\n            element.style.top = '';\r\n        }\r\n    } else if(method === 'translate') {\r\n        let box = Rect.getBoundingClientRect(element),\r\n            deltaX = position.left - box.left,\r\n            deltaY = position.top - box.top,\r\n            cssPosition = getTranslation(element);\r\n\r\n        setTranslation(element, {\r\n            x: cssPosition.x + deltaX,\r\n            y: cssPosition.y + deltaY\r\n        });\r\n    } else if(method === 'translate3d') {\r\n        let box = Rect.getBoundingClientRect(element),\r\n            deltaX = position.left - box.left,\r\n            deltaY = position.top - box.top,\r\n            cssPosition = getTranslation(element);\r\n\r\n        setTranslation(element, {\r\n            x: cssPosition.x + deltaX,\r\n            y: cssPosition.y + deltaY,\r\n            z: cssPosition.z\r\n        });\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Transforms the coordinates of a BoundingClientRect like object from client space to document space.\r\n * @param rect\r\n */\r\nexport function clientRectToDocumentSpace(rect) {\r\n    let r = Rect.fromRect(rect);\r\n\r\n    r.left += window.pageXOffset;\r\n    r.right += window.pageXOffset;\r\n    if(typeof r.top === 'number') r.top += window.pageYOffset;\r\n    if(typeof r.bottom === 'number') r.bottom += window.pageYOffset;\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Transforms the coordinates of a BoundingClientRect like object from document space to client space.\r\n * @param rect\r\n */\r\nexport function documentRectToClientSpace(rect) {\r\n    let r = Rect.fromRect(rect);\r\n\r\n    r.left -= window.pageXOffset;\r\n    r.right -= window.pageXOffset;\r\n    if(typeof r.top === 'number') r.top -= window.pageYOffset;\r\n    if(typeof r.bottom === 'number') r.bottom -= window.pageYOffset;\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Snaps the value to the specified grid using the provided rounding function.\r\n * @param value\r\n * @param gridSize\r\n * @param roundingFunction\r\n * @returns {number|*}\r\n */\r\nexport function snapToGrid(value, gridSize, roundingFunction=Math.round) {\r\n    if(gridSize !== null && gridSize !== undefined && !Number.isNaN(gridSize)) {\r\n        return roundingFunction(value / gridSize) * gridSize;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Deprecated in favor of calling Rect.fromRect() class method.\r\n *\r\n * @deprecated\r\n * @param domRect\r\n * @returns {Rect}\r\n */\r\nexport function convertDomRectToObject(domRect) {\r\n    return Rect.fromRect(domRect);\r\n}\r\n\r\n\r\n/**\r\n * Returns the {x, y} point calculated relative to the reference element.\r\n *\r\n * @param referenceElement\r\n * @param point\r\n * @param offset\r\n * @param constrain\r\n * @returns {Vec2}\r\n */\r\nexport function getPointOnElement(referenceElement, point, offset=null, constrain=null) {\r\n    let rect = referenceElement;\r\n\r\n    if(rect.getBoundingClientRect) {\r\n        rect = rect.getBoundingClientRect();\r\n    }\r\n\r\n    if(constrain) {\r\n        if (typeof constrain === 'string') {\r\n            constrain = document.querySelector(constrain);\r\n        }\r\n\r\n        if (constrain.getBoundingClientRect) {\r\n            constrain = Rect.fromRect(constrain.getBoundingClientRect());\r\n        }\r\n    }\r\n\r\n    // Convert array to {x, y} object.\r\n    if(Array.isArray(point)) {\r\n        point = {\r\n            x: point[0],\r\n            y: point[1]\r\n        };\r\n    } else if(typeof point === 'string') {\r\n        if(point === 'top-left') {\r\n            point = {x: 0, y: 0};\r\n        } else if(point === 'top') {\r\n            point = {x: '50%', y: 0};\r\n        } else if(point === 'top-right') {\r\n            point = {x: '100%', y: 0};\r\n        } else if(point === 'right') {\r\n            point = {x: '100%', y: '50%'};\r\n        } else if(point === 'bottom-right') {\r\n            point = {x: '100%', y: '100%'};\r\n        } else if(point === 'bottom') {\r\n            point = {x: '50%', y: '100%'};\r\n        } else if(point === 'bottom-left') {\r\n            point = {x: 0, y: '100%'};\r\n        } else if(point === 'left') {\r\n            point = {x: 0, y: '50%'};\r\n        } else if(point === 'middle') {\r\n            point = {x: '50%', y: '50%'};\r\n        } else {\r\n            throw new Error(`Unknown point option ${point}`);\r\n        }\r\n    }\r\n\r\n    if(typeof point.x === 'string') {\r\n        point.x = (rect.right - rect.left) * (parseFloat(point.x) / 100);\r\n    }\r\n\r\n    if(typeof point.y === 'string') {\r\n        point.y = (rect.bottom - rect.top) * (parseFloat(point.y) / 100);\r\n    }\r\n\r\n    if(constrain) {\r\n        if(typeof constrain.left === 'string') {\r\n            constrain.left = (rect.right - rect.left) * (parseFloat(constrain.left) / 100);\r\n        }\r\n\r\n        if(typeof constrain.right === 'string') {\r\n            constrain.right = (rect.right - rect.left) * (parseFloat(constrain.right) / 100);\r\n        }\r\n\r\n        if(typeof constrain.top === 'string') {\r\n            constrain.top = (rect.bottom - rect.top) * (parseFloat(constrain.top) / 100);\r\n        }\r\n\r\n        if(typeof constrain.bottom === 'string') {\r\n            constrain.bottom = (rect.bottom - rect.top) * (parseFloat(constrain.bottom) / 100);\r\n        }\r\n\r\n        point.x = clamp(point.x, constrain.left, constrain.right);\r\n        point.y = clamp(point.y, constrain.top, constrain.bottom);\r\n    }\r\n\r\n    if(offset) {\r\n        if(Array.isArray(offset)) {\r\n            offset = {\r\n                x: offset[0],\r\n                y: offset[1]\r\n            };\r\n        }\r\n\r\n        if(offset.x !== null) {\r\n            point.x += offset.x;\r\n        }\r\n\r\n        if(offset.y !== null) {\r\n            point.y += offset.y;\r\n        }\r\n    }\r\n\r\n    return new Vec2(rect.left + point.x, rect.top + point.y);\r\n}\r\n\r\n\r\n/**\r\n * Gets the bounding client rect for a rectangle defined by the position rectangle with left, top, right and bottom\r\n * properties relative to the element's position.\r\n *\r\n * @param element {{getBoundingClientRect}|Element|String|{left, top, right, bottom}}\r\n * @param position {{left, top, bottom, right}}\r\n * @return {Rect}\r\n */\r\nexport function getSubBoundingBox(element, position) {\r\n    let rect;\r\n\r\n    // Get the bounding client rect of the element.   The user should have passed either a css selector, an object with a\r\n    // getBoundingClientRect interface.  Or a bounding client rect directly.\r\n    if(element.getBoundingClientRect) {\r\n        rect = element.getBoundingClientRect();\r\n    } else if(typeof element === 'string') {\r\n        rect = document.querySelector(element).getBoundingClientRect();\r\n    } else {\r\n        rect = element;\r\n    }\r\n\r\n    let width = rect.right - rect.left,\r\n        height = rect.bottom - rect.top;\r\n\r\n    // The user can pass a rect with left, top, right and bottom properties.  The value can either be the desired\r\n    // coordinates relative to the top-left corner of the reference element or a percentage.  Another possibility\r\n    // is that the user passes one of the keyword properties that coorispond to a specific section of the element.\r\n    // Map those keywords to their rectangle.\r\n    if(typeof position === 'string') {\r\n        if(position === 'border-top') {\r\n            position = {left: 0, right: '100%', top: 0, bottom: 0};\r\n        } else if(position === 'border-right') {\r\n            position = {left: '100%', right: '100%', top: 0, bottom: '100%'};\r\n        } else if(position === 'border-bottom') {\r\n            position = {left: 0, right: '100%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'border-left') {\r\n            position = {left: 0, top: 0, right: 0, bottom: '100%'};\r\n        } else if(position === 'top-left') {\r\n            position = {left: 0, top: 0, right: 0, bottom: 0};\r\n        } else if(position === 'top') {\r\n            position = {top: 0, left: '50%', right: '50%', bottom: 0};\r\n        } else if(position === 'top-right') {\r\n            position = {top: 0, left: '100%', right: '100%', bottom: 0};\r\n        } else if(position === 'left') {\r\n            position = {left: 0, top: '50%', bottom: '50%', right: 0};\r\n        } else if(position === 'origin') {\r\n            position = {left: '50%', right: '50%', top: '50%', bottom: '50%'};\r\n        } else if(position === 'bottom-left') {\r\n            position = {left: 0, right: 0, top: '100%', bottom: '100%'};\r\n        } else if(position === 'bottom') {\r\n            position = {left: '50%', right: '50%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'bottom-right') {\r\n            position = {left: '100%', right: '100%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'right') {\r\n            position = {left: '100%', right: '100%', top: '50%', bottom: '50%'};\r\n        }\r\n    }\r\n\r\n    position.left = position.left || 0;\r\n    position.right = position.right || 0;\r\n    position.top = position.top || 0;\r\n    position.bottom = position.bottom || 0;\r\n\r\n    // left and right percentages are a percentage of the elements width.\r\n    // top and bottom percentages are a percentage of the elements height.\r\n    if(typeof position.left === 'string') {\r\n        position.left = (parseFloat(position.left) / 100) * width;\r\n    }\r\n\r\n    if(typeof position.right === 'string') {\r\n        position.right = (parseFloat(position.right) / 100) * width;\r\n    }\r\n\r\n    if(typeof position.bottom === 'string') {\r\n        position.bottom = (parseFloat(position.bottom) / 100) * height;\r\n    }\r\n\r\n    if(typeof position.top === 'string') {\r\n        position.top = (parseFloat(position.top) / 100) * height;\r\n    }\r\n\r\n    // Convert to client space.\r\n    return new Rect(\r\n        rect.left + position.left,\r\n        rect.top + position.top,\r\n        rect.left + position.right,\r\n        rect.top + position.bottom\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns the distance in between the provided Rect objects.  If the objects are touching or overlapping 0\r\n * will be returned.\r\n *\r\n * @param rect1 {{left, top, right, bottom}}\r\n * @param rect2 {{left, top, right, bottom}}\r\n * @returns {Number}\r\n */\r\nexport function getDistanceBetweenRects(rect1, rect2) {\r\n    let vec1 = Rect.fromRect(rect1),\r\n        vec2 = Rect.fromRect(rect2);\r\n\r\n    let isXOverlapping = vec1.isXOverlapping(vec2),\r\n        isYOverlapping = vec1.isYOverlapping(vec2);\r\n\r\n    if(isXOverlapping && isYOverlapping) {\r\n        // Items are overlapping\r\n        return 0;\r\n    } else if(isXOverlapping) {\r\n        return Math.min(\r\n            Math.abs(vec1.bottom - vec2.top),\r\n            Math.abs(vec1.top - vec2.bottom)\r\n        );\r\n    } else if(isYOverlapping) {\r\n        return Math.min(\r\n            Math.abs(vec1.right - vec2.left),\r\n            Math.abs(vec1.left - vec2.right)\r\n        );\r\n    } else {\r\n        let x1, y1, x2, y2;\r\n\r\n        if(vec1.right <= vec2.left) {\r\n            x1 = vec1.right;\r\n            x2 = vec2.left;\r\n        } else {\r\n            x1 = vec1.left;\r\n            x2 = vec2.right;\r\n        }\r\n\r\n        if(vec1.bottom <= vec2.top) {\r\n            y1 = vec1.bottom;\r\n            y2 = vec2.top;\r\n        } else {\r\n            y1 = vec1.top;\r\n            y2 = vec2.bottom;\r\n        }\r\n\r\n        // Use distance formula to calculate distance.\r\n        return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the top and left position of an element relative to the document.\r\n *\r\n * @param element\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getElementOffset(element) {\r\n    let box = element.getBoundingClientRect();\r\n\r\n    return {\r\n        left: box.left + window.pageXOffset,\r\n        top: box.top + window.pageYOffset\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Sets an elements position relative to the document.\r\n *\r\n * @param element\r\n * @param coords\r\n */\r\nexport function setElementOffset(element, coords) {\r\n    if (coords.nodeType) {\r\n        coords = getElementOffset(element);\r\n    } else if (Array.isArray(coords)) {\r\n        coords = {\r\n            left: coords.left,\r\n            top: coords.top\r\n        };\r\n    }\r\n\r\n    let offset = element.getBoundingClientRect();\r\n\r\n    let style = getComputedStyle(element),\r\n        left = parseInt(style.left, 10) || 0,\r\n        top = parseInt(style.top, 10) || 0;\r\n\r\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\r\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\r\n}\r\n\r\n\r\nexport {Vec2, Vec3, Rect};\r\n","/**\r\n * Throttles a function to only be executed after a given wait period.  If multiple calls to the debounced function\r\n * are made within that period the waiting period is set.\r\n * @param fn\r\n * @param wait\r\n * @returns {Function}\r\n */\r\nexport function debounce(fn, wait) {\r\n    let timeout;\r\n\r\n    return function() {\r\n        let args = arguments;\r\n\r\n        let later = () => {\r\n            timeout = null;\r\n            fn.apply(this, args);\r\n        };\r\n\r\n        if(timeout) {\r\n            clearTimeout(timeout);\r\n        }\r\n\r\n        timeout = setTimeout(later, wait);\r\n    }\r\n}\r\n","export function proto(descriptor) {\r\n    descriptor.placement = \"prototype\";\r\n    return descriptor;\r\n}\r\n","const REG_WHITESPACE = /\\s+/;\r\n\r\n\r\n/**\r\n * Parses an html string into a document fragment.\r\n *\r\n * @deprecated\r\n * @param html\r\n * @return {DocumentFragment}\r\n */\r\nexport function parseHTML(html) {\r\n    let template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    if (template.content) {\r\n        return template.content;\r\n    } else {\r\n        // Doesn't support template tag.\r\n        let fragment = document.createDocumentFragment();\r\n        while (template.firstChild) fragment.appendChild(template.firstChild);\r\n        return fragment;\r\n    }\r\n}\r\n\r\nexport function createFragment(html) {\r\n    // noinspection JSDeprecatedSymbols\r\n    return parseHTML(html);\r\n}\r\n\r\n/**\r\n * Adds classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function addClasses(element, classes) {\r\n    if (typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.add(...classes);\r\n}\r\n\r\n/**\r\n * Removes classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function removeClasses(element, classes) {\r\n    if (typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.remove(...classes);\r\n}\r\n\r\n/**\r\n * Assigns attributes in an object to an element.\r\n * @param element\r\n * @param attributes\r\n */\r\nexport function assignAttributes(element, attributes) {\r\n    for (let key in attributes) {\r\n        if (attributes.hasOwnProperty(key)) {\r\n            element.setAttribute(key, attributes[key]);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Matches a single dom element based on the given selector.\r\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\r\n * If a css selector is passed it will query for the element.\r\n * If a jquery object is passed it will return the first matched element.\r\n * If an element is passed it will return that element.\r\n *\r\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\r\n * Otherwise the context will be the document.\r\n *\r\n * @param selector\r\n * @param context\r\n * @returns {Element|Document|DocumentFragment}\r\n */\r\nexport function selectElement(selector, context = null) {\r\n    if (!context) {\r\n        context = document;\r\n    } else {\r\n        context = selectElement(context);\r\n    }\r\n\r\n    if (typeof selector === 'string') {\r\n        return context.querySelector(selector);\r\n    } else if (selector.jquery) {\r\n        return selector[0];\r\n    } else if (selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\r\n        return selector;\r\n    }\r\n}\r\n\r\n/**\r\n * Empties a dom element.\r\n *\r\n * @param element\r\n */\r\nexport function emptyElement(element) {\r\n    while (element.firstChild) element.removeChild(element.firstChild);\r\n}\r\n\r\n/**\r\n * Normalizing accessing scroll position for an element.\r\n *\r\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\r\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\r\n * @param element\r\n * @returns {{left, top}}\r\n */\r\nexport function getScroll(element) {\r\n    if (isWindow(element)) {\r\n        return {\r\n            scrollLeft: element.pageXOffset,\r\n            scrollTop: element.pageYOffset\r\n        };\r\n    } else {\r\n        return {\r\n            scrollLeft: element.scrollLeft,\r\n            scrollTop: element.scrollTop\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Normalizes setting a scroll position for an element.\r\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\r\n * This methods normalizes them.\r\n * @param element - The element to scroll\r\n * @param scroll - An object with a left or a top property or both.\r\n */\r\nexport function setScroll(element, scroll) {\r\n    if (element.scrollTo) {\r\n        element.scrollTo(scroll);\r\n    } else {\r\n        element.scrollLeft = scroll.left;\r\n        element.scrollTop = scroll.top;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns first child element that matches the test function.\r\n * @param element - Parent element\r\n * @param fn {Function|String} - Test Function\r\n * @returns {HTMLElement|Element|null}\r\n */\r\nexport function findChild(element, fn) {\r\n    if (typeof fn === 'string') {\r\n        let selector = fn;\r\n        fn = (child) => child.matches(selector);\r\n    }\r\n\r\n    for (let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if (fn(child)) {\r\n            return child;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Creates a filtered list of element from the children that match the test function.\r\n * @param element - Parent element.\r\n * @param fn - Test function.\r\n * @returns {Array}\r\n */\r\nexport function filterChildren(element, fn) {\r\n    let r = [];\r\n\r\n    for (let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if (fn(child)) {\r\n            r.push(child);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Test to see if the variable is a window.\r\n * @param variable\r\n * @returns {boolean}\r\n */\r\nexport function isWindow(variable) {\r\n    return variable && typeof variable === 'object' && setInterval in variable;\r\n}\r\n","import {debounce} from \"./debounce\";\r\nimport {proto} from \"./decorators\";\r\nimport {createFragment, findChild, filterChildren, emptyElement, addClasses, removeClasses, selectElement, assignAttributes, getScroll, isWindow, setScroll} from \"./dom\";\r\nimport {all, any, chain, enumerate, firstValue, items, keys, values} from \"./iter\";\r\nimport {clamp, modulo, calcDistance} from \"./math\";\r\nimport {arraysEqual, getOwnProperty, getPropertyByPath, isEmptyObject, randomChoice, rangeFindItem} from \"./object\";\r\n\r\nexport {\r\n    debounce,\r\n    proto,\r\n    createFragment, findChild, filterChildren, emptyElement, addClasses, removeClasses, selectElement, assignAttributes,\r\n    getScroll, isWindow, setScroll, all, any, chain, enumerate, firstValue, items, keys, values,\r\n    clamp, modulo, calcDistance,\r\n    arraysEqual, getPropertyByPath, getOwnProperty, isEmptyObject, randomChoice, rangeFindItem\r\n};\r\n","\r\n\r\n\r\nexport function *items(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield [key, object[key]];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *keys(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield key;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *values(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield object[key];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *enumerate(iterable) {\r\n    let i = 0;\r\n\r\n    for(let value of iterable) {\r\n        yield [i, value];\r\n    }\r\n}\r\n\r\n\r\nexport function *chain(...iterables) {\r\n    for(let iter of iterables) {\r\n        for(let value of iter) {\r\n            yield value;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns the first none null or undefined value.\r\n * @param args\r\n */\r\nexport function firstValue(args) {\r\n    for(let item of args) {\r\n        if(item !== null && item !== undefined) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if all of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function all(iterable) {\r\n    for(let item of iterable) {\r\n        if(!item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if any of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function any(iterable) {\r\n    for(let item of iterable) {\r\n        if(item) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n","/**\r\n * Clamps a value between a minimum and maximum values.\r\n * @param value\r\n * @param minValue\r\n * @param maxValue\r\n * @returns {*}\r\n */\r\nexport function clamp(value, minValue = null, maxValue = null) {\r\n    if (minValue !== null) {\r\n        value = Math.max(value, minValue);\r\n    }\r\n\r\n    if (maxValue !== null) {\r\n        value = Math.min(value, maxValue);\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nexport function modulo(value, mod) {\r\n    return ((value % mod) + mod) % mod;\r\n}\r\n\r\n\r\nexport function calcDistance(x1, y1, x2, y2) {\r\n    return Math.sqrt(\r\n        Math.pow(x2 - x1, 2) + Math.pow(y2 - y2, 2)\r\n    );\r\n}\r\n","/**\r\n * Returns a random value from an array.\r\n * @param array\r\n * @returns {*}\r\n */\r\nexport function randomChoice(array) {\r\n    return array[Math.floor(Math.random() * array.length)];\r\n}\r\n\r\n/**\r\n * Checks to see if 2 arrays are \"equal\".\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arraysEqual(array1, array2) {\r\n    if (array1 === array2) return true; // The same object.\r\n    if (array1 == null || array2 == null) return false;\r\n    if (array1.length !== array2.length) return false;\r\n\r\n    for (let i = 0, l = array1.length; i < l; i++) {\r\n        if (array1[i] !== array2[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Tests to see if the object is empty.\r\n *\r\n * @param object\r\n * @return {boolean}\r\n */\r\nexport function isEmptyObject(object) {\r\n    // noinspection LoopStatementThatDoesntLoopJS\r\n    for (let key in object) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Returns the object own property or the default value if it does not have that property.\r\n * @param obj\r\n * @param propName\r\n * @param defaultValue\r\n * @returns {*}\r\n */\r\nexport function getOwnProperty(obj, propName, defaultValue = undefined) {\r\n    if (obj.hasOwnProperty(propName)) {\r\n        return obj[propName];\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns the obj value by following it's property path.  For example getPropertyByPath(a, 'b.c.d') is equivalent to\r\n * a.b.c.d but can be passed in string form.\r\n * @param obj\r\n * @param path\r\n * @returns {*}\r\n */\r\nexport function getPropertyByPath(obj, path) {\r\n    let parts = path.split('.'),\r\n        r = obj;\r\n\r\n    for (let part of parts) {\r\n        r = r[part];\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * rangeFindItem\r\n *\r\n * Searches an array starting at the starting index and heads towards the ending index and returns the first item that\r\n * matches the predicate function.  If no item is found then undefined will be returned.  This function can search an\r\n * array both forwards and backwards.  Just start at a greater point then the ending point and the function will\r\n * handle the rest.\r\n *\r\n * @param array - The array to search\r\n * @param predicate - The matching function.  Should return true if the item is a match.\r\n * @param startingIndex - The index to start from.\r\n * @param endingIndex - The index to end at.  (Will also search this index)\r\n * @returns {*}\r\n */\r\nexport function rangeFindItem(array, predicate, startingIndex=0, endingIndex=null) {\r\n    let i;\r\n\r\n    if(endingIndex === null) {\r\n        endingIndex = array.length-1;\r\n    }\r\n\r\n    i = startingIndex;\r\n\r\n    while(true) {\r\n        let item = array[i];\r\n\r\n        if(predicate(item)) {\r\n            return item;\r\n        }\r\n\r\n        if(startingIndex > endingIndex) {\r\n            if(i <= endingIndex) return;\r\n            i--;\r\n        } else {\r\n            if(i >= endingIndex) return;\r\n            i++;\r\n        }\r\n    }\r\n}\r\n","export function isSuperset(set, subset) {\r\n    for (let elem of subset) {\r\n        if (!set.has(elem)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\nfunction union(setA, setB) {\r\n    let _union = new Set(setA);\r\n    for (let elem of setB) {\r\n        _union.add(elem);\r\n    }\r\n    return _union;\r\n}\r\n\r\n\r\nfunction intersection(setA, setB) {\r\n    let _intersection = new Set();\r\n    for (let elem of setB) {\r\n        if (setA.has(elem)) {\r\n            _intersection.add(elem);\r\n        }\r\n    }\r\n    return _intersection;\r\n}\r\n\r\n\r\nfunction symmetricDifference(setA, setB) {\r\n    let _difference = new Set(setA);\r\n    for (let elem of setB) {\r\n        if (_difference.has(elem)) {\r\n            _difference.delete(elem);\r\n        } else {\r\n            _difference.add(elem);\r\n        }\r\n    }\r\n    return _difference;\r\n}\r\n\r\n\r\nfunction difference(setA, setB) {\r\n    let _difference = new Set(setA);\r\n    for (let elem of setB) {\r\n        _difference.delete(elem);\r\n    }\r\n    return _difference;\r\n}\r\n","import Vec4 from './Vec4';\r\n\r\nconst regPercentage = /^(\\d+\\.?\\d*)%$/;\r\n\r\n\r\nexport default class RGBA extends Vec4 {\r\n    constructor(r, g, b, a) {\r\n        if(typeof r === 'object') {\r\n            super(r);\r\n        } else {\r\n            super(r, g, b, a);\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n    }\r\n\r\n    static parseRGBAColorStringArgs(value) {\r\n        value = value.trim().split(/\\s+/);\r\n\r\n        let r = value[0],\r\n            g = value[1],\r\n            b = value[2],\r\n            a = value[3];\r\n\r\n        if(r) {\r\n            if(regPercentage.test(r)) {\r\n                r = (parseFloat(r) / 100) * 255;\r\n            } else {\r\n                r = parseInt(r, 10);\r\n            }\r\n        }\r\n\r\n        if(g) {\r\n            if(regPercentage.test(g)) {\r\n                g = (parseFloat(g) / 100) * 255;\r\n            } else {\r\n                g = parseInt(g, 10);\r\n            }\r\n        }\r\n\r\n        if(b) {\r\n            if(regPercentage.test(b)) {\r\n                b = (parseFloat(b) / 100) * 255;\r\n            } else {\r\n                b = parseInt(b, 10);\r\n            }\r\n        }\r\n\r\n        if(a) {\r\n            if(regPercentage.test(a)) {\r\n                a = (parseFloat(a) / 100);\r\n            } else {\r\n                a = parseFloat(a);\r\n            }\r\n        }\r\n\r\n        a = a || 1.0;\r\n\r\n        return new RGBA(r, g, b, a);\r\n    }\r\n\r\n    static parseHexColorStringArg(value) {\r\n        value = value.trim().substring(1);\r\n\r\n        let r, g, b, a = 1.0;\r\n\r\n        if(value.length === 3) {\r\n            r = value[0];\r\n            g = value[1];\r\n            b = value[2];\r\n\r\n            r = parseInt(r+r, 16);\r\n            g = parseInt(g+g, 16);\r\n            b = parseInt(b+b, 16);\r\n        } else if(value.length === 6) {\r\n            r = value.substr(0, 2);\r\n            g = value.substr(2, 2);\r\n            b = value.substr(4, 2);\r\n\r\n            r = parseInt(r, 16);\r\n            g = parseInt(g, 16);\r\n            b = parseInt(b, 16);\r\n        } else if(value.length === 8) {\r\n            r = value.substr(0, 2);\r\n            g = value.substr(2, 2);\r\n            b = value.substr(4, 2);\r\n            a = value.substr(6, 2);\r\n\r\n            r = parseInt(r, 16);\r\n            g = parseInt(g, 16);\r\n            b = parseInt(b, 16);\r\n            a = parseInt(a, 16) / 255;\r\n        }\r\n\r\n        return new RGBA(r, g, b, a);\r\n    }\r\n}\r\n","import {ValueError} from \"../errors\";\r\nimport Vec2 from \"./Vec2\";\r\nimport Vec4 from \"./Vec4\";\r\nimport {clamp, calcDistance} from '../utility';\r\nimport {UnitError} from '../errors';\r\n\r\n\r\nconst regWhitespace = /\\s+/,\r\n    regPositionPart = /^([a-zA-Z]*)([+-]?\\d*\\.?\\d*)([a-z%]*)$/; // Parses string like \"left+10px\" into [\"left\", \"+10px\"]\r\n\r\n\r\nconst positionShortHandValues = {\r\n    top: 'center top',\r\n    right: 'right middle',\r\n    bottom: 'center bottom',\r\n    left: 'left middle',\r\n    topleft: 'left top',\r\n    topright: 'right top',\r\n    bottomleft: 'left bottom',\r\n    bottomright: 'right bottom'\r\n};\r\n\r\n\r\nexport default class Rect extends Vec4 {\r\n    constructor(left, top, right, bottom, domElement=null) {\r\n        if(typeof left === 'function') {\r\n            left = left();\r\n        }\r\n\r\n        if(typeof left === 'object') {\r\n            if(left.getBoundingClientRect) {\r\n                domElement = left;\r\n                let bb = domElement.getBoundingClientRect();\r\n                left = bb.left;\r\n                top = bb.top;\r\n                right = bb.right;\r\n                bottom = bb.bottom;\r\n            } else {\r\n                top = left.top;\r\n                right = left.right;\r\n                bottom = left.bottom;\r\n                left = left.left;\r\n            }\r\n        }\r\n\r\n        super(left, top, right, bottom);\r\n\r\n        // noinspection JSUnusedGlobalSymbols\r\n        this.domElement = domElement;\r\n\r\n        if(arguments.length === 1 && left instanceof Rect) {\r\n            Object.assign(this, left);\r\n        }\r\n    }\r\n\r\n    bind(element) {\r\n        return this._new(this.left, this.top, this.right, this.bottom, element);\r\n    }\r\n\r\n    _new(left, top, right, bottom, domElement=undefined) {\r\n        let r = new this.constructor(this);\r\n        r.left = left;\r\n        r.top = top;\r\n        r.right = right;\r\n        r.bottom = bottom;\r\n        if(domElement !== undefined) r.domElement = domElement;\r\n        return r;\r\n    }\r\n\r\n    toPoint() {\r\n        return new Vec2(this[0], this[1]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n\r\n    translate(x, y) {\r\n        if(Array.isArray(x)) {\r\n            [x, y] = x;\r\n        } else if(typeof x === 'object') {\r\n            y = x.y;\r\n            x = x.x;\r\n        }\r\n\r\n        return this._new(\r\n            this[0] + x,\r\n            this[1] + y,\r\n            this[2] + x,\r\n            this[3] + y\r\n        );\r\n    }\r\n\r\n    addMargins({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left - left,\r\n            this.top - top,\r\n            this.right + right,\r\n            this.bottom + bottom\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    addPadding({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left + left,\r\n            this.top + top,\r\n            this.right - right,\r\n            this.bottom - bottom\r\n        );\r\n    }\r\n\r\n    moveTo({left, top}) {\r\n        let deltaX = left - this.left,\r\n            deltaY = top - this.top;\r\n\r\n        return this._new(\r\n            this.left + deltaX,\r\n            this.top + deltaY,\r\n            this.right + deltaX,\r\n            this.bottom + deltaY\r\n        );\r\n    }\r\n\r\n    intersection({left, top, right, bottom}) {\r\n        left = Math.max(this.left, left);\r\n        right = Math.min(this.right, right);\r\n        bottom = Math.min(this.bottom, bottom);\r\n        top = Math.max(this.top, top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * Creates a new rectangle exactly big enough to hold the current rectangle and the provided rectangle.\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     * @returns {null|Rect}\r\n     */\r\n    union({left, top, right, bottom}) {\r\n        left = Math.min(left, this.left);\r\n        right = Math.max(right, this.right);\r\n        bottom = Math.max(bottom, this.bottom);\r\n        top = Math.min(top, this.top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    contains(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    containsX(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right;\r\n    }\r\n\r\n    containsY(rect) {\r\n        return this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    isXOverlapping(rect) {\r\n        return (rect.left <= this.right && rect.right >= this.left);\r\n    }\r\n\r\n    isYOverlapping(rect) {\r\n        return (rect.top <= this.bottom && rect.bottom >= this.top);\r\n    }\r\n\r\n    isAbove(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.top > this.bottom;\r\n    }\r\n\r\n    isBelow(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.bottom < this.top;\r\n    }\r\n\r\n    isLeftOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.left > this.right;\r\n    }\r\n\r\n    isRightOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.right < this.left;\r\n    }\r\n\r\n    isOverlapping(rect) {\r\n        rect = new Rect(rect);\r\n        return this.isXOverlapping(rect) && this.isYOverlapping(rect);\r\n    }\r\n\r\n    /**\r\n     * Attempts to fit the rect inside of the container anchoring from the anchor point.  The anchor point defaults\r\n     * to the top left corner or (0, 0).\r\n     *\r\n     * If possible entire rect should be clamped to the closest position inside of the container.\r\n     * Else position anchor point the closest possible point inside container.\r\n     *\r\n     * @param container\r\n     * @param anchor\r\n     */\r\n    fit(container, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        container = new Rect(container);\r\n        let starting = container;\r\n\r\n        container = container.add(new Rect(\r\n            anchor.left,\r\n            anchor.top,\r\n            -this.width + anchor.left,\r\n            -this.height + anchor.top\r\n        ));\r\n\r\n        container = new Rect(\r\n            clamp(container.left, starting.left, starting.right),\r\n            clamp(container.top, starting.top, starting.bottom),\r\n            clamp(container.right, starting.left, starting.right),\r\n            clamp(container.bottom, starting.top, starting.bottom)\r\n        );\r\n\r\n        let left = clamp(this.left, container.left, container.right) - anchor.left,\r\n            top = clamp(this.top, container.top, container.bottom) - anchor.top,\r\n            width = this.width,\r\n            height = this.height;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    fitX(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    fitY(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    /**\r\n     * Clamps the anchor point inside the rect.  Anchor point defaults to top left or (0, 0).\r\n     *\r\n     * @param rect\r\n     * @param anchor\r\n     * @returns {Rect}\r\n     */\r\n    clamp(rect, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        rect = new Rect(rect);\r\n\r\n        let width = this.width,\r\n            height = this.height,\r\n            left = clamp(this.left + anchor.left, rect.left, rect.right) - anchor.left,\r\n            top = clamp(this.top + anchor.top, rect.top, rect.bottom) - anchor.top;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    clampX(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    clampY(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Returns the distance between two rects.\r\n     * @param rect\r\n     * @returns {number}\r\n     */\r\n    getDistanceBetween(rect) {\r\n        rect = Rect.fromRect(rect);\r\n\r\n        let isXOverlapping = this.isXOverlapping(rect),\r\n            isYOverlapping = this.isYOverlapping(rect);\r\n\r\n        if(isXOverlapping && isYOverlapping) {\r\n            // Items are overlapping\r\n            return 0;\r\n        } else if(isXOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.bottom - rect.top),\r\n                Math.abs(this.top - rect.bottom)\r\n            );\r\n        } else if(isYOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.right - rect.left),\r\n                Math.abs(this.left - rect.right)\r\n            );\r\n        } else {\r\n            let x1, y1, x2, y2;\r\n\r\n            if(this.right <= rect.left) {\r\n                x1 = this.right;\r\n                x2 = rect.left;\r\n            } else {\r\n                x1 = this.left;\r\n                x2 = rect.right;\r\n            }\r\n\r\n            if(this.bottom <= rect.top) {\r\n                y1 = this.bottom;\r\n                y2 = rect.top;\r\n            } else {\r\n                y1 = this.top;\r\n                y2 = rect.bottom;\r\n            }\r\n\r\n            // Use distance formula to calculate distance.\r\n            return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getDistanceFromPoint(point) {\r\n        point = new Rect(point.left, point.top, point.left, point.top);\r\n\r\n        let closestX = Math.abs(this.left - point.left) < Math.abs(this.right - point.left) ? this.left : this.right,\r\n            closestY = Math.abs(this.top - point.top) < Math.abs(this.bottom - point.top) ? this.top : this.bottom,\r\n            distance = calcDistance(closestX, closestY, point.left, point.top);\r\n\r\n        return this.contains(point) ? -distance : distance;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getCenterPoint() {\r\n        return new Vec2(\r\n            this.left + (this.width / 2),\r\n            this.top + (this.height / 2)\r\n        );\r\n    }\r\n\r\n    reflect(point=null, axis='xy') {\r\n        // Reflect around the given point or origin\r\n        point = point ? new Vec2(point) : new Vec2(0, 0);\r\n\r\n        let x = this.left + (this.width / 2) - point.x,\r\n            y = this.top + (this.height / 2) - point.y;\r\n\r\n        if(axis === 'x' || axis === 'xy') {\r\n            x *= -1;\r\n        }\r\n\r\n        if(axis === 'y' || axis === 'xy') {\r\n            y *= -1;\r\n        }\r\n\r\n        x = x - (this.width / 2) + point.x;\r\n        y = y - (this.height / 2) + point.y;\r\n\r\n        return this._new(x, y, x + this.width, y + this.height);\r\n    }\r\n\r\n    position({my, at, of, offset=null, inside=null, collision=null}) {\r\n        // Of should be a Rect object.\r\n        if(of.getBoundingClientRect) {\r\n            of = new Rect(of);\r\n        }\r\n\r\n        // inside should be a Rect object.\r\n        if(inside && inside.getBoundingClientRect) {\r\n            inside = new Rect(inside);\r\n        }\r\n\r\n        // collision can be string with a space separating the x and y values.\r\n        // for example \"fit flipfit\"\r\n        // normalize it to an {x, y} object.\r\n        if(collision && typeof collision === 'string') {\r\n            let parts = collision.trim().split(regWhitespace);\r\n            collision = {\r\n                x: parts[0],\r\n                y: parts[1] || parts[0]\r\n            };\r\n        }\r\n\r\n        let anchor = this.evaluatePositionString(my),\r\n            reference = of.evaluatePositionString(at),\r\n            deltaX = reference.x - anchor.x,\r\n            deltaY = reference.y - anchor.y;\r\n\r\n        let rect = this.translate(deltaX, deltaY);\r\n\r\n        if(offset) {\r\n            rect = this.translate(offset);\r\n        }\r\n\r\n        // If the rect is already inside the container or if not container or collision function where given\r\n        // return immediately, there is not more work to be done.\r\n        if(!collision || !inside || inside.contains(rect)) {\r\n            return rect;\r\n        }\r\n\r\n        if(!inside.containsX(rect) && (collision.x === 'flip' || collision.x === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'x');\r\n        }\r\n\r\n        if(!inside.containsY(rect) && (collision.y === 'flip' || collision.y === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'y');\r\n        }\r\n\r\n        if(collision.x === 'fit' || collision.x === 'flipfit') {\r\n            rect = rect.fitX(inside);\r\n        }\r\n\r\n        if(collision.y === 'fit' || collision.y === 'flipfit') {\r\n            rect = rect.fitY(inside);\r\n        }\r\n\r\n        return rect;\r\n    }\r\n\r\n    evaluatePositionString(string) {\r\n        if(positionShortHandValues[string]) {\r\n            string = positionShortHandValues[string];\r\n        }\r\n\r\n        let pos = string.trim().split(regWhitespace),\r\n            x = pos[0],\r\n            y = pos[1],\r\n            rx = null,\r\n            ry = null;\r\n\r\n        if(x) {\r\n            rx = this._evaluatePositionStringComponent(x, 'x');\r\n        }\r\n\r\n        if(y) {\r\n            ry = this._evaluatePositionStringComponent(y, 'y');\r\n        }\r\n\r\n        return new Vec2(rx, ry);\r\n    }\r\n\r\n    /**\r\n     * Gets the anchor position relative to the element.  The anchor can be any of the following:\r\n     *\r\n     * A position string.\r\n     * A [x, y, offsetX=0, offsetY=0] array.\r\n     * An object of {left, top, offsetX=0, offsetY=0} properties.\r\n     *\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getAnchor(anchor) {\r\n        if(positionShortHandValues[anchor]) {\r\n            anchor = positionShortHandValues[anchor];\r\n        }\r\n\r\n        let x, y, offsetX = 0, offsetY = 0;\r\n\r\n        if(typeof anchor === 'string') {\r\n            [x, y] = anchor.trim().split(regWhitespace);\r\n        } else if(Array.isArray(anchor)) {\r\n            [x, y, offsetX=0, offsetY=0] = anchor;\r\n        } else {\r\n            x = anchor.left;\r\n            y = anchor.top;\r\n            offsetX = anchor.offsetX || 0;\r\n            offsetY = anchor.offsetY || 0;\r\n        }\r\n\r\n        if(typeof x === 'string') {\r\n            x = this._evaluatePositionStringComponent(x, 'x') - this.left;\r\n        }\r\n\r\n        if(typeof y === 'string') {\r\n            y = this._evaluatePositionStringComponent(y, 'y') - this.top;\r\n        }\r\n\r\n        return new Vec2(x + offsetX, y + offsetY);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Takes a anchor point coordient relative the the rect and returns the true coordients.\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getPoint(anchor) {\r\n        let point = this.getAnchor(anchor);\r\n        return new Vec2(point.left + this.left, point.top + this.top);\r\n    }\r\n\r\n    /**\r\n     * Evaluates a position string value such as \"left+10px\" into it final position on the rect.\r\n     * @param value - The value to evaluate.\r\n     * @param direction - The direction type.  Should be either \"x\" or \"y\".\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _evaluatePositionStringComponent(value, direction) {\r\n        let parts = regPositionPart.exec(value),\r\n            r = 0;\r\n\r\n        if(parts[1]) {\r\n            let p = parts[1];\r\n\r\n            if(direction === 'x') {\r\n                if(p === 'left') {\r\n                    r = this.left;\r\n                } else if(p === 'center' || p === 'middle') {\r\n                    r = this.left + (this.width / 2);\r\n                } else if(p === 'right') {\r\n                    r = this.left + this.width;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            } else {\r\n                if(p === 'top') {\r\n                    r = this.top;\r\n                } else if(p === 'middle' || p === 'center') {\r\n                    r = this.top + (this.height / 2);\r\n                } else if(p === 'bottom') {\r\n                    r = this.top + this.height;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            }\r\n        } else if(direction === 'x') {\r\n            r = this.left;\r\n        } else {\r\n            r = this.top;\r\n        }\r\n\r\n        if(parts[2]) {\r\n            let value = parseFloat(parts[2]),\r\n                type = parts[3] || 'px';\r\n\r\n            if(type === 'px') {\r\n                r += value;\r\n            } else if(type === '%') {\r\n                if(direction === 'x') {\r\n                    r += (value / 100) * this.width;\r\n                } else {\r\n                    r += (value / 100) * this.height;\r\n                }\r\n            } else {\r\n                throw new UnitError(\"Invalid unit: Must be either % or px.\");\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static fromRect({left, top, right, bottom}) {\r\n        return new Rect(left, top, right, bottom);\r\n    }\r\n\r\n    static getBoundingClientRect(element) {\r\n        return new Rect(element);\r\n    }\r\n\r\n    /**\r\n     * Returns the elements Rect without any inline styles applied.\r\n     * @param element\r\n     * @param restore - If true inline style will be restored after measuring.\r\n     * @returns {Rect}\r\n     */\r\n    static getCleanBoundingClientRect(element, restore=true) {\r\n        let state = {},\r\n            keys = [];\r\n\r\n        for(let i = 0; i < element.style.length; i++) {\r\n            keys.push(element.style[i]);\r\n        }\r\n\r\n        for(let key of keys) {\r\n            state[key] = element.style[key];\r\n            element.style[key] = \"\";\r\n        }\r\n\r\n        let r = Rect.getBoundingClientRect(element);\r\n\r\n        if(restore) {\r\n            Object.assign(element.style, state);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static getClientRect() {\r\n        return new Rect(\r\n            0,\r\n            0,\r\n            window.innerWidth,\r\n            window.innerHeight\r\n        );\r\n    }\r\n\r\n    static getRootContainingClientRect() {\r\n        return new Rect(\r\n            -window.scrollX,\r\n            -window.scrollY,\r\n            document.documentElement.clientWidth - window.scrollX,\r\n            document.documentElement.clientHeight - window.scrollY\r\n        );\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get right() {\r\n        return this[2];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[3];\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set right(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set bottom(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    set width(value) {\r\n        this.right = this.left + value;\r\n    }\r\n\r\n    set height(value) {\r\n        this.bottom = this.top + value;\r\n    }\r\n\r\n    get x() {\r\n        return this.left;\r\n    }\r\n\r\n    get y() {\r\n        return this.top;\r\n    }\r\n\r\n    set x(value) {\r\n        this.left = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this.top = value;\r\n    }\r\n}\r\n","import {clamp} from '../utility';\r\n\r\n\r\n/**\r\n * Stores a 2 value Vector.\r\n */\r\nexport default class Vec2 {\r\n    constructor(x=0, y=0) {\r\n        if(x instanceof Vec2) {\r\n            this[0] = x.x;\r\n            this[1] = x.y;\r\n        } else if(Array.isArray(x)) {\r\n            this[0] = x[0];\r\n            this[1] = x[1];\r\n        } else if(typeof x === 'object') {\r\n            if(x.left !== undefined) {\r\n                this[0] = x.left;\r\n                this[0] = x.top;\r\n            } else {\r\n                this[0] = x.x;\r\n                this[1] = x.y;\r\n            }\r\n        } else {\r\n            this[0] = x;\r\n            this[1] = y;\r\n        }\r\n    }\r\n\r\n    add(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] + vec2,\r\n                this[1] + vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] + vec2[0],\r\n                this[1] + vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] - vec2,\r\n                this[1] - vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] - vec2[0],\r\n                this[1] - vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return new Vec2(this[0] * value, this[1] * value);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] % vec2,\r\n                this[1] % vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] % vec2[0],\r\n                this[1] % vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec2) {\r\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return Vec2(this[0], this[1]);\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get right() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[1];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this[0];\r\n    }\r\n\r\n    set width(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get height() {\r\n        return this[1];\r\n    }\r\n\r\n    set height(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate() {\r\n        return `translate(${this.x}px, ${this.y}px)`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\r\n    }\r\n\r\n    clamp(vec4) {\r\n        return new Vec2(\r\n            clamp(this.left, vec4.left, vec4.right),\r\n            clamp(this.top, vec4.top, vec4.bottom)\r\n        );\r\n    }\r\n\r\n    static fromVertex(vertex) {\r\n        if(Array.isArray(vertex)) {\r\n            return new Vec2(vertex[0], vertex[1]);\r\n        } else if(vertex.hasOwnProperty('left')) {\r\n            return new Vec2(vertex.left, vertex.top);\r\n        } else {\r\n            return new Vec2(vertex.x, vertex.y);\r\n        }\r\n    }\r\n}\r\n","\r\n\r\n/**\r\n * Stores a 3 value vector.\r\n */\r\nexport default class Vec3 {\r\n    constructor(x=0, y=0, z=0) {\r\n        this[0] = x;\r\n        this[1] = y;\r\n        this[2] = z;\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get z() {\r\n        return this[2];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set z(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n            this[2] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n            this[2] = value[2];\r\n        }\r\n    }\r\n\r\n    add(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] + vec3,\r\n                this[1] + vec3,\r\n                this[2] + vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] + vec3[0],\r\n                this[1] + vec3[1],\r\n                this[2] + vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] - vec3,\r\n                this[1] - vec3,\r\n                this[2] - vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] - vec3[0],\r\n                this[1] - vec3[1],\r\n                this[2] - vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return new Vec3(\r\n            this[0] * value,\r\n            this[1] * value,\r\n            this[2] * value\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec3) {\r\n        return vec3 === this || (vec3[0] === this[0] && vec3[1] === this[1] && vec3[2] === this[2]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] % vec3,\r\n                this[1] % vec3,\r\n                this[2] % vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] % vec3[0],\r\n                this[1] % vec3[1],\r\n                this[2] % vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return new Vec3(this[0], this[1], this[2]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toHex() {\r\n        let r = Math.round(this.r).toString(16),\r\n            g = Math.round(this.g).toString(16),\r\n            b = Math.round(this.b).toString(16);\r\n\r\n        if(r.length === 1) {\r\n            r = '0' + r;\r\n        }\r\n\r\n        if(g.length === 1) {\r\n            g = '0' + g;\r\n        }\r\n\r\n        if(b.length === 1) {\r\n            b = '0' + b;\r\n        }\r\n\r\n        return `#${r}${g}${b}`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toRGB() {\r\n        return `rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, ${this.z}px)`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromHex(hex) {\r\n        let m = /^#?([0-9a-f]{3})$/i.exec(hex);\r\n\r\n        if(m) {\r\n            hex = m[1][0] + m[1][0] + m[1][1] + m[1][1] + m[1][2] + m[1][2];\r\n        } else {\r\n            m = /^#?([0-9a-f]{6})$/i.exec(hex);\r\n\r\n            if(m) {\r\n                hex = m[1];\r\n            } else {\r\n                throw new Error(`Could not parse value ${hex}`);\r\n            }\r\n        }\r\n\r\n        hex = parseInt(hex, 16);\r\n\r\n        // r, g, b\r\n        return new Vec3(\r\n            hex & 0xff0000 >> 16,\r\n            hex & 0x00ff00 >> 8,\r\n            hex & 0x0000ff\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGB(value) {\r\n        let m = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgb value ${value}`);\r\n        }\r\n\r\n        return new Vec3(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n        );\r\n    }\r\n}\r\n","/**\r\n * Class to store a 4 value vector.\r\n * Provides DOMRect interface.\r\n */\r\nexport default class Vec4 {\r\n    /**\r\n     * r, g, b, a\r\n     * left, top, right, bottom\r\n     *\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     */\r\n    constructor(left, top, right, bottom) {\r\n        this[0] = left;\r\n        this[1] = top;\r\n        this[2] = right;\r\n        this[3] = bottom;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get a() {\r\n        return this[3];\r\n    }\r\n\r\n    set a(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    set(valueOrVec4) {\r\n        if(typeof valueOrVec4 !== 'object') {\r\n            this[0] = valueOrVec4;\r\n            this[1] = valueOrVec4;\r\n            this[2] = valueOrVec4;\r\n            this[3] = valueOrVec4;\r\n        } else {\r\n            this[0] = valueOrVec4[0];\r\n            this[1] = valueOrVec4[1];\r\n            this[2] = valueOrVec4[2];\r\n            this[3] = valueOrVec4[3];\r\n        }\r\n    }\r\n\r\n    add(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] + valueOrVec4,\r\n                this[1] + valueOrVec4,\r\n                this[2] + valueOrVec4,\r\n                this[3] + valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] + valueOrVec4[0],\r\n                this[1] + valueOrVec4[1],\r\n                this[2] + valueOrVec4[2],\r\n                this[3] + valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] - valueOrVec4,\r\n                this[1] - valueOrVec4,\r\n                this[2] - valueOrVec4,\r\n                this[3] - valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] - valueOrVec4[0],\r\n                this[1] - valueOrVec4[1],\r\n                this[2] - valueOrVec4[2],\r\n                this[3] - valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return this._new(\r\n            this[0] * value,\r\n            this[1] * value,\r\n            this[2] * value,\r\n            this[3] * value\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec4) {\r\n        return vec4 === this || (vec4[0] === this[0] && vec4[1] === this[1] && vec4[2] === this[2] && vec4[3] === this[3]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] % valueOrVec4,\r\n                this[1] % valueOrVec4,\r\n                this[2] % valueOrVec4,\r\n                this[3] % valueOrVec4,\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] % valueOrVec4[0],\r\n                this[1] % valueOrVec4[1],\r\n                this[2] % valueOrVec4[2],\r\n                this[3] % valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toRGBA() {\r\n        return `rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.a})`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return new this.constructor(this[0], this[1], this[2], this[3]);\r\n    }\r\n\r\n    _new(left, top, right, bottom) {\r\n        return new this.constructor(left, top, right, bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBAObject({r, g, b, a}) {\r\n        return new Vec4(r, g, b, a);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBA(value) {\r\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgba value ${value}`);\r\n        }\r\n\r\n        return new Vec4(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n            parseFloat(m[4]),\r\n        );\r\n    }\r\n}\r\n","import Rect from \"./Rect\";\r\nimport Vec2 from \"./Vec2\";\r\nimport Vec3 from \"./Vec3\";\r\nimport Vec4 from \"./Vec4\";\r\nimport RGBA from \"./RGBA\";\r\nimport {UnitError} from \"../errors\";\r\n\r\n\r\nexport {Rect, Vec2, Vec3, Vec4, RGBA, UnitError};\r\n","import Resizeable, {CONTAINERS} from 'core/ui/Resizeable';\r\nimport Draggable from 'core/ui/Draggable';\r\nimport {clientRectToDocumentSpace, documentRectToClientSpace} from 'core/ui/position';\r\n\r\n\r\nwindow.clientRectToDocumentSpace = clientRectToDocumentSpace;\r\nwindow.documentRectToClientSpace = documentRectToClientSpace;\r\n\r\n\r\nexport default class ResizeableTestPage {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    load() {\r\n        let element1 = document.querySelector('#test-resizeable1');\r\n\r\n        this.draggable = new Draggable(element1, {exclude: '.ui-resizeable-handle', container: CONTAINERS.client});\r\n        this.resizeable = new Resizeable(element1, {handles: 'all', helper: 'test-helper', container: CONTAINERS.client, keepAspectRatio: 0.5625});\r\n        this.element1 = element1;\r\n    }\r\n}\r\n"],"sourceRoot":""}