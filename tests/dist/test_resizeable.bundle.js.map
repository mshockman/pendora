{"version":3,"sources":["webpack://pendora/webpack/universalModuleDefinition","webpack://pendora/webpack/bootstrap","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/data.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/fx/Animation.js","webpack://pendora/./src/core/fx/FX.js","webpack://pendora/./src/core/fx/easing.js","webpack://pendora/./src/core/fx/frame.js","webpack://pendora/./src/core/fx/types.js","webpack://pendora/./src/core/ui/Draggable.js","webpack://pendora/./src/core/ui/Resizeable.js","webpack://pendora/./src/core/ui/position.js","webpack://pendora/./src/core/utility/debounce.js","webpack://pendora/./src/core/utility/decorators.js","webpack://pendora/./src/core/utility/dom.js","webpack://pendora/./src/core/utility/index.js","webpack://pendora/./src/core/utility/iter.js","webpack://pendora/./src/core/utility/math.js","webpack://pendora/./src/core/utility/object.js","webpack://pendora/./src/core/utility/set.js","webpack://pendora/./src/core/vectors/RGBA.js","webpack://pendora/./src/core/vectors/Rect.js","webpack://pendora/./src/core/vectors/Vec2.js","webpack://pendora/./src/core/vectors/Vec3.js","webpack://pendora/./src/core/vectors/Vec4.js","webpack://pendora/./src/core/vectors/index.js","webpack://pendora/./tests/src/test_resizeable.js"],"names":["TOPICS","Symbol","STOP","Publisher","topic","callback","push","fn","on","off","args","apply","arguments","length","callbacks","i","cb","splice","slice","e","uuid","prefix","Math","random","replace","Data","expando","owner","cache","acceptData","nodeType","Object","defineProperty","value","configurable","key","prop","undefined","set","get","keys","isEmptyObject","privateCache","ExtendableError","message","name","constructor","Error","captureStackTrace","stack","IndexError","KeyError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","UnitError","assert","condition","Animation","duration","frames","applyFrame","defaultApplyFrame","bubbleFrameEvent","finishFrame","element","easing","onStart","onFrame","onPause","onCancel","onEnd","onComplete","FX","animation","fx","EASING","linear","position","autoPlay","init","call","destroy","play","animate","complete","config","defaults","_options","assign","canceled","paused","pending","error","playing","regNumberWithUnit","regColor","regFunction","TYPE_FUNCTIONS","hex","RGBA","parseHexColorStringArg","rgb","parseRGBAColorStringArgs","rgba","DeadFXError","assertFXAlive","status","doPromiseAction","onAction","resolveOrReject","_prepareValue","trim","m","exec","NumberWithUnit","parseFloat","_getFrames","r","keyframeIndex","hasOwnProperty","frame","property","toStringTag","selectElement","pos","freeze","properties","sort","a","b","startPosition","startValue","endPosition","endValue","getFrameFX","options","p","delta","subtract","add","scalar","tick","performance","now","frameFN","timestamp","dispatchEvent","CustomEvent","bubbles","detail","window","requestAnimationFrame","_complete","cancelAnimationFrame","_triggerEndEvent","completeAnimation","_cancel","getFrame","onResolve","state","onReject","Promise","resolve","reject","onFinally","then","style","toString","unit","TypeError","cursor","clientX","clientY","boundingRect","x","left","y","top","clone","opacity","draggable","helper","cloneNode","_getScrollParent","o","parentElement","scrollWidth","clientWidth","scrollHeight","clientHeight","_translate","target","transform","CONTAINERS","client","height","innerHeight","width","innerWidth","right","bottom","viewport","parent","bb","getBoundingClientRect","scrollLeft","scrollTop","_clampPositionToContainer","rect","container","closest","clamp","TOLERANCE_FUNCTIONS","intersect","droppable","item","origin","Draggable","axis","exclude","delay","offset","disabled","distance","handle","revert","scroll","selector","droppables","tolerance","setHelperSize","grid","document","querySelector","_onMouseDown","onMouseDown","bind","Array","isArray","addDroppables","addEventListener","isDragging","_revertFX","concat","event","contains","data","excluded","preventDefault","doc","startMouseDocumentX","scrollX","startMouseDocumentY","scrollY","mouseDocumentX","mouseDocumentY","startDragging","startDrag","timer","onTimeout","removeEventListener","onMouseUp","clearTimeout","setTimeout","onMouseMove","sqrt","startMouseX","startMouseY","posX","posY","cancel","getDropTargets","startBoundingBox","startBBDocument","clientRectToDocumentSpace","scrollTick","boxSizing","appendChild","startingTranslation","getTranslation","_offset","startingRect","_getPosition","dropData","setElementClientPosition","_getDropData","intersectsBefore","intersectsAfter","_dispatchDroppableEvent","_triggerEvent","details","mouseX","mouseY","originalEvent","lastTick","parentBB","helperBB","isOOB","classList","remove","translation","accepted","accept","isAccepted","startX","removeChild","documentRectToClientSpace","dropped","_intersects","dataset","relatedTarget","startingBoundingClientRect","type","querySelectorAll","indexOf","endingRect","dropBox","eventName","publish","dropElement","customEvent","snapToGrid","DIRECTIONS","Set","Resizeable","handles","minWidth","maxWidth","minHeight","maxHeight","keepAspectRatio","autoHide","split","isSuperset","direction","createElement","_startResizing","isResizing","resizeable","startPosX","startPosY","startingClientRect","startBox","addClasses","getComputedStyle","deltaX","deltaY","Infinity","_container","ceil","floor","console","log","targetClientRect","regMatrix","getOffsetElement","getClientRect","Rect","getBoundingOffsetRect","offsetParent","offsetRect","getRootContainingClientRect","getBoundingDocumentRect","pageXOffset","pageYOffset","Vec3","setTranslation","z","getCssPosition","Vec2","parseInt","setCssPosition","method","positionType","box","current","cssPosition","fromRect","gridSize","roundingFunction","round","Number","isNaN","convertDomRectToObject","domRect","getPointOnElement","referenceElement","point","constrain","getSubBoundingBox","getDistanceBetweenRects","rect1","rect2","vec1","vec2","isXOverlapping","isYOverlapping","min","abs","x1","y1","x2","y2","pow","getElementOffset","setElementOffset","coords","debounce","wait","timeout","later","proto","descriptor","placement","REG_WHITESPACE","parseHTML","html","template","innerHTML","content","fragment","createDocumentFragment","firstChild","createFragment","classes","removeClasses","assignAttributes","attributes","setAttribute","context","jquery","emptyElement","getScroll","isWindow","setScroll","scrollTo","findChild","child","matches","l","filterChildren","variable","setInterval","items","values","enumerate","chain","object","iterable","iterables","iter","firstValue","all","any","minValue","maxValue","max","modulo","mod","calcDistance","randomChoice","array","arraysEqual","array1","array2","getOwnProperty","obj","propName","defaultValue","getPropertyByPath","path","parts","part","rangeFindItem","predicate","startingIndex","endingIndex","subset","elem","has","union","setA","setB","_union","intersection","_intersection","symmetricDifference","_difference","difference","regPercentage","g","test","substring","substr","Vec4","regWhitespace","regPositionPart","positionShortHandValues","topleft","topright","bottomleft","bottomright","domElement","_new","anchor","getAnchor","starting","fit","closestX","closestY","my","at","of","inside","collision","evaluatePositionString","reference","translate","containsX","reflect","getCenterPoint","containsY","fitX","fitY","string","rx","ry","_evaluatePositionStringComponent","offsetX","offsetY","restore","documentElement","vec4","vertex","vec3","valueOrVec4","ResizeableTestPage","element1"],"mappings":"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","file":"test_resizeable.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pendora\"] = factory();\n\telse\n\t\troot[\"pendora\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tests/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","let TOPICS = Symbol('topics');\r\n\r\n\r\nexport function STOP() {\r\n    throw STOP;\r\n}\r\n\r\n\r\nexport default class Publisher {\r\n    constructor() {\r\n        this[TOPICS] = {};\r\n    }\r\n\r\n    on(topic, callback) {\r\n        if(!this[TOPICS][topic]) this[TOPICS][topic] = [];\r\n        this[TOPICS][topic].push(callback);\r\n        return this;\r\n    }\r\n\r\n    once(topic, fn) {\r\n        let on = (...args) => {\r\n            this.off(topic, fn);\r\n            return fn.apply(this, args);\r\n        };\r\n\r\n        on.fn = fn;\r\n        this.on(topic, fn);\r\n        return this;\r\n    }\r\n\r\n    off(topic, callback) {\r\n        if(arguments.length === 0) {\r\n            // CLear all topics.\r\n            this[TOPICS] = {};\r\n            return this;\r\n        } else if(arguments.length === 1) {\r\n            // Clear single topic.\r\n            this[TOPICS][topic] = [];\r\n            return this;\r\n        }\r\n\r\n        if(!this[TOPICS] || !this[TOPICS][topic] || !this[TOPICS][topic].length) {\r\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\r\n            return this;\r\n        }\r\n\r\n        let callbacks = this[TOPICS][topic];\r\n\r\n        for(let i = 0; i < callback.length; i++) {\r\n            let cb = callbacks[i];\r\n            if(cb === callback || cb.fn === callback) {\r\n                callbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(callbacks.length === 0) {\r\n            delete this[TOPICS][topic];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    hasEvent(topic, callback) {\r\n        if(arguments.length === 1) {\r\n            return !!this[TOPICS][topic];\r\n        } else {\r\n            let callbacks = this[TOPICS][topic];\r\n\r\n            for(let i = 0; i < callbacks.length; i++) {\r\n                let cb = callbacks[i];\r\n                if(cb === callback || cb.fn === callback) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    publish(topic, ...args) {\r\n        if(this[TOPICS][topic]) {\r\n            let callbacks = this[TOPICS][topic].slice(0);\r\n\r\n            for(let cb of callbacks) {\r\n                try {\r\n                    cb.apply(this, args);\r\n                } catch (e) {\r\n                    if(e === STOP) {\r\n                        return e;\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","import {isEmptyObject} from \"./utility\";\r\n\r\n\r\nlet uuid = 1,\r\n    prefix = 'p-' + (''+Math.random()).replace(/\\D/g, '');\r\n\r\n\r\nexport class Data {\r\n    constructor() {\r\n        this.expando = `${prefix}-${uuid++}`;\r\n    }\r\n\r\n    static acceptData(owner) {\r\n        return owner.nodeType === 1 || owner.nodeType === 9 || !(+owner.nodeType);\r\n    }\r\n\r\n    cache(owner) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) {\r\n            cache = {};\r\n\r\n            if(Data.acceptData(owner)) {\r\n                if(owner.nodeType) {\r\n                    owner[this.expando] = cache;\r\n                } else {\r\n                    Object.defineProperty(owner, this.expando, {\r\n                        value: cache,\r\n                        configurable: true\r\n                    });\r\n                }\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    set(owner, key, value) {\r\n        let cache = this.cache(owner);\r\n\r\n        if(typeof key === 'object') {\r\n            for(let prop in key) {\r\n                cache[prop] = key[prop];\r\n            }\r\n        } else {\r\n            cache[key] = value;\r\n        }\r\n\r\n        return cache;\r\n    }\r\n\r\n    get(owner, key) {\r\n        if(key === undefined) {\r\n            return this.cache(owner);\r\n        } else {\r\n            let cache = owner[this.expando];\r\n\r\n            if(cache) {\r\n                return cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    access(owner, key, value) {\r\n        if(arguments.length === 2) {\r\n            if(typeof key === 'object') {\r\n                return this.set(owner, key);\r\n            } else {\r\n                return this.get(owner, key);\r\n            }\r\n        } else if(arguments.length === 1) {\r\n            return this.cache(owner);\r\n        } else if(arguments.length === 3) {\r\n            return this.set(owner, key, value);\r\n        }\r\n    }\r\n\r\n    remove(owner, ...keys) {\r\n        let cache = owner[this.expando];\r\n\r\n        if(!cache) return;\r\n\r\n        if(arguments.length === 1) {\r\n            if(owner.nodeType) {\r\n                owner[this.expando] = undefined;\r\n            } else {\r\n                delete owner[this.expando];\r\n            }\r\n        } else {\r\n            for(let key of keys) {\r\n                delete cache[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    hasData(owner) {\r\n        let cache = owner[this.expando];\r\n        return cache && !isEmptyObject(cache);\r\n    }\r\n}\r\n\r\n\r\nexport let privateCache = new Data();","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n\r\n\r\nexport class UnitError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if (!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n","import {EASING} from \"./easing\";\r\nimport FX from \"./FX\";\r\nimport {defaultApplyFrame} from \"./frame\";\r\n\r\n\r\nexport default class Animation {\r\n    static defaultApplyFrame = defaultApplyFrame;\r\n\r\n    static complete = FX.complete;\r\n    static canceled = FX.canceled;\r\n    static paused = FX.paused;\r\n    static pending = FX.pending;\r\n    static error = FX.error;\r\n    static playing = FX.playing;\r\n\r\n    /**\r\n     *\r\n     * @param duration\r\n     * @param frames {{}|function(Element element, Animation animation):{}}\r\n     * @param applyFrame - The function that takes a frame and applies it to the element.\r\n     * @param bubbleFrameEvent\r\n     * @param finishFrame\r\n     */\r\n    constructor({duration=null, frames, applyFrame = defaultApplyFrame, bubbleFrameEvent = false, finishFrame = null}) {\r\n        this.frames = frames;\r\n        this.applyFrame = applyFrame || Animation.defaultApplyFrame;\r\n        this.bubbleFrameEvent = bubbleFrameEvent;\r\n        this.finishFrame = finishFrame;\r\n        this.duration = duration;\r\n    }\r\n\r\n    /**\r\n     * Creates an fx object.\r\n     *\r\n     * @param element\r\n     * @param frames\r\n     * @param duration\r\n     * @param applyFrame\r\n     * @param easing\r\n     * @param onStart\r\n     * @param onFrame\r\n     * @param onPause\r\n     * @param onCancel\r\n     * @param onEnd\r\n     * @param onComplete\r\n     * @param bubbleFrameEvent\r\n     * @param finishFrame\r\n     * @returns {FX}\r\n     */\r\n    init({element, frames, duration, applyFrame, easing, onStart, onFrame, onPause, onCancel, onEnd, onComplete, bubbleFrameEvent, finishFrame}) {\r\n        return new FX(element, frames, duration, {\r\n            applyFrame,\r\n            easing,\r\n            animation: this,\r\n            onStart,\r\n            onFrame,\r\n            onPause,\r\n            onCancel,\r\n            onEnd,\r\n            onComplete,\r\n            bubbleFrameEvent,\r\n            finishFrame,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Ran after the fx completes.\r\n     * @param fx\r\n     */\r\n    destroy(fx) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Animates the given element.  Returns the FX object that can be used to control the animation.\r\n     *\r\n     * @param element {HTMLElement|Element} The element to animate.\r\n     * @param duration {Number} The duration of the animation in milliseconds.\r\n     * @param easing {function(Number)} An easing function that controls the rate of change for the animation.  If null linear animation is used.\r\n     * @param onStart {function(FX)} A callback function that is called right before the animation starts playing.\r\n     * @param onFrame {function(FX, frame)} A callback that is called per frame.\r\n     * @param onPause {function(FX)} A callback that is called when the FX pauses.\r\n     * @param onCancel {function(FX)} A callback that is called when the FX cancels.\r\n     * @param onEnd {function(FX)} A callback that is called when the animation ends.  Whether by completing, pausing, or canceling.  See Fx.status to determine what happened.\r\n     * @param onComplete {function(FX)} A callback that is called when the animation complete successfully.\r\n     * @param position\r\n     * @param autoPlay\r\n     * @returns {FX}\r\n     */\r\n    animate(element, {duration=null, easing = EASING.linear, onStart = null, onFrame = null, onPause = null, onCancel = null, onEnd = null, onComplete = null, position=0, autoPlay=true} = {}) {\r\n        if(duration === null) {\r\n            duration = this.duration;\r\n        }\r\n\r\n        let fx = this.init({\r\n            element: element,\r\n            frames: this.frames,\r\n            duration,\r\n            applyFrame: this.applyFrame,\r\n            easing,\r\n            animation: this,\r\n            onStart,\r\n            onFrame,\r\n            onPause,\r\n            onCancel,\r\n            onEnd: (fx) => {\r\n                if(onEnd) onEnd.call(fx, fx);\r\n                this.destroy(fx);\r\n            },\r\n            onComplete,\r\n            bubbleFrameEvent: this.bubbleFrameEvent,\r\n            finishFrame: this.finishFrame\r\n        });\r\n\r\n        if(position) {\r\n            fx.goto(position);\r\n        }\r\n\r\n        if(autoPlay) {\r\n            fx.play();\r\n        }\r\n        return fx;\r\n    }\r\n\r\n    goto(element, position) {\r\n        this.animate(element, {autoPlay: false, position: position});\r\n        return Animation.complete;\r\n    }\r\n\r\n    /**\r\n     * Creates a function that calls the animate method with the bound parameters.\r\n     * Parameters can be overridden in the created function when called.\r\n     * Method has the same signature as the animate method.\r\n     *\r\n     * Usage:\r\n     * let animation = new Animation(...),\r\n     *     fx = animation.bind(null, 2000);\r\n     *\r\n     * fx(element) // Animation the element over 2000 milliseconds.\r\n     *\r\n     * @param element\r\n     * @param config\r\n     * @returns {function(HTMLElement element, Number duration, Object config): FX}\r\n     */\r\n    bind(element = null, config = null) {\r\n        let defaults = {\r\n            element,\r\n            config\r\n        };\r\n\r\n        return (element = defaults, config=null) => {\r\n            element = element === defaults ? element.defaults : element;\r\n\r\n            let _options = {};\r\n            if (defaults.config) Object.assign(_options, defaults.config);\r\n            if (config) Object.assign(_options, config);\r\n\r\n            return this.animate(element, _options);\r\n        };\r\n    }\r\n}\r\n","import {ExtendableError} from \"../errors\";\r\nimport {selectElement} from \"../utility\";\r\nimport {RGBA} from \"../vectors\";\r\nimport {NumberWithUnit} from \"./types\";\r\nimport {EASING} from \"./easing\";\r\nimport {defaultApplyFrame} from \"./frame\";\r\n\r\n\r\nconst regNumberWithUnit = /^(\\d+\\.?\\d*)([a-z]+|%)$/i,\r\n    regColor = /^(?:#([a-f0-9]{3})|#([a-f0-9]{6})|#([a-f0-9]{8}))$/i,\r\n    regFunction = /^([a-z_][a-z_0-9]*)\\((.+?)\\)$/i;\r\n\r\n\r\nconst TYPE_FUNCTIONS = {\r\n    hex: RGBA.parseHexColorStringArg,\r\n    rgb: RGBA.parseRGBAColorStringArgs,\r\n    rgba: RGBA.parseRGBAColorStringArgs\r\n};\r\n\r\n\r\nexport class DeadFXError extends ExtendableError {}\r\n\r\n\r\nfunction assertFXAlive(fx) {\r\n    if (fx.status === FX.complete || fx.status === FX.error || fx.status === FX.complete) {\r\n        throw new DeadFXError(\"FX object is dead.\");\r\n    }\r\n}\r\n\r\n\r\nfunction doPromiseAction(onAction, value, resolveOrReject) {\r\n    if (typeof onAction === 'function') {\r\n        value = onAction(value);\r\n    }\r\n\r\n    resolveOrReject(value);\r\n}\r\n\r\n\r\nfunction _prepareValue(value) {\r\n    if (typeof value === 'string') {\r\n        value = value.trim();\r\n\r\n        let m = regNumberWithUnit.exec(value);\r\n\r\n        if (m) {\r\n            return new NumberWithUnit(parseFloat(m[1]), m[2]);\r\n        }\r\n\r\n        m = regColor.exec(value);\r\n\r\n        if (m) {\r\n            return TYPE_FUNCTIONS.hex(m[0]);\r\n        }\r\n\r\n        m = regFunction.exec(value);\r\n\r\n        if (m) {\r\n            return TYPE_FUNCTIONS[m[1]](m[2]);\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\nfunction _getFrames(fx, element, frames) {\r\n    let r = {};\r\n\r\n    if (typeof frames === 'function') {\r\n        frames = frames.call(fx, element, fx);\r\n    }\r\n\r\n    for (let keyframeIndex in frames) {\r\n        if (!frames.hasOwnProperty(keyframeIndex)) continue;\r\n\r\n        let frame = frames[keyframeIndex];\r\n        r[keyframeIndex] = {};\r\n\r\n        for (let property in frame) {\r\n            if (!frame.hasOwnProperty(property)) continue;\r\n            r[keyframeIndex][property] = _prepareValue(frame[property]);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * @implements Promise\r\n */\r\nexport default class FX {\r\n    static pending = \"Pending\";\r\n    static complete = \"Complete\";\r\n    static error = \"Error\";\r\n    static paused = \"Paused\";\r\n    static canceled = \"Canceled\";\r\n    static playing = \"Playing\";\r\n\r\n    #element;\r\n    #chained;\r\n    #frames;\r\n    #internalValue;\r\n\r\n    #animation;\r\n\r\n    #frameId;\r\n    #status;\r\n    #position;\r\n\r\n    #finishFrame;\r\n    #applyFrame;\r\n    #easing;\r\n    #duration;\r\n\r\n    [Symbol.toStringTag] = \"[Object FX]\";\r\n\r\n    constructor(element, frames, duration, {applyFrame = defaultApplyFrame, animation = null, easing = EASING.linear, onComplete = null, onCancel = null, onFrame = null, onStart = null, onEnd = null, bubbleFrameEvent = false, finishFrame = null, init = null} = {}) {\r\n        this.#frames = [];\r\n        this.#chained = [];\r\n        this.#element = selectElement(element);\r\n        this.#internalValue = undefined;\r\n\r\n        this.onComplete = onComplete;\r\n        this.onCancel = onCancel;\r\n        this.onFrame = onFrame;\r\n        this.onStart = onStart;\r\n        this.onEnd = onEnd;\r\n        this.bubbleFrameEvent = bubbleFrameEvent;\r\n\r\n        this.#animation = animation;\r\n        this.#finishFrame = finishFrame;\r\n        this.#applyFrame = applyFrame;\r\n        this.#easing = easing;\r\n        this.#frameId = null;\r\n        this.#status = FX.pending;\r\n\r\n        this.#duration = duration;\r\n        this.#position = 0;\r\n\r\n        if (init) {\r\n            init.call(this, this);\r\n        }\r\n\r\n        // Prepare frames\r\n        frames = _getFrames(this, this.#element, frames);\r\n\r\n        for (let key in frames) {\r\n            if (frames.hasOwnProperty(key)) {\r\n                let frame = frames[key],\r\n                    pos = parseFloat(key) / 100;\r\n\r\n                if (typeof frame === 'function') {\r\n                    frame = frame.call(this, this.#element);\r\n                }\r\n\r\n                frame = Object.freeze(Object.assign({}, frame));\r\n\r\n                this.#frames.push(Object.freeze({\r\n                    position: pos,\r\n                    properties: frame\r\n                }));\r\n            }\r\n        }\r\n\r\n        this.#frames.sort((a, b) => a.position - b.pos);\r\n    }\r\n\r\n    get animation() {\r\n        return this.#animation;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get easing() {\r\n        return this.#easing;\r\n    }\r\n\r\n    get status() {\r\n        return this.#status;\r\n    }\r\n\r\n    get position() {\r\n        return this.#position;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get duration() {\r\n        return this.#duration;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    get frames() {\r\n        return this.#frames.slice();\r\n    }\r\n\r\n    get element() {\r\n        return this.#element;\r\n    }\r\n\r\n    // set position(value) {\r\n    //     if (typeof value === 'string') {\r\n    //         value = (parseFloat(value) / 100) * this.#duration;\r\n    //     }\r\n    //\r\n    //     this.#position = Math.max(0.0, Math.min(this.#duration, value));\r\n    // }\r\n\r\n    get state() {\r\n        if (this.status === FX.complete || this.status === FX.canceled) {\r\n            return \"Fulfilled\";\r\n        } else if (this.status === FX.error) {\r\n            return \"Rejected\";\r\n        } else {\r\n            return \"Pending\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the frame options at the given position.\r\n     * @param position\r\n     */\r\n    getFrameFX(position) {\r\n        // position can either be a percentage string (aka 50%) or the time in milliseconds into the animation\r\n        // which will be converted into a percentage.\r\n        if (typeof position === 'string') {\r\n            position = parseFloat(position) / 100;\r\n        }\r\n\r\n        // At this point position should be a value between 0.0 and 1.0.\r\n        // Easing functions specify that rate of change in the properties.\r\n        // It takes the position and maps it to another value between 0.0f and 1.0f.\r\n        // By default linear easing is used.\r\n        if (this.#easing) {\r\n            position = this.#easing(position);\r\n        }\r\n\r\n        let r = {};\r\n\r\n        for (let frame of this.#frames) {\r\n            for (let key in frame.properties) {\r\n                if (frame.properties.hasOwnProperty(key)) {\r\n                    let value = frame.properties[key];\r\n\r\n                    if (!r[key]) {\r\n                        r[key] = {startPosition: null, startValue: null, endPosition: null, endValue: null};\r\n                    }\r\n\r\n                    if (frame.position <= position) {\r\n                        r[key].startPosition = frame.position;\r\n                        r[key].startValue = value;\r\n                    } else if (frame.position > position && r[key].endPosition === null) {\r\n                        r[key].endPosition = frame.position;\r\n                        r[key].endValue = value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Returns the final frame at the given position.  All options at this point should be parsed and there final values\r\n     * should be available.\r\n     *\r\n     * @param position\r\n     */\r\n    getFrame(position) {\r\n        let frame = this.getFrameFX(position),\r\n            r = {};\r\n\r\n        if (typeof position === 'string') {\r\n            position = parseFloat(position) / 100;\r\n        }\r\n\r\n        // Takes the frame config options and calculates the final values.\r\n        for (let property in frame) {\r\n            if (frame.hasOwnProperty(property)) {\r\n                let options = frame[property];\r\n\r\n                if ((options.endPosition === null || options.endPosition <= position) && options.startValue !== null) {\r\n                    r[property] = options.startValue;\r\n                } else if (options.startValue !== null) {\r\n                    if (typeof options.startValue === 'object') {\r\n                        let p = (position - options.startPosition) / (options.endPosition - options.startPosition),\r\n                            delta = options.endValue.subtract(options.startValue);\r\n\r\n                        r[property] = options.startValue.add(delta.scalar(p));\r\n                    } else if (typeof options.startValue === 'number') {\r\n                        let duration = (options.endPosition - options.startPosition),\r\n                            p = (position - options.startPosition) / duration,\r\n                            delta = options.endValue - options.startValue;\r\n\r\n                        r[property] = options.startValue + (delta * p);\r\n                    } else {\r\n                        r[property] = options.startValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // User provided hook that can perform the final touch ups on the frame.\r\n        if (this.#finishFrame) {\r\n            r = this.#finishFrame(this, frame);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    play() {\r\n        assertFXAlive(this);\r\n\r\n        if (this.#frameId === null) {\r\n            this.goto(this.#position);\r\n\r\n            let tick = performance.now();\r\n\r\n            let frameFN = () => {\r\n                let timestamp = performance.now(),\r\n                    delta = timestamp - tick,\r\n                    position = this.#position + (delta / this.duration);\r\n\r\n                tick = timestamp;\r\n                let frame = this.goto(position);\r\n                this.#status = FX.playing;\r\n\r\n                if (this.onFrame) this.onFrame.call(this, this, frame);\r\n\r\n                this.#element.dispatchEvent(new CustomEvent('animation.frame', {\r\n                    bubbles: this.bubbleFrameEvent,\r\n                    detail: this\r\n                }));\r\n\r\n                if (this.#position < 1) {\r\n                    this.#frameId = window.requestAnimationFrame(frameFN);\r\n                } else {\r\n                    this._complete(FX.complete, FX.complete);\r\n                    this.#frameId = null;\r\n                }\r\n            };\r\n\r\n            if (this.onStart) {\r\n                this.onStart.call(this, this);\r\n            }\r\n\r\n            this.#element.dispatchEvent(new CustomEvent('animation.start', {\r\n                bubbles: true,\r\n                detail: this\r\n            }));\r\n\r\n            this.#frameId = window.requestAnimationFrame(frameFN);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Pauses the animation.  Does not resolve it.\r\n     * @returns {FX}\r\n     */\r\n    pause() {\r\n        if (this.#frameId) {\r\n            window.cancelAnimationFrame(this.#frameId);\r\n            this.#frameId = null;\r\n            this.#status = FX.paused;\r\n\r\n            this.#element.dispatchEvent(new CustomEvent('animation.paused', {\r\n                bubbles: true,\r\n                detail: this\r\n            }));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    _cancel(complete = false, status = FX.canceled) {\r\n        if (this.#frameId) {\r\n            window.cancelAnimationFrame(this.#frameId);\r\n            this.#frameId = null;\r\n\r\n            if (complete) {\r\n                this.goto(1);\r\n                this._complete(status, status);\r\n            } else {\r\n                this.#status = status;\r\n                this.#internalValue = status;\r\n            }\r\n\r\n            if (this.onCancel) this.onCancel.call(this, this);\r\n\r\n            this.#element.dispatchEvent(new CustomEvent('animation.canceled', {\r\n                bubbles: true,\r\n                detail: this\r\n            }));\r\n\r\n            this._triggerEndEvent();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Cancel the animation with the canceled state.   optionally sets the animation to it's final frame if\r\n     * completeAnimation is true.\r\n     *\r\n     * @param completeAnimation\r\n     * @returns {FX}\r\n     */\r\n    cancel(completeAnimation = false) {\r\n        return this._cancel(completeAnimation, FX.canceled);\r\n    }\r\n\r\n    /**\r\n     * Completes the animation immediately and sets is status to complete.\r\n     * @returns {FX}\r\n     */\r\n    complete() {\r\n        return this._cancel(true, FX.complete);\r\n    }\r\n\r\n    goto(position) {\r\n        assertFXAlive(this);\r\n\r\n        if (typeof position === 'string') {\r\n            position = parseFloat(position) / 100;\r\n        }\r\n\r\n        this.#position = position;\r\n        return this.applyFrame(this.position);\r\n    }\r\n\r\n    applyFrame(position) {\r\n        let frame = this.getFrame(position);\r\n        this.#applyFrame.call(this, this, frame);\r\n        return frame;\r\n    }\r\n\r\n    _triggerEndEvent() {\r\n        if (this.onEnd) this.onEnd.call(this, this);\r\n\r\n        this.#element.dispatchEvent(new CustomEvent('animation.end', {\r\n            bubbles: true,\r\n            detail: this\r\n        }));\r\n\r\n        for (let {onResolve} of this.#chained) {\r\n            if (onResolve) onResolve(this.#internalValue);\r\n        }\r\n        this.#chained = [];\r\n    }\r\n\r\n    _complete(value, status = FX.complete) {\r\n        if (this.state !== \"Pending\") {\r\n            return;\r\n        }\r\n\r\n        this.#status = status;\r\n        this.#internalValue = value;\r\n\r\n        if (this.onComplete) this.onComplete.call(this, this);\r\n\r\n        this.#element.dispatchEvent(new CustomEvent('animation.complete', {\r\n            bubbles: true,\r\n            detail: this\r\n        }));\r\n\r\n        this._triggerEndEvent();\r\n    }\r\n\r\n    then(onResolve, onReject) {\r\n        if (this.state === \"Pending\") {\r\n            return new Promise((resolve, reject) => {\r\n                // noinspection JSUnusedGlobalSymbols\r\n                this.#chained.push({\r\n                    onResolve: (value) => {\r\n                        doPromiseAction(onResolve, value, resolve);\r\n                    },\r\n\r\n                    onReject: (value) => {\r\n                        doPromiseAction(onReject, value, reject);\r\n                    }\r\n                });\r\n            });\r\n        } else if (this.state === 'Fulfilled' && typeof onResolve === 'function') {\r\n            return new Promise((resolve) => {\r\n                doPromiseAction(onResolve, this.#internalValue, resolve);\r\n            });\r\n        } else if (this.state === 'Rejected' && typeof onReject === 'function') {\r\n            return new Promise((resolve, reject) => {\r\n                doPromiseAction(onReject, this.#internalValue, reject);\r\n            });\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    finally(onFinally) {\r\n        onFinally = (value) => {\r\n            if (typeof onFinally === 'function') {\r\n                onFinally();\r\n            }\r\n\r\n            return value;\r\n        };\r\n\r\n        return this.then(onFinally, onFinally);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    catch(onReject) {\r\n        return this.then(undefined, onReject);\r\n    }\r\n}\r\n","/**\r\n *\r\n * @param p\r\n * @returns {*}\r\n */\r\nexport function linear(p) {\r\n    return p;\r\n}\r\n\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport const EASING = {\r\n    linear: linear\r\n};\r\n","export function defaultApplyFrame(fx, frame) {\r\n    for (let key in frame) {\r\n        if (frame.hasOwnProperty(key)) {\r\n            fx.element.style[key] = frame[key].toString();\r\n        }\r\n    }\r\n}\r\n","export class NumberWithUnit {\r\n    constructor(value, unit) {\r\n        this.value = value;\r\n        this.unit = unit;\r\n    }\r\n\r\n    add(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n\r\n        return new NumberWithUnit(this.value + value, this.unit);\r\n    }\r\n\r\n    subtract(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n        return new NumberWithUnit(this.value - value, this.unit);\r\n    }\r\n\r\n    scalar(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n        return new NumberWithUnit(this.value * value, this.unit);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    divide(value) {\r\n        if (typeof value !== \"number\") {\r\n            if (!(value instanceof NumberWithUnit)) {\r\n                throw new TypeError(\"Cannot perform action on invalid type.\");\r\n            }\r\n\r\n            if (this.unit !== value.unit) {\r\n                throw new Error(\"Mismatched units\");\r\n            }\r\n\r\n            value = value.value;\r\n        }\r\n\r\n        return new NumberWithUnit(this.value / value, this.unit);\r\n    }\r\n\r\n    toString() {\r\n        return `${this.value}${this.unit}`;\r\n    }\r\n}\r\n","import Publisher from \"../Publisher\";\r\n\r\nimport {privateCache} from \"core/data\";\r\nimport {\r\n    getTranslation,\r\n    setElementClientPosition,\r\n    documentRectToClientSpace,\r\n    clientRectToDocumentSpace,\r\n    snapToGrid\r\n} from \"core/ui/position\";\r\nimport {clamp} from \"../utility/math\";\r\nimport Animation from \"../fx/Animation\";\r\n\r\n\r\n/**\r\n * Draggable option for offset that offsets the position by the cursor.\r\n *\r\n * @param clientX\r\n * @param clientY\r\n * @param boundingRect\r\n * @returns {{x, y}}\r\n */\r\nexport function cursor({clientX, clientY, boundingRect}) {\r\n    return {\r\n        x: boundingRect.left - clientX,\r\n        y: boundingRect.top - clientY\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Draggable option that clones the draggable element for the helper element.\r\n *\r\n * @param opacity\r\n * @returns {function(*): (ActiveX.IXMLDOMNode | Node)}\r\n */\r\nexport function clone(opacity=null) {\r\n    return function(draggable) {\r\n        let helper = draggable.element.cloneNode(true);\r\n\r\n        if(opacity !== null) {\r\n            helper.style.opacity = opacity;\r\n        }\r\n\r\n        return helper;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the first scrollable parent.\r\n *\r\n * @param element\r\n * @returns {HTMLElement|null}\r\n * @private\r\n */\r\nfunction _getScrollParent(element) {\r\n    let o = element.parentElement;\r\n\r\n    while(o) {\r\n        if (o.scrollWidth > o.clientWidth || o.scrollHeight > o.clientHeight) {\r\n            return o;\r\n        }\r\n\r\n        o = o.parentElement;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\n/**\r\n * Sets the target elements x and y position by setting the translate3d translation matrix.\r\n *\r\n * @param target\r\n * @param x\r\n * @param y\r\n * @private\r\n */\r\nfunction _translate(target, x, y) {\r\n    target.style.transform = `translate3d(${x}px, ${y}px, 0)`;\r\n}\r\n\r\n\r\n// Group of function that can be passed to Draggables container property that will contain a dragged element to within\r\n// the given parameters.  Function should return a rect with {left, top, width, and height} properties relative to the\r\n// client.  Similiar to Element.getBoundingClientRect().\r\nexport const CONTAINERS = {\r\n    /**\r\n     * Constrains to client area.\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    client: function() {\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            height: window.innerHeight,\r\n            width: window.innerWidth,\r\n            right: window.innerWidth,\r\n            bottom: window.innerHeight\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Constrains to viewport.\r\n     * @param element\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    viewport: function(element) {\r\n        let parent = _getScrollParent(element),\r\n            bb = parent.getBoundingClientRect();\r\n\r\n        return {\r\n            left: bb.left - parent.scrollLeft,\r\n            top: bb.top - parent.scrollTop,\r\n            width: parent.scrollWidth,\r\n            height: parent.scrollHeight\r\n        };\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Takes a bounding client rect and constrains the left and top position to within the container.  Returns a new rect.\r\n *\r\n * @param rect\r\n * @param container\r\n * @param element\r\n * @param helper\r\n * @returns {{top: *, left: *}}\r\n * @private\r\n */\r\nfunction _clampPositionToContainer(rect, container, element, helper) {\r\n    let bb = helper.getBoundingClientRect();\r\n\r\n    let x = rect.left,\r\n        y = rect.top;\r\n\r\n    if(container) {\r\n        if(typeof container === 'function') {\r\n            container = container(element, helper);\r\n        } else if(container.getBoundingClientRect) {\r\n            container = container.getBoundingClientRect();\r\n        } else {\r\n            container = element.closest(container);\r\n            container = container.getBoundingClientRect();\r\n        }\r\n\r\n        if(container) {\r\n            x = clamp(x, container.left, container.left + container.width - bb.width);\r\n            y = clamp(y, container.top, container.top + container.height - bb.height);\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...rect,\r\n        left: x,\r\n        top: y\r\n    };\r\n}\r\n\r\n\r\n// Group of function that can be passed to the tolerance property of Draggable to control when an item is considered\r\n// intersecting another for drop events.\r\nconst TOLERANCE_FUNCTIONS = {\r\n    intersect: function(droppable, item) {\r\n        let origin = {\r\n            x: item.left + (item.width / 2),\r\n            y: item.top + (item.height / 2)\r\n        };\r\n\r\n        return origin.x >= droppable.left\r\n            && origin.x <= droppable.right\r\n            && origin.y >= droppable.top\r\n            && origin.y <= droppable.bottom;\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Behavior class to add the draggable behavior to an element for group of elements.\r\n */\r\nexport default class Draggable extends Publisher {\r\n    static CLONE = clone;\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static OFFSET_CURSOR = cursor;\r\n\r\n    /**\r\n     * @param element {Element|String} The element to attach the draggable behavior to.\r\n     * @param container {string|CONTAINERS.client|CONTAINERS.viewport|function}\r\n     *  Constrains the draggable into the given area.\r\n     *  `container` can either be a css selector to match a parent element, a Function(element, helper)\r\n     *  that should return a bounding box.  Or an element who's bounding box will be used.\r\n     * @param axis {'x'|'y'|'xy'}\r\n     *  Controls what axis the item is draggable.  x can be dragged horizontally, y vertically, and xy can be freely dragged.\r\n     * @param exclude {String}\r\n     *  Prevents dragging from starting on matching elements.\r\n     * @param delay {Number}\r\n     *  The time in milliseconds after the mouse down event occurs that dragging will begin.\r\n     * @param offset {{x, y}|[x, y]|Function}\r\n     *  By default when an item is dragged is position will be set relative to the drop left corner of the item.\r\n     *  Offset is used to offset the element from the cursor.  You can pass an {x, y} object, an array with [x, y] pair,\r\n     *  or a Function({target, draggable, clientX, clientY, boundingRect}) that will be called that return an {x, y} object.\r\n     * @param disabled {Boolean}\r\n     *  Disables dragging.\r\n     * @param distance {Number}\r\n     *  Adds resistance to drag starting.  The users must move at least `distance` amount of pixels away from the\r\n     *  starting position for drag to start.\r\n     * @param handle {String}\r\n     *  If dragging will only start if the user clicks an element that matches the css selectors.\r\n     * @param helper {Function|Element}\r\n     *  An element to use as a helper for dragging.  Can be a Element or a Function that returns an element.\r\n     * @param revert {Number|Boolean}\r\n     *  Controls if the draggable reverts back to the starting position if no droppable accepts the target.\r\n     * @param scroll {Number}\r\n     *  Controls the speed that the draggable will scroll the scrollParent when the draggable leaves the viewable area.\r\n     * @param selector {String}\r\n     *  Used to delegate dragging to sub items.\r\n     * @param droppables\r\n     *  An array of css selectors or elements that will be used as drop targets for the draggable.\r\n     * @param tolerance {String}\r\n     *  Controls the function that determines if an item intersects a drop target.\r\n     * @param setHelperSize {Boolean}\r\n     *  If true the helpers width and height will be set by javascript to match the original element.\r\n     * @param grid {{x, y} | [x, y] | Number}\r\n     *  Snaps draggable movement to a grid with the given x, y dimensions.\r\n     */\r\n    constructor(element, {container=null, axis='xy', exclude=\"input, button, select, .js-no-drag, textarea\", delay=null, offset=cursor, disabled=false,\r\n        distance=null, handle=null, helper=null, revert=null, scroll=null, selector=null, droppables=null, tolerance='intersect',\r\n        setHelperSize=false, grid=null}={}) {\r\n        super();\r\n\r\n        if(typeof element === 'string') {\r\n            this.element = document.querySelector(element);\r\n        } else {\r\n            this.element = element;\r\n        }\r\n\r\n        this._onMouseDown = this.onMouseDown.bind(this);\r\n        this.disabled = disabled;\r\n        this.helper = helper;\r\n        this.offset = offset;\r\n        this.axis = axis;\r\n        this.delay = delay;\r\n        this.distance = distance;\r\n        this.container = container;\r\n        this.handle = handle;\r\n        this.exclude = exclude;\r\n        this.revert = revert;\r\n        this.selector = selector;\r\n        this.droppables = [];\r\n        this.tolerance = tolerance;\r\n        this.setHelperSize = setHelperSize;\r\n        this.scroll = scroll;\r\n\r\n        if(typeof grid === 'number') {\r\n            this.grid = {\r\n                x: grid,\r\n                y: grid\r\n            };\r\n        } else if(Array.isArray(grid)) {\r\n            this.grid = {\r\n                x: grid[0],\r\n                y: grid[1]\r\n            };\r\n        } else {\r\n            this.grid = grid;\r\n        }\r\n\r\n        if(droppables) {\r\n            this.addDroppables(droppables);\r\n        }\r\n\r\n        this.element.addEventListener('mousedown', this._onMouseDown);\r\n        this.isDragging = false;\r\n\r\n        this._revertFX = null;\r\n    }\r\n\r\n    /**\r\n     * Adds a drop target item.  A `droppable` can be an element, a css selector or an array of those.\r\n     * @param droppables\r\n     */\r\n    addDroppables(droppables) {\r\n        if(Array.isArray(droppables)) {\r\n            this.droppables = this.droppables.concat(droppables);\r\n        } else {\r\n            this.droppables.push(droppables);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Responsible for detecting dragging and starting the drag depending on delay and distance.\r\n     * @param event\r\n     */\r\n    onMouseDown(event) {\r\n        let element = this.element;\r\n\r\n        if(this.selector) {\r\n            element = event.target.closest(this.selector);\r\n\r\n            if(!this.element.contains(element)) {\r\n                element = null;\r\n            }\r\n        }\r\n\r\n        if(!element) return;\r\n\r\n        let data = privateCache.cache(element);\r\n\r\n        if(data.isDragging || this.disabled) {\r\n            return;\r\n        }\r\n\r\n        if(this.handle) {\r\n            let handle = event.target.closest(this.handle);\r\n\r\n            if(!handle || !element.contains(handle)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if(this.exclude) {\r\n            let excluded = event.target.closest(this.exclude);\r\n\r\n            if(excluded && element.contains(excluded)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        event.preventDefault();\r\n\r\n        let distance = this.distance || 0,\r\n            delay = typeof this.delay === 'number' ? this.delay : -1,\r\n            doc = document,\r\n            startMouseDocumentX = event.clientX + window.scrollX,\r\n            startMouseDocumentY = event.clientY + window.scrollY,\r\n            mouseDocumentX = startMouseDocumentX,\r\n            mouseDocumentY = startMouseDocumentY;\r\n\r\n        // Tests to see that delay and distance was met before dragging.\r\n        let startDragging = () => {\r\n            if(distance === 0 && delay < 0) {\r\n                this.startDrag(element, startMouseDocumentX, startMouseDocumentY, mouseDocumentX, mouseDocumentY);\r\n            }\r\n        };\r\n\r\n        // Delay dragging.\r\n        if(delay >= 0) {\r\n            let timer;\r\n\r\n            let onTimeout = () => {\r\n                delay = -1;\r\n                doc.removeEventListener('mouseup', onMouseUp);\r\n                startDragging();\r\n            };\r\n\r\n            let onMouseUp = () => {\r\n                doc.removeEventListener('mouseup', onMouseUp);\r\n                clearTimeout(timer);\r\n            };\r\n\r\n            doc.addEventListener('mouseup', onMouseUp);\r\n            timer = setTimeout(onTimeout, delay);\r\n        }\r\n\r\n        // Delay by distance.\r\n        if(distance > 0) {\r\n            let onMouseUp = () => {\r\n                doc.removeEventListener('mouseup', onMouseUp);\r\n                doc.removeEventListener('mousemove', onMouseMove);\r\n            };\r\n\r\n            let onMouseMove = (event) => {\r\n                mouseDocumentX = event.clientX + window.scrollX;\r\n                mouseDocumentY = event.clientY + window.scrollY;\r\n\r\n                let delta = Math.sqrt(\r\n                    (mouseDocumentX - startMouseDocumentX)**2 + (mouseDocumentY - startMouseDocumentY)**2\r\n                );\r\n\r\n                if(delta > distance) {\r\n                    distance = 0;\r\n                    doc.removeEventListener('mouseup', onMouseUp);\r\n                    doc.removeEventListener('mousemove', onMouseMove);\r\n                    startDragging();\r\n                }\r\n            };\r\n\r\n            doc.addEventListener('mouseup', onMouseUp);\r\n            doc.addEventListener('mousemove', onMouseMove);\r\n        }\r\n\r\n        startDragging();\r\n    }\r\n\r\n    /**\r\n     * Starts the drag animation at the given x, y origin.\r\n     *\r\n     * @param element\r\n     * @param startMouseX\r\n     * @param startMouseY\r\n     * @param posX\r\n     * @param posY\r\n     */\r\n    startDrag(element, startMouseX, startMouseY, posX, posY) {\r\n        if(this.isDragging) {\r\n            return;\r\n        }\r\n\r\n        this.isDragging = true;\r\n\r\n        // Cancel any animation that are running.\r\n        if(this._revertFX) {\r\n            this._revertFX.cancel();\r\n            this._revertFX = null;\r\n        }\r\n\r\n        let doc = document,\r\n            target,\r\n            droppables = this.getDropTargets(),\r\n            startBoundingBox = element.getBoundingClientRect(),\r\n            startBBDocument = clientRectToDocumentSpace(startBoundingBox),\r\n            helper,\r\n            scrollTick;\r\n\r\n        if(!this.helper || this.helper === 'self') {\r\n            target = element;\r\n        } else if(typeof this.helper === 'function') {\r\n            target = this.helper(this);\r\n            helper = target;\r\n        } else if(this.helper) {\r\n            target = this.helper;\r\n            helper = target;\r\n        }\r\n\r\n        if(helper) {\r\n            if(this.setHelperSize) {\r\n                if(this.setHelperSize === true) {\r\n                    helper.style.width = `${startBoundingBox.width}px`;\r\n                    helper.style.height = `${startBoundingBox.height}px`;\r\n                    helper.style.boxSizing = 'border-box';\r\n                } else if(Array.isArray(this.setHelperSize)) {\r\n                    helper.style.width = `${this.setHelperSize[0]}px`;\r\n                    helper.style.height = `${this.setHelperSize[1]}px`;\r\n                } else {\r\n                    helper.style.width = `${this.setHelperSize.width}px`;\r\n                    helper.style.height = `${this.setHelperSize.height}px`;\r\n                }\r\n            }\r\n        }\r\n\r\n        // If the target doesn't have a parentElement it needs to be added to the page.\r\n        if(!target.parentElement) {\r\n            element.parentElement.appendChild(target);\r\n        }\r\n\r\n        // mouseOffsetX and mouseOffsetY is the mouses offset relative to the top left corner of the element\r\n        // being dragged.\r\n\r\n        // offsetX and offsetY is how much the dragged element is offset from the cursor.\r\n        // By default it is at the top left of the element.\r\n        let startingTranslation = getTranslation(target),\r\n            offset = {x: 0, y: 0};\r\n\r\n        // The offset property controls how much the dragged element is offset from top left corner of the element.\r\n        // By default it is [0, 0] but a function can be or array can be passed to control this behavior.\r\n        if(this.offset) {\r\n            let _offset = this.offset;\r\n\r\n            if(typeof _offset === 'function') {\r\n                offset = this.offset({\r\n                    target: target,\r\n                    draggable: this,\r\n                    clientX: startMouseX - window.scrollX,\r\n                    clientY: startMouseY - window.scrollY,\r\n                    boundingRect: startBoundingBox\r\n                });\r\n            }\r\n        }\r\n\r\n        // Offset should be {x, y} not an array.\r\n        if(Array.isArray(offset)) {\r\n            offset = {\r\n                x: offset[0],\r\n                y: offset[1]\r\n            };\r\n        }\r\n\r\n        let onMouseMove = (event) => {\r\n            event.preventDefault();\r\n\r\n            let startingRect = target.getBoundingClientRect(),\r\n                position = this._getPosition(element, target, event.clientX, event.clientY, offset, this.container),\r\n                dropData;\r\n\r\n            setElementClientPosition(target, position, 'translate3d');\r\n            dropData = this._getDropData(droppables, startingRect, position);\r\n\r\n            for(let droppable of dropData) {\r\n                if(!droppable.intersectsBefore && droppable.intersectsAfter) {\r\n                    this._dispatchDroppableEvent(droppable.target, 'drag-enter', {\r\n                        bubbles: true,\r\n\r\n                        detail: {\r\n                            item: target\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            this._triggerEvent(element, 'drag-move', {\r\n                bubbles: false,\r\n                details: {\r\n                    mouseX: event.clientX + window.scrollX,\r\n                    mouseY: event.clientY + window.scrollY,\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY,\r\n                    startMouseX,\r\n                    startMouseY,\r\n                    offset,\r\n                    helper: target,\r\n                    originalEvent: event\r\n                },\r\n                topic: 'draggable.move'\r\n            });\r\n\r\n            // Refresh dropData incase something moved.\r\n            dropData = this._getDropData(droppables, startingRect, position);\r\n\r\n            for(let droppable of dropData) {\r\n                if(droppable.intersectsBefore && !droppable.intersectsAfter) {\r\n                    this._dispatchDroppableEvent(droppable.target, 'drag-leave', {\r\n                        bubbles: true,\r\n                        detail: {\r\n                            item: target\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            if(this.scroll && !scrollTick) {\r\n                let parent = _getScrollParent(element);\r\n\r\n                if(parent) {\r\n                    let lastTick = performance.now(),\r\n                        scrollX = parent.scrollLeft,\r\n                        scrollY = parent.scrollTop;\r\n\r\n                    scrollTick = timestamp => {\r\n                        let parentBB = parent.getBoundingClientRect(),\r\n                            helperBB = target.getBoundingClientRect(),\r\n                            x, y,\r\n                            delta = timestamp - lastTick,\r\n                            isOOB = false;\r\n\r\n                        lastTick = timestamp;\r\n\r\n                        if (helperBB.right > parentBB.right) {\r\n                            x = (helperBB.right - parentBB.right) / helperBB.width;\r\n                            isOOB = true;\r\n                            scrollX += delta * x * this.scroll;\r\n                            parent.scrollLeft = scrollX;\r\n                        } else if (helperBB.left < parentBB.left) {\r\n                            x = (parentBB.left - helperBB.left) / helperBB.width;\r\n                            isOOB = true;\r\n                            scrollX -= delta * x * this.scroll;\r\n                            parent.scrollLeft = scrollX;\r\n                        }\r\n\r\n                        if (helperBB.bottom > parentBB.bottom) {\r\n                            y = (helperBB.bottom - parentBB.bottom) / helperBB.height;\r\n                            isOOB = true;\r\n                            scrollY += delta * y * this.scroll;\r\n                            parent.scrollTop = scrollY;\r\n                        } else if (helperBB.top < parentBB.top) {\r\n                            y = (parentBB.top - helperBB.top) / helperBB.height;\r\n                            isOOB = true;\r\n                            scrollY -= delta * y * this.scroll;\r\n                            parent.scrollTop = scrollY;\r\n                        }\r\n\r\n                        helperBB = _clampPositionToContainer(helperBB, this.container, element, target);\r\n                        setElementClientPosition(target, helperBB, 'translate3d');\r\n\r\n                        if (isOOB && this.isDragging) {\r\n                            window.requestAnimationFrame(scrollTick);\r\n                        } else {\r\n                            scrollTick = null;\r\n                        }\r\n                    };\r\n\r\n                    window.requestAnimationFrame(scrollTick);\r\n                }\r\n            }\r\n        };\r\n\r\n        let onMouseUp = (event) => {\r\n            event.preventDefault();\r\n            doc.removeEventListener('mousemove', onMouseMove);\r\n            doc.removeEventListener('mouseup', onMouseUp);\r\n            doc = null;\r\n            this.isDragging = false;\r\n            element.classList.remove('ui-dragging');\r\n\r\n            let startingRect = target.getBoundingClientRect(),\r\n                position = this._getPosition(element, target, event.clientX, event.clientY, offset, this.container),\r\n                translation = getTranslation(target),\r\n                accepted = null;\r\n\r\n            function accept(element) {\r\n                if(!accepted) {\r\n                    accepted = element;\r\n                } else {\r\n                    throw new Error(\"Draggable has already been accepted.\");\r\n                }\r\n            }\r\n\r\n            function isAccepted() {\r\n                return !!accepted;\r\n            }\r\n\r\n            this._triggerEvent(element, 'drag-end', {\r\n                bubbles: true,\r\n\r\n                details: {\r\n                    startX: startMouseX - window.scrollX,\r\n                    startMouseY,\r\n                    offset,\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY,\r\n\r\n                    originalEvent: event,\r\n                    helper: target,\r\n\r\n                    accept,\r\n                    isAccepted\r\n                },\r\n\r\n                topic: 'draggable.end',\r\n\r\n                accept,\r\n                isAccepted\r\n            });\r\n\r\n            if(!accepted && this.revert === true) {\r\n                _translate(target, startingTranslation.x, startingTranslation.y);\r\n\r\n                if(target !== element && target.parentElement) {\r\n                    target.parentElement.removeChild(target);\r\n                }\r\n\r\n                this._triggerEvent(element, 'drag-complete', {bubbles: true, topic: 'draggable.complete'});\r\n            } else if(!accepted && typeof this.revert === 'number') {\r\n                let animation = new Animation({\r\n                    applyFrame(element, frame) {\r\n                        _translate(element, frame.left, frame.top);\r\n                    },\r\n\r\n                    frames: {\r\n                        '0%': {\r\n                            left: translation.x + (position.left - startingRect.left),\r\n                            top: translation.y + (position.top - startingRect.top)\r\n                        },\r\n\r\n                        '100%': {\r\n                            left: startingTranslation.x,\r\n                            top: startingTranslation.y\r\n                        }\r\n                    }\r\n                });\r\n\r\n                this._revertFX = animation.animate(target, {\r\n                    duration: this.revert,\r\n\r\n                    onEnd() {\r\n                        if(target !== element && target.parentElement) {\r\n                            target.parentElement.removeChild(target);\r\n                        }\r\n                    },\r\n\r\n                    onComplete: () => {\r\n                        this._triggerEvent(element, 'drag-complete', {bubbles: true, topic: 'draggable.complete'});\r\n                    }\r\n                });\r\n            } else {\r\n                if(target !== element && target.parentElement) {\r\n                    target.parentElement.removeChild(target);\r\n                }\r\n\r\n                setElementClientPosition(element, position, 'translate3d');\r\n\r\n                let startingRect = documentRectToClientSpace(startBBDocument),\r\n                    dropped = [];\r\n\r\n                for(let droppable of droppables) {\r\n                    if(this._intersects(element.dataset.tolerance, droppable.getBoundingClientRect(), position)) {\r\n                        this._dispatchDroppableEvent(droppable, 'drop', {\r\n                            bubbles: true,\r\n                            clientX: event.clientX,\r\n                            clientY: event.clientY,\r\n                            relatedTarget: element,\r\n                            detail: {\r\n                                originalEvent: event,\r\n                                startingBoundingClientRect: startingRect,\r\n                                droppable: droppable\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                this._triggerEvent(element, 'drag-complete', {\r\n                    topic: 'draggable.complete',\r\n                    details: {\r\n                        dropped\r\n                    },\r\n                    bubbles: true,\r\n                    dropped\r\n                });\r\n            }\r\n        };\r\n\r\n        doc.addEventListener('mousemove', onMouseMove);\r\n        doc.addEventListener('mouseup', onMouseUp);\r\n        element.classList.add('ui-dragging');\r\n\r\n        this._triggerEvent(element, 'drag-start', {\r\n            bubbles: true,\r\n            details: {\r\n                startMouseY,\r\n                startMouseX,\r\n                offset,\r\n                mouseX: posX,\r\n                mouseY: posY,\r\n                clientX: posX - window.scrollX,\r\n                clientY: posY - window.scrollY,\r\n                helper: target\r\n            },\r\n            topic: 'draggable.start'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets an array of elements of all the drop targets.\r\n     * If the drop target is a string, it queries for those elements.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    getDropTargets() {\r\n        let r = [];\r\n\r\n        for(let droppable of this.droppables) {\r\n            let type = typeof droppable;\r\n\r\n            if(type === 'string') {\r\n                for(let target of document.querySelectorAll(droppable)) {\r\n                    if(r.indexOf(target) !== -1) continue;\r\n                    r.push(target);\r\n                }\r\n            } else if(type === 'function') {\r\n                droppable = droppable.call(this, this);\r\n                if(r.indexOf(droppable) !== -1) continue;\r\n                r.push(droppable);\r\n            } else {\r\n                if(r.indexOf(droppable) !== -1) continue;\r\n                r.push(droppable);\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Takes an array of drop targets and tests to see if the target intersects the start and ending rectangles.\r\n     *\r\n     * Rects are objects that have the left, right, top, bottom, width and height properties defined.\r\n     * Similar to the results received from Element.getBoundingClientRect().\r\n     *\r\n     * @param droppables - Array of elements to tests.\r\n     * @param startingRect - Starting rect.\r\n     * @param endingRect - Ending rect.\r\n     * @returns {Array}\r\n     * @private\r\n     */\r\n    _getDropData(droppables, startingRect, endingRect) {\r\n        let dropData = [];\r\n\r\n        for(let droppable of droppables) {\r\n            // Convert to client space.\r\n            let dropBox = droppable.getBoundingClientRect();\r\n\r\n            let intersectsBefore = this._intersects(droppable.dataset.tolerance, dropBox, startingRect),\r\n                intersectsAfter = this._intersects(droppable.dataset.tolerance, dropBox, endingRect);\r\n\r\n            dropData.push({\r\n                intersectsBefore,\r\n                intersectsAfter,\r\n                target: droppable,\r\n                ...dropBox\r\n            });\r\n        }\r\n\r\n        return dropData;\r\n    }\r\n\r\n    /**\r\n     * Triggers an event on the current item.\r\n     *\r\n     * @param item\r\n     * @param eventName\r\n     * @param details\r\n     * @param bubbles\r\n     * @param topic\r\n     * @param properties\r\n     * @private\r\n     */\r\n    _triggerEvent(item, eventName, {bubbles, details, topic, ...properties}) {\r\n        details = {\r\n            draggable: this,\r\n            item: item,\r\n\r\n            ...details\r\n        };\r\n\r\n        let event = new CustomEvent(eventName, {\r\n            bubbles: bubbles,\r\n            detail: details\r\n        });\r\n\r\n        if(properties) {\r\n            Object.assign(event, properties);\r\n        }\r\n\r\n        item.dispatchEvent(event);\r\n\r\n        if(topic !== false) {\r\n            topic = topic || eventName;\r\n\r\n            this.publish(topic, {\r\n                draggable: this,\r\n                item: this,\r\n\r\n                ...details\r\n            });\r\n        }\r\n    }\r\n\r\n    _dispatchDroppableEvent(dropElement, name, {bubbles=true, detail={}, ...properties}={}) {\r\n        let customEvent = new CustomEvent(name, {\r\n            bubbles,\r\n            detail: {\r\n                dropElement: dropElement,\r\n                draggable: this,\r\n                ...detail\r\n            }\r\n        });\r\n\r\n        // if(topic !== false && droppable.publish) {\r\n        //     topic = topic || name;\r\n        //\r\n        //     droppable.publish(topic, {\r\n        //         target: droppable,\r\n        //         draggable: this,\r\n        //         name: topic,\r\n        //         ...detail\r\n        //     });\r\n        // }\r\n\r\n        Object.assign(customEvent, properties);\r\n\r\n        dropElement.dispatchEvent(customEvent);\r\n    }\r\n\r\n    /**\r\n     * Tests to see if the item intersects the droppable with the given tolerance function.\r\n     *\r\n     * @param tolerance\r\n     * @param droppable\r\n     * @param item\r\n     * @returns {*}\r\n     * @private\r\n     */\r\n    _intersects(tolerance, droppable, item) {\r\n        tolerance = tolerance || this.tolerance;\r\n        return TOLERANCE_FUNCTIONS[tolerance](droppable, item);\r\n    }\r\n\r\n    /**\r\n     * Retrieves the expected bound box of the helper element at the given mouse coordinates.\r\n     *\r\n     * @param element\r\n     * @param helper\r\n     * @param clientX\r\n     * @param clientY\r\n     * @param offset\r\n     * @param container\r\n     * @returns {{top: *, left: *, bottom: *, width: number, right: *, height: number, target: *}}\r\n     */\r\n    _getPosition(element, helper, clientX, clientY, offset, container) {\r\n        let bb = helper.getBoundingClientRect();\r\n\r\n        let left = clientX + offset.x,\r\n            top = clientY + offset.y;\r\n\r\n        if(this.grid) {\r\n            left = snapToGrid(left, this.grid.x);\r\n            top = snapToGrid(top, this.grid.y);\r\n        }\r\n\r\n        let r = {\r\n            left: left,\r\n            top: top,\r\n            width: bb.width,\r\n            height: bb.height,\r\n            right: left + bb.width,\r\n            bottom: top + bb.height,\r\n            target: helper\r\n        };\r\n\r\n        return {...r, ..._clampPositionToContainer(r, container, element, helper)};\r\n    }\r\n}\r\n","import {isSuperset} from 'core/utility/set';\r\nimport {clientRectToDocumentSpace, setElementClientPosition, snapToGrid} from 'core/ui/position';\r\nimport {clamp} from \"../utility/math\";\r\nimport {addClasses} from \"../utility/dom\";\r\n\r\n\r\nconst DIRECTIONS = new Set([\r\n    'top-left',\r\n    'top',\r\n    'top-right',\r\n    'right',\r\n    'bottom-right',\r\n    'bottom',\r\n    'bottom-left',\r\n    'left'\r\n]);\r\n\r\n\r\nexport const CONTAINERS = {\r\n    /**\r\n     * Constrains to client area.\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    client: function() {\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            right: window.innerWidth,\r\n            bottom: window.innerHeight,\r\n            height: window.innerHeight,\r\n            width: window.innerWidth\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Constrains to viewport.\r\n     * @param element\r\n     * @returns {{top: number, left: number, width: number, height: number}}\r\n     */\r\n    viewport: function(element) {\r\n        let parent = _getScrollParent(element),\r\n            bb = parent.getBoundingClientRect();\r\n\r\n        return {\r\n            left: bb.left - parent.scrollLeft,\r\n            top: bb.top - parent.scrollTop,\r\n            width: parent.scrollWidth,\r\n            height: parent.scrollHeight,\r\n            right: (bb.left - parent.scrollLeft) + parent.scrollWidth,\r\n            bottom: (bb.top - parent.scrollTop) + parent.scrollHeight\r\n        };\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Behavior class that makes an element resizeable.\r\n */\r\nexport default class Resizeable {\r\n    constructor(element, {handles=\"bottom-right\", helper=null, minWidth=null, maxWidth=null, minHeight=null, maxHeight=null,\r\n        keepAspectRatio=false, autoHide=false, container=null, grid=null}={}) {\r\n        if(typeof element === 'string') {\r\n            this.element = document.querySelector(element);\r\n        } else {\r\n            this.element = element;\r\n        }\r\n\r\n        this.handles = {};\r\n        this.element.classList.add('ui-resizeable');\r\n\r\n        if(handles === 'all') {\r\n            handles = new Set(DIRECTIONS);\r\n        } else {\r\n            handles = new Set(handles.split(/\\s+/));\r\n        }\r\n\r\n        if(!isSuperset(DIRECTIONS, handles)) {\r\n            throw new TypeError(\"Invalid direction.\");\r\n        }\r\n\r\n        for(let direction of handles) {\r\n            let handle = document.createElement('div');\r\n            handle.classList.add('ui-resizeable-handle');\r\n            handle.classList.add(`ui-resizeable-${direction}`);\r\n            handle.dataset.direction = direction;\r\n            this.handles[direction] = handle;\r\n            this.element.appendChild(handle);\r\n        }\r\n\r\n        this._onMouseDown = (event) => {\r\n            this._startResizing(event);\r\n        };\r\n\r\n        this.element.addEventListener('mousedown', this._onMouseDown);\r\n\r\n        if(typeof grid === 'number') {\r\n            this.grid = {\r\n                x: grid,\r\n                y: grid\r\n            };\r\n        } else if(Array.isArray(grid)) {\r\n            this.grid = {\r\n                x: grid[0],\r\n                y: grid[1]\r\n            };\r\n        } else {\r\n            this.grid = grid;\r\n        }\r\n\r\n        this.helper = helper;\r\n        this.minWidth = minWidth;\r\n        this.maxWidth = maxWidth;\r\n        this.minHeight = minHeight;\r\n        this.maxHeight = maxHeight;\r\n        this.keepAspectRatio = keepAspectRatio;\r\n        this.isResizing = false;\r\n        this.container = container;\r\n    }\r\n\r\n    _startResizing(event) {\r\n        if(this.isResizing) return;\r\n        let handle = event.target.closest('.ui-resizeable-handle');\r\n        if(!handle || !this.element.contains(handle)) return;\r\n        let resizeable = handle.closest('.ui-resizeable');\r\n        if(!resizeable || resizeable !== this.element) return;\r\n\r\n        event.preventDefault();\r\n\r\n        let direction = handle.dataset.direction,\r\n            startPosX = event.clientX + window.scrollX,\r\n            startPosY = event.clientY + window.scrollY,\r\n            doc = document,\r\n            startingClientRect = this.element.getBoundingClientRect(),\r\n            startBox = clientRectToDocumentSpace(startingClientRect),\r\n            target = this.element,\r\n            rect = {left: startBox.left, top: startBox.top, width: startBox.width, height: startBox.height};\r\n\r\n        if(this.helper) {\r\n            if(typeof this.helper === 'function') {\r\n                target = this.helper.call(this, this.element);\r\n            } else {\r\n                target = document.createElement('div');\r\n                addClasses(target, this.helper);\r\n            }\r\n\r\n            target.classList.add('ui-resizeable-helper');\r\n            target.style.width = startBox.width + 'px';\r\n            target.style.height = startBox.height + 'px';\r\n            target.style.boxSizing = getComputedStyle(this.element).boxSizing;\r\n            this.element.parentElement.appendChild(target);\r\n            setElementClientPosition(target, startingClientRect, 'translate3d');\r\n            setElementClientPosition(target, this.element.getBoundingClientRect(), 'translate3d');\r\n        }\r\n\r\n        let onMouseMove = event => {\r\n            let deltaX = event.clientX - (startPosX - window.scrollX),\r\n                deltaY = event.clientY - (startPosY - window.scrollY),\r\n                left = startBox.left,\r\n                top = startBox.top,\r\n                right = startBox.right - window.scrollX,\r\n                bottom = startBox.bottom - window.scrollY,\r\n                minWidth = this.minWidth !== null && this.minWidth !== undefined ? this.minWidth : 0,\r\n                maxWidth = this.maxWidth !== null && this.maxWidth !== undefined ? this.maxWidth : Infinity,\r\n                minHeight = this.minHeight !== null && this.maxHeight !== undefined ? this.minHeight : 0,\r\n                maxHeight = this.maxHeight !== null && this.maxHeight !== undefined ? this.maxHeight : Infinity;\r\n\r\n            if(direction === 'right' || direction === 'bottom-right' || direction === 'top-right') {\r\n                right += deltaX;\r\n                right = clamp(right, left + minWidth, left + maxWidth);\r\n            } else if(direction === 'left' || direction === 'top-left' || direction === 'bottom-left') {\r\n                left += deltaX;\r\n                left = clamp(left, right - maxWidth, right - minWidth);\r\n            }\r\n\r\n            if(direction === 'bottom' || direction === 'bottom-right' || direction === 'bottom-left') {\r\n                bottom = clamp(bottom + deltaY, top + minHeight, top + maxHeight);\r\n            } else if(direction === 'top' || direction === 'top-left' || direction === 'top-right') {\r\n                top = clamp(top + deltaY, bottom - maxHeight, bottom - minHeight);\r\n            }\r\n\r\n            let container;\r\n\r\n            if(this.container) {\r\n                container = this.container.call(this, this.element, event);\r\n\r\n                if(container) {\r\n                    // I need to make my own object because the objects returned by Element.getBoundClientRect are readonly\r\n                    // and Object.assign({}, rect) doesn't map over the properties.\r\n                    let _container = {\r\n                        left: container.left,\r\n                        top: container.top,\r\n                        bottom: container.bottom,\r\n                        right: container.right\r\n                    };\r\n\r\n                    if(this.grid) {\r\n                        if (this.grid.x) {\r\n                            _container.left = snapToGrid(container.left, this.grid.x, Math.ceil);\r\n                            _container.right = snapToGrid(container.right, this.grid.x, Math.floor);\r\n                        }\r\n\r\n                        if (this.grid.y) {\r\n                            _container.top = snapToGrid(container.top, this.grid.y, Math.ceil);\r\n                            _container.bottom = snapToGrid(container.bottom, this.grid.y, Math.floor);\r\n                        }\r\n                    }\r\n\r\n                    container = _container;\r\n                }\r\n            }\r\n\r\n            if(this.grid) {\r\n                left = snapToGrid(left, this.grid.x);\r\n                top = snapToGrid(top, this.grid.y);\r\n                right = snapToGrid(right, this.grid.x);\r\n                bottom = snapToGrid(bottom, this.grid.y);\r\n            }\r\n\r\n            console.log(left, right, bottom, top);\r\n            console.log(container);\r\n\r\n            if(container) {\r\n                left = clamp(left, container.left, container.right);\r\n                right = clamp(right, container.left, container.right);\r\n                bottom = clamp(bottom, container.top, container.bottom);\r\n                top = clamp(top, container.top, container.bottom);\r\n            }\r\n\r\n            if(this.keepAspectRatio) {\r\n                if(direction === 'top-left' || direction === 'top-right') {\r\n                    top = bottom - ((right - left) * this.keepAspectRatio);\r\n                } else if(direction === 'bottom-left' || direction === 'bottom-right' || direction === 'left' || direction === 'right') {\r\n                    bottom = top + ((right - left) * this.keepAspectRatio);\r\n                } else if(direction === 'bottom' || direction === 'top') {\r\n                    right = left + ((bottom - top) / this.keepAspectRatio);\r\n                }\r\n            }\r\n\r\n            setElementClientPosition(target, {left, top}, 'translate3d');\r\n            target.style.width = `${right - left}px`;\r\n            target.style.height = `${bottom - top}px`;\r\n\r\n            rect.left = left + window.scrollX;\r\n            rect.top = top + window.scrollY;\r\n            rect.width = right - left;\r\n            rect.height = bottom - top;\r\n            rect.right = right + window.scrollX;\r\n            rect.bottom = bottom + window.scrollY;\r\n\r\n            this.element.dispatchEvent(new CustomEvent('resizing', {\r\n                bubbles: true,\r\n                detail: {\r\n                    resizeable: this,\r\n                    target: target,\r\n                    originalEvent: event,\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY,\r\n                    element: this.element,\r\n\r\n                    targetClientRect: {\r\n                        left: left,\r\n                        top: top,\r\n                        right: right,\r\n                        bottom: bottom,\r\n                        width: right - left,\r\n                        height: bottom - top,\r\n                        x: left,\r\n                        y: top\r\n                    }\r\n                }\r\n            }));\r\n        };\r\n\r\n        let onMouseUp = event => {\r\n            doc.removeEventListener('mousemove', onMouseMove);\r\n            doc.removeEventListener('mouseup', onMouseUp);\r\n\r\n            if(this.element !== target) {\r\n                target.parentElement.removeChild(target);\r\n\r\n                setElementClientPosition(this.element, {\r\n                    left: rect.left - window.scrollX,\r\n                    top: rect.top - window.scrollY\r\n                }, 'translate3d');\r\n\r\n                this.element.style.width = `${rect.width}px`;\r\n                this.element.style.height = `${rect.height}px`;\r\n            }\r\n\r\n            this.element.classList.remove('ui-resizing');\r\n            this.isResizing = false;\r\n\r\n            this.element.dispatchEvent(new CustomEvent('resize-end', {\r\n                bubbles: true,\r\n                detail: {\r\n                    resizeable: this,\r\n                    element: this.element,\r\n                    originalEvent: event,\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY\r\n                }\r\n            }));\r\n        };\r\n\r\n        this.isResizing = true;\r\n        this.element.classList.add('ui-resizing');\r\n        doc.addEventListener('mousemove', onMouseMove);\r\n        doc.addEventListener('mouseup', onMouseUp);\r\n\r\n        this.element.dispatchEvent(new CustomEvent('resize-start', {\r\n            bubbles: true,\r\n            detail: {\r\n                resizeable: this,\r\n                target: target,\r\n                originalEvent: event,\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                element: this.element\r\n            }\r\n        }));\r\n    }\r\n}\r\n","import {Rect, Vec2, Vec3} from \"../vectors\";\r\nimport {clamp} from \"../utility\";\r\n\r\n\r\nconst regMatrix = /matrix(3d)?\\(([^)]+)\\)/;\r\n\r\n\r\n/**\r\n * Returns the elements offset parent.\r\n *\r\n * @param element\r\n * @returns {HTMLElement}\r\n */\r\nexport function getOffsetElement(element) {\r\n    let o = element.parentElement;\r\n\r\n    while(o) {\r\n        let position = getComputedStyle(o).position;\r\n        if(position !== 'static') return o;\r\n        o = o.parentElement;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the rectangle of the client area.\r\n *\r\n * @returns {Rect}\r\n */\r\nexport function getClientRect() {\r\n    return Rect.getClientRect();\r\n}\r\n\r\n\r\n/**\r\n * Returns a bounding rect who's positions are relative to the provided offsetParent.\r\n * If offsetParent is null then the targets natural offsetParent is used as returned by the getOffsetElement function.\r\n * @param element\r\n * @param offsetParent\r\n * @returns {{top: number, left: number, bottom: number, width: number, right: number, height: number}}\r\n */\r\nexport function getBoundingOffsetRect(element, offsetParent=null) {\r\n    let offsetRect, rect;\r\n\r\n    if(!offsetParent) offsetParent = getOffsetElement(element);\r\n\r\n    // no offset parent.  Position relative to the client.\r\n    if(!offsetParent) {\r\n        offsetRect = Rect.getRootContainingClientRect();\r\n    } else {\r\n        offsetRect = Rect.getBoundingClientRect(offsetParent);\r\n    }\r\n\r\n    rect = element.getBoundingClientRect();\r\n\r\n    return new Rect(\r\n        rect.left - offsetRect.left,\r\n        rect.top - offsetRect.top,\r\n        offsetRect.right - rect.right,\r\n        offsetRect.bottom - rect.bottom\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns a bounding rect who's positions are relative to the document.\r\n * @param element\r\n * @returns {{top: number, left: number, bottom: number, width: number, x: number, y: number, right: number, height: number}}\r\n */\r\nexport function getBoundingDocumentRect(element) {\r\n    let rect = element.getBoundingClientRect();\r\n\r\n    return new Rect(\r\n        rect.left + window.pageXOffset,\r\n        rect.top + window.pageYOffset,\r\n        rect.right + window.pageXOffset,\r\n        rect.bottom + window.pageYOffset\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns the css translation from the transformation matrix applied to the element.\r\n *\r\n * @param element\r\n * @returns {Vec3}\r\n */\r\nexport function getTranslation(element) {\r\n    let transform = getComputedStyle(element).transform,\r\n        m = regMatrix.exec(transform);\r\n\r\n    if(!m) {\r\n        return new Vec3(\r\n            0,\r\n            0,\r\n            0\r\n        );\r\n    }\r\n\r\n    let data = m[2].split(/\\s*,\\s*/);\r\n\r\n    if(m[1]) {\r\n        return new Vec3(\r\n            parseFloat(data[12]),\r\n            parseFloat(data[13]),\r\n            parseFloat(data[14])\r\n        );\r\n    } else {\r\n        return new Vec3(\r\n            parseFloat(data[4]),\r\n            parseFloat(data[5]),\r\n            0\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets the element's transformation matrix to 2d translate with the specified left and top properties.\r\n *\r\n * @param element\r\n * @param x\r\n * @param y\r\n * @param z\r\n */\r\nexport function setTranslation(element, {x, y, z=null}) {\r\n    if(z !== null) {\r\n        element.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;\r\n    } else {\r\n        element.style.transform = `translate(${x}px, ${y}px)`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Gets the elements left and top style properties as numbers.\r\n *\r\n * @param element\r\n * @returns {Vec2}\r\n */\r\nexport function getCssPosition(element) {\r\n    let style = getComputedStyle(element);\r\n\r\n    return new Vec2(\r\n        parseInt(style.left, 10),\r\n        parseInt(style.top, 10)\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Sets the left and top style properties of an element.  If the element is positioned statically it will be changed to\r\n * relative.\r\n *\r\n * @param element\r\n * @param left\r\n * @param top\r\n */\r\nexport function setCssPosition(element, {left=null, top=null}) {\r\n    let style = getComputedStyle(element);\r\n\r\n    if(style.position === 'static') {\r\n        style.position = 'relative';\r\n    }\r\n\r\n    if(left !== null && left !== undefined) {\r\n        element.style.left = `${left}px`;\r\n    }\r\n\r\n    if(top !== null && top !== undefined) {\r\n        element.style.top = `${top}px`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Sets the elements position relative to the client window.  The `method` parameter controls how the elements position\r\n * is modified.  The options are 'top-left', 'top-right', 'bottom-left', 'bottom-right', 'translate', and 'translate3d'.\r\n *\r\n * top-left, top-right, bottom-left and bottom-right set the css left, top, right, and bottom properties of the element.\r\n * translate and translate3d position the element by setting the transform property.\r\n *\r\n * @param element {HTMLElement}\r\n * @param position {{x, y}|{left, top, right, bottom}|Array|Vec2}\r\n * @param method {'top-left'|'top-right'|'bottom-left'|'bottom-right'|'translate'|'translate3d'}\r\n */\r\nexport function setElementClientPosition(element, position, method='top-left') {\r\n    position = new Rect(position);\r\n\r\n    if(method === 'top-left' || method === 'top-right' || method === 'bottom-left' || method === 'bottom-right') {\r\n        let style = getComputedStyle(element);\r\n\r\n        let positionType = style.position, box, deltaX, deltaY, current;\r\n\r\n        // position can't be static for this operation.  Switch to relative.\r\n        if(positionType === 'static') {\r\n            element.style.position = 'relative';\r\n            positionType = \"relative\";\r\n        }\r\n\r\n        if(positionType === \"relative\") {\r\n            style = getComputedStyle(element);\r\n\r\n            current = {\r\n                left: parseInt(style.left, 10) || 0,\r\n                right: parseInt(style.right, 10) || 0,\r\n                top: parseInt(style.top, 10) || 0,\r\n                bottom: parseInt(style.bottom, 10) || 0\r\n            }\r\n        } else {\r\n            box = Rect.getBoundingClientRect(element);\r\n            current = getBoundingOffsetRect(element);\r\n        }\r\n\r\n        if(method === 'top-left') {\r\n            deltaX = position.left - box.left;\r\n            deltaY = position.top - box.top;\r\n\r\n            element.style.left = (current.left + deltaX) + 'px';\r\n            element.style.top = (current.top + deltaY) + 'px';\r\n            element.style.right = '';\r\n            element.style.bottom = '';\r\n        } else if(method === 'top-right') {\r\n            deltaX = position.right - box.right;\r\n            deltaY = position.top - box.top;\r\n\r\n            element.style.right = (current.right - deltaX) + 'px';\r\n            element.style.top = (current.top + deltaY) + 'px';\r\n            element.style.left = '';\r\n            element.style.bottom = '';\r\n        } else if(method === 'bottom-left') {\r\n            deltaX = position.left - box.left;\r\n            deltaY = position.bottom - box.bottom;\r\n\r\n            console.log({\r\n                right: (current.left + deltaX) + 'px',\r\n                bottom: (current.bottom - deltaY) + 'px'\r\n            });\r\n\r\n            element.style.left = (current.left + deltaX) + 'px';\r\n            element.style.bottom = (current.bottom - deltaY) + 'px';\r\n            element.style.right = '';\r\n            element.style.top = '';\r\n        } else { // bottom-right\r\n            deltaX = position.right - box.right;\r\n            deltaY = position.bottom - box.bottom;\r\n\r\n            element.style.right = (current.right - deltaX) + 'px';\r\n            element.style.bottom = (current.bottom - deltaY) + 'px';\r\n            element.style.left = '';\r\n            element.style.top = '';\r\n        }\r\n    } else if(method === 'translate') {\r\n        let box = Rect.getBoundingClientRect(element),\r\n            deltaX = position.left - box.left,\r\n            deltaY = position.top - box.top,\r\n            cssPosition = getTranslation(element);\r\n\r\n        setTranslation(element, {\r\n            x: cssPosition.x + deltaX,\r\n            y: cssPosition.y + deltaY\r\n        });\r\n    } else if(method === 'translate3d') {\r\n        let box = Rect.getBoundingClientRect(element),\r\n            deltaX = position.left - box.left,\r\n            deltaY = position.top - box.top,\r\n            cssPosition = getTranslation(element);\r\n\r\n        setTranslation(element, {\r\n            x: cssPosition.x + deltaX,\r\n            y: cssPosition.y + deltaY,\r\n            z: cssPosition.z\r\n        });\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Transforms the coordinates of a BoundingClientRect like object from client space to document space.\r\n * @param rect\r\n */\r\nexport function clientRectToDocumentSpace(rect) {\r\n    let r = Rect.fromRect(rect);\r\n\r\n    r.left += window.pageXOffset;\r\n    r.right += window.pageXOffset;\r\n    if(typeof r.top === 'number') r.top += window.pageYOffset;\r\n    if(typeof r.bottom === 'number') r.bottom += window.pageYOffset;\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Transforms the coordinates of a BoundingClientRect like object from document space to client space.\r\n * @param rect\r\n */\r\nexport function documentRectToClientSpace(rect) {\r\n    let r = Rect.fromRect(rect);\r\n\r\n    r.left -= window.pageXOffset;\r\n    r.right -= window.pageXOffset;\r\n    if(typeof r.top === 'number') r.top -= window.pageYOffset;\r\n    if(typeof r.bottom === 'number') r.bottom -= window.pageYOffset;\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Snaps the value to the specified grid using the provided rounding function.\r\n * @param value\r\n * @param gridSize\r\n * @param roundingFunction\r\n * @returns {number|*}\r\n */\r\nexport function snapToGrid(value, gridSize, roundingFunction=Math.round) {\r\n    if(gridSize !== null && gridSize !== undefined && !Number.isNaN(gridSize)) {\r\n        return roundingFunction(value / gridSize) * gridSize;\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n\r\n/**\r\n * Deprecated in favor of calling Rect.fromRect() class method.\r\n *\r\n * @deprecated\r\n * @param domRect\r\n * @returns {Rect}\r\n */\r\nexport function convertDomRectToObject(domRect) {\r\n    return Rect.fromRect(domRect);\r\n}\r\n\r\n\r\n/**\r\n * Returns the {x, y} point calculated relative to the reference element.\r\n *\r\n * @param referenceElement\r\n * @param point\r\n * @param offset\r\n * @param constrain\r\n * @returns {Vec2}\r\n */\r\nexport function getPointOnElement(referenceElement, point, offset=null, constrain=null) {\r\n    let rect = referenceElement;\r\n\r\n    if(rect.getBoundingClientRect) {\r\n        rect = rect.getBoundingClientRect();\r\n    }\r\n\r\n    if(constrain) {\r\n        if (typeof constrain === 'string') {\r\n            constrain = document.querySelector(constrain);\r\n        }\r\n\r\n        if (constrain.getBoundingClientRect) {\r\n            constrain = Rect.fromRect(constrain.getBoundingClientRect());\r\n        }\r\n    }\r\n\r\n    // Convert array to {x, y} object.\r\n    if(Array.isArray(point)) {\r\n        point = {\r\n            x: point[0],\r\n            y: point[1]\r\n        };\r\n    } else if(typeof point === 'string') {\r\n        if(point === 'top-left') {\r\n            point = {x: 0, y: 0};\r\n        } else if(point === 'top') {\r\n            point = {x: '50%', y: 0};\r\n        } else if(point === 'top-right') {\r\n            point = {x: '100%', y: 0};\r\n        } else if(point === 'right') {\r\n            point = {x: '100%', y: '50%'};\r\n        } else if(point === 'bottom-right') {\r\n            point = {x: '100%', y: '100%'};\r\n        } else if(point === 'bottom') {\r\n            point = {x: '50%', y: '100%'};\r\n        } else if(point === 'bottom-left') {\r\n            point = {x: 0, y: '100%'};\r\n        } else if(point === 'left') {\r\n            point = {x: 0, y: '50%'};\r\n        } else if(point === 'middle') {\r\n            point = {x: '50%', y: '50%'};\r\n        } else {\r\n            throw new Error(`Unknown point option ${point}`);\r\n        }\r\n    }\r\n\r\n    if(typeof point.x === 'string') {\r\n        point.x = (rect.right - rect.left) * (parseFloat(point.x) / 100);\r\n    }\r\n\r\n    if(typeof point.y === 'string') {\r\n        point.y = (rect.bottom - rect.top) * (parseFloat(point.y) / 100);\r\n    }\r\n\r\n    if(constrain) {\r\n        if(typeof constrain.left === 'string') {\r\n            constrain.left = (rect.right - rect.left) * (parseFloat(constrain.left) / 100);\r\n        }\r\n\r\n        if(typeof constrain.right === 'string') {\r\n            constrain.right = (rect.right - rect.left) * (parseFloat(constrain.right) / 100);\r\n        }\r\n\r\n        if(typeof constrain.top === 'string') {\r\n            constrain.top = (rect.bottom - rect.top) * (parseFloat(constrain.top) / 100);\r\n        }\r\n\r\n        if(typeof constrain.bottom === 'string') {\r\n            constrain.bottom = (rect.bottom - rect.top) * (parseFloat(constrain.bottom) / 100);\r\n        }\r\n\r\n        point.x = clamp(point.x, constrain.left, constrain.right);\r\n        point.y = clamp(point.y, constrain.top, constrain.bottom);\r\n    }\r\n\r\n    if(offset) {\r\n        if(Array.isArray(offset)) {\r\n            offset = {\r\n                x: offset[0],\r\n                y: offset[1]\r\n            };\r\n        }\r\n\r\n        if(offset.x !== null) {\r\n            point.x += offset.x;\r\n        }\r\n\r\n        if(offset.y !== null) {\r\n            point.y += offset.y;\r\n        }\r\n    }\r\n\r\n    return new Vec2(rect.left + point.x, rect.top + point.y);\r\n}\r\n\r\n\r\n/**\r\n * Gets the bounding client rect for a rectangle defined by the position rectangle with left, top, right and bottom\r\n * properties relative to the element's position.\r\n *\r\n * @param element {{getBoundingClientRect}|Element|String|{left, top, right, bottom}}\r\n * @param position {{left, top, bottom, right}}\r\n * @return {Rect}\r\n */\r\nexport function getSubBoundingBox(element, position) {\r\n    let rect;\r\n\r\n    // Get the bounding client rect of the element.   The user should have passed either a css selector, an object with a\r\n    // getBoundingClientRect interface.  Or a bounding client rect directly.\r\n    if(element.getBoundingClientRect) {\r\n        rect = element.getBoundingClientRect();\r\n    } else if(typeof element === 'string') {\r\n        rect = document.querySelector(element).getBoundingClientRect();\r\n    } else {\r\n        rect = element;\r\n    }\r\n\r\n    let width = rect.right - rect.left,\r\n        height = rect.bottom - rect.top;\r\n\r\n    // The user can pass a rect with left, top, right and bottom properties.  The value can either be the desired\r\n    // coordinates relative to the top-left corner of the reference element or a percentage.  Another possibility\r\n    // is that the user passes one of the keyword properties that coorispond to a specific section of the element.\r\n    // Map those keywords to their rectangle.\r\n    if(typeof position === 'string') {\r\n        if(position === 'border-top') {\r\n            position = {left: 0, right: '100%', top: 0, bottom: 0};\r\n        } else if(position === 'border-right') {\r\n            position = {left: '100%', right: '100%', top: 0, bottom: '100%'};\r\n        } else if(position === 'border-bottom') {\r\n            position = {left: 0, right: '100%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'border-left') {\r\n            position = {left: 0, top: 0, right: 0, bottom: '100%'};\r\n        } else if(position === 'top-left') {\r\n            position = {left: 0, top: 0, right: 0, bottom: 0};\r\n        } else if(position === 'top') {\r\n            position = {top: 0, left: '50%', right: '50%', bottom: 0};\r\n        } else if(position === 'top-right') {\r\n            position = {top: 0, left: '100%', right: '100%', bottom: 0};\r\n        } else if(position === 'left') {\r\n            position = {left: 0, top: '50%', bottom: '50%', right: 0};\r\n        } else if(position === 'origin') {\r\n            position = {left: '50%', right: '50%', top: '50%', bottom: '50%'};\r\n        } else if(position === 'bottom-left') {\r\n            position = {left: 0, right: 0, top: '100%', bottom: '100%'};\r\n        } else if(position === 'bottom') {\r\n            position = {left: '50%', right: '50%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'bottom-right') {\r\n            position = {left: '100%', right: '100%', top: '100%', bottom: '100%'};\r\n        } else if(position === 'right') {\r\n            position = {left: '100%', right: '100%', top: '50%', bottom: '50%'};\r\n        }\r\n    }\r\n\r\n    position.left = position.left || 0;\r\n    position.right = position.right || 0;\r\n    position.top = position.top || 0;\r\n    position.bottom = position.bottom || 0;\r\n\r\n    // left and right percentages are a percentage of the elements width.\r\n    // top and bottom percentages are a percentage of the elements height.\r\n    if(typeof position.left === 'string') {\r\n        position.left = (parseFloat(position.left) / 100) * width;\r\n    }\r\n\r\n    if(typeof position.right === 'string') {\r\n        position.right = (parseFloat(position.right) / 100) * width;\r\n    }\r\n\r\n    if(typeof position.bottom === 'string') {\r\n        position.bottom = (parseFloat(position.bottom) / 100) * height;\r\n    }\r\n\r\n    if(typeof position.top === 'string') {\r\n        position.top = (parseFloat(position.top) / 100) * height;\r\n    }\r\n\r\n    // Convert to client space.\r\n    return new Rect(\r\n        rect.left + position.left,\r\n        rect.top + position.top,\r\n        rect.left + position.right,\r\n        rect.top + position.bottom\r\n    );\r\n}\r\n\r\n\r\n/**\r\n * Returns the distance in between the provided Rect objects.  If the objects are touching or overlapping 0\r\n * will be returned.\r\n *\r\n * @param rect1 {{left, top, right, bottom}}\r\n * @param rect2 {{left, top, right, bottom}}\r\n * @returns {Number}\r\n */\r\nexport function getDistanceBetweenRects(rect1, rect2) {\r\n    let vec1 = Rect.fromRect(rect1),\r\n        vec2 = Rect.fromRect(rect2);\r\n\r\n    let isXOverlapping = vec1.isXOverlapping(vec2),\r\n        isYOverlapping = vec1.isYOverlapping(vec2);\r\n\r\n    if(isXOverlapping && isYOverlapping) {\r\n        // Items are overlapping\r\n        return 0;\r\n    } else if(isXOverlapping) {\r\n        return Math.min(\r\n            Math.abs(vec1.bottom - vec2.top),\r\n            Math.abs(vec1.top - vec2.bottom)\r\n        );\r\n    } else if(isYOverlapping) {\r\n        return Math.min(\r\n            Math.abs(vec1.right - vec2.left),\r\n            Math.abs(vec1.left - vec2.right)\r\n        );\r\n    } else {\r\n        let x1, y1, x2, y2;\r\n\r\n        if(vec1.right <= vec2.left) {\r\n            x1 = vec1.right;\r\n            x2 = vec2.left;\r\n        } else {\r\n            x1 = vec1.left;\r\n            x2 = vec2.right;\r\n        }\r\n\r\n        if(vec1.bottom <= vec2.top) {\r\n            y1 = vec1.bottom;\r\n            y2 = vec2.top;\r\n        } else {\r\n            y1 = vec1.top;\r\n            y2 = vec2.bottom;\r\n        }\r\n\r\n        // Use distance formula to calculate distance.\r\n        return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Returns the top and left position of an element relative to the document.\r\n *\r\n * @param element\r\n * @return {{top: number, left: number}}\r\n */\r\nexport function getElementOffset(element) {\r\n    let box = element.getBoundingClientRect();\r\n\r\n    return {\r\n        left: box.left + window.pageXOffset,\r\n        top: box.top + window.pageYOffset\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Sets an elements position relative to the document.\r\n *\r\n * @param element\r\n * @param coords\r\n */\r\nexport function setElementOffset(element, coords) {\r\n    if (coords.nodeType) {\r\n        coords = getElementOffset(element);\r\n    } else if (Array.isArray(coords)) {\r\n        coords = {\r\n            left: coords.left,\r\n            top: coords.top\r\n        };\r\n    }\r\n\r\n    let offset = element.getBoundingClientRect();\r\n\r\n    let style = getComputedStyle(element),\r\n        left = parseInt(style.left, 10) || 0,\r\n        top = parseInt(style.top, 10) || 0;\r\n\r\n    element.style.left = (left + (coords.left - offset.left)) + 'px';\r\n    element.style.top = (top + (coords.top - offset.top)) + 'px';\r\n}\r\n\r\n\r\nexport {Vec2, Vec3, Rect};\r\n","/**\r\n * Throttles a function to only be executed after a given wait period.  If multiple calls to the debounced function\r\n * are made within that period the waiting period is set.\r\n * @param fn\r\n * @param wait\r\n * @returns {Function}\r\n */\r\nexport function debounce(fn, wait) {\r\n    let timeout;\r\n\r\n    return function() {\r\n        let args = arguments;\r\n\r\n        let later = () => {\r\n            timeout = null;\r\n            fn.apply(this, args);\r\n        };\r\n\r\n        if(timeout) {\r\n            clearTimeout(timeout);\r\n        }\r\n\r\n        timeout = setTimeout(later, wait);\r\n    }\r\n}\r\n","export function proto(descriptor) {\r\n    descriptor.placement = \"prototype\";\r\n    return descriptor;\r\n}\r\n","const REG_WHITESPACE = /\\s+/;\r\n\r\n\r\n/**\r\n * Parses an html string into a document fragment.\r\n *\r\n * @deprecated\r\n * @param html\r\n * @return {DocumentFragment}\r\n */\r\nexport function parseHTML(html) {\r\n    let template = document.createElement('template');\r\n    template.innerHTML = html.trim();\r\n\r\n    if (template.content) {\r\n        return template.content;\r\n    } else {\r\n        // Doesn't support template tag.\r\n        let fragment = document.createDocumentFragment();\r\n        while (template.firstChild) fragment.appendChild(template.firstChild);\r\n        return fragment;\r\n    }\r\n}\r\n\r\nexport function createFragment(html) {\r\n    // noinspection JSDeprecatedSymbols\r\n    return parseHTML(html);\r\n}\r\n\r\n/**\r\n * Adds classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function addClasses(element, classes) {\r\n    if (typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.add(...classes);\r\n}\r\n\r\n/**\r\n * Removes classes to an element.  Can take a space separated list of classes.\r\n *\r\n * @param element\r\n * @param classes\r\n */\r\nexport function removeClasses(element, classes) {\r\n    if (typeof classes === 'string') {\r\n        classes = classes.split(REG_WHITESPACE);\r\n    }\r\n\r\n    element.classList.remove(...classes);\r\n}\r\n\r\n/**\r\n * Assigns attributes in an object to an element.\r\n * @param element\r\n * @param attributes\r\n */\r\nexport function assignAttributes(element, attributes) {\r\n    for (let key in attributes) {\r\n        if (attributes.hasOwnProperty(key)) {\r\n            element.setAttribute(key, attributes[key]);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Matches a single dom element based on the given selector.\r\n * Can take a css selector string, a jquery object, a dom element, a document element or a document fragment.\r\n * If a css selector is passed it will query for the element.\r\n * If a jquery object is passed it will return the first matched element.\r\n * If an element is passed it will return that element.\r\n *\r\n * If a context is provided and the selector was a css selector, the selectors scope will be limited to that element.\r\n * Otherwise the context will be the document.\r\n *\r\n * @param selector\r\n * @param context\r\n * @returns {Element|Document|DocumentFragment}\r\n */\r\nexport function selectElement(selector, context = null) {\r\n    if (!context) {\r\n        context = document;\r\n    } else {\r\n        context = selectElement(context);\r\n    }\r\n\r\n    if (typeof selector === 'string') {\r\n        return context.querySelector(selector);\r\n    } else if (selector.jquery) {\r\n        return selector[0];\r\n    } else if (selector.nodeType === 1 || selector.nodeType === 9 || selector.nodeType === 11) {\r\n        return selector;\r\n    }\r\n}\r\n\r\n/**\r\n * Empties a dom element.\r\n *\r\n * @param element\r\n */\r\nexport function emptyElement(element) {\r\n    while (element.firstChild) element.removeChild(element.firstChild);\r\n}\r\n\r\n/**\r\n * Normalizing accessing scroll position for an element.\r\n *\r\n * Windows and elements have different ways of accessing their scroll left and scroll top values on IE.\r\n * This function normalizes this behavior so getScroll(variable).scrollLeft always works.\r\n * @param element\r\n * @returns {{left, top}}\r\n */\r\nexport function getScroll(element) {\r\n    if (isWindow(element)) {\r\n        return {\r\n            scrollLeft: element.pageXOffset,\r\n            scrollTop: element.pageYOffset\r\n        };\r\n    } else {\r\n        return {\r\n            scrollLeft: element.scrollLeft,\r\n            scrollTop: element.scrollTop\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Normalizes setting a scroll position for an element.\r\n * Windows on ie and elements with overflow scroll have different ways of setting the scroll position.\r\n * This methods normalizes them.\r\n * @param element - The element to scroll\r\n * @param scroll - An object with a left or a top property or both.\r\n */\r\nexport function setScroll(element, scroll) {\r\n    if (element.scrollTo) {\r\n        element.scrollTo(scroll);\r\n    } else {\r\n        element.scrollLeft = scroll.left;\r\n        element.scrollTop = scroll.top;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns first child element that matches the test function.\r\n * @param element - Parent element\r\n * @param fn {Function|String} - Test Function\r\n * @returns {HTMLElement|Element|null}\r\n */\r\nexport function findChild(element, fn) {\r\n    if (typeof fn === 'string') {\r\n        let selector = fn;\r\n        fn = (child) => child.matches(selector);\r\n    }\r\n\r\n    for (let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if (fn(child)) {\r\n            return child;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * Creates a filtered list of element from the children that match the test function.\r\n * @param element - Parent element.\r\n * @param fn - Test function.\r\n * @returns {Array}\r\n */\r\nexport function filterChildren(element, fn) {\r\n    let r = [];\r\n\r\n    for (let i = 0, l = element.children.length; i < l; i++) {\r\n        let child = element.children[i];\r\n\r\n        if (fn(child)) {\r\n            r.push(child);\r\n        }\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * Test to see if the variable is a window.\r\n * @param variable\r\n * @returns {boolean}\r\n */\r\nexport function isWindow(variable) {\r\n    return variable && typeof variable === 'object' && setInterval in variable;\r\n}\r\n","import {debounce} from \"./debounce\";\r\nimport {proto} from \"./decorators\";\r\nimport {createFragment, findChild, filterChildren, emptyElement, addClasses, removeClasses, selectElement, assignAttributes, getScroll, isWindow, setScroll} from \"./dom\";\r\nimport {all, any, chain, enumerate, firstValue, items, keys, values} from \"./iter\";\r\nimport {clamp, modulo, calcDistance} from \"./math\";\r\nimport {arraysEqual, getOwnProperty, getPropertyByPath, isEmptyObject, randomChoice, rangeFindItem} from \"./object\";\r\n\r\nexport {\r\n    debounce,\r\n    proto,\r\n    createFragment, findChild, filterChildren, emptyElement, addClasses, removeClasses, selectElement, assignAttributes,\r\n    getScroll, isWindow, setScroll, all, any, chain, enumerate, firstValue, items, keys, values,\r\n    clamp, modulo, calcDistance,\r\n    arraysEqual, getPropertyByPath, getOwnProperty, isEmptyObject, randomChoice, rangeFindItem\r\n};\r\n","\r\n\r\n\r\nexport function *items(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield [key, object[key]];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *keys(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield key;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *values(object) {\r\n    for(let key in object) {\r\n        if(object.hasOwnProperty(key)) {\r\n            yield object[key];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function *enumerate(iterable) {\r\n    let i = 0;\r\n\r\n    for(let value of iterable) {\r\n        yield [i, value];\r\n    }\r\n}\r\n\r\n\r\nexport function *chain(...iterables) {\r\n    for(let iter of iterables) {\r\n        for(let value of iter) {\r\n            yield value;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns the first none null or undefined value.\r\n * @param args\r\n */\r\nexport function firstValue(args) {\r\n    for(let item of args) {\r\n        if(item !== null && item !== undefined) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if all of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function all(iterable) {\r\n    for(let item of iterable) {\r\n        if(!item) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**\r\n * Takes an iterable and returns true if any of the values are trueish.\r\n * @param iterable\r\n */\r\nexport function any(iterable) {\r\n    for(let item of iterable) {\r\n        if(item) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n","/**\r\n * Clamps a value between a minimum and maximum values.\r\n * @param value\r\n * @param minValue\r\n * @param maxValue\r\n * @returns {*}\r\n */\r\nexport function clamp(value, minValue = null, maxValue = null) {\r\n    if (minValue !== null) {\r\n        value = Math.max(value, minValue);\r\n    }\r\n\r\n    if (maxValue !== null) {\r\n        value = Math.min(value, maxValue);\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nexport function modulo(value, mod) {\r\n    return ((value % mod) + mod) % mod;\r\n}\r\n\r\n\r\nexport function calcDistance(x1, y1, x2, y2) {\r\n    return Math.sqrt(\r\n        Math.pow(x2 - x1, 2) + Math.pow(y2 - y2, 2)\r\n    );\r\n}\r\n","/**\r\n * Returns a random value from an array.\r\n * @param array\r\n * @returns {*}\r\n */\r\nexport function randomChoice(array) {\r\n    return array[Math.floor(Math.random() * array.length)];\r\n}\r\n\r\n/**\r\n * Checks to see if 2 arrays are \"equal\".\r\n * @param array1\r\n * @param array2\r\n */\r\nexport function arraysEqual(array1, array2) {\r\n    if (array1 === array2) return true; // The same object.\r\n    if (array1 == null || array2 == null) return false;\r\n    if (array1.length !== array2.length) return false;\r\n\r\n    for (let i = 0, l = array1.length; i < l; i++) {\r\n        if (array1[i] !== array2[i]) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Tests to see if the object is empty.\r\n *\r\n * @param object\r\n * @return {boolean}\r\n */\r\nexport function isEmptyObject(object) {\r\n    // noinspection LoopStatementThatDoesntLoopJS\r\n    for (let key in object) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Returns the object own property or the default value if it does not have that property.\r\n * @param obj\r\n * @param propName\r\n * @param defaultValue\r\n * @returns {*}\r\n */\r\nexport function getOwnProperty(obj, propName, defaultValue = undefined) {\r\n    if (obj.hasOwnProperty(propName)) {\r\n        return obj[propName];\r\n    } else {\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns the obj value by following it's property path.  For example getPropertyByPath(a, 'b.c.d') is equivalent to\r\n * a.b.c.d but can be passed in string form.\r\n * @param obj\r\n * @param path\r\n * @returns {*}\r\n */\r\nexport function getPropertyByPath(obj, path) {\r\n    let parts = path.split('.'),\r\n        r = obj;\r\n\r\n    for (let part of parts) {\r\n        r = r[part];\r\n    }\r\n\r\n    return r;\r\n}\r\n\r\n\r\n/**\r\n * rangeFindItem\r\n *\r\n * Searches an array starting at the starting index and heads towards the ending index and returns the first item that\r\n * matches the predicate function.  If no item is found then undefined will be returned.  This function can search an\r\n * array both forwards and backwards.  Just start at a greater point then the ending point and the function will\r\n * handle the rest.\r\n *\r\n * @param array - The array to search\r\n * @param predicate - The matching function.  Should return true if the item is a match.\r\n * @param startingIndex - The index to start from.\r\n * @param endingIndex - The index to end at.  (Will also search this index)\r\n * @returns {*}\r\n */\r\nexport function rangeFindItem(array, predicate, startingIndex=0, endingIndex=null) {\r\n    let i;\r\n\r\n    if(endingIndex === null) {\r\n        endingIndex = array.length-1;\r\n    }\r\n\r\n    i = startingIndex;\r\n\r\n    while(true) {\r\n        let item = array[i];\r\n\r\n        if(predicate(item)) {\r\n            return item;\r\n        }\r\n\r\n        if(startingIndex > endingIndex) {\r\n            if(i <= endingIndex) return;\r\n            i--;\r\n        } else {\r\n            if(i >= endingIndex) return;\r\n            i++;\r\n        }\r\n    }\r\n}\r\n","export function isSuperset(set, subset) {\r\n    for (let elem of subset) {\r\n        if (!set.has(elem)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\nfunction union(setA, setB) {\r\n    let _union = new Set(setA);\r\n    for (let elem of setB) {\r\n        _union.add(elem);\r\n    }\r\n    return _union;\r\n}\r\n\r\n\r\nfunction intersection(setA, setB) {\r\n    let _intersection = new Set();\r\n    for (let elem of setB) {\r\n        if (setA.has(elem)) {\r\n            _intersection.add(elem);\r\n        }\r\n    }\r\n    return _intersection;\r\n}\r\n\r\n\r\nfunction symmetricDifference(setA, setB) {\r\n    let _difference = new Set(setA);\r\n    for (let elem of setB) {\r\n        if (_difference.has(elem)) {\r\n            _difference.delete(elem);\r\n        } else {\r\n            _difference.add(elem);\r\n        }\r\n    }\r\n    return _difference;\r\n}\r\n\r\n\r\nfunction difference(setA, setB) {\r\n    let _difference = new Set(setA);\r\n    for (let elem of setB) {\r\n        _difference.delete(elem);\r\n    }\r\n    return _difference;\r\n}\r\n","import Vec4 from './Vec4';\r\n\r\nconst regPercentage = /^(\\d+\\.?\\d*)%$/;\r\n\r\n\r\nexport default class RGBA extends Vec4 {\r\n    constructor(r, g, b, a) {\r\n        if(typeof r === 'object') {\r\n            super(r);\r\n        } else {\r\n            super(r, g, b, a);\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n    }\r\n\r\n    static parseRGBAColorStringArgs(value) {\r\n        value = value.trim().split(/\\s+/);\r\n\r\n        let r = value[0],\r\n            g = value[1],\r\n            b = value[2],\r\n            a = value[3];\r\n\r\n        if(r) {\r\n            if(regPercentage.test(r)) {\r\n                r = (parseFloat(r) / 100) * 255;\r\n            } else {\r\n                r = parseInt(r, 10);\r\n            }\r\n        }\r\n\r\n        if(g) {\r\n            if(regPercentage.test(g)) {\r\n                g = (parseFloat(g) / 100) * 255;\r\n            } else {\r\n                g = parseInt(g, 10);\r\n            }\r\n        }\r\n\r\n        if(b) {\r\n            if(regPercentage.test(b)) {\r\n                b = (parseFloat(b) / 100) * 255;\r\n            } else {\r\n                b = parseInt(b, 10);\r\n            }\r\n        }\r\n\r\n        if(a) {\r\n            if(regPercentage.test(a)) {\r\n                a = (parseFloat(a) / 100);\r\n            } else {\r\n                a = parseFloat(a);\r\n            }\r\n        }\r\n\r\n        a = a || 1.0;\r\n\r\n        return new RGBA(r, g, b, a);\r\n    }\r\n\r\n    static parseHexColorStringArg(value) {\r\n        value = value.trim().substring(1);\r\n\r\n        let r, g, b, a = 1.0;\r\n\r\n        if(value.length === 3) {\r\n            r = value[0];\r\n            g = value[1];\r\n            b = value[2];\r\n\r\n            r = parseInt(r+r, 16);\r\n            g = parseInt(g+g, 16);\r\n            b = parseInt(b+b, 16);\r\n        } else if(value.length === 6) {\r\n            r = value.substr(0, 2);\r\n            g = value.substr(2, 2);\r\n            b = value.substr(4, 2);\r\n\r\n            r = parseInt(r, 16);\r\n            g = parseInt(g, 16);\r\n            b = parseInt(b, 16);\r\n        } else if(value.length === 8) {\r\n            r = value.substr(0, 2);\r\n            g = value.substr(2, 2);\r\n            b = value.substr(4, 2);\r\n            a = value.substr(6, 2);\r\n\r\n            r = parseInt(r, 16);\r\n            g = parseInt(g, 16);\r\n            b = parseInt(b, 16);\r\n            a = parseInt(a, 16) / 255;\r\n        }\r\n\r\n        return new RGBA(r, g, b, a);\r\n    }\r\n}\r\n","import {ValueError} from \"../errors\";\r\nimport Vec2 from \"./Vec2\";\r\nimport Vec4 from \"./Vec4\";\r\nimport {clamp, calcDistance} from '../utility';\r\nimport {UnitError} from '../errors';\r\n\r\n\r\nconst regWhitespace = /\\s+/,\r\n    regPositionPart = /^([a-zA-Z]*)([+-]?\\d*\\.?\\d*)([a-z%]*)$/; // Parses string like \"left+10px\" into [\"left\", \"+10px\"]\r\n\r\n\r\nconst positionShortHandValues = {\r\n    top: 'center top',\r\n    right: 'right middle',\r\n    bottom: 'center bottom',\r\n    left: 'left middle',\r\n    topleft: 'left top',\r\n    topright: 'right top',\r\n    bottomleft: 'left bottom',\r\n    bottomright: 'right bottom'\r\n};\r\n\r\n\r\nexport default class Rect extends Vec4 {\r\n    constructor(left, top, right, bottom, domElement=null) {\r\n        if(typeof left === 'function') {\r\n            left = left();\r\n        }\r\n\r\n        if(typeof left === 'object') {\r\n            if(left.getBoundingClientRect) {\r\n                domElement = left;\r\n                let bb = domElement.getBoundingClientRect();\r\n                left = bb.left;\r\n                top = bb.top;\r\n                right = bb.right;\r\n                bottom = bb.bottom;\r\n            } else {\r\n                top = left.top;\r\n                right = left.right;\r\n                bottom = left.bottom;\r\n                left = left.left;\r\n            }\r\n        }\r\n\r\n        super(left, top, right, bottom);\r\n\r\n        // noinspection JSUnusedGlobalSymbols\r\n        this.domElement = domElement;\r\n\r\n        if(arguments.length === 1 && left instanceof Rect) {\r\n            Object.assign(this, left);\r\n        }\r\n    }\r\n\r\n    bind(element) {\r\n        return this._new(this.left, this.top, this.right, this.bottom, element);\r\n    }\r\n\r\n    _new(left, top, right, bottom, domElement=undefined) {\r\n        let r = new this.constructor(this);\r\n        r.left = left;\r\n        r.top = top;\r\n        r.right = right;\r\n        r.bottom = bottom;\r\n        if(domElement !== undefined) r.domElement = domElement;\r\n        return r;\r\n    }\r\n\r\n    toPoint() {\r\n        return new Vec2(this[0], this[1]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n\r\n    translate(x, y) {\r\n        if(Array.isArray(x)) {\r\n            [x, y] = x;\r\n        } else if(typeof x === 'object') {\r\n            y = x.y;\r\n            x = x.x;\r\n        }\r\n\r\n        return this._new(\r\n            this[0] + x,\r\n            this[1] + y,\r\n            this[2] + x,\r\n            this[3] + y\r\n        );\r\n    }\r\n\r\n    addMargins({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left - left,\r\n            this.top - top,\r\n            this.right + right,\r\n            this.bottom + bottom\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    addPadding({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left + left,\r\n            this.top + top,\r\n            this.right - right,\r\n            this.bottom - bottom\r\n        );\r\n    }\r\n\r\n    moveTo({left, top}) {\r\n        let deltaX = left - this.left,\r\n            deltaY = top - this.top;\r\n\r\n        return this._new(\r\n            this.left + deltaX,\r\n            this.top + deltaY,\r\n            this.right + deltaX,\r\n            this.bottom + deltaY\r\n        );\r\n    }\r\n\r\n    intersection({left, top, right, bottom}) {\r\n        left = Math.max(this.left, left);\r\n        right = Math.min(this.right, right);\r\n        bottom = Math.min(this.bottom, bottom);\r\n        top = Math.max(this.top, top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * Creates a new rectangle exactly big enough to hold the current rectangle and the provided rectangle.\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     * @returns {null|Rect}\r\n     */\r\n    union({left, top, right, bottom}) {\r\n        left = Math.min(left, this.left);\r\n        right = Math.max(right, this.right);\r\n        bottom = Math.max(bottom, this.bottom);\r\n        top = Math.min(top, this.top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    contains(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    containsX(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right;\r\n    }\r\n\r\n    containsY(rect) {\r\n        return this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    isXOverlapping(rect) {\r\n        return (rect.left <= this.right && rect.right >= this.left);\r\n    }\r\n\r\n    isYOverlapping(rect) {\r\n        return (rect.top <= this.bottom && rect.bottom >= this.top);\r\n    }\r\n\r\n    isAbove(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.top > this.bottom;\r\n    }\r\n\r\n    isBelow(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.bottom < this.top;\r\n    }\r\n\r\n    isLeftOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.left > this.right;\r\n    }\r\n\r\n    isRightOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.right < this.left;\r\n    }\r\n\r\n    isOverlapping(rect) {\r\n        rect = new Rect(rect);\r\n        return this.isXOverlapping(rect) && this.isYOverlapping(rect);\r\n    }\r\n\r\n    /**\r\n     * Attempts to fit the rect inside of the container anchoring from the anchor point.  The anchor point defaults\r\n     * to the top left corner or (0, 0).\r\n     *\r\n     * If possible entire rect should be clamped to the closest position inside of the container.\r\n     * Else position anchor point the closest possible point inside container.\r\n     *\r\n     * @param container\r\n     * @param anchor\r\n     */\r\n    fit(container, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        container = new Rect(container);\r\n        let starting = container;\r\n\r\n        container = container.add(new Rect(\r\n            anchor.left,\r\n            anchor.top,\r\n            -this.width + anchor.left,\r\n            -this.height + anchor.top\r\n        ));\r\n\r\n        container = new Rect(\r\n            clamp(container.left, starting.left, starting.right),\r\n            clamp(container.top, starting.top, starting.bottom),\r\n            clamp(container.right, starting.left, starting.right),\r\n            clamp(container.bottom, starting.top, starting.bottom)\r\n        );\r\n\r\n        let left = clamp(this.left, container.left, container.right) - anchor.left,\r\n            top = clamp(this.top, container.top, container.bottom) - anchor.top,\r\n            width = this.width,\r\n            height = this.height;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    fitX(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    fitY(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    /**\r\n     * Clamps the anchor point inside the rect.  Anchor point defaults to top left or (0, 0).\r\n     *\r\n     * @param rect\r\n     * @param anchor\r\n     * @returns {Rect}\r\n     */\r\n    clamp(rect, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        rect = new Rect(rect);\r\n\r\n        let width = this.width,\r\n            height = this.height,\r\n            left = clamp(this.left + anchor.left, rect.left, rect.right) - anchor.left,\r\n            top = clamp(this.top + anchor.top, rect.top, rect.bottom) - anchor.top;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    clampX(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    clampY(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Returns the distance between two rects.\r\n     * @param rect\r\n     * @returns {number}\r\n     */\r\n    getDistanceBetween(rect) {\r\n        rect = Rect.fromRect(rect);\r\n\r\n        let isXOverlapping = this.isXOverlapping(rect),\r\n            isYOverlapping = this.isYOverlapping(rect);\r\n\r\n        if(isXOverlapping && isYOverlapping) {\r\n            // Items are overlapping\r\n            return 0;\r\n        } else if(isXOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.bottom - rect.top),\r\n                Math.abs(this.top - rect.bottom)\r\n            );\r\n        } else if(isYOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.right - rect.left),\r\n                Math.abs(this.left - rect.right)\r\n            );\r\n        } else {\r\n            let x1, y1, x2, y2;\r\n\r\n            if(this.right <= rect.left) {\r\n                x1 = this.right;\r\n                x2 = rect.left;\r\n            } else {\r\n                x1 = this.left;\r\n                x2 = rect.right;\r\n            }\r\n\r\n            if(this.bottom <= rect.top) {\r\n                y1 = this.bottom;\r\n                y2 = rect.top;\r\n            } else {\r\n                y1 = this.top;\r\n                y2 = rect.bottom;\r\n            }\r\n\r\n            // Use distance formula to calculate distance.\r\n            return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getDistanceFromPoint(point) {\r\n        point = new Rect(point.left, point.top, point.left, point.top);\r\n\r\n        let closestX = Math.abs(this.left - point.left) < Math.abs(this.right - point.left) ? this.left : this.right,\r\n            closestY = Math.abs(this.top - point.top) < Math.abs(this.bottom - point.top) ? this.top : this.bottom,\r\n            distance = calcDistance(closestX, closestY, point.left, point.top);\r\n\r\n        return this.contains(point) ? -distance : distance;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getCenterPoint() {\r\n        return new Vec2(\r\n            this.left + (this.width / 2),\r\n            this.top + (this.height / 2)\r\n        );\r\n    }\r\n\r\n    reflect(point=null, axis='xy') {\r\n        // Reflect around the given point or origin\r\n        point = point ? new Vec2(point) : new Vec2(0, 0);\r\n\r\n        let x = this.left + (this.width / 2) - point.x,\r\n            y = this.top + (this.height / 2) - point.y;\r\n\r\n        if(axis === 'x' || axis === 'xy') {\r\n            x *= -1;\r\n        }\r\n\r\n        if(axis === 'y' || axis === 'xy') {\r\n            y *= -1;\r\n        }\r\n\r\n        x = x - (this.width / 2) + point.x;\r\n        y = y - (this.height / 2) + point.y;\r\n\r\n        return this._new(x, y, x + this.width, y + this.height);\r\n    }\r\n\r\n    position({my, at, of, offset=null, inside=null, collision=null}) {\r\n        // Of should be a Rect object.\r\n        if(of.getBoundingClientRect) {\r\n            of = new Rect(of);\r\n        }\r\n\r\n        // inside should be a Rect object.\r\n        if(inside && inside.getBoundingClientRect) {\r\n            inside = new Rect(inside);\r\n        }\r\n\r\n        // collision can be string with a space separating the x and y values.\r\n        // for example \"fit flipfit\"\r\n        // normalize it to an {x, y} object.\r\n        if(collision && typeof collision === 'string') {\r\n            let parts = collision.trim().split(regWhitespace);\r\n            collision = {\r\n                x: parts[0],\r\n                y: parts[1] || parts[0]\r\n            };\r\n        }\r\n\r\n        let anchor = this.evaluatePositionString(my),\r\n            reference = of.evaluatePositionString(at),\r\n            deltaX = reference.x - anchor.x,\r\n            deltaY = reference.y - anchor.y;\r\n\r\n        let rect = this.translate(deltaX, deltaY);\r\n\r\n        if(offset) {\r\n            rect = this.translate(offset);\r\n        }\r\n\r\n        // If the rect is already inside the container or if not container or collision function where given\r\n        // return immediately, there is not more work to be done.\r\n        if(!collision || !inside || inside.contains(rect)) {\r\n            return rect;\r\n        }\r\n\r\n        if(!inside.containsX(rect) && (collision.x === 'flip' || collision.x === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'x');\r\n        }\r\n\r\n        if(!inside.containsY(rect) && (collision.y === 'flip' || collision.y === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'y');\r\n        }\r\n\r\n        if(collision.x === 'fit' || collision.x === 'flipfit') {\r\n            rect = rect.fitX(inside);\r\n        }\r\n\r\n        if(collision.y === 'fit' || collision.y === 'flipfit') {\r\n            rect = rect.fitY(inside);\r\n        }\r\n\r\n        return rect;\r\n    }\r\n\r\n    evaluatePositionString(string) {\r\n        if(positionShortHandValues[string]) {\r\n            string = positionShortHandValues[string];\r\n        }\r\n\r\n        let pos = string.trim().split(regWhitespace),\r\n            x = pos[0],\r\n            y = pos[1],\r\n            rx = null,\r\n            ry = null;\r\n\r\n        if(x) {\r\n            rx = this._evaluatePositionStringComponent(x, 'x');\r\n        }\r\n\r\n        if(y) {\r\n            ry = this._evaluatePositionStringComponent(y, 'y');\r\n        }\r\n\r\n        return new Vec2(rx, ry);\r\n    }\r\n\r\n    /**\r\n     * Gets the anchor position relative to the element.  The anchor can be any of the following:\r\n     *\r\n     * A position string.\r\n     * A [x, y, offsetX=0, offsetY=0] array.\r\n     * An object of {left, top, offsetX=0, offsetY=0} properties.\r\n     *\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getAnchor(anchor) {\r\n        if(positionShortHandValues[anchor]) {\r\n            anchor = positionShortHandValues[anchor];\r\n        }\r\n\r\n        let x, y, offsetX = 0, offsetY = 0;\r\n\r\n        if(typeof anchor === 'string') {\r\n            [x, y] = anchor.trim().split(regWhitespace);\r\n        } else if(Array.isArray(anchor)) {\r\n            [x, y, offsetX=0, offsetY=0] = anchor;\r\n        } else {\r\n            x = anchor.left;\r\n            y = anchor.top;\r\n            offsetX = anchor.offsetX || 0;\r\n            offsetY = anchor.offsetY || 0;\r\n        }\r\n\r\n        if(typeof x === 'string') {\r\n            x = this._evaluatePositionStringComponent(x, 'x') - this.left;\r\n        }\r\n\r\n        if(typeof y === 'string') {\r\n            y = this._evaluatePositionStringComponent(y, 'y') - this.top;\r\n        }\r\n\r\n        return new Vec2(x + offsetX, y + offsetY);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Takes a anchor point coordient relative the the rect and returns the true coordients.\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getPoint(anchor) {\r\n        let point = this.getAnchor(anchor);\r\n        return new Vec2(point.left + this.left, point.top + this.top);\r\n    }\r\n\r\n    /**\r\n     * Evaluates a position string value such as \"left+10px\" into it final position on the rect.\r\n     * @param value - The value to evaluate.\r\n     * @param direction - The direction type.  Should be either \"x\" or \"y\".\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _evaluatePositionStringComponent(value, direction) {\r\n        let parts = regPositionPart.exec(value),\r\n            r = 0;\r\n\r\n        if(parts[1]) {\r\n            let p = parts[1];\r\n\r\n            if(direction === 'x') {\r\n                if(p === 'left') {\r\n                    r = this.left;\r\n                } else if(p === 'center' || p === 'middle') {\r\n                    r = this.left + (this.width / 2);\r\n                } else if(p === 'right') {\r\n                    r = this.left + this.width;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            } else {\r\n                if(p === 'top') {\r\n                    r = this.top;\r\n                } else if(p === 'middle' || p === 'center') {\r\n                    r = this.top + (this.height / 2);\r\n                } else if(p === 'bottom') {\r\n                    r = this.top + this.height;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            }\r\n        } else if(direction === 'x') {\r\n            r = this.left;\r\n        } else {\r\n            r = this.top;\r\n        }\r\n\r\n        if(parts[2]) {\r\n            let value = parseFloat(parts[2]),\r\n                type = parts[3] || 'px';\r\n\r\n            if(type === 'px') {\r\n                r += value;\r\n            } else if(type === '%') {\r\n                if(direction === 'x') {\r\n                    r += (value / 100) * this.width;\r\n                } else {\r\n                    r += (value / 100) * this.height;\r\n                }\r\n            } else {\r\n                throw new UnitError(\"Invalid unit: Must be either % or px.\");\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static fromRect({left, top, right, bottom}) {\r\n        return new Rect(left, top, right, bottom);\r\n    }\r\n\r\n    static getBoundingClientRect(element) {\r\n        return new Rect(element);\r\n    }\r\n\r\n    /**\r\n     * Returns the elements Rect without any inline styles applied.\r\n     * @param element\r\n     * @param restore - If true inline style will be restored after measuring.\r\n     * @returns {Rect}\r\n     */\r\n    static getCleanBoundingClientRect(element, restore=true) {\r\n        let state = {},\r\n            keys = [];\r\n\r\n        for(let i = 0; i < element.style.length; i++) {\r\n            keys.push(element.style[i]);\r\n        }\r\n\r\n        for(let key of keys) {\r\n            state[key] = element.style[key];\r\n            element.style[key] = \"\";\r\n        }\r\n\r\n        let r = Rect.getBoundingClientRect(element);\r\n\r\n        if(restore) {\r\n            Object.assign(element.style, state);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static getClientRect() {\r\n        return new Rect(\r\n            0,\r\n            0,\r\n            window.innerWidth,\r\n            window.innerHeight\r\n        );\r\n    }\r\n\r\n    static getRootContainingClientRect() {\r\n        return new Rect(\r\n            -window.scrollX,\r\n            -window.scrollY,\r\n            document.documentElement.clientWidth - window.scrollX,\r\n            document.documentElement.clientHeight - window.scrollY\r\n        );\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get right() {\r\n        return this[2];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[3];\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set right(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set bottom(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    set width(value) {\r\n        this.right = this.left + value;\r\n    }\r\n\r\n    set height(value) {\r\n        this.bottom = this.top + value;\r\n    }\r\n\r\n    get x() {\r\n        return this.left;\r\n    }\r\n\r\n    get y() {\r\n        return this.top;\r\n    }\r\n\r\n    set x(value) {\r\n        this.left = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this.top = value;\r\n    }\r\n}\r\n","import {clamp} from '../utility';\r\n\r\n\r\n/**\r\n * Stores a 2 value Vector.\r\n */\r\nexport default class Vec2 {\r\n    constructor(x=0, y=0) {\r\n        if(x instanceof Vec2) {\r\n            this[0] = x.x;\r\n            this[1] = x.y;\r\n        } else if(Array.isArray(x)) {\r\n            this[0] = x[0];\r\n            this[1] = x[1];\r\n        } else if(typeof x === 'object') {\r\n            if(x.left !== undefined) {\r\n                this[0] = x.left;\r\n                this[0] = x.top;\r\n            } else {\r\n                this[0] = x.x;\r\n                this[1] = x.y;\r\n            }\r\n        } else {\r\n            this[0] = x;\r\n            this[1] = y;\r\n        }\r\n    }\r\n\r\n    add(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] + vec2,\r\n                this[1] + vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] + vec2[0],\r\n                this[1] + vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] - vec2,\r\n                this[1] - vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] - vec2[0],\r\n                this[1] - vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return new Vec2(this[0] * value, this[1] * value);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] % vec2,\r\n                this[1] % vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] % vec2[0],\r\n                this[1] % vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec2) {\r\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return Vec2(this[0], this[1]);\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get right() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[1];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this[0];\r\n    }\r\n\r\n    set width(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get height() {\r\n        return this[1];\r\n    }\r\n\r\n    set height(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate() {\r\n        return `translate(${this.x}px, ${this.y}px)`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\r\n    }\r\n\r\n    clamp(vec4) {\r\n        return new Vec2(\r\n            clamp(this.left, vec4.left, vec4.right),\r\n            clamp(this.top, vec4.top, vec4.bottom)\r\n        );\r\n    }\r\n\r\n    static fromVertex(vertex) {\r\n        if(Array.isArray(vertex)) {\r\n            return new Vec2(vertex[0], vertex[1]);\r\n        } else if(vertex.hasOwnProperty('left')) {\r\n            return new Vec2(vertex.left, vertex.top);\r\n        } else {\r\n            return new Vec2(vertex.x, vertex.y);\r\n        }\r\n    }\r\n}\r\n","\r\n\r\n/**\r\n * Stores a 3 value vector.\r\n */\r\nexport default class Vec3 {\r\n    constructor(x=0, y=0, z=0) {\r\n        this[0] = x;\r\n        this[1] = y;\r\n        this[2] = z;\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get z() {\r\n        return this[2];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set z(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n            this[2] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n            this[2] = value[2];\r\n        }\r\n    }\r\n\r\n    add(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] + vec3,\r\n                this[1] + vec3,\r\n                this[2] + vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] + vec3[0],\r\n                this[1] + vec3[1],\r\n                this[2] + vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] - vec3,\r\n                this[1] - vec3,\r\n                this[2] - vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] - vec3[0],\r\n                this[1] - vec3[1],\r\n                this[2] - vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return new Vec3(\r\n            this[0] * value,\r\n            this[1] * value,\r\n            this[2] * value\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec3) {\r\n        return vec3 === this || (vec3[0] === this[0] && vec3[1] === this[1] && vec3[2] === this[2]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(vec3) {\r\n        if(typeof vec3 === 'number') {\r\n            return new Vec3(\r\n                this[0] % vec3,\r\n                this[1] % vec3,\r\n                this[2] % vec3\r\n            );\r\n        } else {\r\n            return new Vec3(\r\n                this[0] % vec3[0],\r\n                this[1] % vec3[1],\r\n                this[2] % vec3[2]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return new Vec3(this[0], this[1], this[2]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toHex() {\r\n        let r = Math.round(this.r).toString(16),\r\n            g = Math.round(this.g).toString(16),\r\n            b = Math.round(this.b).toString(16);\r\n\r\n        if(r.length === 1) {\r\n            r = '0' + r;\r\n        }\r\n\r\n        if(g.length === 1) {\r\n            g = '0' + g;\r\n        }\r\n\r\n        if(b.length === 1) {\r\n            b = '0' + b;\r\n        }\r\n\r\n        return `#${r}${g}${b}`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toRGB() {\r\n        return `rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, ${this.z}px)`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromHex(hex) {\r\n        let m = /^#?([0-9a-f]{3})$/i.exec(hex);\r\n\r\n        if(m) {\r\n            hex = m[1][0] + m[1][0] + m[1][1] + m[1][1] + m[1][2] + m[1][2];\r\n        } else {\r\n            m = /^#?([0-9a-f]{6})$/i.exec(hex);\r\n\r\n            if(m) {\r\n                hex = m[1];\r\n            } else {\r\n                throw new Error(`Could not parse value ${hex}`);\r\n            }\r\n        }\r\n\r\n        hex = parseInt(hex, 16);\r\n\r\n        // r, g, b\r\n        return new Vec3(\r\n            hex & 0xff0000 >> 16,\r\n            hex & 0x00ff00 >> 8,\r\n            hex & 0x0000ff\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGB(value) {\r\n        let m = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgb value ${value}`);\r\n        }\r\n\r\n        return new Vec3(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n        );\r\n    }\r\n}\r\n","/**\r\n * Class to store a 4 value vector.\r\n * Provides DOMRect interface.\r\n */\r\nexport default class Vec4 {\r\n    /**\r\n     * r, g, b, a\r\n     * left, top, right, bottom\r\n     *\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     */\r\n    constructor(left, top, right, bottom) {\r\n        this[0] = left;\r\n        this[1] = top;\r\n        this[2] = right;\r\n        this[3] = bottom;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get a() {\r\n        return this[3];\r\n    }\r\n\r\n    set a(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    set(valueOrVec4) {\r\n        if(typeof valueOrVec4 !== 'object') {\r\n            this[0] = valueOrVec4;\r\n            this[1] = valueOrVec4;\r\n            this[2] = valueOrVec4;\r\n            this[3] = valueOrVec4;\r\n        } else {\r\n            this[0] = valueOrVec4[0];\r\n            this[1] = valueOrVec4[1];\r\n            this[2] = valueOrVec4[2];\r\n            this[3] = valueOrVec4[3];\r\n        }\r\n    }\r\n\r\n    add(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] + valueOrVec4,\r\n                this[1] + valueOrVec4,\r\n                this[2] + valueOrVec4,\r\n                this[3] + valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] + valueOrVec4[0],\r\n                this[1] + valueOrVec4[1],\r\n                this[2] + valueOrVec4[2],\r\n                this[3] + valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] - valueOrVec4,\r\n                this[1] - valueOrVec4,\r\n                this[2] - valueOrVec4,\r\n                this[3] - valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] - valueOrVec4[0],\r\n                this[1] - valueOrVec4[1],\r\n                this[2] - valueOrVec4[2],\r\n                this[3] - valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return this._new(\r\n            this[0] * value,\r\n            this[1] * value,\r\n            this[2] * value,\r\n            this[3] * value\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec4) {\r\n        return vec4 === this || (vec4[0] === this[0] && vec4[1] === this[1] && vec4[2] === this[2] && vec4[3] === this[3]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] % valueOrVec4,\r\n                this[1] % valueOrVec4,\r\n                this[2] % valueOrVec4,\r\n                this[3] % valueOrVec4,\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] % valueOrVec4[0],\r\n                this[1] % valueOrVec4[1],\r\n                this[2] % valueOrVec4[2],\r\n                this[3] % valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toRGBA() {\r\n        return `rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.a})`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return new this.constructor(this[0], this[1], this[2], this[3]);\r\n    }\r\n\r\n    _new(left, top, right, bottom) {\r\n        return new this.constructor(left, top, right, bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBAObject({r, g, b, a}) {\r\n        return new Vec4(r, g, b, a);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBA(value) {\r\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgba value ${value}`);\r\n        }\r\n\r\n        return new Vec4(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n            parseFloat(m[4]),\r\n        );\r\n    }\r\n}\r\n","import Rect from \"./Rect\";\r\nimport Vec2 from \"./Vec2\";\r\nimport Vec3 from \"./Vec3\";\r\nimport Vec4 from \"./Vec4\";\r\nimport RGBA from \"./RGBA\";\r\nimport {UnitError} from \"../errors\";\r\n\r\n\r\nexport {Rect, Vec2, Vec3, Vec4, RGBA, UnitError};\r\n","import Resizeable, {CONTAINERS} from 'core/ui/Resizeable';\r\nimport Draggable from 'core/ui/Draggable';\r\nimport {clientRectToDocumentSpace, documentRectToClientSpace} from 'core/ui/position';\r\n\r\n\r\nwindow.clientRectToDocumentSpace = clientRectToDocumentSpace;\r\nwindow.documentRectToClientSpace = documentRectToClientSpace;\r\n\r\n\r\nexport default class ResizeableTestPage {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    load() {\r\n        let element1 = document.querySelector('#test-resizeable1');\r\n\r\n        this.draggable = new Draggable(element1, {exclude: '.ui-resizeable-handle', container: CONTAINERS.client});\r\n        this.resizeable = new Resizeable(element1, {handles: 'all', helper: 'test-helper', container: CONTAINERS.client, keepAspectRatio: 0.5625});\r\n        this.element1 = element1;\r\n    }\r\n}\r\n"],"sourceRoot":""}