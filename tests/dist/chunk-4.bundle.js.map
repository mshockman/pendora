{"version":3,"sources":["webpack://pendora/./src/core/ui/Modal.js","webpack://pendora/./tests/src/test_modal.js"],"names":["Modal","element","closeOnClick","showFX","hideFX","showDuration","hideDuration","timeout","removeOnHide","document","createElement","classList","add","Overlay","hiddenClassName","visibleClassName","addEventListener","event","dismiss","target","closest","stopPropagation","hide","contains","show","immediate","promise","publish","result","Animation","complete","state","visible","showing","Component","TestModalPage","modal","on","console","log","isVisible","querySelector","window","testModal"],"mappings":"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","file":"chunk-4.bundle.js","sourcesContent":["import Component from \"../Component\";\nimport Overlay from \"./Overlay\";\nimport Animation from \"../fx/Animation\";\n\n\nexport default class Modal extends Component {\n    #overlay;\n\n    constructor({element=null, closeOnClick=true, showFX=null, hideFX=null, showDuration=null, hideDuration=null, timeout=null, removeOnHide=false}={}) {\n        if(!element) {\n            element = document.createElement('div');\n        }\n\n        super(element);\n\n        this.element.classList.add('modal');\n\n        this.closeOnClick = closeOnClick;\n        this.#overlay = new Overlay(this.element, {showFX, showDuration, hideFX, hideDuration, hiddenClassName: \"closed\", visibleClassName: \"open\", timeout, removeOnHide});\n\n        this.element.addEventListener('click', event => {\n            let dismiss = event.target.closest(\"[data-dismiss]\");\n\n            if(dismiss || (this.closeOnClick && event.target === this.element)) {\n                event.stopPropagation();\n                this.hide();\n            }\n        });\n\n        if(this.classList.contains('open')) {\n            this.show(true);\n        } else {\n            this.hide(true);\n        }\n    }\n\n    async show(immediate) {\n        let promise = this.#overlay.show(immediate);\n        this.publish('modal.show', this);\n\n        let result = await promise;\n\n        if(result === Animation.complete) {\n            this.publish('modal.visible');\n        }\n\n        return result;\n    }\n\n    async hide(immediate) {\n        let promise = this.#overlay.hide(immediate);\n        this.publish('modal.hide', this);\n\n        let result = await promise;\n\n        if(result === Animation.complete) {\n            this.publish('modal.hidden', this);\n        }\n\n        return result;\n    }\n\n    get isVisible() {\n        return this.state === Overlay.visible || this.state === Overlay.showing;\n    }\n\n    get state() {\n        return this.#overlay.state;\n    }\n}\n","import Modal from \"../../src/core/ui/Modal\";\n\n\nexport default class TestModalPage {\n    constructor() {\n\n    }\n\n    load() {\n        let modal = new Modal({element: '#my-modal'});\n\n        modal.on('modal.hidden', () => {\n            console.log(\"modal hidden\", modal.isVisible);\n        });\n\n        modal.on('modal.hide', () => {\n            console.log(\"modal hiding\");\n        });\n\n        modal.on('modal.show', () => {\n            console.log(\"modal showing\");\n        });\n\n        modal.on(\"modal.visible\", () => {\n            console.log(\"modal visible\");\n        });\n\n        document.querySelector(\"#show-modal1-btn\").addEventListener('click', () => {\n            modal.show();\n        });\n\n        this.modal = modal;\n        window.testModal = modal;\n    }\n}\n"],"sourceRoot":""}