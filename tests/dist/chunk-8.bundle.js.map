{"version":3,"sources":["webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/ui/TabBar.js","webpack://pendora/./tests/src/test_tabs.js"],"names":["TOPICS","Symbol","STOP","Publisher","topic","callback","push","fn","on","off","args","apply","arguments","length","callbacks","i","cb","splice","slice","e","TabBar","element","onClass","offClass","openClass","closeClass","document","createElement","classList","add","addEventListener","event","tab","target","closest","contains","activateTab","querySelectorAll","querySelector","current","getActiveTab","deactivateTab","dataset","remove","Component","autoloader","register","TestTabPage"],"mappings":"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","file":"chunk-8.bundle.js","sourcesContent":["let TOPICS = Symbol('topics');\r\n\r\n\r\nexport function STOP() {\r\n    throw STOP;\r\n}\r\n\r\n\r\nexport default class Publisher {\r\n    constructor() {\r\n        this[TOPICS] = {};\r\n    }\r\n\r\n    on(topic, callback) {\r\n        if(!this[TOPICS][topic]) this[TOPICS][topic] = [];\r\n        this[TOPICS][topic].push(callback);\r\n        return this;\r\n    }\r\n\r\n    once(topic, fn) {\r\n        let on = (...args) => {\r\n            this.off(topic, fn);\r\n            return fn.apply(this, args);\r\n        };\r\n\r\n        on.fn = fn;\r\n        this.on(topic, fn);\r\n        return this;\r\n    }\r\n\r\n    off(topic, callback) {\r\n        if(arguments.length === 0) {\r\n            // CLear all topics.\r\n            this[TOPICS] = {};\r\n            return this;\r\n        } else if(arguments.length === 1) {\r\n            // Clear single topic.\r\n            this[TOPICS][topic] = [];\r\n            return this;\r\n        }\r\n\r\n        if(!this[TOPICS] || !this[TOPICS][topic] || !this[TOPICS][topic].length) {\r\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\r\n            return this;\r\n        }\r\n\r\n        let callbacks = this[TOPICS][topic];\r\n\r\n        for(let i = 0; i < callback.length; i++) {\r\n            let cb = callbacks[i];\r\n            if(cb === callback || cb.fn === callback) {\r\n                callbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(callbacks.length === 0) {\r\n            delete this[TOPICS][topic];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    hasEvent(topic, callback) {\r\n        if(arguments.length === 1) {\r\n            return !!this[TOPICS][topic];\r\n        } else {\r\n            let callbacks = this[TOPICS][topic];\r\n\r\n            for(let i = 0; i < callbacks.length; i++) {\r\n                let cb = callbacks[i];\r\n                if(cb === callback || cb.fn === callback) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    publish(topic, ...args) {\r\n        if(this[TOPICS][topic]) {\r\n            let callbacks = this[TOPICS][topic].slice(0);\r\n\r\n            for(let cb of callbacks) {\r\n                try {\r\n                    cb.apply(this, args);\r\n                } catch (e) {\r\n                    if(e === STOP) {\r\n                        return e;\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","import Component from \"../Component\";\r\nimport autoloader from \"../../autoloader\";\r\n\r\n\r\nexport default class TabBar extends Component {\r\n    #onClass;\r\n    #offClass;\r\n    #openClass;\r\n    #closeClass;\r\n\r\n    constructor(element, {onClass=\"active\", offClass=null, openClass=\"open\", closeClass=null}={}) {\r\n        if(!element) {\r\n            element = document.createElement('div');\r\n        }\r\n\r\n        super(element);\r\n\r\n        this.#onClass = onClass;\r\n        this.#offClass = offClass;\r\n        this.#openClass = openClass;\r\n        this.#closeClass = closeClass;\r\n\r\n        this.element.classList.add('tab-bar');\r\n\r\n        this.element.addEventListener('click', event => {\r\n            let tab = event.target.closest(\"[data-tab]\");\r\n\r\n            if(tab && this.element.contains(tab)) {\r\n                this.activateTab(tab);\r\n            }\r\n        });\r\n    }\r\n\r\n    getTabs() {\r\n        return this.element.querySelectorAll(\"[data-tab]\");\r\n    }\r\n\r\n    getActiveTab() {\r\n        return this.element.querySelector(`[data-tab].${this.#onClass}`);\r\n    }\r\n\r\n    activateTab(tab) {\r\n        let current = this.getActiveTab();\r\n\r\n        if(current !== tab) {\r\n            this.deactivateTab(current);\r\n\r\n            let target = document.querySelector(tab.dataset.tab);\r\n\r\n            if(target) {\r\n                target.classList.add(this.#openClass);\r\n                if (this.#closeClass) target.classList.remove(this.#closeClass);\r\n            }\r\n\r\n            tab.classList.add(this.#onClass);\r\n            if(this.#offClass) tab.classList.remove(this.#offClass);\r\n        }\r\n    }\r\n\r\n    deactivateTab(tab) {\r\n        let target = document.querySelector(tab.dataset.tab);\r\n\r\n        if(target) {\r\n            target.classList.remove(this.#openClass);\r\n            if (this.#closeClass) target.classList.add(this.#closeClass);\r\n        }\r\n\r\n        tab.classList.remove(this.#onClass);\r\n        if(this.#offClass) tab.classList.add(this.#offClass);\r\n    }\r\n}\r\n\r\n\r\nautoloader.register('tab-bar', element => {\r\n    return new TabBar(element);\r\n});\r\n","import TabBar from \"core/ui/TabBar\";\r\n\r\n\r\nexport default class TestTabPage {\r\n    load() {\r\n\r\n    }\r\n}"],"sourceRoot":""}