{"version":3,"sources":["webpack://pendora/./src/core/Component.js","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/vectors/Rect.js","webpack://pendora/./src/core/vectors/Vec2.js","webpack://pendora/./src/core/vectors/Vec4.js"],"names":["SYMBOLS","appendChild","Symbol","Component","element","selectElement","selector","document","querySelector","nodeType","parentElement","removeChild","Rect","getBoundingClientRect","name","getAttribute","hasAttribute","removeAttribute","value","setAttribute","classes","addClasses","removeClasses","fn","time","interval","clear","cancel","_timers","KeyError","timer","status","id","type","setInterval","call","clearInterval","setTimeout","clearTimeout","getTimer","classList","contains","isDisabled","remove","add","style","dataset","Publisher","TOPICS","STOP","topic","callback","push","on","off","args","apply","arguments","length","callbacks","i","cb","splice","slice","e","ExtendableError","message","constructor","Error","captureStackTrace","stack","IndexError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","UnitError","assert","condition","regWhitespace","regPositionPart","positionShortHandValues","top","right","bottom","left","topleft","topright","bottomleft","bottomright","domElement","bb","Object","assign","_new","undefined","r","Vec2","width","height","x","y","Array","isArray","deltaX","deltaY","Math","max","min","rect","isXOverlapping","isYOverlapping","container","anchor","getAnchor","starting","clamp","pos","fit","fromRect","abs","x1","y1","x2","y2","round","sqrt","pow","point","closestX","closestY","distance","calcDistance","axis","my","at","of","offset","inside","collision","parts","trim","split","evaluatePositionString","reference","translate","containsX","reflect","getCenterPoint","containsY","fitX","fitY","string","rx","ry","_evaluatePositionStringComponent","offsetX","offsetY","direction","exec","p","parseFloat","restore","state","keys","key","window","innerWidth","innerHeight","scrollX","scrollY","documentElement","clientWidth","clientHeight","Vec4","vec2","vec4","vertex","hasOwnProperty","valueOrVec4","g","b","a","m","parseInt"],"mappings":"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","file":"chunk-0.bundle.js","sourcesContent":["import Publisher from \"./Publisher\";\r\nimport {selectElement, addClasses, removeClasses} from \"./utility\";\r\nimport Rect from \"./vectors/Rect\";\r\nimport {KeyError} from \"./errors\";\r\n\r\n\r\nexport const SYMBOLS = {\r\n    appendChild: Symbol(\"appendChild\")\r\n};\r\n\r\n\r\nexport default class Component extends Publisher {\r\n    #element;\r\n    #timers;\r\n\r\n    constructor(element) {\r\n        super();\r\n\r\n        this.#element = selectElement(element);\r\n    }\r\n\r\n    render() {\r\n\r\n    }\r\n\r\n    appendTo(selector) {\r\n        if(typeof selector === 'string') {\r\n            document.querySelector(selector).appendChild(this.#element);\r\n        } else if(selector.nodeType && selector.appendChild) {\r\n            selector.appendChild(this.#element);\r\n        } else if(selector[SYMBOLS.appendChild]) {\r\n            selector[SYMBOLS].appendChild(this.#element);\r\n        } else if(selector.#element) {\r\n            selector.#element.appendChild(this.#element);\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    removeFrom() {\r\n        if(this.#element.parentElement) {\r\n            this.#element.parentElement.removeChild(this.#element);\r\n        }\r\n    }\r\n\r\n    getBoundingClientRect() {\r\n        return Rect.getBoundingClientRect(this.#element);\r\n    }\r\n\r\n    getAttribute(name) {\r\n        return this.#element.getAttribute(name);\r\n    }\r\n\r\n    hasAttribute(name) {\r\n        return this.#element.hasAttribute(name);\r\n    }\r\n\r\n    removeAttribute(name) {\r\n        return this.#element.removeAttribute(name);\r\n    }\r\n\r\n    setAttribute(name, value) {\r\n        return this.#element.setAttribute(name, value);\r\n    }\r\n\r\n    addClass(classes) {\r\n        return addClasses(this.#element, classes);\r\n    }\r\n\r\n    removeClass(classes) {\r\n        return removeClasses(this.#element, classes);\r\n    }\r\n\r\n    /**\r\n     * Creates a timer with the given name.  Only one timer with that name can be active per object.\r\n     * If another timer with the same name is created the previous one will be cleared if `clear` is true.\r\n     * Otherwise if `clear` is false a KeyError with be thrown.  The callback function for the timer is called\r\n     * with the current object as it's `this` and the timer object as it's only parameter following the pattern\r\n     *\r\n     * this::fn(timer);\r\n     *\r\n     * @param name {String} The name of the timer.\r\n     * @param fn {function(timer)} Function to call.\r\n     * @param time {Number} The time to wait.\r\n     * @param interval If true setInterval will be used instead of setTimeout\r\n     * @param clear If true an previous timers of the same name will be canceled before creating a new one.  Otherwise a KeyError will be thrown.\r\n     * @returns {{status, id, cancel, type}}\r\n     */\r\n    startTimer(name, fn, time, interval=false, clear=true) {\r\n        if(!this.#timers) {\r\n            this.#timers = {};\r\n        }\r\n\r\n        if(clear && this.#timers[name]) {\r\n            this.#timers[name].cancel();\r\n        } else if(this._timers[name]) {\r\n            throw new KeyError(\"Timer already exists.\");\r\n        }\r\n\r\n        let timer = this.#timers[name] = {\r\n            status: 'running',\r\n            id: null,\r\n            cancel: null,\r\n            type: null,\r\n        };\r\n\r\n        if(interval) {\r\n            let id = timer.id = setInterval((timer) => {\r\n                fn.call(this, timer);\r\n            }, time, timer);\r\n\r\n            timer.type = 'interval';\r\n\r\n            timer.cancel = () => {\r\n                if(this.#timers[name] === timer) {\r\n                    clearInterval(id);\r\n                    delete this.#timers[name];\r\n                    timer.status = 'canceled';\r\n                }\r\n            };\r\n        } else {\r\n            let id = timer.id = setTimeout((timer) => {\r\n                delete this.#timers[name];\r\n                timer.status = 'complete';\r\n                fn.call(this, timer);\r\n            }, time, timer);\r\n\r\n            timer.type = 'timeout';\r\n\r\n            timer.cancel = () => {\r\n                if(this.#timers[name] === timer) {\r\n                    clearTimeout(id);\r\n                    delete this.#timers[name];\r\n                    timer.status = 'canceled';\r\n                }\r\n            };\r\n        }\r\n\r\n        return timer;\r\n    }\r\n\r\n    /**\r\n     * Clears the timer with the given name.\r\n     *\r\n     * @param name\r\n     * @returns {boolean} True if a timer was canceled. False if not timer exists.\r\n     */\r\n    clearTimer(name) {\r\n        if(this.#timers && this.#timers[name]) {\r\n            this.#timers[name].cancel();\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Returns the timer object if it exists.\r\n     *\r\n     * @param name\r\n     * @returns {*}\r\n     */\r\n    getTimer(name) {\r\n        return this.#timers && this.#timers[name] ? this.#timers[name] : null;\r\n    }\r\n\r\n    hasTimer(name) {\r\n        return !!this.getTimer(name);\r\n    }\r\n\r\n    get isDisabled() {\r\n        return this.classList.contains('disabled');\r\n    }\r\n\r\n    set isDisabled(value) {\r\n        let isDisabled = this.isDisabled;\r\n\r\n        if(!isDisabled && value) {\r\n            this.classList.remove('disabled');\r\n        } else if(isDisabled && !value) {\r\n            this.classList.add('disabled');\r\n        }\r\n    }\r\n\r\n    get disabled() {\r\n        return this.isDisabled;\r\n    }\r\n\r\n    set disabled(value) {\r\n        this.isDisabled = value;\r\n    }\r\n\r\n    get id() {\r\n        return this.#element.id;\r\n    }\r\n\r\n    set id(value) {\r\n        this.#element.id = value;\r\n    }\r\n\r\n    get style() {\r\n        return this.#element.style;\r\n    }\r\n\r\n    set style(value) {\r\n        this.#element.style = value;\r\n    }\r\n\r\n    get classList() {\r\n        return this.#element.classList;\r\n    }\r\n\r\n    set classList(value) {\r\n        this.#element.classList = value;\r\n    }\r\n\r\n    get dataset() {\r\n        return this.#element.dataset;\r\n    }\r\n\r\n    set dataset(value) {\r\n        this.#element.dataset = value;\r\n    }\r\n\r\n    get element() {\r\n        return this.#element;\r\n    }\r\n}\r\n","let TOPICS = Symbol('topics');\r\n\r\n\r\nexport function STOP() {\r\n    throw STOP;\r\n}\r\n\r\n\r\nexport default class Publisher {\r\n    constructor() {\r\n        this[TOPICS] = {};\r\n    }\r\n\r\n    on(topic, callback) {\r\n        if(!this[TOPICS][topic]) this[TOPICS][topic] = [];\r\n        this[TOPICS][topic].push(callback);\r\n        return this;\r\n    }\r\n\r\n    once(topic, fn) {\r\n        let on = (...args) => {\r\n            this.off(topic, fn);\r\n            return fn.apply(this, args);\r\n        };\r\n\r\n        on.fn = fn;\r\n        this.on(topic, fn);\r\n        return this;\r\n    }\r\n\r\n    off(topic, callback) {\r\n        if(arguments.length === 0) {\r\n            // CLear all topics.\r\n            this[TOPICS] = {};\r\n            return this;\r\n        } else if(arguments.length === 1) {\r\n            // Clear single topic.\r\n            this[TOPICS][topic] = [];\r\n            return this;\r\n        }\r\n\r\n        if(!this[TOPICS] || !this[TOPICS][topic] || !this[TOPICS][topic].length) {\r\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\r\n            return this;\r\n        }\r\n\r\n        let callbacks = this[TOPICS][topic];\r\n\r\n        for(let i = 0; i < callback.length; i++) {\r\n            let cb = callbacks[i];\r\n            if(cb === callback || cb.fn === callback) {\r\n                callbacks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(callbacks.length === 0) {\r\n            delete this[TOPICS][topic];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    hasEvent(topic, callback) {\r\n        if(arguments.length === 1) {\r\n            return !!this[TOPICS][topic];\r\n        } else {\r\n            let callbacks = this[TOPICS][topic];\r\n\r\n            for(let i = 0; i < callbacks.length; i++) {\r\n                let cb = callbacks[i];\r\n                if(cb === callback || cb.fn === callback) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    publish(topic, ...args) {\r\n        if(this[TOPICS][topic]) {\r\n            let callbacks = this[TOPICS][topic].slice(0);\r\n\r\n            for(let cb of callbacks) {\r\n                try {\r\n                    cb.apply(this, args);\r\n                } catch (e) {\r\n                    if(e === STOP) {\r\n                        return e;\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n\r\n\r\nexport class UnitError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if (!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n","import {ValueError} from \"../errors\";\r\nimport Vec2 from \"./Vec2\";\r\nimport Vec4 from \"./Vec4\";\r\nimport {clamp, calcDistance} from '../utility';\r\nimport {UnitError} from '../errors';\r\n\r\n\r\nconst regWhitespace = /\\s+/,\r\n    regPositionPart = /^([a-zA-Z]*)([+-]?\\d*\\.?\\d*)([a-z%]*)$/; // Parses string like \"left+10px\" into [\"left\", \"+10px\"]\r\n\r\n\r\nconst positionShortHandValues = {\r\n    top: 'center top',\r\n    right: 'right middle',\r\n    bottom: 'center bottom',\r\n    left: 'left middle',\r\n    topleft: 'left top',\r\n    topright: 'right top',\r\n    bottomleft: 'left bottom',\r\n    bottomright: 'right bottom'\r\n};\r\n\r\n\r\nexport default class Rect extends Vec4 {\r\n    constructor(left, top, right, bottom, domElement=null) {\r\n        if(typeof left === 'function') {\r\n            left = left();\r\n        }\r\n\r\n        if(typeof left === 'object') {\r\n            if(left.getBoundingClientRect) {\r\n                domElement = left;\r\n                let bb = domElement.getBoundingClientRect();\r\n                left = bb.left;\r\n                top = bb.top;\r\n                right = bb.right;\r\n                bottom = bb.bottom;\r\n            } else {\r\n                top = left.top;\r\n                right = left.right;\r\n                bottom = left.bottom;\r\n                left = left.left;\r\n            }\r\n        }\r\n\r\n        super(left, top, right, bottom);\r\n\r\n        // noinspection JSUnusedGlobalSymbols\r\n        this.domElement = domElement;\r\n\r\n        if(arguments.length === 1 && left instanceof Rect) {\r\n            Object.assign(this, left);\r\n        }\r\n    }\r\n\r\n    bind(element) {\r\n        return this._new(this.left, this.top, this.right, this.bottom, element);\r\n    }\r\n\r\n    _new(left, top, right, bottom, domElement=undefined) {\r\n        let r = new this.constructor(this);\r\n        r.left = left;\r\n        r.top = top;\r\n        r.right = right;\r\n        r.bottom = bottom;\r\n        if(domElement !== undefined) r.domElement = domElement;\r\n        return r;\r\n    }\r\n\r\n    toPoint() {\r\n        return new Vec2(this[0], this[1]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n\r\n    translate(x, y) {\r\n        if(Array.isArray(x)) {\r\n            [x, y] = x;\r\n        } else if(typeof x === 'object') {\r\n            y = x.y;\r\n            x = x.x;\r\n        }\r\n\r\n        return this._new(\r\n            this[0] + x,\r\n            this[1] + y,\r\n            this[2] + x,\r\n            this[3] + y\r\n        );\r\n    }\r\n\r\n    addMargins({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left - left,\r\n            this.top - top,\r\n            this.right + right,\r\n            this.bottom + bottom\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    addPadding({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left + left,\r\n            this.top + top,\r\n            this.right - right,\r\n            this.bottom - bottom\r\n        );\r\n    }\r\n\r\n    moveTo({left, top}) {\r\n        let deltaX = left - this.left,\r\n            deltaY = top - this.top;\r\n\r\n        return this._new(\r\n            this.left + deltaX,\r\n            this.top + deltaY,\r\n            this.right + deltaX,\r\n            this.bottom + deltaY\r\n        );\r\n    }\r\n\r\n    intersection({left, top, right, bottom}) {\r\n        left = Math.max(this.left, left);\r\n        right = Math.min(this.right, right);\r\n        bottom = Math.min(this.bottom, bottom);\r\n        top = Math.max(this.top, top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * Creates a new rectangle exactly big enough to hold the current rectangle and the provided rectangle.\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     * @returns {null|Rect}\r\n     */\r\n    union({left, top, right, bottom}) {\r\n        left = Math.min(left, this.left);\r\n        right = Math.max(right, this.right);\r\n        bottom = Math.max(bottom, this.bottom);\r\n        top = Math.min(top, this.top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    contains(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    containsX(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right;\r\n    }\r\n\r\n    containsY(rect) {\r\n        return this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    isXOverlapping(rect) {\r\n        return (rect.left <= this.right && rect.right >= this.left);\r\n    }\r\n\r\n    isYOverlapping(rect) {\r\n        return (rect.top <= this.bottom && rect.bottom >= this.top);\r\n    }\r\n\r\n    isAbove(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.top > this.bottom;\r\n    }\r\n\r\n    isBelow(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.bottom < this.top;\r\n    }\r\n\r\n    isLeftOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.left > this.right;\r\n    }\r\n\r\n    isRightOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.right < this.left;\r\n    }\r\n\r\n    isOverlapping(rect) {\r\n        rect = new Rect(rect);\r\n        return this.isXOverlapping(rect) && this.isYOverlapping(rect);\r\n    }\r\n\r\n    /**\r\n     * Attempts to fit the rect inside of the container anchoring from the anchor point.  The anchor point defaults\r\n     * to the top left corner or (0, 0).\r\n     *\r\n     * If possible entire rect should be clamped to the closest position inside of the container.\r\n     * Else position anchor point the closest possible point inside container.\r\n     *\r\n     * @param container\r\n     * @param anchor\r\n     */\r\n    fit(container, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        container = new Rect(container);\r\n        let starting = container;\r\n\r\n        container = container.add(new Rect(\r\n            anchor.left,\r\n            anchor.top,\r\n            -this.width + anchor.left,\r\n            -this.height + anchor.top\r\n        ));\r\n\r\n        container = new Rect(\r\n            clamp(container.left, starting.left, starting.right),\r\n            clamp(container.top, starting.top, starting.bottom),\r\n            clamp(container.right, starting.left, starting.right),\r\n            clamp(container.bottom, starting.top, starting.bottom)\r\n        );\r\n\r\n        let left = clamp(this.left, container.left, container.right) - anchor.left,\r\n            top = clamp(this.top, container.top, container.bottom) - anchor.top,\r\n            width = this.width,\r\n            height = this.height;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    fitX(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    fitY(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    /**\r\n     * Clamps the anchor point inside the rect.  Anchor point defaults to top left or (0, 0).\r\n     *\r\n     * @param rect\r\n     * @param anchor\r\n     * @returns {Rect}\r\n     */\r\n    clamp(rect, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        rect = new Rect(rect);\r\n\r\n        let width = this.width,\r\n            height = this.height,\r\n            left = clamp(this.left + anchor.left, rect.left, rect.right) - anchor.left,\r\n            top = clamp(this.top + anchor.top, rect.top, rect.bottom) - anchor.top;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    clampX(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    clampY(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Returns the distance between two rects.\r\n     * @param rect\r\n     * @returns {number}\r\n     */\r\n    getDistanceBetween(rect) {\r\n        rect = Rect.fromRect(rect);\r\n\r\n        let isXOverlapping = this.isXOverlapping(rect),\r\n            isYOverlapping = this.isYOverlapping(rect);\r\n\r\n        if(isXOverlapping && isYOverlapping) {\r\n            // Items are overlapping\r\n            return 0;\r\n        } else if(isXOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.bottom - rect.top),\r\n                Math.abs(this.top - rect.bottom)\r\n            );\r\n        } else if(isYOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.right - rect.left),\r\n                Math.abs(this.left - rect.right)\r\n            );\r\n        } else {\r\n            let x1, y1, x2, y2;\r\n\r\n            if(this.right <= rect.left) {\r\n                x1 = this.right;\r\n                x2 = rect.left;\r\n            } else {\r\n                x1 = this.left;\r\n                x2 = rect.right;\r\n            }\r\n\r\n            if(this.bottom <= rect.top) {\r\n                y1 = this.bottom;\r\n                y2 = rect.top;\r\n            } else {\r\n                y1 = this.top;\r\n                y2 = rect.bottom;\r\n            }\r\n\r\n            // Use distance formula to calculate distance.\r\n            return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getDistanceFromPoint(point) {\r\n        point = new Rect(point.left, point.top, point.left, point.top);\r\n\r\n        let closestX = Math.abs(this.left - point.left) < Math.abs(this.right - point.left) ? this.left : this.right,\r\n            closestY = Math.abs(this.top - point.top) < Math.abs(this.bottom - point.top) ? this.top : this.bottom,\r\n            distance = calcDistance(closestX, closestY, point.left, point.top);\r\n\r\n        return this.contains(point) ? -distance : distance;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getCenterPoint() {\r\n        return new Vec2(\r\n            this.left + (this.width / 2),\r\n            this.top + (this.height / 2)\r\n        );\r\n    }\r\n\r\n    reflect(point=null, axis='xy') {\r\n        // Reflect around the given point or origin\r\n        point = point ? new Vec2(point) : new Vec2(0, 0);\r\n\r\n        let x = this.left + (this.width / 2) - point.x,\r\n            y = this.top + (this.height / 2) - point.y;\r\n\r\n        if(axis === 'x' || axis === 'xy') {\r\n            x *= -1;\r\n        }\r\n\r\n        if(axis === 'y' || axis === 'xy') {\r\n            y *= -1;\r\n        }\r\n\r\n        x = x - (this.width / 2) + point.x;\r\n        y = y - (this.height / 2) + point.y;\r\n\r\n        return this._new(x, y, x + this.width, y + this.height);\r\n    }\r\n\r\n    position({my, at, of, offset=null, inside=null, collision=null}) {\r\n        // Of should be a Rect object.\r\n        if(of.getBoundingClientRect) {\r\n            of = new Rect(of);\r\n        }\r\n\r\n        // inside should be a Rect object.\r\n        if(inside && inside.getBoundingClientRect) {\r\n            inside = new Rect(inside);\r\n        }\r\n\r\n        // collision can be string with a space separating the x and y values.\r\n        // for example \"fit flipfit\"\r\n        // normalize it to an {x, y} object.\r\n        if(collision && typeof collision === 'string') {\r\n            let parts = collision.trim().split(regWhitespace);\r\n            collision = {\r\n                x: parts[0],\r\n                y: parts[1] || parts[0]\r\n            };\r\n        }\r\n\r\n        let anchor = this.evaluatePositionString(my),\r\n            reference = of.evaluatePositionString(at),\r\n            deltaX = reference.x - anchor.x,\r\n            deltaY = reference.y - anchor.y;\r\n\r\n        let rect = this.translate(deltaX, deltaY);\r\n\r\n        if(offset) {\r\n            rect = this.translate(offset);\r\n        }\r\n\r\n        // If the rect is already inside the container or if not container or collision function where given\r\n        // return immediately, there is not more work to be done.\r\n        if(!collision || !inside || inside.contains(rect)) {\r\n            return rect;\r\n        }\r\n\r\n        if(!inside.containsX(rect) && (collision.x === 'flip' || collision.x === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'x');\r\n        }\r\n\r\n        if(!inside.containsY(rect) && (collision.y === 'flip' || collision.y === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'y');\r\n        }\r\n\r\n        if(collision.x === 'fit' || collision.x === 'flipfit') {\r\n            rect = rect.fitX(inside);\r\n        }\r\n\r\n        if(collision.y === 'fit' || collision.y === 'flipfit') {\r\n            rect = rect.fitY(inside);\r\n        }\r\n\r\n        return rect;\r\n    }\r\n\r\n    evaluatePositionString(string) {\r\n        if(positionShortHandValues[string]) {\r\n            string = positionShortHandValues[string];\r\n        }\r\n\r\n        let pos = string.trim().split(regWhitespace),\r\n            x = pos[0],\r\n            y = pos[1],\r\n            rx = null,\r\n            ry = null;\r\n\r\n        if(x) {\r\n            rx = this._evaluatePositionStringComponent(x, 'x');\r\n        }\r\n\r\n        if(y) {\r\n            ry = this._evaluatePositionStringComponent(y, 'y');\r\n        }\r\n\r\n        return new Vec2(rx, ry);\r\n    }\r\n\r\n    /**\r\n     * Gets the anchor position relative to the element.  The anchor can be any of the following:\r\n     *\r\n     * A position string.\r\n     * A [x, y, offsetX=0, offsetY=0] array.\r\n     * An object of {left, top, offsetX=0, offsetY=0} properties.\r\n     *\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getAnchor(anchor) {\r\n        if(positionShortHandValues[anchor]) {\r\n            anchor = positionShortHandValues[anchor];\r\n        }\r\n\r\n        let x, y, offsetX = 0, offsetY = 0;\r\n\r\n        if(typeof anchor === 'string') {\r\n            [x, y] = anchor.trim().split(regWhitespace);\r\n        } else if(Array.isArray(anchor)) {\r\n            [x, y, offsetX=0, offsetY=0] = anchor;\r\n        } else {\r\n            x = anchor.left;\r\n            y = anchor.top;\r\n            offsetX = anchor.offsetX || 0;\r\n            offsetY = anchor.offsetY || 0;\r\n        }\r\n\r\n        if(typeof x === 'string') {\r\n            x = this._evaluatePositionStringComponent(x, 'x') - this.left;\r\n        }\r\n\r\n        if(typeof y === 'string') {\r\n            y = this._evaluatePositionStringComponent(y, 'y') - this.top;\r\n        }\r\n\r\n        return new Vec2(x + offsetX, y + offsetY);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Takes a anchor point coordient relative the the rect and returns the true coordients.\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getPoint(anchor) {\r\n        let point = this.getAnchor(anchor);\r\n        return new Vec2(point.left + this.left, point.top + this.top);\r\n    }\r\n\r\n    /**\r\n     * Evaluates a position string value such as \"left+10px\" into it final position on the rect.\r\n     * @param value - The value to evaluate.\r\n     * @param direction - The direction type.  Should be either \"x\" or \"y\".\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _evaluatePositionStringComponent(value, direction) {\r\n        let parts = regPositionPart.exec(value),\r\n            r = 0;\r\n\r\n        if(parts[1]) {\r\n            let p = parts[1];\r\n\r\n            if(direction === 'x') {\r\n                if(p === 'left') {\r\n                    r = this.left;\r\n                } else if(p === 'center' || p === 'middle') {\r\n                    r = this.left + (this.width / 2);\r\n                } else if(p === 'right') {\r\n                    r = this.left + this.width;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            } else {\r\n                if(p === 'top') {\r\n                    r = this.top;\r\n                } else if(p === 'middle' || p === 'center') {\r\n                    r = this.top + (this.height / 2);\r\n                } else if(p === 'bottom') {\r\n                    r = this.top + this.height;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            }\r\n        } else if(direction === 'x') {\r\n            r = this.left;\r\n        } else {\r\n            r = this.top;\r\n        }\r\n\r\n        if(parts[2]) {\r\n            let value = parseFloat(parts[2]),\r\n                type = parts[3] || 'px';\r\n\r\n            if(type === 'px') {\r\n                r += value;\r\n            } else if(type === '%') {\r\n                if(direction === 'x') {\r\n                    r += (value / 100) * this.width;\r\n                } else {\r\n                    r += (value / 100) * this.height;\r\n                }\r\n            } else {\r\n                throw new UnitError(\"Invalid unit: Must be either % or px.\");\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static fromRect({left, top, right, bottom}) {\r\n        return new Rect(left, top, right, bottom);\r\n    }\r\n\r\n    static getBoundingClientRect(element) {\r\n        return new Rect(element);\r\n    }\r\n\r\n    /**\r\n     * Returns the elements Rect without any inline styles applied.\r\n     * @param element\r\n     * @param restore - If true inline style will be restored after measuring.\r\n     * @returns {Rect}\r\n     */\r\n    static getCleanBoundingClientRect(element, restore=true) {\r\n        let state = {},\r\n            keys = [];\r\n\r\n        for(let i = 0; i < element.style.length; i++) {\r\n            keys.push(element.style[i]);\r\n        }\r\n\r\n        for(let key of keys) {\r\n            state[key] = element.style[key];\r\n            element.style[key] = \"\";\r\n        }\r\n\r\n        let r = Rect.getBoundingClientRect(element);\r\n\r\n        if(restore) {\r\n            Object.assign(element.style, state);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static getClientRect() {\r\n        return new Rect(\r\n            0,\r\n            0,\r\n            window.innerWidth,\r\n            window.innerHeight\r\n        );\r\n    }\r\n\r\n    static getRootContainingClientRect() {\r\n        return new Rect(\r\n            -window.scrollX,\r\n            -window.scrollY,\r\n            document.documentElement.clientWidth - window.scrollX,\r\n            document.documentElement.clientHeight - window.scrollY\r\n        );\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get right() {\r\n        return this[2];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[3];\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set right(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set bottom(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    set width(value) {\r\n        this.right = this.left + value;\r\n    }\r\n\r\n    set height(value) {\r\n        this.bottom = this.top + value;\r\n    }\r\n\r\n    get x() {\r\n        return this.left;\r\n    }\r\n\r\n    get y() {\r\n        return this.top;\r\n    }\r\n\r\n    set x(value) {\r\n        this.left = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this.top = value;\r\n    }\r\n}\r\n","import {clamp} from '../utility';\r\n\r\n\r\n/**\r\n * Stores a 2 value Vector.\r\n */\r\nexport default class Vec2 {\r\n    constructor(x=0, y=0) {\r\n        if(x instanceof Vec2) {\r\n            this[0] = x.x;\r\n            this[1] = x.y;\r\n        } else if(Array.isArray(x)) {\r\n            this[0] = x[0];\r\n            this[1] = x[1];\r\n        } else if(typeof x === 'object') {\r\n            if(x.left !== undefined) {\r\n                this[0] = x.left;\r\n                this[0] = x.top;\r\n            } else {\r\n                this[0] = x.x;\r\n                this[1] = x.y;\r\n            }\r\n        } else {\r\n            this[0] = x;\r\n            this[1] = y;\r\n        }\r\n    }\r\n\r\n    add(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] + vec2,\r\n                this[1] + vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] + vec2[0],\r\n                this[1] + vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] - vec2,\r\n                this[1] - vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] - vec2[0],\r\n                this[1] - vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return new Vec2(this[0] * value, this[1] * value);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] % vec2,\r\n                this[1] % vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] % vec2[0],\r\n                this[1] % vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec2) {\r\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return Vec2(this[0], this[1]);\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get right() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[1];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this[0];\r\n    }\r\n\r\n    set width(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get height() {\r\n        return this[1];\r\n    }\r\n\r\n    set height(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate() {\r\n        return `translate(${this.x}px, ${this.y}px)`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\r\n    }\r\n\r\n    clamp(vec4) {\r\n        return new Vec2(\r\n            clamp(this.left, vec4.left, vec4.right),\r\n            clamp(this.top, vec4.top, vec4.bottom)\r\n        );\r\n    }\r\n\r\n    static fromVertex(vertex) {\r\n        if(Array.isArray(vertex)) {\r\n            return new Vec2(vertex[0], vertex[1]);\r\n        } else if(vertex.hasOwnProperty('left')) {\r\n            return new Vec2(vertex.left, vertex.top);\r\n        } else {\r\n            return new Vec2(vertex.x, vertex.y);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Class to store a 4 value vector.\r\n * Provides DOMRect interface.\r\n */\r\nexport default class Vec4 {\r\n    /**\r\n     * r, g, b, a\r\n     * left, top, right, bottom\r\n     *\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     */\r\n    constructor(left, top, right, bottom) {\r\n        this[0] = left;\r\n        this[1] = top;\r\n        this[2] = right;\r\n        this[3] = bottom;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get a() {\r\n        return this[3];\r\n    }\r\n\r\n    set a(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    set(valueOrVec4) {\r\n        if(typeof valueOrVec4 !== 'object') {\r\n            this[0] = valueOrVec4;\r\n            this[1] = valueOrVec4;\r\n            this[2] = valueOrVec4;\r\n            this[3] = valueOrVec4;\r\n        } else {\r\n            this[0] = valueOrVec4[0];\r\n            this[1] = valueOrVec4[1];\r\n            this[2] = valueOrVec4[2];\r\n            this[3] = valueOrVec4[3];\r\n        }\r\n    }\r\n\r\n    add(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] + valueOrVec4,\r\n                this[1] + valueOrVec4,\r\n                this[2] + valueOrVec4,\r\n                this[3] + valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] + valueOrVec4[0],\r\n                this[1] + valueOrVec4[1],\r\n                this[2] + valueOrVec4[2],\r\n                this[3] + valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] - valueOrVec4,\r\n                this[1] - valueOrVec4,\r\n                this[2] - valueOrVec4,\r\n                this[3] - valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] - valueOrVec4[0],\r\n                this[1] - valueOrVec4[1],\r\n                this[2] - valueOrVec4[2],\r\n                this[3] - valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return this._new(\r\n            this[0] * value,\r\n            this[1] * value,\r\n            this[2] * value,\r\n            this[3] * value\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec4) {\r\n        return vec4 === this || (vec4[0] === this[0] && vec4[1] === this[1] && vec4[2] === this[2] && vec4[3] === this[3]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] % valueOrVec4,\r\n                this[1] % valueOrVec4,\r\n                this[2] % valueOrVec4,\r\n                this[3] % valueOrVec4,\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] % valueOrVec4[0],\r\n                this[1] % valueOrVec4[1],\r\n                this[2] % valueOrVec4[2],\r\n                this[3] % valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toRGBA() {\r\n        return `rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.a})`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return new this.constructor(this[0], this[1], this[2], this[3]);\r\n    }\r\n\r\n    _new(left, top, right, bottom) {\r\n        return new this.constructor(left, top, right, bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBAObject({r, g, b, a}) {\r\n        return new Vec4(r, g, b, a);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBA(value) {\r\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgba value ${value}`);\r\n        }\r\n\r\n        return new Vec4(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n            parseFloat(m[4]),\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}