{"version":3,"sources":["webpack://pendora/./src/core/Component.js","webpack://pendora/./src/core/Publisher.js","webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/vectors/Rect.js","webpack://pendora/./src/core/vectors/Vec2.js","webpack://pendora/./src/core/vectors/Vec4.js"],"names":["SYMBOLS","appendChild","Symbol","Component","element","selectElement","selector","document","querySelector","nodeType","parentElement","removeChild","Rect","getBoundingClientRect","name","getAttribute","hasAttribute","removeAttribute","value","setAttribute","classes","addClasses","removeClasses","fn","time","interval","clear","cancel","_timers","KeyError","timer","status","id","type","setInterval","call","clearInterval","setTimeout","clearTimeout","getTimer","classList","contains","isDisabled","remove","add","style","dataset","Publisher","TOPICS","STOP","topic","callback","push","on","off","args","apply","arguments","length","callbacks","i","cb","splice","slice","e","ExtendableError","message","constructor","Error","captureStackTrace","stack","IndexError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","UnitError","assert","condition","regWhitespace","regPositionPart","positionShortHandValues","top","right","bottom","left","topleft","topright","bottomleft","bottomright","domElement","bb","Object","assign","_new","undefined","r","Vec2","width","height","x","y","Array","isArray","deltaX","deltaY","Math","max","min","rect","isXOverlapping","isYOverlapping","container","anchor","getAnchor","starting","clamp","pos","fit","fromRect","abs","x1","y1","x2","y2","round","sqrt","pow","point","closestX","closestY","distance","calcDistance","axis","my","at","of","offset","inside","collision","parts","trim","split","evaluatePositionString","reference","translate","containsX","reflect","getCenterPoint","containsY","fitX","fitY","string","rx","ry","_evaluatePositionStringComponent","offsetX","offsetY","direction","exec","p","parseFloat","restore","state","keys","key","window","innerWidth","innerHeight","scrollX","scrollY","documentElement","clientWidth","clientHeight","Vec4","vec2","vec4","vertex","hasOwnProperty","valueOrVec4","g","b","a","m","parseInt"],"mappings":"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","file":"chunk-0.bundle.js","sourcesContent":["import Publisher from \"./Publisher\";\nimport {selectElement, addClasses, removeClasses} from \"./utility\";\nimport Rect from \"./vectors/Rect\";\nimport {KeyError} from \"./errors\";\n\n\nexport const SYMBOLS = {\n    appendChild: Symbol(\"appendChild\")\n};\n\n\nexport default class Component extends Publisher {\n    #element;\n    #timers;\n\n    constructor(element) {\n        super();\n\n        this.#element = selectElement(element);\n    }\n\n    render() {\n\n    }\n\n    appendTo(selector) {\n        if(typeof selector === 'string') {\n            document.querySelector(selector).appendChild(this.#element);\n        } else if(selector.nodeType && selector.appendChild) {\n            selector.appendChild(this.#element);\n        } else if(selector[SYMBOLS.appendChild]) {\n            selector[SYMBOLS].appendChild(this.#element);\n        } else if(selector.#element) {\n            selector.#element.appendChild(this.#element);\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    removeFrom() {\n        if(this.#element.parentElement) {\n            this.#element.parentElement.removeChild(this.#element);\n        }\n    }\n\n    getBoundingClientRect() {\n        return Rect.getBoundingClientRect(this.#element);\n    }\n\n    getAttribute(name) {\n        return this.#element.getAttribute(name);\n    }\n\n    hasAttribute(name) {\n        return this.#element.hasAttribute(name);\n    }\n\n    removeAttribute(name) {\n        return this.#element.removeAttribute(name);\n    }\n\n    setAttribute(name, value) {\n        return this.#element.setAttribute(name, value);\n    }\n\n    addClass(classes) {\n        return addClasses(this.#element, classes);\n    }\n\n    removeClass(classes) {\n        return removeClasses(this.#element, classes);\n    }\n\n    /**\n     * Creates a timer with the given name.  Only one timer with that name can be active per object.\n     * If another timer with the same name is created the previous one will be cleared if `clear` is true.\n     * Otherwise if `clear` is false a KeyError with be thrown.  The callback function for the timer is called\n     * with the current object as it's `this` and the timer object as it's only parameter following the pattern\n     *\n     * this::fn(timer);\n     *\n     * @param name {String} The name of the timer.\n     * @param fn {function(timer)} Function to call.\n     * @param time {Number} The time to wait.\n     * @param interval If true setInterval will be used instead of setTimeout\n     * @param clear If true an previous timers of the same name will be canceled before creating a new one.  Otherwise a KeyError will be thrown.\n     * @returns {{status, id, cancel, type}}\n     */\n    startTimer(name, fn, time, interval=false, clear=true) {\n        if(!this.#timers) {\n            this.#timers = {};\n        }\n\n        if(clear && this.#timers[name]) {\n            this.#timers[name].cancel();\n        } else if(this._timers[name]) {\n            throw new KeyError(\"Timer already exists.\");\n        }\n\n        let timer = this.#timers[name] = {\n            status: 'running',\n            id: null,\n            cancel: null,\n            type: null,\n        };\n\n        if(interval) {\n            let id = timer.id = setInterval((timer) => {\n                fn.call(this, timer);\n            }, time, timer);\n\n            timer.type = 'interval';\n\n            timer.cancel = () => {\n                if(this.#timers[name] === timer) {\n                    clearInterval(id);\n                    delete this.#timers[name];\n                    timer.status = 'canceled';\n                }\n            };\n        } else {\n            let id = timer.id = setTimeout((timer) => {\n                delete this.#timers[name];\n                timer.status = 'complete';\n                fn.call(this, timer);\n            }, time, timer);\n\n            timer.type = 'timeout';\n\n            timer.cancel = () => {\n                if(this.#timers[name] === timer) {\n                    clearTimeout(id);\n                    delete this.#timers[name];\n                    timer.status = 'canceled';\n                }\n            };\n        }\n\n        return timer;\n    }\n\n    /**\n     * Clears the timer with the given name.\n     *\n     * @param name\n     * @returns {boolean} True if a timer was canceled. False if not timer exists.\n     */\n    clearTimer(name) {\n        if(this.#timers && this.#timers[name]) {\n            this.#timers[name].cancel();\n            return true;\n        }\n\n        return false;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the timer object if it exists.\n     *\n     * @param name\n     * @returns {*}\n     */\n    getTimer(name) {\n        return this.#timers && this.#timers[name] ? this.#timers[name] : null;\n    }\n\n    hasTimer(name) {\n        return !!this.getTimer(name);\n    }\n\n    get isDisabled() {\n        return this.classList.contains('disabled');\n    }\n\n    set isDisabled(value) {\n        let isDisabled = this.isDisabled;\n\n        if(!isDisabled && value) {\n            this.classList.remove('disabled');\n        } else if(isDisabled && !value) {\n            this.classList.add('disabled');\n        }\n    }\n\n    get disabled() {\n        return this.isDisabled;\n    }\n\n    set disabled(value) {\n        this.isDisabled = value;\n    }\n\n    get id() {\n        return this.#element.id;\n    }\n\n    set id(value) {\n        this.#element.id = value;\n    }\n\n    get style() {\n        return this.#element.style;\n    }\n\n    set style(value) {\n        this.#element.style = value;\n    }\n\n    get classList() {\n        return this.#element.classList;\n    }\n\n    set classList(value) {\n        this.#element.classList = value;\n    }\n\n    get dataset() {\n        return this.#element.dataset;\n    }\n\n    set dataset(value) {\n        this.#element.dataset = value;\n    }\n\n    get element() {\n        return this.#element;\n    }\n}\n","let TOPICS = Symbol('topics');\n\n\nexport function STOP() {\n    throw STOP;\n}\n\n\nexport default class Publisher {\n    constructor() {\n        this[TOPICS] = {};\n    }\n\n    on(topic, callback) {\n        if(!this[TOPICS][topic]) this[TOPICS][topic] = [];\n        this[TOPICS][topic].push(callback);\n        return this;\n    }\n\n    once(topic, fn) {\n        let on = (...args) => {\n            this.off(topic, fn);\n            return fn.apply(this, args);\n        };\n\n        on.fn = fn;\n        this.on(topic, fn);\n        return this;\n    }\n\n    off(topic, callback) {\n        if(arguments.length === 0) {\n            // CLear all topics.\n            this[TOPICS] = {};\n            return this;\n        } else if(arguments.length === 1) {\n            // Clear single topic.\n            this[TOPICS][topic] = [];\n            return this;\n        }\n\n        if(!this[TOPICS] || !this[TOPICS][topic] || !this[TOPICS][topic].length) {\n            // Topic list was either empty or didn't exist.  No need to remove anything.  Return;\n            return this;\n        }\n\n        let callbacks = this[TOPICS][topic];\n\n        for(let i = 0; i < callback.length; i++) {\n            let cb = callbacks[i];\n            if(cb === callback || cb.fn === callback) {\n                callbacks.splice(i, 1);\n                break;\n            }\n        }\n\n        if(callbacks.length === 0) {\n            delete this[TOPICS][topic];\n        }\n\n        return this;\n    }\n\n    hasEvent(topic, callback) {\n        if(arguments.length === 1) {\n            return !!this[TOPICS][topic];\n        } else {\n            let callbacks = this[TOPICS][topic];\n\n            for(let i = 0; i < callbacks.length; i++) {\n                let cb = callbacks[i];\n                if(cb === callback || cb.fn === callback) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    publish(topic, ...args) {\n        if(this[TOPICS][topic]) {\n            let callbacks = this[TOPICS][topic].slice(0);\n\n            for(let cb of callbacks) {\n                try {\n                    cb.apply(this, args);\n                } catch (e) {\n                    if(e === STOP) {\n                        return e;\n                    } else {\n                        throw e;\n                    }\n                }\n            }\n        }\n\n        return true;\n    }\n}\n","\nexport class ExtendableError extends Error {\n    constructor(message) {\n        // noinspection JSCheckFunctionSignatures\n        super(message);\n        this.name = this.constructor.name;\n\n        // noinspection JSUnresolvedVariable\n        if(typeof Error.captureStackTrace === 'function') {\n            // noinspection JSUnresolvedFunction\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\n\n\nexport class IndexError extends ExtendableError {\n\n}\n\n\nexport class KeyError extends ExtendableError {\n\n}\n\n\nexport class ValueError extends ExtendableError {\n\n}\n\n\nexport class NotImplemented extends ExtendableError {\n\n}\n\n\nexport class ValidationError extends ExtendableError {\n    constructor(message, node) {\n        super(message);\n        this.node = node;\n        this.children = [];\n    }\n}\n\n\nexport class AssertionError extends ExtendableError {\n    constructor(message) {\n        super(message);\n    }\n}\n\n\nexport class UnitError extends ExtendableError {\n\n}\n\n\n/**\n * Asserts that a condition is true or raises an AssertionError.\n * @param condition - condition to check.\n * @param message - message on fail.\n * @throws AssertionError\n */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new AssertionError(message);\n    }\n}\n","import {ValueError} from \"../errors\";\nimport Vec2 from \"./Vec2\";\nimport Vec4 from \"./Vec4\";\nimport {clamp, calcDistance} from '../utility';\nimport {UnitError} from '../errors';\n\n\nconst regWhitespace = /\\s+/,\n    regPositionPart = /^([a-zA-Z]*)([+-]?\\d*\\.?\\d*)([a-z%]*)$/; // Parses string like \"left+10px\" into [\"left\", \"+10px\"]\n\n\nconst positionShortHandValues = {\n    top: 'center top',\n    right: 'right middle',\n    bottom: 'center bottom',\n    left: 'left middle',\n    topleft: 'left top',\n    topright: 'right top',\n    bottomleft: 'left bottom',\n    bottomright: 'right bottom'\n};\n\n\nexport default class Rect extends Vec4 {\n    constructor(left, top, right, bottom, domElement=null) {\n        if(typeof left === 'function') {\n            left = left();\n        }\n\n        if(typeof left === 'object') {\n            if(left.getBoundingClientRect) {\n                domElement = left;\n                let bb = domElement.getBoundingClientRect();\n                left = bb.left;\n                top = bb.top;\n                right = bb.right;\n                bottom = bb.bottom;\n            } else {\n                top = left.top;\n                right = left.right;\n                bottom = left.bottom;\n                left = left.left;\n            }\n        }\n\n        super(left, top, right, bottom);\n\n        // noinspection JSUnusedGlobalSymbols\n        this.domElement = domElement;\n\n        if(arguments.length === 1 && left instanceof Rect) {\n            Object.assign(this, left);\n        }\n    }\n\n    bind(element) {\n        return this._new(this.left, this.top, this.right, this.bottom, element);\n    }\n\n    _new(left, top, right, bottom, domElement=undefined) {\n        let r = new this.constructor(this);\n        r.left = left;\n        r.top = top;\n        r.right = right;\n        r.bottom = bottom;\n        if(domElement !== undefined) r.domElement = domElement;\n        return r;\n    }\n\n    toPoint() {\n        return new Vec2(this[0], this[1]);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    getArea() {\n        return this.width * this.height;\n    }\n\n    translate(x, y) {\n        if(Array.isArray(x)) {\n            [x, y] = x;\n        } else if(typeof x === 'object') {\n            y = x.y;\n            x = x.x;\n        }\n\n        return this._new(\n            this[0] + x,\n            this[1] + y,\n            this[2] + x,\n            this[3] + y\n        );\n    }\n\n    addMargins({left, top, right, bottom}) {\n        return this._new(\n            this.left - left,\n            this.top - top,\n            this.right + right,\n            this.bottom + bottom\n        );\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    addPadding({left, top, right, bottom}) {\n        return this._new(\n            this.left + left,\n            this.top + top,\n            this.right - right,\n            this.bottom - bottom\n        );\n    }\n\n    moveTo({left, top}) {\n        let deltaX = left - this.left,\n            deltaY = top - this.top;\n\n        return this._new(\n            this.left + deltaX,\n            this.top + deltaY,\n            this.right + deltaX,\n            this.bottom + deltaY\n        );\n    }\n\n    intersection({left, top, right, bottom}) {\n        left = Math.max(this.left, left);\n        right = Math.min(this.right, right);\n        bottom = Math.min(this.bottom, bottom);\n        top = Math.max(this.top, top);\n\n        if(left > right || top > bottom) {\n            return null;\n        }\n\n        return this._new(left, top, right, bottom);\n    }\n\n    /**\n     * Creates a new rectangle exactly big enough to hold the current rectangle and the provided rectangle.\n     * @param left\n     * @param top\n     * @param right\n     * @param bottom\n     * @returns {null|Rect}\n     */\n    union({left, top, right, bottom}) {\n        left = Math.min(left, this.left);\n        right = Math.max(right, this.right);\n        bottom = Math.max(bottom, this.bottom);\n        top = Math.min(top, this.top);\n\n        if(left > right || top > bottom) {\n            return null;\n        }\n\n        return this._new(left, top, right, bottom);\n    }\n\n    contains(rect) {\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\n    }\n\n    containsX(rect) {\n        return this.left <= rect.left && this.right >= rect.right;\n    }\n\n    containsY(rect) {\n        return this.top <= rect.top && this.bottom >= rect.bottom;\n    }\n\n    isXOverlapping(rect) {\n        return (rect.left <= this.right && rect.right >= this.left);\n    }\n\n    isYOverlapping(rect) {\n        return (rect.top <= this.bottom && rect.bottom >= this.top);\n    }\n\n    isAbove(rect) {\n        rect = new Rect(rect);\n\n        return rect.top > this.bottom;\n    }\n\n    isBelow(rect) {\n        rect = new Rect(rect);\n\n        return rect.bottom < this.top;\n    }\n\n    isLeftOf(rect) {\n        rect = new Rect(rect);\n\n        return rect.left > this.right;\n    }\n\n    isRightOf(rect) {\n        rect = new Rect(rect);\n\n        return rect.right < this.left;\n    }\n\n    isOverlapping(rect) {\n        rect = new Rect(rect);\n        return this.isXOverlapping(rect) && this.isYOverlapping(rect);\n    }\n\n    /**\n     * Attempts to fit the rect inside of the container anchoring from the anchor point.  The anchor point defaults\n     * to the top left corner or (0, 0).\n     *\n     * If possible entire rect should be clamped to the closest position inside of the container.\n     * Else position anchor point the closest possible point inside container.\n     *\n     * @param container\n     * @param anchor\n     */\n    fit(container, anchor=null) {\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\n        container = new Rect(container);\n        let starting = container;\n\n        container = container.add(new Rect(\n            anchor.left,\n            anchor.top,\n            -this.width + anchor.left,\n            -this.height + anchor.top\n        ));\n\n        container = new Rect(\n            clamp(container.left, starting.left, starting.right),\n            clamp(container.top, starting.top, starting.bottom),\n            clamp(container.right, starting.left, starting.right),\n            clamp(container.bottom, starting.top, starting.bottom)\n        );\n\n        let left = clamp(this.left, container.left, container.right) - anchor.left,\n            top = clamp(this.top, container.top, container.bottom) - anchor.top,\n            width = this.width,\n            height = this.height;\n\n        return this._new(\n            left,\n            top,\n            left + width,\n            top + height\n        );\n    }\n\n    fitX(container, anchor=null) {\n        let pos = this.fit(container, anchor);\n        return this._new(pos.left, this.top, pos.right, this.bottom);\n    }\n\n    fitY(container, anchor=null) {\n        let pos = this.fit(container, anchor);\n        return this._new(this.left, pos.top, this.right, pos.bottom);\n    }\n\n    /**\n     * Clamps the anchor point inside the rect.  Anchor point defaults to top left or (0, 0).\n     *\n     * @param rect\n     * @param anchor\n     * @returns {Rect}\n     */\n    clamp(rect, anchor=null) {\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\n        rect = new Rect(rect);\n\n        let width = this.width,\n            height = this.height,\n            left = clamp(this.left + anchor.left, rect.left, rect.right) - anchor.left,\n            top = clamp(this.top + anchor.top, rect.top, rect.bottom) - anchor.top;\n\n        return this._new(\n            left,\n            top,\n            left + width,\n            top + height\n        );\n    }\n\n    clampX(rect, anchor=null) {\n        let pos = this.clamp(rect, anchor);\n        return this._new(pos.left, this.top, pos.right, this.bottom);\n    }\n\n    clampY(rect, anchor=null) {\n        let pos = this.clamp(rect, anchor);\n        return this._new(this.left, pos.top, this.right, pos.bottom);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Returns the distance between two rects.\n     * @param rect\n     * @returns {number}\n     */\n    getDistanceBetween(rect) {\n        rect = Rect.fromRect(rect);\n\n        let isXOverlapping = this.isXOverlapping(rect),\n            isYOverlapping = this.isYOverlapping(rect);\n\n        if(isXOverlapping && isYOverlapping) {\n            // Items are overlapping\n            return 0;\n        } else if(isXOverlapping) {\n            return Math.min(\n                Math.abs(this.bottom - rect.top),\n                Math.abs(this.top - rect.bottom)\n            );\n        } else if(isYOverlapping) {\n            return Math.min(\n                Math.abs(this.right - rect.left),\n                Math.abs(this.left - rect.right)\n            );\n        } else {\n            let x1, y1, x2, y2;\n\n            if(this.right <= rect.left) {\n                x1 = this.right;\n                x2 = rect.left;\n            } else {\n                x1 = this.left;\n                x2 = rect.right;\n            }\n\n            if(this.bottom <= rect.top) {\n                y1 = this.bottom;\n                y2 = rect.top;\n            } else {\n                y1 = this.top;\n                y2 = rect.bottom;\n            }\n\n            // Use distance formula to calculate distance.\n            return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    getDistanceFromPoint(point) {\n        point = new Rect(point.left, point.top, point.left, point.top);\n\n        let closestX = Math.abs(this.left - point.left) < Math.abs(this.right - point.left) ? this.left : this.right,\n            closestY = Math.abs(this.top - point.top) < Math.abs(this.bottom - point.top) ? this.top : this.bottom,\n            distance = calcDistance(closestX, closestY, point.left, point.top);\n\n        return this.contains(point) ? -distance : distance;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    getCenterPoint() {\n        return new Vec2(\n            this.left + (this.width / 2),\n            this.top + (this.height / 2)\n        );\n    }\n\n    reflect(point=null, axis='xy') {\n        // Reflect around the given point or origin\n        point = point ? new Vec2(point) : new Vec2(0, 0);\n\n        let x = this.left + (this.width / 2) - point.x,\n            y = this.top + (this.height / 2) - point.y;\n\n        if(axis === 'x' || axis === 'xy') {\n            x *= -1;\n        }\n\n        if(axis === 'y' || axis === 'xy') {\n            y *= -1;\n        }\n\n        x = x - (this.width / 2) + point.x;\n        y = y - (this.height / 2) + point.y;\n\n        return this._new(x, y, x + this.width, y + this.height);\n    }\n\n    position({my, at, of, offset=null, inside=null, collision=null}) {\n        // Of should be a Rect object.\n        if(of.getBoundingClientRect) {\n            of = new Rect(of);\n        }\n\n        // inside should be a Rect object.\n        if(inside && inside.getBoundingClientRect) {\n            inside = new Rect(inside);\n        }\n\n        // collision can be string with a space separating the x and y values.\n        // for example \"fit flipfit\"\n        // normalize it to an {x, y} object.\n        if(collision && typeof collision === 'string') {\n            let parts = collision.trim().split(regWhitespace);\n            collision = {\n                x: parts[0],\n                y: parts[1] || parts[0]\n            };\n        }\n\n        let anchor = this.evaluatePositionString(my),\n            reference = of.evaluatePositionString(at),\n            deltaX = reference.x - anchor.x,\n            deltaY = reference.y - anchor.y;\n\n        let rect = this.translate(deltaX, deltaY);\n\n        if(offset) {\n            rect = this.translate(offset);\n        }\n\n        // If the rect is already inside the container or if not container or collision function where given\n        // return immediately, there is not more work to be done.\n        if(!collision || !inside || inside.contains(rect)) {\n            return rect;\n        }\n\n        if(!inside.containsX(rect) && (collision.x === 'flip' || collision.x === 'flipfit')) {\n            rect = rect.reflect(of.getCenterPoint(), 'x');\n        }\n\n        if(!inside.containsY(rect) && (collision.y === 'flip' || collision.y === 'flipfit')) {\n            rect = rect.reflect(of.getCenterPoint(), 'y');\n        }\n\n        if(collision.x === 'fit' || collision.x === 'flipfit') {\n            rect = rect.fitX(inside);\n        }\n\n        if(collision.y === 'fit' || collision.y === 'flipfit') {\n            rect = rect.fitY(inside);\n        }\n\n        return rect;\n    }\n\n    evaluatePositionString(string) {\n        if(positionShortHandValues[string]) {\n            string = positionShortHandValues[string];\n        }\n\n        let pos = string.trim().split(regWhitespace),\n            x = pos[0],\n            y = pos[1],\n            rx = null,\n            ry = null;\n\n        if(x) {\n            rx = this._evaluatePositionStringComponent(x, 'x');\n        }\n\n        if(y) {\n            ry = this._evaluatePositionStringComponent(y, 'y');\n        }\n\n        return new Vec2(rx, ry);\n    }\n\n    /**\n     * Gets the anchor position relative to the element.  The anchor can be any of the following:\n     *\n     * A position string.\n     * A [x, y, offsetX=0, offsetY=0] array.\n     * An object of {left, top, offsetX=0, offsetY=0} properties.\n     *\n     * @param anchor\n     * @returns {Vec2}\n     */\n    getAnchor(anchor) {\n        if(positionShortHandValues[anchor]) {\n            anchor = positionShortHandValues[anchor];\n        }\n\n        let x, y, offsetX = 0, offsetY = 0;\n\n        if(typeof anchor === 'string') {\n            [x, y] = anchor.trim().split(regWhitespace);\n        } else if(Array.isArray(anchor)) {\n            [x, y, offsetX=0, offsetY=0] = anchor;\n        } else {\n            x = anchor.left;\n            y = anchor.top;\n            offsetX = anchor.offsetX || 0;\n            offsetY = anchor.offsetY || 0;\n        }\n\n        if(typeof x === 'string') {\n            x = this._evaluatePositionStringComponent(x, 'x') - this.left;\n        }\n\n        if(typeof y === 'string') {\n            y = this._evaluatePositionStringComponent(y, 'y') - this.top;\n        }\n\n        return new Vec2(x + offsetX, y + offsetY);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Takes a anchor point coordient relative the the rect and returns the true coordients.\n     * @param anchor\n     * @returns {Vec2}\n     */\n    getPoint(anchor) {\n        let point = this.getAnchor(anchor);\n        return new Vec2(point.left + this.left, point.top + this.top);\n    }\n\n    /**\n     * Evaluates a position string value such as \"left+10px\" into it final position on the rect.\n     * @param value - The value to evaluate.\n     * @param direction - The direction type.  Should be either \"x\" or \"y\".\n     * @returns {number}\n     * @private\n     */\n    _evaluatePositionStringComponent(value, direction) {\n        let parts = regPositionPart.exec(value),\n            r = 0;\n\n        if(parts[1]) {\n            let p = parts[1];\n\n            if(direction === 'x') {\n                if(p === 'left') {\n                    r = this.left;\n                } else if(p === 'center' || p === 'middle') {\n                    r = this.left + (this.width / 2);\n                } else if(p === 'right') {\n                    r = this.left + this.width;\n                } else {\n                    throw new ValueError(`Invalid Option: ${p}`);\n                }\n            } else {\n                if(p === 'top') {\n                    r = this.top;\n                } else if(p === 'middle' || p === 'center') {\n                    r = this.top + (this.height / 2);\n                } else if(p === 'bottom') {\n                    r = this.top + this.height;\n                } else {\n                    throw new ValueError(`Invalid Option: ${p}`);\n                }\n            }\n        } else if(direction === 'x') {\n            r = this.left;\n        } else {\n            r = this.top;\n        }\n\n        if(parts[2]) {\n            let value = parseFloat(parts[2]),\n                type = parts[3] || 'px';\n\n            if(type === 'px') {\n                r += value;\n            } else if(type === '%') {\n                if(direction === 'x') {\n                    r += (value / 100) * this.width;\n                } else {\n                    r += (value / 100) * this.height;\n                }\n            } else {\n                throw new UnitError(\"Invalid unit: Must be either % or px.\");\n            }\n        }\n\n        return r;\n    }\n\n    static fromRect({left, top, right, bottom}) {\n        return new Rect(left, top, right, bottom);\n    }\n\n    static getBoundingClientRect(element) {\n        return new Rect(element);\n    }\n\n    /**\n     * Returns the elements Rect without any inline styles applied.\n     * @param element\n     * @param restore - If true inline style will be restored after measuring.\n     * @returns {Rect}\n     */\n    static getCleanBoundingClientRect(element, restore=true) {\n        let state = {},\n            keys = [];\n\n        for(let i = 0; i < element.style.length; i++) {\n            keys.push(element.style[i]);\n        }\n\n        for(let key of keys) {\n            state[key] = element.style[key];\n            element.style[key] = \"\";\n        }\n\n        let r = Rect.getBoundingClientRect(element);\n\n        if(restore) {\n            Object.assign(element.style, state);\n        }\n\n        return r;\n    }\n\n    static getClientRect() {\n        return new Rect(\n            0,\n            0,\n            window.innerWidth,\n            window.innerHeight\n        );\n    }\n\n    static getRootContainingClientRect() {\n        return new Rect(\n            -window.scrollX,\n            -window.scrollY,\n            document.documentElement.clientWidth - window.scrollX,\n            document.documentElement.clientHeight - window.scrollY\n        );\n    }\n\n    get left() {\n        return this[0];\n    }\n\n    get top() {\n        return this[1];\n    }\n\n    get right() {\n        return this[2];\n    }\n\n    get bottom() {\n        return this[3];\n    }\n\n    set left(value) {\n        this[0] = value;\n    }\n\n    set top(value) {\n        this[1] = value;\n    }\n\n    set right(value) {\n        this[2] = value;\n    }\n\n    set bottom(value) {\n        this[3] = value;\n    }\n\n    get width() {\n        return this.right - this.left;\n    }\n\n    get height() {\n        return this.bottom - this.top;\n    }\n\n    set width(value) {\n        this.right = this.left + value;\n    }\n\n    set height(value) {\n        this.bottom = this.top + value;\n    }\n\n    get x() {\n        return this.left;\n    }\n\n    get y() {\n        return this.top;\n    }\n\n    set x(value) {\n        this.left = value;\n    }\n\n    set y(value) {\n        this.top = value;\n    }\n}\n","import {clamp} from '../utility';\n\n\n/**\n * Stores a 2 value Vector.\n */\nexport default class Vec2 {\n    constructor(x=0, y=0) {\n        if(x instanceof Vec2) {\n            this[0] = x.x;\n            this[1] = x.y;\n        } else if(Array.isArray(x)) {\n            this[0] = x[0];\n            this[1] = x[1];\n        } else if(typeof x === 'object') {\n            if(x.left !== undefined) {\n                this[0] = x.left;\n                this[0] = x.top;\n            } else {\n                this[0] = x.x;\n                this[1] = x.y;\n            }\n        } else {\n            this[0] = x;\n            this[1] = y;\n        }\n    }\n\n    add(vec2) {\n        if(typeof vec2 === 'number') {\n            return new Vec2(\n                this[0] + vec2,\n                this[1] + vec2\n            );\n        } else {\n            return new Vec2(\n                this[0] + vec2[0],\n                this[1] + vec2[1]\n            );\n        }\n    }\n\n    subtract(vec2) {\n        if(typeof vec2 === 'number') {\n            return new Vec2(\n                this[0] - vec2,\n                this[1] - vec2\n            );\n        } else {\n            return new Vec2(\n                this[0] - vec2[0],\n                this[1] - vec2[1]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    scalar(value) {\n        return new Vec2(this[0] * value, this[1] * value);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    mod(vec2) {\n        if(typeof vec2 === 'number') {\n            return new Vec2(\n                this[0] % vec2,\n                this[1] % vec2\n            );\n        } else {\n            return new Vec2(\n                this[0] % vec2[0],\n                this[1] % vec2[1]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    equals(vec2) {\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\n    }\n\n    set(value) {\n        if(typeof value !== 'object') {\n            this[0] = value;\n            this[1] = value;\n        } else {\n            this[0] = value[0];\n            this[1] = value[1];\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    clone() {\n        return Vec2(this[0], this[1]);\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get left() {\n        return this[0];\n    }\n\n    get right() {\n        return this[0];\n    }\n\n    get top() {\n        return this[1];\n    }\n\n    get bottom() {\n        return this[1];\n    }\n\n    set x(value) {\n        this[0] = value;\n    }\n\n    set y(value) {\n        this[1] = value;\n    }\n\n    set left(value) {\n        this[0] = value;\n    }\n\n    set top(value) {\n        this[1] = value;\n    }\n\n    get width() {\n        return this[0];\n    }\n\n    set width(value) {\n        this[0] = value;\n    }\n\n    get height() {\n        return this[1];\n    }\n\n    set height(value) {\n        this[1] = value;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toTranslate() {\n        return `translate(${this.x}px, ${this.y}px)`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toTranslate3d() {\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\n    }\n\n    clamp(vec4) {\n        return new Vec2(\n            clamp(this.left, vec4.left, vec4.right),\n            clamp(this.top, vec4.top, vec4.bottom)\n        );\n    }\n\n    static fromVertex(vertex) {\n        if(Array.isArray(vertex)) {\n            return new Vec2(vertex[0], vertex[1]);\n        } else if(vertex.hasOwnProperty('left')) {\n            return new Vec2(vertex.left, vertex.top);\n        } else {\n            return new Vec2(vertex.x, vertex.y);\n        }\n    }\n}\n","/**\n * Class to store a 4 value vector.\n * Provides DOMRect interface.\n */\nexport default class Vec4 {\n    /**\n     * r, g, b, a\n     * left, top, right, bottom\n     *\n     * @param left\n     * @param top\n     * @param right\n     * @param bottom\n     */\n    constructor(left, top, right, bottom) {\n        this[0] = left;\n        this[1] = top;\n        this[2] = right;\n        this[3] = bottom;\n    }\n\n    get r() {\n        return this[0];\n    }\n\n    set r(value) {\n        this[0] = value;\n    }\n\n    get g() {\n        return this[1];\n    }\n\n    set g(value) {\n        this[1] = value;\n    }\n\n    get b() {\n        return this[2];\n    }\n\n    set b(value) {\n        this[2] = value;\n    }\n\n    get a() {\n        return this[3];\n    }\n\n    set a(value) {\n        this[3] = value;\n    }\n\n    set(valueOrVec4) {\n        if(typeof valueOrVec4 !== 'object') {\n            this[0] = valueOrVec4;\n            this[1] = valueOrVec4;\n            this[2] = valueOrVec4;\n            this[3] = valueOrVec4;\n        } else {\n            this[0] = valueOrVec4[0];\n            this[1] = valueOrVec4[1];\n            this[2] = valueOrVec4[2];\n            this[3] = valueOrVec4[3];\n        }\n    }\n\n    add(valueOrVec4) {\n        if(typeof valueOrVec4 === 'number') {\n            return this._new(\n                this[0] + valueOrVec4,\n                this[1] + valueOrVec4,\n                this[2] + valueOrVec4,\n                this[3] + valueOrVec4\n            );\n        } else {\n            return this._new(\n                this[0] + valueOrVec4[0],\n                this[1] + valueOrVec4[1],\n                this[2] + valueOrVec4[2],\n                this[3] + valueOrVec4[3]\n            );\n        }\n    }\n\n    subtract(valueOrVec4) {\n        if(typeof valueOrVec4 === 'number') {\n            return this._new(\n                this[0] - valueOrVec4,\n                this[1] - valueOrVec4,\n                this[2] - valueOrVec4,\n                this[3] - valueOrVec4\n            );\n        } else {\n            return this._new(\n                this[0] - valueOrVec4[0],\n                this[1] - valueOrVec4[1],\n                this[2] - valueOrVec4[2],\n                this[3] - valueOrVec4[3]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    scalar(value) {\n        return this._new(\n            this[0] * value,\n            this[1] * value,\n            this[2] * value,\n            this[3] * value\n        );\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    equals(vec4) {\n        return vec4 === this || (vec4[0] === this[0] && vec4[1] === this[1] && vec4[2] === this[2] && vec4[3] === this[3]);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    mod(valueOrVec4) {\n        if(typeof valueOrVec4 === 'number') {\n            return this._new(\n                this[0] % valueOrVec4,\n                this[1] % valueOrVec4,\n                this[2] % valueOrVec4,\n                this[3] % valueOrVec4,\n            );\n        } else {\n            return this._new(\n                this[0] % valueOrVec4[0],\n                this[1] % valueOrVec4[1],\n                this[2] % valueOrVec4[2],\n                this[3] % valueOrVec4[3]\n            );\n        }\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    toRGBA() {\n        return `rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.a})`;\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    clone() {\n        return new this.constructor(this[0], this[1], this[2], this[3]);\n    }\n\n    _new(left, top, right, bottom) {\n        return new this.constructor(left, top, right, bottom);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    static fromRGBAObject({r, g, b, a}) {\n        return new Vec4(r, g, b, a);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    static fromRGBA(value) {\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\n\n        if(!m) {\n            throw new Error(`Could not parse rgba value ${value}`);\n        }\n\n        return new Vec4(\n            parseInt(m[1], 10),\n            parseInt(m[2], 10),\n            parseInt(m[3], 10),\n            parseFloat(m[4]),\n        );\n    }\n}\n"],"sourceRoot":""}