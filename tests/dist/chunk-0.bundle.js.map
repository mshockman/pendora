{"version":3,"sources":["webpack://pendora/./src/core/errors.js","webpack://pendora/./src/core/vectors/Rect.js","webpack://pendora/./src/core/vectors/Vec2.js","webpack://pendora/./src/core/vectors/Vec4.js"],"names":["ExtendableError","message","name","constructor","Error","captureStackTrace","stack","IndexError","KeyError","ValueError","NotImplemented","ValidationError","node","children","AssertionError","UnitError","assert","condition","regWhitespace","regPositionPart","positionShortHandValues","top","right","bottom","left","topleft","topright","bottomleft","bottomright","Rect","domElement","getBoundingClientRect","bb","arguments","length","Object","assign","element","_new","undefined","r","Vec2","width","height","x","y","Array","isArray","deltaX","deltaY","Math","max","min","rect","isXOverlapping","isYOverlapping","container","anchor","getAnchor","starting","add","clamp","pos","fit","fromRect","abs","x1","y1","x2","y2","round","sqrt","pow","point","closestX","closestY","distance","calcDistance","contains","axis","my","at","of","offset","inside","collision","parts","trim","split","evaluatePositionString","reference","translate","containsX","reflect","getCenterPoint","containsY","fitX","fitY","string","rx","ry","_evaluatePositionStringComponent","offsetX","offsetY","value","direction","exec","p","parseFloat","type","restore","state","keys","i","style","push","key","window","innerWidth","innerHeight","scrollX","scrollY","document","documentElement","clientWidth","clientHeight","Vec4","vec2","vec4","vertex","hasOwnProperty","valueOrVec4","g","b","a","m","parseInt"],"mappings":"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","file":"chunk-0.bundle.js","sourcesContent":["\r\nexport class ExtendableError extends Error {\r\n    constructor(message) {\r\n        // noinspection JSCheckFunctionSignatures\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        // noinspection JSUnresolvedVariable\r\n        if(typeof Error.captureStackTrace === 'function') {\r\n            // noinspection JSUnresolvedFunction\r\n            Error.captureStackTrace(this, this.constructor);\r\n        } else {\r\n            this.stack = (new Error(message)).stack;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class IndexError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class KeyError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValueError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class NotImplemented extends ExtendableError {\r\n\r\n}\r\n\r\n\r\nexport class ValidationError extends ExtendableError {\r\n    constructor(message, node) {\r\n        super(message);\r\n        this.node = node;\r\n        this.children = [];\r\n    }\r\n}\r\n\r\n\r\nexport class AssertionError extends ExtendableError {\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n}\r\n\r\n\r\nexport class UnitError extends ExtendableError {\r\n\r\n}\r\n\r\n\r\n/**\r\n * Asserts that a condition is true or raises an AssertionError.\r\n * @param condition - condition to check.\r\n * @param message - message on fail.\r\n * @throws AssertionError\r\n */\r\nexport function assert(condition, message) {\r\n    if (!condition) {\r\n        throw new AssertionError(message);\r\n    }\r\n}\r\n","import {ValueError} from \"../errors\";\r\nimport Vec2 from \"./Vec2\";\r\nimport Vec4 from \"./Vec4\";\r\nimport {clamp, calcDistance} from '../utility';\r\nimport {UnitError} from '../errors';\r\n\r\n\r\nconst regWhitespace = /\\s+/,\r\n    regPositionPart = /^([a-zA-Z]*)([+-]?\\d*\\.?\\d*)([a-z%]*)$/; // Parses string like \"left+10px\" into [\"left\", \"+10px\"]\r\n\r\n\r\nconst positionShortHandValues = {\r\n    top: 'center top',\r\n    right: 'right middle',\r\n    bottom: 'center bottom',\r\n    left: 'left middle',\r\n    topleft: 'left top',\r\n    topright: 'right top',\r\n    bottomleft: 'left bottom',\r\n    bottomright: 'right bottom'\r\n};\r\n\r\n\r\nexport default class Rect extends Vec4 {\r\n    constructor(left, top, right, bottom, domElement=null) {\r\n        if(typeof left === 'function') {\r\n            left = left();\r\n        }\r\n\r\n        if(typeof left === 'object') {\r\n            if(left.getBoundingClientRect) {\r\n                domElement = left;\r\n                let bb = domElement.getBoundingClientRect();\r\n                left = bb.left;\r\n                top = bb.top;\r\n                right = bb.right;\r\n                bottom = bb.bottom;\r\n            } else {\r\n                top = left.top;\r\n                right = left.right;\r\n                bottom = left.bottom;\r\n                left = left.left;\r\n            }\r\n        }\r\n\r\n        super(left, top, right, bottom);\r\n\r\n        // noinspection JSUnusedGlobalSymbols\r\n        this.domElement = domElement;\r\n\r\n        if(arguments.length === 1 && left instanceof Rect) {\r\n            Object.assign(this, left);\r\n        }\r\n    }\r\n\r\n    bind(element) {\r\n        return this._new(this.left, this.top, this.right, this.bottom, element);\r\n    }\r\n\r\n    _new(left, top, right, bottom, domElement=undefined) {\r\n        let r = new this.constructor(this);\r\n        r.left = left;\r\n        r.top = top;\r\n        r.right = right;\r\n        r.bottom = bottom;\r\n        if(domElement !== undefined) r.domElement = domElement;\r\n        return r;\r\n    }\r\n\r\n    toPoint() {\r\n        return new Vec2(this[0], this[1]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n\r\n    translate(x, y) {\r\n        if(Array.isArray(x)) {\r\n            [x, y] = x;\r\n        } else if(typeof x === 'object') {\r\n            y = x.y;\r\n            x = x.x;\r\n        }\r\n\r\n        return this._new(\r\n            this[0] + x,\r\n            this[1] + y,\r\n            this[2] + x,\r\n            this[3] + y\r\n        );\r\n    }\r\n\r\n    addMargins({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left - left,\r\n            this.top - top,\r\n            this.right + right,\r\n            this.bottom + bottom\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    addPadding({left, top, right, bottom}) {\r\n        return this._new(\r\n            this.left + left,\r\n            this.top + top,\r\n            this.right - right,\r\n            this.bottom - bottom\r\n        );\r\n    }\r\n\r\n    moveTo({left, top}) {\r\n        let deltaX = left - this.left,\r\n            deltaY = top - this.top;\r\n\r\n        return this._new(\r\n            this.left + deltaX,\r\n            this.top + deltaY,\r\n            this.right + deltaX,\r\n            this.bottom + deltaY\r\n        );\r\n    }\r\n\r\n    intersection({left, top, right, bottom}) {\r\n        left = Math.max(this.left, left);\r\n        right = Math.min(this.right, right);\r\n        bottom = Math.min(this.bottom, bottom);\r\n        top = Math.max(this.top, top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * Creates a new rectangle exactly big enough to hold the current rectangle and the provided rectangle.\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     * @returns {null|Rect}\r\n     */\r\n    union({left, top, right, bottom}) {\r\n        left = Math.min(left, this.left);\r\n        right = Math.max(right, this.right);\r\n        bottom = Math.max(bottom, this.bottom);\r\n        top = Math.min(top, this.top);\r\n\r\n        if(left > right || top > bottom) {\r\n            return null;\r\n        }\r\n\r\n        return this._new(left, top, right, bottom);\r\n    }\r\n\r\n    contains(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    containsX(rect) {\r\n        return this.left <= rect.left && this.right >= rect.right;\r\n    }\r\n\r\n    containsY(rect) {\r\n        return this.top <= rect.top && this.bottom >= rect.bottom;\r\n    }\r\n\r\n    isXOverlapping(rect) {\r\n        return (rect.left <= this.right && rect.right >= this.left);\r\n    }\r\n\r\n    isYOverlapping(rect) {\r\n        return (rect.top <= this.bottom && rect.bottom >= this.top);\r\n    }\r\n\r\n    isAbove(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.top > this.bottom;\r\n    }\r\n\r\n    isBelow(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.bottom < this.top;\r\n    }\r\n\r\n    isLeftOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.left > this.right;\r\n    }\r\n\r\n    isRightOf(rect) {\r\n        rect = new Rect(rect);\r\n\r\n        return rect.right < this.left;\r\n    }\r\n\r\n    isOverlapping(rect) {\r\n        rect = new Rect(rect);\r\n        return this.isXOverlapping(rect) && this.isYOverlapping(rect);\r\n    }\r\n\r\n    /**\r\n     * Attempts to fit the rect inside of the container anchoring from the anchor point.  The anchor point defaults\r\n     * to the top left corner or (0, 0).\r\n     *\r\n     * If possible entire rect should be clamped to the closest position inside of the container.\r\n     * Else position anchor point the closest possible point inside container.\r\n     *\r\n     * @param container\r\n     * @param anchor\r\n     */\r\n    fit(container, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        container = new Rect(container);\r\n        let starting = container;\r\n\r\n        container = container.add(new Rect(\r\n            anchor.left,\r\n            anchor.top,\r\n            -this.width + anchor.left,\r\n            -this.height + anchor.top\r\n        ));\r\n\r\n        container = new Rect(\r\n            clamp(container.left, starting.left, starting.right),\r\n            clamp(container.top, starting.top, starting.bottom),\r\n            clamp(container.right, starting.left, starting.right),\r\n            clamp(container.bottom, starting.top, starting.bottom)\r\n        );\r\n\r\n        let left = clamp(this.left, container.left, container.right) - anchor.left,\r\n            top = clamp(this.top, container.top, container.bottom) - anchor.top,\r\n            width = this.width,\r\n            height = this.height;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    fitX(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    fitY(container, anchor=null) {\r\n        let pos = this.fit(container, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    /**\r\n     * Clamps the anchor point inside the rect.  Anchor point defaults to top left or (0, 0).\r\n     *\r\n     * @param rect\r\n     * @param anchor\r\n     * @returns {Rect}\r\n     */\r\n    clamp(rect, anchor=null) {\r\n        anchor = anchor ? this.getAnchor(anchor) : new Vec2(0, 0);\r\n        rect = new Rect(rect);\r\n\r\n        let width = this.width,\r\n            height = this.height,\r\n            left = clamp(this.left + anchor.left, rect.left, rect.right) - anchor.left,\r\n            top = clamp(this.top + anchor.top, rect.top, rect.bottom) - anchor.top;\r\n\r\n        return this._new(\r\n            left,\r\n            top,\r\n            left + width,\r\n            top + height\r\n        );\r\n    }\r\n\r\n    clampX(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(pos.left, this.top, pos.right, this.bottom);\r\n    }\r\n\r\n    clampY(rect, anchor=null) {\r\n        let pos = this.clamp(rect, anchor);\r\n        return this._new(this.left, pos.top, this.right, pos.bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Returns the distance between two rects.\r\n     * @param rect\r\n     * @returns {number}\r\n     */\r\n    getDistanceBetween(rect) {\r\n        rect = Rect.fromRect(rect);\r\n\r\n        let isXOverlapping = this.isXOverlapping(rect),\r\n            isYOverlapping = this.isYOverlapping(rect);\r\n\r\n        if(isXOverlapping && isYOverlapping) {\r\n            // Items are overlapping\r\n            return 0;\r\n        } else if(isXOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.bottom - rect.top),\r\n                Math.abs(this.top - rect.bottom)\r\n            );\r\n        } else if(isYOverlapping) {\r\n            return Math.min(\r\n                Math.abs(this.right - rect.left),\r\n                Math.abs(this.left - rect.right)\r\n            );\r\n        } else {\r\n            let x1, y1, x2, y2;\r\n\r\n            if(this.right <= rect.left) {\r\n                x1 = this.right;\r\n                x2 = rect.left;\r\n            } else {\r\n                x1 = this.left;\r\n                x2 = rect.right;\r\n            }\r\n\r\n            if(this.bottom <= rect.top) {\r\n                y1 = this.bottom;\r\n                y2 = rect.top;\r\n            } else {\r\n                y1 = this.top;\r\n                y2 = rect.bottom;\r\n            }\r\n\r\n            // Use distance formula to calculate distance.\r\n            return Math.round(Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)));\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getDistanceFromPoint(point) {\r\n        point = new Rect(point.left, point.top, point.left, point.top);\r\n\r\n        let closestX = Math.abs(this.left - point.left) < Math.abs(this.right - point.left) ? this.left : this.right,\r\n            closestY = Math.abs(this.top - point.top) < Math.abs(this.bottom - point.top) ? this.top : this.bottom,\r\n            distance = calcDistance(closestX, closestY, point.left, point.top);\r\n\r\n        return this.contains(point) ? -distance : distance;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    getCenterPoint() {\r\n        return new Vec2(\r\n            this.left + (this.width / 2),\r\n            this.top + (this.height / 2)\r\n        );\r\n    }\r\n\r\n    reflect(point=null, axis='xy') {\r\n        // Reflect around the given point or origin\r\n        point = point ? new Vec2(point) : new Vec2(0, 0);\r\n\r\n        let x = this.left + (this.width / 2) - point.x,\r\n            y = this.top + (this.height / 2) - point.y;\r\n\r\n        if(axis === 'x' || axis === 'xy') {\r\n            x *= -1;\r\n        }\r\n\r\n        if(axis === 'y' || axis === 'xy') {\r\n            y *= -1;\r\n        }\r\n\r\n        x = x - (this.width / 2) + point.x;\r\n        y = y - (this.height / 2) + point.y;\r\n\r\n        return this._new(x, y, x + this.width, y + this.height);\r\n    }\r\n\r\n    position({my, at, of, offset=null, inside=null, collision=null}) {\r\n        // Of should be a Rect object.\r\n        if(of.getBoundingClientRect) {\r\n            of = new Rect(of);\r\n        }\r\n\r\n        // inside should be a Rect object.\r\n        if(inside && inside.getBoundingClientRect) {\r\n            inside = new Rect(inside);\r\n        }\r\n\r\n        // collision can be string with a space separating the x and y values.\r\n        // for example \"fit flipfit\"\r\n        // normalize it to an {x, y} object.\r\n        if(collision && typeof collision === 'string') {\r\n            let parts = collision.trim().split(regWhitespace);\r\n            collision = {\r\n                x: parts[0],\r\n                y: parts[1] || parts[0]\r\n            };\r\n        }\r\n\r\n        let anchor = this.evaluatePositionString(my),\r\n            reference = of.evaluatePositionString(at),\r\n            deltaX = reference.x - anchor.x,\r\n            deltaY = reference.y - anchor.y;\r\n\r\n        let rect = this.translate(deltaX, deltaY);\r\n\r\n        if(offset) {\r\n            rect = this.translate(offset);\r\n        }\r\n\r\n        // If the rect is already inside the container or if not container or collision function where given\r\n        // return immediately, there is not more work to be done.\r\n        if(!collision || !inside || inside.contains(rect)) {\r\n            return rect;\r\n        }\r\n\r\n        if(!inside.containsX(rect) && (collision.x === 'flip' || collision.x === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'x');\r\n        }\r\n\r\n        if(!inside.containsY(rect) && (collision.y === 'flip' || collision.y === 'flipfit')) {\r\n            rect = rect.reflect(of.getCenterPoint(), 'y');\r\n        }\r\n\r\n        if(collision.x === 'fit' || collision.x === 'flipfit') {\r\n            rect = rect.fitX(inside);\r\n        }\r\n\r\n        if(collision.y === 'fit' || collision.y === 'flipfit') {\r\n            rect = rect.fitY(inside);\r\n        }\r\n\r\n        return rect;\r\n    }\r\n\r\n    evaluatePositionString(string) {\r\n        if(positionShortHandValues[string]) {\r\n            string = positionShortHandValues[string];\r\n        }\r\n\r\n        let pos = string.trim().split(regWhitespace),\r\n            x = pos[0],\r\n            y = pos[1],\r\n            rx = null,\r\n            ry = null;\r\n\r\n        if(x) {\r\n            rx = this._evaluatePositionStringComponent(x, 'x');\r\n        }\r\n\r\n        if(y) {\r\n            ry = this._evaluatePositionStringComponent(y, 'y');\r\n        }\r\n\r\n        return new Vec2(rx, ry);\r\n    }\r\n\r\n    /**\r\n     * Gets the anchor position relative to the element.  The anchor can be any of the following:\r\n     *\r\n     * A position string.\r\n     * A [x, y, offsetX=0, offsetY=0] array.\r\n     * An object of {left, top, offsetX=0, offsetY=0} properties.\r\n     *\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getAnchor(anchor) {\r\n        if(positionShortHandValues[anchor]) {\r\n            anchor = positionShortHandValues[anchor];\r\n        }\r\n\r\n        let x, y, offsetX = 0, offsetY = 0;\r\n\r\n        if(typeof anchor === 'string') {\r\n            [x, y] = anchor.trim().split(regWhitespace);\r\n        } else if(Array.isArray(anchor)) {\r\n            [x, y, offsetX=0, offsetY=0] = anchor;\r\n        } else {\r\n            x = anchor.left;\r\n            y = anchor.top;\r\n            offsetX = anchor.offsetX || 0;\r\n            offsetY = anchor.offsetY || 0;\r\n        }\r\n\r\n        if(typeof x === 'string') {\r\n            x = this._evaluatePositionStringComponent(x, 'x') - this.left;\r\n        }\r\n\r\n        if(typeof y === 'string') {\r\n            y = this._evaluatePositionStringComponent(y, 'y') - this.top;\r\n        }\r\n\r\n        return new Vec2(x + offsetX, y + offsetY);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     * Takes a anchor point coordient relative the the rect and returns the true coordients.\r\n     * @param anchor\r\n     * @returns {Vec2}\r\n     */\r\n    getPoint(anchor) {\r\n        let point = this.getAnchor(anchor);\r\n        return new Vec2(point.left + this.left, point.top + this.top);\r\n    }\r\n\r\n    /**\r\n     * Evaluates a position string value such as \"left+10px\" into it final position on the rect.\r\n     * @param value - The value to evaluate.\r\n     * @param direction - The direction type.  Should be either \"x\" or \"y\".\r\n     * @returns {number}\r\n     * @private\r\n     */\r\n    _evaluatePositionStringComponent(value, direction) {\r\n        let parts = regPositionPart.exec(value),\r\n            r = 0;\r\n\r\n        if(parts[1]) {\r\n            let p = parts[1];\r\n\r\n            if(direction === 'x') {\r\n                if(p === 'left') {\r\n                    r = this.left;\r\n                } else if(p === 'center' || p === 'middle') {\r\n                    r = this.left + (this.width / 2);\r\n                } else if(p === 'right') {\r\n                    r = this.left + this.width;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            } else {\r\n                if(p === 'top') {\r\n                    r = this.top;\r\n                } else if(p === 'middle' || p === 'center') {\r\n                    r = this.top + (this.height / 2);\r\n                } else if(p === 'bottom') {\r\n                    r = this.top + this.height;\r\n                } else {\r\n                    throw new ValueError(`Invalid Option: ${p}`);\r\n                }\r\n            }\r\n        } else if(direction === 'x') {\r\n            r = this.left;\r\n        } else {\r\n            r = this.top;\r\n        }\r\n\r\n        if(parts[2]) {\r\n            let value = parseFloat(parts[2]),\r\n                type = parts[3] || 'px';\r\n\r\n            if(type === 'px') {\r\n                r += value;\r\n            } else if(type === '%') {\r\n                if(direction === 'x') {\r\n                    r += (value / 100) * this.width;\r\n                } else {\r\n                    r += (value / 100) * this.height;\r\n                }\r\n            } else {\r\n                throw new UnitError(\"Invalid unit: Must be either % or px.\");\r\n            }\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static fromRect({left, top, right, bottom}) {\r\n        return new Rect(left, top, right, bottom);\r\n    }\r\n\r\n    static getBoundingClientRect(element) {\r\n        return new Rect(element);\r\n    }\r\n\r\n    /**\r\n     * Returns the elements Rect without any inline styles applied.\r\n     * @param element\r\n     * @param restore - If true inline style will be restored after measuring.\r\n     * @returns {Rect}\r\n     */\r\n    static getCleanBoundingClientRect(element, restore=true) {\r\n        let state = {},\r\n            keys = [];\r\n\r\n        for(let i = 0; i < element.style.length; i++) {\r\n            keys.push(element.style[i]);\r\n        }\r\n\r\n        for(let key of keys) {\r\n            state[key] = element.style[key];\r\n            element.style[key] = \"\";\r\n        }\r\n\r\n        let r = Rect.getBoundingClientRect(element);\r\n\r\n        if(restore) {\r\n            Object.assign(element.style, state);\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    static getClientRect() {\r\n        return new Rect(\r\n            0,\r\n            0,\r\n            window.innerWidth,\r\n            window.innerHeight\r\n        );\r\n    }\r\n\r\n    static getRootContainingClientRect() {\r\n        return new Rect(\r\n            -window.scrollX,\r\n            -window.scrollY,\r\n            document.documentElement.clientWidth - window.scrollX,\r\n            document.documentElement.clientHeight - window.scrollY\r\n        );\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get right() {\r\n        return this[2];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[3];\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set right(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    set bottom(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    set width(value) {\r\n        this.right = this.left + value;\r\n    }\r\n\r\n    set height(value) {\r\n        this.bottom = this.top + value;\r\n    }\r\n\r\n    get x() {\r\n        return this.left;\r\n    }\r\n\r\n    get y() {\r\n        return this.top;\r\n    }\r\n\r\n    set x(value) {\r\n        this.left = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this.top = value;\r\n    }\r\n}\r\n","import {clamp} from '../utility';\r\n\r\n\r\n/**\r\n * Stores a 2 value Vector.\r\n */\r\nexport default class Vec2 {\r\n    constructor(x=0, y=0) {\r\n        if(x instanceof Vec2) {\r\n            this[0] = x.x;\r\n            this[1] = x.y;\r\n        } else if(Array.isArray(x)) {\r\n            this[0] = x[0];\r\n            this[1] = x[1];\r\n        } else if(typeof x === 'object') {\r\n            if(x.left !== undefined) {\r\n                this[0] = x.left;\r\n                this[0] = x.top;\r\n            } else {\r\n                this[0] = x.x;\r\n                this[1] = x.y;\r\n            }\r\n        } else {\r\n            this[0] = x;\r\n            this[1] = y;\r\n        }\r\n    }\r\n\r\n    add(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] + vec2,\r\n                this[1] + vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] + vec2[0],\r\n                this[1] + vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] - vec2,\r\n                this[1] - vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] - vec2[0],\r\n                this[1] - vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return new Vec2(this[0] * value, this[1] * value);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(vec2) {\r\n        if(typeof vec2 === 'number') {\r\n            return new Vec2(\r\n                this[0] % vec2,\r\n                this[1] % vec2\r\n            );\r\n        } else {\r\n            return new Vec2(\r\n                this[0] % vec2[0],\r\n                this[1] % vec2[1]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec2) {\r\n        return this === vec2 || (this[0] === vec2[0] && this[1] === vec2[1]);\r\n    }\r\n\r\n    set(value) {\r\n        if(typeof value !== 'object') {\r\n            this[0] = value;\r\n            this[1] = value;\r\n        } else {\r\n            this[0] = value[0];\r\n            this[1] = value[1];\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return Vec2(this[0], this[1]);\r\n    }\r\n\r\n    get x() {\r\n        return this[0];\r\n    }\r\n\r\n    get y() {\r\n        return this[1];\r\n    }\r\n\r\n    get left() {\r\n        return this[0];\r\n    }\r\n\r\n    get right() {\r\n        return this[0];\r\n    }\r\n\r\n    get top() {\r\n        return this[1];\r\n    }\r\n\r\n    get bottom() {\r\n        return this[1];\r\n    }\r\n\r\n    set x(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set y(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    set left(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    set top(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get width() {\r\n        return this[0];\r\n    }\r\n\r\n    set width(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get height() {\r\n        return this[1];\r\n    }\r\n\r\n    set height(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate() {\r\n        return `translate(${this.x}px, ${this.y}px)`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toTranslate3d() {\r\n        return `translate3d(${this.x}px, ${this.y}px, 0)`;\r\n    }\r\n\r\n    clamp(vec4) {\r\n        return new Vec2(\r\n            clamp(this.left, vec4.left, vec4.right),\r\n            clamp(this.top, vec4.top, vec4.bottom)\r\n        );\r\n    }\r\n\r\n    static fromVertex(vertex) {\r\n        if(Array.isArray(vertex)) {\r\n            return new Vec2(vertex[0], vertex[1]);\r\n        } else if(vertex.hasOwnProperty('left')) {\r\n            return new Vec2(vertex.left, vertex.top);\r\n        } else {\r\n            return new Vec2(vertex.x, vertex.y);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Class to store a 4 value vector.\r\n * Provides DOMRect interface.\r\n */\r\nexport default class Vec4 {\r\n    /**\r\n     * r, g, b, a\r\n     * left, top, right, bottom\r\n     *\r\n     * @param left\r\n     * @param top\r\n     * @param right\r\n     * @param bottom\r\n     */\r\n    constructor(left, top, right, bottom) {\r\n        this[0] = left;\r\n        this[1] = top;\r\n        this[2] = right;\r\n        this[3] = bottom;\r\n    }\r\n\r\n    get r() {\r\n        return this[0];\r\n    }\r\n\r\n    set r(value) {\r\n        this[0] = value;\r\n    }\r\n\r\n    get g() {\r\n        return this[1];\r\n    }\r\n\r\n    set g(value) {\r\n        this[1] = value;\r\n    }\r\n\r\n    get b() {\r\n        return this[2];\r\n    }\r\n\r\n    set b(value) {\r\n        this[2] = value;\r\n    }\r\n\r\n    get a() {\r\n        return this[3];\r\n    }\r\n\r\n    set a(value) {\r\n        this[3] = value;\r\n    }\r\n\r\n    set(valueOrVec4) {\r\n        if(typeof valueOrVec4 !== 'object') {\r\n            this[0] = valueOrVec4;\r\n            this[1] = valueOrVec4;\r\n            this[2] = valueOrVec4;\r\n            this[3] = valueOrVec4;\r\n        } else {\r\n            this[0] = valueOrVec4[0];\r\n            this[1] = valueOrVec4[1];\r\n            this[2] = valueOrVec4[2];\r\n            this[3] = valueOrVec4[3];\r\n        }\r\n    }\r\n\r\n    add(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] + valueOrVec4,\r\n                this[1] + valueOrVec4,\r\n                this[2] + valueOrVec4,\r\n                this[3] + valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] + valueOrVec4[0],\r\n                this[1] + valueOrVec4[1],\r\n                this[2] + valueOrVec4[2],\r\n                this[3] + valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    subtract(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] - valueOrVec4,\r\n                this[1] - valueOrVec4,\r\n                this[2] - valueOrVec4,\r\n                this[3] - valueOrVec4\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] - valueOrVec4[0],\r\n                this[1] - valueOrVec4[1],\r\n                this[2] - valueOrVec4[2],\r\n                this[3] - valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    scalar(value) {\r\n        return this._new(\r\n            this[0] * value,\r\n            this[1] * value,\r\n            this[2] * value,\r\n            this[3] * value\r\n        );\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    equals(vec4) {\r\n        return vec4 === this || (vec4[0] === this[0] && vec4[1] === this[1] && vec4[2] === this[2] && vec4[3] === this[3]);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    mod(valueOrVec4) {\r\n        if(typeof valueOrVec4 === 'number') {\r\n            return this._new(\r\n                this[0] % valueOrVec4,\r\n                this[1] % valueOrVec4,\r\n                this[2] % valueOrVec4,\r\n                this[3] % valueOrVec4,\r\n            );\r\n        } else {\r\n            return this._new(\r\n                this[0] % valueOrVec4[0],\r\n                this[1] % valueOrVec4[1],\r\n                this[2] % valueOrVec4[2],\r\n                this[3] % valueOrVec4[3]\r\n            );\r\n        }\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    toRGBA() {\r\n        return `rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.a})`;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    clone() {\r\n        return new this.constructor(this[0], this[1], this[2], this[3]);\r\n    }\r\n\r\n    _new(left, top, right, bottom) {\r\n        return new this.constructor(left, top, right, bottom);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBAObject({r, g, b, a}) {\r\n        return new Vec4(r, g, b, a);\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    static fromRGBA(value) {\r\n        let m = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d+\\.?\\d*)\\)$/.exec(value);\r\n\r\n        if(!m) {\r\n            throw new Error(`Could not parse rgba value ${value}`);\r\n        }\r\n\r\n        return new Vec4(\r\n            parseInt(m[1], 10),\r\n            parseInt(m[2], 10),\r\n            parseInt(m[3], 10),\r\n            parseFloat(m[4]),\r\n        );\r\n    }\r\n}\r\n"],"sourceRoot":""}